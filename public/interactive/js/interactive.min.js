if(console.log("INTERACTIVE BUILD ON: Aug 9 2024 3:33:47 PM"),null==si)var si={};function siLog(){var e=[],o="[]",i=arguments[0],s="‚ùå",a="",l="",t="",n=arguments[1];if(e[0]=arguments[0]||"",e[1]=arguments[1]||"",e[2]=arguments[2]||"",e[3]=arguments[3]||"",e[4]=arguments[4]||"",arguments.length<2){o="[ü§öSSI]";a="üí°SIMPLE",l=e[0],t=""}else"pipwerks"===i?d.apply(this,arguments):c.apply(this,arguments);a.indexOf("API:")>-1?setTimeout((function(){console.groupCollapsed(o+a+l,t),console.trace("Stack trace:"),console.groupEnd()}),1):(console.groupCollapsed(o+a+l+" "+t),console.trace("Stack trace:"),console.groupEnd());var r={label:o,action:a,key:l,value:t};function d(){i="PIP:SCORM","string"==typeof arguments[1]&&(n.indexOf("SCORM.data")>-1&&(s="üíæ",n.indexOf(".get")>-1?(n=n.replace(/SCORM.data.get\(/gi,""),a="‚è™ GET"):n.indexOf(".set")>-1&&(n=n.replace(/SCORM.data.set\(/gi,""),a="SET ‚è©"),n=n.replace(/\)/gi,":"),l=n.split("  value: ")[0]||"",t=n.split("  value: ")[1]||""),(n.indexOf("SCORM.connection")>-1||n.indexOf("connection.initialize")>-1)&&(s="üîå",n.indexOf(".initialize")>-1?(n=n.replace(/SCORM.connection.initialize /gi,""),a="ü§ù INIT",n.indexOf("connection.initialize called.")>-1&&(n=n.replace(/connection.initialize called./gi,""),l="Initializing LMS connection...")):n.indexOf(".terminate")>-1&&(n=n.replace(/SCORM.connection.terminate /gi,""),a="üíÄ TERM"),(n.indexOf("failed")>-1||n.indexOf("aborted")>-1)&&(n=(n=n.replace(/failed/gi,"‚ùå FAILED")).replace(/aborted/gi,"‚ùå ABORTED"))),n.indexOf("API")>-1&&(s="üìñ",n.indexOf(".find")>-1&&(n=(n=n.replace(/SCORM.API.find: /gi,"")).replace(/. Version: /gi,": v"),a="üîç FIND",t="(It will be available for inspection in a few ticks.)"),n.indexOf("API:")>-1&&(a="üîó API",setTimeout((function(){l=pipwerks.SCORM.API.handle}),1)))),""!==a&&(a="("+a+") "),l=l||n,t=isNaN(parseInt(t,10))?t:parseInt(t,10),o="["+s+i+"] "}function c(){i="SSI:"+i,s="ü§ö",a=e[1]||"",l=e[2]||"",t=e[3]||"","string"==typeof arguments[1]&&("SET"===e[1]?a="(SET ‚è©) ":"GET"===e[1]?a="(‚è™ GET) ":"INIT"===e[1]?a="(ü§ù INIT) ":"COMPLETE"===e[1]?a="(üèÜ COMPLETE) ":"INFO"===e[1]?a="(üí° INFO) ":"API"===e[1]&&(a="(üîó API) "),e[2].indexOf("SUCCESS")>-1&&(l="‚úÖ "+e[2]),e[2].indexOf("ERROR")>-1&&(l="‚ùå "+e[2])),t=isNaN(parseInt(t,10))?t:parseInt(t,10),o="["+s+i+"] "}si.log.push(r)}function nextSlide(){Reveal.right()}function prevSlide(){Reveal.left()}function downSlide(){Reveal.down()}function upSlide(){Reveal.up()}function nextHide(){$("#si-next").hide()}function nextShow(){$("#si-next").show()}function backHide(){$("#si-back").hide()}function backShow(){$("#si-back").show()}function jumpToSlide(e){Reveal.slide(e-1)}function jumpToId(e){var o=slides[e].slideNumber;Reveal.slide(o-1)}function lock(e){e.addClass("noEvents"),e.attr("disabled","disabled")}function unlock(e){e.removeClass("noEvents"),e.removeAttr("disabled")}function setPath(e){return!checkWholePath(e)&&lmsConnected&&setScormIncomplete(),saveData.pathSelected=e}function getCompletionStatus(e){if(e&&"@"===e[0])return checkWholePath(e.split("@")[1]);var o=e||globalVar.curSlide,i=slides[o],s=o===globalVar.curSlide,a=saveData.slideCompletion,l=saveData.pathSelected,t=i.completionPath,n=a.mainPath;return t&&(Array.isArray(t)?l&&t.indexOf(l)>=0?n=a[l]:(n=a[t[0]],s&&setPath(t[0])):(n=a[t],s&&setPath(t))),n[o]}function checkWholePath(e){var o=saveData.slideCompletion[e];for(var i in o)if(!o[i])return 0;return 1}function completeSlide(){if(slides[globalVar.curSlide].include){var e=globalVar.curSlide,o=slides[e].completionPath,i=saveData.slideCompletion;o?Array.isArray(o)?o.forEach((function(o,s){i[o][e]=1})):i[o][e]=1:i.mainPath[e]=1}}function customNavStyle(e,o,i){var s,a=$("#si-"+e),l=a.html(),t=slides[globalVar.curSlide];i&&a.html(i),a.addClass(o),t.onExitAction=(s=t.onExitAction,function(){s&&s.apply(this),a.html(l),a.removeClass(o)})}function instaCheatAddon(){}function devMode(){$("body").addClass("dev-mode"),console.log("GOD MODE!"),$("#guidelines").show(),$(document).keyup((function(e){71==e.which&&("none"!=$("#guidelines").css("display")?$("#guidelines").hide():$("#guidelines").show()),e.shiftKey&&37==e.which&&Reveal.left(),e.shiftKey&&39==e.which&&Reveal.right(),e.shiftKey&&38==e.which&&Reveal.up(),e.shiftKey&&40==e.which&&Reveal.down(),74===e.which&&(simpleModalClose(),simpleModalOpen("positive")),75===e.which&&(simpleModalClose(),slides[globalVar.curSlide].modal.negative?simpleModalOpen("negative"):slides[globalVar.curSlide].modal.negative1&&simpleModalOpen("negative1")),76===e.which&&(simpleModalClose(),simpleModalOpen("negativeFinal")),49===e.which&&slides[globalVar.curSlide].modal.hs1&&(simpleModalClose(),simpleModalOpen("hs1")),50===e.which&&slides[globalVar.curSlide].modal.hs2&&(simpleModalClose(),simpleModalOpen("hs2")),51===e.which&&slides[globalVar.curSlide].modal.hs3&&(simpleModalClose(),simpleModalOpen("hs3")),52===e.which&&slides[globalVar.curSlide].modal.hs4&&(simpleModalClose(),simpleModalOpen("hs4")),53===e.which&&slides[globalVar.curSlide].modal.hs5&&(simpleModalClose(),simpleModalOpen("hs5")),54===e.which&&slides[globalVar.curSlide].modal.hs6&&(simpleModalClose(),simpleModalOpen("hs6")),55===e.which&&slides[globalVar.curSlide].modal.hs7&&(simpleModalClose(),simpleModalOpen("hs7")),56===e.which&&slides[globalVar.curSlide].modal.hs8&&(simpleModalClose(),simpleModalOpen("hs8")),57===e.which&&slides[globalVar.curSlide].modal.hs9&&(simpleModalClose(),simpleModalOpen("hs9")),186==e.which&&simpleModalClose()}))}si.log=[],si.formatLog=function(){window.console.table?console.table(si.log):console.log(si.log)},pipwerks.UTILS.trace=function(e){pipwerks.debug.isActive&&window.console&&window.console.log&&siLog("pipwerks",e)},$("#btn-start").on("click",(function(){jumpToSlide(2),siAudio.sfx.click.play()})),$((function(){slides={start:{type:"text",navElements:["clock"],backAction:function(){},onEnterAction:function(){},audio:{},include:!1},intro:{type:"text",navElements:["standard-menu","!menu","home","next"],backAction:prevSlide,onEnterAction:function(){},audio:{},include:!1},v1:{type:"video",navElements:["standard-menu","!progress","!logo","!menu","home"],backAction:prevSlide,nextAction:function(){completeSlide(),nextSlide()},onEnterAction:function(){},videoLoaded:!1},i1:{type:"quiz",navElements:["standard-menu","submit","!menu","home"],nextAction:function(){completeSlide(),nextSlide()},backAction:prevSlide,onEnterAction:function(){},audio:{onEnter:"media/audio/vo/nothing.mp3",positive:"media/audio/vo/nothing.mp3",negative1:"media/audio/vo/nothing.mp3",negative2:"media/audio/vo/nothing.mp3",negativeFinal:"media/audio/vo/nothing.mp3"},quiz:{radio:!1,answers:{"i1-correct1":1,"i1-correct2":1,"i1-correct3":1},audio:{},userAttempts:2},modal:{positive:"i1-positive",negative:"i1-negative",negativeFinal:"i1-negative-final"},hotspot:{clickAnywhere:!0}},i2:{type:"quiz",navElements:["standard-menu","submit","!menu","home"],nextAction:function(){completeSlide(),nextSlide()},backAction:prevSlide,onEnterAction:function(){},audio:{onEnter:"media/audio/vo/nothing.mp3",positive:"media/audio/vo/nothing.mp3",negative1:"media/audio/vo/nothing.mp3",negative2:"media/audio/vo/nothing.mp3",negativeFinal:"media/audio/vo/nothing.mp3"},quiz:{radio:!0,answers:{"i2-correct":1},audio:{},userAttempts:2},modal:{positive:"i2-positive",negative:"i2-negative",negativeFinal:"i2-negative-final"},hotspot:{clickAnywhere:!0}},i3:{type:"dnd",navElements:["standard-menu","submit","reset","!menu","home"],nextAction:function(){completeSlide(),nextSlide()},backAction:prevSlide,onEnterAction:function(){},onExitAction:function(){},dnd:{type:"dnd_1",quiz:{i3_drop:["i3_drag2"]},dropCounter:{i3_drop:1},userAttempts:2,actions:{i3_drag1:{onDrop:{i3_drop:function(){$("#i3_drag2").draggable("option","disabled",!1),$("#i3_drag1").draggable("option","disabled",!0),$("#i3_drag2").removeClass("dropped"),$("#i3_drag1").addClass("dropped")}}},i3_drag2:{onDrop:{i3_drop:function(){$("#i3_drag1").draggable("option","disabled",!1),$("#i3_drag2").draggable("option","disabled",!0),$("#i3_drag1").removeClass("dropped"),$("#i3_drag2").addClass("dropped")}}}}},audio:{onEnter:"media/audio/vo/nothing.mp3",positive:"media/audio/vo/nothing.mp3",negative:"media/audio/vo/nothing.mp3",negativeFinal:"media/audio/vo/nothing.mp3"},modal:{positive:"i3-positive",negative:"i3-negative",negativeFinal:"i3-negative-final"},hotspot:{clickAnywhere:!0}},end:{type:"text",navElements:["exit-slide","home","!exit"],backAction:prevSlide,nextAction:function(){},onEnterAction:function(){setScormCompletion()},audio:{},include:!1}}}));var $siModalCloser=$.parseHTML('<button class="si-modal-closer si-modal-closer__js"><img class="si-img-swap__js inject-me" src="./media/imgs/navigation/classic/close-cross.svg" alt="" /></button>');function disableButtons(e){$(e).addClass("noEvents"),$(e).attr("disabled","disabled")}function enableButtons(e){$(e).removeClass("noEvents"),$(e).removeAttr("disabled")}function threeDNavigationSetup(){$(".rightButton").on("click.threedcarousel",(function(){threeDMove("right")})),$(".leftButton").on("click.threedcarousel",(function(){threeDMove("left")})),threeDButtons=slides[globalVar.curSlide].items=$(".threedb"),slides[globalVar.curSlide].clicks=0,disableButtons(threeDButtons),enableButtons(threeDButtons[0]),cssSetup()}function cssSetup(){var e=$(".threedb"),o=e.length;e.each((function(e,i){$(i).addClass("item"+(e+1)+"of"+o+" "+o+"items")}))}function threeDMove(e){var o,i=slides[globalVar.curSlide].items,s=slides[globalVar.curSlide].clicks,a=$(".threedb").length;switch(e){case"right":o=a-1;break;case"left":o=1}i.each((function(e,l){var t=(e+s)%a+1,n=(e+o+s)%a+1;$(l).removeClass("item"+t+"of"+a),$(l).addClass("item"+n+"of"+a),1===n&&(disableButtons(i),disableButtons(this),enableButtons(l))})),s+=o,slides[globalVar.curSlide].clicks=s}$(".si-modal__js").append($siModalCloser);var siAudio={};function initAudio(){for(key in siAudio.sfx={},siAudio.sfx.click=new Howl({src:["media/audio/sounds/mouse_click.mp3"],volume:.8}),siAudio.sfx.wrong=new Howl({src:["media/audio/sounds/negative.mp3"],volume:.5}),siAudio.sfx.right=new Howl({src:["media/audio/sounds/positive.mp3"],volume:.5}),siAudio.sfx.nothing=new Howl({src:["media/audio/sounds/nothing.mp3"]}),slides)if(siAudio[key]={},slides[key].audio){var e=slides[key].audio;for(track in e)siAudio[key][track]=new Howl({src:e[track]})}else slides[key].audio={}}function videoCheck(){if("video"==slides[globalVar.curSlide].type){globalVar.$curSlide.find("video")[0];var e=globalVar.$curSlide.find("video")[0].id;0==slides[globalVar.curSlide].videoLoaded?(videojs(e,{language:"en",autoplay:!0,controlBar:{volumePanel:{inline:!0}},html5:{nativeTextTracks:!1},plugins:{videoJsResolutionSwitcher:{default:"high",dynamicLabel:!0},hotkeys:{enableNumbers:!1,enableModifiersForNumbers:!1,alwaysCaptureHotkeys:!0},seekButtons:{back:10}}}).ready((function(){if(globalVar.devMode||slides[globalVar.curSlide].videoSeeking||!1!==slides[globalVar.curSlide].videoSeeking&&!1!==globalVar.video.progressControl||videojs(e).controlBar.progressControl.disable(),videojs(e).textTracks().tracks_.length>0){videojs(e).textTrackSettings.setValues({backgroundOpacity:"0.5",edgeStyle:"dropshadow",color:"#FFF",backgroundColor:"#000",textOpacity:"1",windowOpacity:"0",fontFamily:"proportionalSansSerif",windowColor:"#FFF"}),videojs(e).textTrackSettings.updateDisplay()}slides[globalVar.curSlide].videoLoaded=!0,videojs(e).play()})),videojs(e).on("ended",(function(){globalVar.videoSeen[globalVar.curSlide]=!0,slides[globalVar.curSlide].nextAction()})),globalVar.fadeNavigation&&(videojs(e).on("useractive",(function(){$("#si-nav-container").removeClass("vjs-fade-out")})),videojs(e).on("userinactive",(function(){videojs(e).paused()||$("#si-nav-container").addClass("vjs-fade-out")})))):(videojs(e).currentTime(0),videojs(e).play())}else $("section").find("video").length>0&&$("section").find("video")[0].pause()}var unlockerSound=new Howl({src:["media/audio/sounds/nothing.mp3"]});function initPreloader(){window.onload=function(){$("#preloader_text_1").fadeOut("slow",(function(){$("#preloader_text_2").fadeIn("slow")})),$("#Preloader").on("click touch",(function(e){e.preventDefault(),siAudio.sfx.click.play(),hidePreloader()}))}}function hidePreloader(){$("#Preloader").fadeOut("slow",(function(){$("section.present").fadeIn("slow",(function(){if(void 0!==slides[globalVar.curSlide]&&"video"==slides[globalVar.curSlide].type){var e=globalVar.$curSlide.find("video")[0];videojs(e.playerId).play()}}))}))}function initFeedbacks(){var e=$(".si-modal-container__js"),o=$(".si-modal__js"),i=$(".si-modal-closer__js");o.on("click.prevent",(function(e){var o=slides[globalVar.curSlide].hotspot,i=o&&o.clickAnywhere;e.preventDefault(),i||e.stopPropagation()})),e.on("click.close",(function(){modalClosingActions()})),i.each((function(e,o){$(o).on("click.close",(function(){modalClosingActions()}))}))}function answerCorrect(){var e=slides[globalVar.curSlide].modal.positive;$(".si-modal-container__js").addClass("si-modal-container-open"),$("#"+e).addClass("si-current-modal"),globalVar.currentModal=e,globalVar.currentModalType="positive";var o=slides[globalVar.curSlide].type;slides[globalVar.curSlide][o].trys=0,siAudio[globalVar.curSlide].positive?(siAudio.sfx.right.once("end",(function(){siAudio[globalVar.curSlide].positive.play()})),siAudio.sfx.right.play()):siAudio.sfx.right.play(),"function"==typeof slides[globalVar.curSlide].onSuccessAction&&slides[globalVar.curSlide].onSuccessAction()}function answerIncorrect(){var e,o=slides[globalVar.curSlide].type,i=slides[globalVar.curSlide][o].trys,s=slides[globalVar.curSlide][o].userAttempts,a=$(".si-modal-container__js");(0===s?i=0:i++,slides[globalVar.curSlide][o].trys=i,i<s||0===s)?(slides[globalVar.curSlide].modal["negative"+i]?(e=slides[globalVar.curSlide].modal["negative"+i],globalVar.currentModal=e,globalVar.currentModalType="negative"+i):slides[globalVar.curSlide].modal.negative&&(e=slides[globalVar.curSlide].modal.negative,globalVar.currentModal=e,globalVar.currentModalType="negative"),a.addClass("si-modal-container-open"),$("#"+e).addClass("si-current-modal"),siAudio[globalVar.curSlide]["negative"+i]?(siAudio.sfx.wrong.once("end",(function(){siAudio[globalVar.curSlide]["negative"+i].play()})),siAudio.sfx.wrong.play()):siAudio[globalVar.curSlide].negative?(siAudio.sfx.wrong.once("end",(function(){siAudio[globalVar.curSlide].negative.play()})),siAudio.sfx.wrong.play()):siAudio.sfx.wrong.play(),"function"==typeof slides[globalVar.curSlide].onFailureAction1&&slides[globalVar.curSlide].onFailureAction1()):0!==s&&i===s&&(e=slides[globalVar.curSlide].modal.negativeFinal,globalVar.currentModal=e,globalVar.currentModalType="negativeFinal",a.addClass("si-modal-container-open"),$("#"+e).addClass("si-current-modal"),slides[globalVar.curSlide][o].trys=0,siAudio[globalVar.curSlide].negativeFinal?(siAudio.sfx.wrong.once("end",(function(){siAudio[globalVar.curSlide].negativeFinal.play()})),siAudio.sfx.wrong.play()):siAudio.sfx.wrong.play(),"function"==typeof slides[globalVar.curSlide].onFailureAction2&&slides[globalVar.curSlide].onFailureAction2())}function handleAnswer(e){if(Howler.stop(),slides[globalVar.curSlide].modal.noFeedback){var o="function"==typeof slides[globalVar.curSlide].nextAction;e?"function"==typeof slides[globalVar.curSlide].onSuccessAction&&slides[globalVar.curSlide].onSuccessAction():"function"==typeof slides[globalVar.curSlide].onFailureAction1&&slides[globalVar.curSlide].onFailureAction1(),o?slides[globalVar.curSlide].nextAction():nextSlide()}else 1==e?answerCorrect():answerIncorrect()}function closeFeedbackAction(e){var o="function"==typeof slides[globalVar.curSlide].nextAction;switch(e){case"positive":o?slides[globalVar.curSlide].nextAction():nextSlide();break;case"negative":break;case"hotspot":handleHotspotClose();break;case"negativeFinal":o?slides[globalVar.curSlide].nextAction():nextSlide()}}function FBKeyboard(){var e,o=$(".si-current-modal").children().children();e=$(o[0]).hasClass("ie9hack")?1:0,$(o[e]).focus(),$("body").on("keydown.drag",(function(i){switch(i.keyCode){case 9:i.preventDefault(),e<o.length-1?e+=1:e=0,$(o[e]).focus();break;case 27:case 13:$(".si-current-modal").trigger("click"),$(document.activeElement).blur();break;default:return!0}}))}function handleHotspotClose(){var e=slides[globalVar.curSlide].hotspot,o=$("#"+globalVar.curSlide).find(" .hotspot-button__js"),i=globalVar.hotspotIdx,s=o[i],a="#"+globalVar.currentModal,l=e.onModalClose,t=e.indv[i+1]&&e.indv[i+1].onModalClose,n="you haven't created a modal for this hotspot";slides[globalVar.curSlide].hotspot.clickChecker[i+1].seen=!0,l&&l(s,a||n),t&&t(s,a||n);var r,d,c,u,p=!0;for(var f in slides[globalVar.curSlide].hotspot.clickChecker)if(!1===slides[globalVar.curSlide].hotspot.clickChecker[f].seen&&!slides[globalVar.curSlide].hotspot.clickChecker[f].hasCorrectClass){p=!1;break}p&&(e.customCompleteAction?e.customCompleteAction():slides[globalVar.curSlide].nextAction()),!0===e.linear&&(r=o[i+1],d=e.indv[i+2],c=e.onUnlock,u=d&&d.onUnlock,o.removeClass(e.activeClass),unlock($(r)),$(r).addClass(e.activeClass),c&&c(r),u&&u(r))}function modalClosingActions(){switch(Howler.stop(),"hotspot"===slides[globalVar.curSlide].type&&slides[globalVar.curSlide].hotspot.hover?console.log("hover-hotspot, no click audio"):siAudio.sfx.click.play(),slides[globalVar.curSlide].type){case"dnd":resetDnD(slides[globalVar.curSlide].revertTime,globalVar.dndAnswers);break;case"sort":resetSort();break;case"quiz":resetQuiz()}closeFeedbackAction(globalVar.currentModalType),$("body").off("keydown.drag"),$(".si-modal-container__js").removeClass("si-modal-container-open si-hover-hotspot"),$("#"+globalVar.currentModal).removeClass("si-current-modal")}function simpleModalOpen(e){if(slides[globalVar.curSlide].modal[e]){var o=slides[globalVar.curSlide].modal[e];siAudio[globalVar.curSlide][e]&&siAudio[globalVar.curSlide][e].play(),$(".si-modal-container__js").addClass("si-modal-container-open"),$("#"+o).addClass("si-current-modal"),globalVar.currentModal=o}}function simpleModalClose(){Howler.stop(),$(".si-modal-container__js").removeClass("si-modal-container-open"),$("#"+globalVar.currentModal).removeClass("si-current-modal")}unlockerSound.on("unlock",(function(){hidePreloader(),unlockerSound.play()})),unlockerSound.on("play",(function(){hidePreloader()})),unlockerSound.play();var dndResetObject={};function resetDnD(e,o){for(key in globalVar.$curSlide.find(".draggable").each((function(){$(this).draggable("option","disabled",!1),$(this).removeClass("dropped");var o=$(this).data("OGPos");$(this).animate({top:o.top,left:o.left},e),$(this).data("dropId",""),$(this).data("curPos",{top:o.top,left:o.left}),$(this).data("prevPos",{top:o.top,left:o.left})})),globalVar.$curSlide.find(".droppable").each((function(){$(this).data("dragElements",[]),$(this).data("dropCounter",slides[globalVar.curSlide].dnd.dropCounter[this.id])})),o)o[key]=[];return"dnd_2"==slides[globalVar.curSlide].dnd.type&&(globalVar.$curSlide.find(".draggable").fadeIn(),globalVar.$curSlide.find(".draggable").removeClass("shrink")),globalVar.dndAnswers=o,o}function dndFunctions(){var e,o,i,s,a=globalVar.$curSlide.find(".draggable"),l=globalVar.$curSlide.find(".droppable"),t=generateAnswerTemplate();i=slides[globalVar.curSlide].dnd.revertTime?slides[globalVar.curSlide].dnd.revertTime:500,s=!slides[globalVar.curSlide].dnd.snapping||slides[globalVar.curSlide].dnd.snapping,0==slides[globalVar.curSlide].visited?(a.each((function(){var e=dndActions(this.id),o=(parseInt($(this).css("left"))/$(this).parent().width()*100).toString()+"%",a=(parseInt($(this).css("top"))/$(this).parent().height()*100).toString()+"%";$(this).data({OGPos:{top:a,left:o},curPos:{top:a,left:o},prevPos:{top:a,left:o},dropID:"",events:e,revertTime:i,snapping:s}),$(this).attr("tabindex","0"),keyBoardAccess(this)})),l.each((function(){$(this).data({dragElements:[],dropCounter:slides[globalVar.curSlide].dnd.dropCounter[this.id]}),$(this).attr("tabindex","-1")})),dndResetObject[globalVar.curSlide]={time:i,answers:t}):(a.each((function(){$(this).draggable("disable")})),l.each((function(){$(this).droppable("disable")})),resetDnD(i,t)),a.draggable({start:function(o,i){e=i.helper[0],$(e).data("events").onDragStart()},drag:function(o,i){dragging(e)},revert:"invalid",stack:".draggable",revertDuration:i,stop:function(o,i){dragStop(e)}}),l.droppable({accept:".draggable",over:function(i,s){o=i.target,$(e).data("events").onDragOver[o.id]&&$(e).data("events").onDragOver[o.id]()},drop:function(i,s){dropped(o,e)}}),a.each((function(){$(this).draggable("enable")})),l.each((function(){$(this).droppable("enable")}))}function dragging(e){$(e).data("events").onDrag()}function dragStop(e){$(e).data("events").onDragEnd()}function dropped(e,o){var i={top:0,left:0},s=$(o).data("snapping"),a=$(e).data("dragElements").length<$(e).data("dropCounter");for(key in s?(i.top=(parseInt($(e).css("top"))/$(e).parent().height()*100).toString()+"%",i.left=(parseInt($(e).css("left"))/$(e).parent().width()*100).toString()+"%"):(i.top=(parseInt($(o).css("top"))/$(".reveal").height()*100).toString()+"%",i.left=(parseInt($(o).css("left"))/$(".reveal").width()*100).toString()+"%"),$(o).data("events").onDrop[e.id]&&$(o).data("events").onDrop[e.id](),"dnd_2"==slides[globalVar.curSlide].dnd.type?a?dnd2Drop(o,e):revert(o):"dnd_1"==slides[globalVar.curSlide].dnd.type&&(a?dnd1Drop(o,e,i):swap(o,e,i)),slides[globalVar.curSlide].dnd.quiz)globalVar.dndAnswers[key]=$("#"+key).data("dragElements")}function dnd2Drop(e,o){$(o).data("dragElements").push(e.id),$(e).addClass("shrink"),$(e).data("dropped",!0)}function dnd1Drop(e,o,i){var s=$(e).data("dropId");if(s){var a=$("#"+s).data("dragElements").filter((function(o){e.id}));$("#"+s).data("dragElements",a)}updatePos(e,i),$(e).data("dropId",o.id),$(o).data("dragElements").push(e.id),move(e)}function swap(e,o,i){var s,a=$(e).data("dropId"),l=$(o).data("dragElements").pop(),t=$("#"+l),n=[];if(a){var r=$("#"+a).data("dragElements").filter((function(o){e.id}));r.push(l),$("#"+a).data("dragElements",r),s=$(e).data("curPos")}else s=$(t).data("OGPos"),t.removeData("dropId");(n=$("#"+o.id).data("dragElements").filter((function(e){}))).push(e.id),$("#"+o.id).data("dragElements",n),$(e).data("dropId",o.id),$(t).data("dropId",a),updatePos(t,s),updatePos(e,i),move(e),move(t)}function revert(e){var o=$(e).data("revertTime");$(e).animate({top:$(e).data("prevPos").top,left:$(e).data("prevPos").left},o)}function move(e){$(e).animate({top:$(e).data("curPos").top,left:$(e).data("curPos").left},300)}function updatePos(e,o){$(e).data("prevPos",$(e).data("curPos")),$(e).data("curPos",o)}function dndActions(e){var o={onDragStart:function(){},onDrag:function(){},onDragOver:{},onDragEnd:function(){},onDrop:{}};if(slides[globalVar.curSlide].dnd.actions)for(var i in slides[globalVar.curSlide].dnd.actions[e]||(slides[globalVar.curSlide].dnd.actions[e]={}),o)slides[globalVar.curSlide].dnd.actions[e][i]&&(o[i]=slides[globalVar.curSlide].dnd.actions[e][i]);else slides[globalVar.curSlide].dnd.actions={};return slides[globalVar.curSlide].dnd.actions[e]=o,o}function generateAnswerTemplate(){var e,o=0,i="";for(key in globalVar.dndAnswers={},slides[globalVar.curSlide].dnd.quiz){o++;var s='"'+key+'":[]';Object.keys(slides[globalVar.curSlide].dnd.quiz).length>=2&&o!=Object.keys(slides[globalVar.curSlide].dnd.quiz).length&&(s+=","),i+=s}return i="{"+i+"}",e=JSON.parse(i),globalVar.dndAnswers=e,e}function keyBoardAccess(e){var o=function(e){var i=globalVar.$curSlide.find(".droppable"),s=0,a=$(this);32===e.which&&($(i[s]).focus(),a.off("keydown.access"),dragging(a[0]),$("body").on("keydown.drag",(function(e){switch(e.keyCode){case 9:e.preventDefault();break;case 27:a.animate({top:a.data("originalTop"),left:a.data("originalLeft")},revertTime),a.focus(),a.on("keydown.access",o),$("body").off("keydown.drag");break;case 38:s<i.length-1?s+=1:s=0,$(i[s]).focus();break;case 40:s>0?s-=1:s=i.length-1,$(i[s]).focus();break;case 13:dropped(i[s],a[0]),"dnd_2"===slides[globalVar.curSlide].dnd.type?a.blur():a.focus(),a.on("keydown.access",o),$("body").off("keydown.drag");break;default:return!0}})))};$(e).on("keydown.access",o)}function hotspotFunctions(){var e=$("#"+globalVar.curSlide).find(" .hotspot-button__js"),o=$(".si-modal-container__js"),i=[];e.each((function(e,o){console.log("broke"),slides[globalVar.curSlide].modal["hs"+(e+1)]?i.push(slides[globalVar.curSlide].modal["hs"+(e+1)]):console.log("There is not a corresponding modal for hotspot "+(e+1)+". Please disregard if you are not using modals for this slide.")})),console.log(i);var s,a={},l=slides[globalVar.curSlide],t=l.hotspot||{},n=t.correctClass||"correct",r=t.unlockedClass||"unlocked",d=t.completedClass||"completed",c=t.modalStyleClass||"modal-style",u=t.hotspotStyleClass||"hotspot-style",p=t.customCompleteAction||l.nextAction;t.correctClass=n,t.unlockedClass=r,t.selectedClass=s,t.completedClass=d,t.modalStyleClass=c,t.hotspotStyleClass=u,t.clickChecker=a,t.indv=t.indv||{},e.addClass(u),e.removeClass(d),e.removeClass(r),e.each((function(e,o){$(o).addClass(u+"-"+(e+1))})),i.forEach((function(e,o){$("#"+e).addClass(c).addClass(c+"-"+(o+1)),console.log($("#"+e)),t.clickAnywhere&&$("#"+e).addClass("modal-click-anywhere")})),t.correctHotspots&&t.correctHotspots.forEach((function(o){$(e[o-1]).addClass(n)}));for(var f=0;f<e.length;f++)if(a[f+1]=a[f+1]||{},a[f+1].seen=!1,t.correctClass){n=t.correctClass;a[f+1].hasCorrectClass=$(e[f]).hasClass(n)}else a[f+1].hasCorrectClass=!0;if(!t.audioSetup)for(var g in t.audio)t.audio[g]=new Howl({src:[t.audio[g]]}),t.audioSetup=!0;if(t.linear){if(t.quiz)throw'\nHotspot Error:\nyou cannot use "linear" and "quiz" together';if(t.correctHotspots)throw'\nHotspot Error:\nyou cannot use "linear" and "correctHotspots" together';e.removeClass(r),lock(e),unlock($(e[0])),$(e[0]).addClass(r)}else t.quiz&&(s=t.quiz.selectedClass||"selected-hotspot",e.removeClass(s),t.quiz.selectedAnswers=[],t.useModals=!1);function m(l,n){var c,u,f,g,m=t.onClick,h=t.indv[l+1]&&t.indv[l+1].onClick,v=$("#"+i[l]),b=i[l],S=$(n),k="you haven't created a modal for this hotspot";if(m&&m(n,i[l]||k),h&&h(n,i[l]||k),t.audio){for(var C in Howler.stop(),t.audio)t.audio[C].stop();t.audio[l+1]&&t.audio[l+1].play()}t.quiz?("scq"===t.quiz.type&&e.removeClass(s),S.toggleClass(s),t.quiz.selectedAnswers=[],e.each((function(e,o){$(o).hasClass(s)&&t.quiz.selectedAnswers.push(e+1)}))):!1===t.useModals?(a[l+1].seen=!0,$(n).addClass(d),function(e){var o=!0;for(var i in e)if(!1===e[i].seen&&!e[i].hasCorrectClass){o=!1;break}return o}(a)&&p(),!0===t.linear&&(c=e[l+1],u=t.indv[l+2],f=t.onUnlock,g=u&&u.onUnlock,e.removeClass(r),unlock($(c)),$(c).addClass(r),f&&f(c),g&&g(c))):(t.hover&&($(".si-modal-container__js").addClass("si-hover-hotspot"),e.each((function(e,i){S.off("mouseout.hotspot"),S.on("mouseout.hotspot",(function(){$(".si-modal-container__js").removeClass("si-hover-hotspot"),console.log("mouseout"),o.trigger("click")}))}))),console.log(v),$(".si-modal-container__js").addClass("si-modal-container-open"),v.addClass("si-current-modal"),globalVar.currentModal=b,globalVar.currentModalType="hotspot",globalVar.hotspotIdx=l)}e.each((function(e,i){var s=$(i);!0===t.hover?(s.off("mouseover.hotspot"),s.on("mouseover.hotspot",(function(){m(e,i)})),o.addClass("hover-hotspot")):(s.off("click.hotspot"),s.on("click.hotspot",(function(){m(e,i)})))}))}function resetHotspot(){hotspotFunctions()}function initMenu(){for(key in slides)if("menu"===slides[key].type){if(slides[key].menu){if(slides[key].menu.menuClass||(slides[key].menu.menuClass="si-menu__js"),slides[key].menu.linear||(slides[key].menu.linear=!1),!slides[key].menu.navigation){for(var e=slides[key].slideNumber,o=(l=$("#"+key).find("."+slides[key].menu.menuClass)).length,i=[],s=1;s<=o;s++)i.push(e+s);slides[key].menu.navigation=i}if(!slides[key].menu.completionIDs){e=slides[key].slideNumber,o=(l=$("#"+key).find("."+slides[key].menu.menuClass)).length;var a=[];for(s=1;s<=o;s++)for(id in slides)slides[id].slideNumber==(e+s).toString()&&a.push(id);slides[key].menu.completionIDs=a}}else{slides[key].menu={},slides[key].menu.menuClass="si-menu__js",slides[key].menu.linear=!1,slides[key].menu.completionIDs=a;var l=$("#"+key).find("."+slides[key].menu.menuClass);for(e=slides[key].slideNumber,o=l.length,i=[],a=[],s=1;s<=o;s++)for(id in i.push(e+s),slides)slides[id].slideNumber==(e+s).toString()&&a.push(id);slides[key].menu.navigation=i,slides[key].menu.completionIDs=a}if(slides[key].menu.navigation.length)(l=$("#"+key).find("."+slides[key].menu.menuClass)).each((function(e,o){var i=slides[key];$(o).on("click.nav",(function(){jumpToId(i.menu.navigation[e])}))}));if(slides[key].menu.linear)lock(l=$("#"+key).find("."+slides[key].menu.menuClass)),unlock($(l[0])),$(l[0]).addClass("unlocked")}}function menuFunctions(){var e=$("#"+globalVar.curSlide).find("."+slides[globalVar.curSlide].menu.menuClass),o=slides[globalVar.curSlide].menu.linear,i=slides[globalVar.curSlide].menu.completionIDs,s=!0;i.length&&i.forEach((function(i,a){getCompletionStatus(i)?($(e[a]).addClass("completed"),o&&e[a+1]&&($(e).removeClass("unlocked"),unlock($(e[a+1])),$(e[a+1]).addClass("unlocked"))):s=!1})),slides[globalVar.curSlide].menu.allComplete=!!s}function sortFunctions(){!1===slides[globalVar.curSlide].visited&&globalVar.$curSlide.find(".sortable").each((function(e,o){var i=o.id;slides[globalVar.curSlide].sort.sortables[i]?(slides[globalVar.curSlide].sort.sortables[i].options?$(o).sortable(slides[globalVar.curSlide].sort.sortables[i].options):$(o).sortable(),slides[globalVar.curSlide].sort.sortables[i].answer||(slides[globalVar.curSlide].sort.sortables[i].answer=$(o).sortable("toArray"))):$(o).sortable();var s=$("#"+i+"> div"),a=$("#"+i+"> div");s.each((function(e,i){sortKeyboard(i,o)})),$(o).data({elements:s,shuffle:a})}));!0===slides[globalVar.curSlide].sort.randomize&&globalVar.$curSlide.find(".sortable").each((function(e,o){for(var i=$(o).data("elements"),s=[];s.length<i.length;){var a=Math.floor(Math.random()*i.length);s.some((function(e){return e===a}))||s.push(a)}for(var l=0;l<i.length;l++)$(o).data("shuffle")[l]=$(o).data("elements")[s[l]]}));if(slides[globalVar.curSlide].sort.randomizeConnect&&"string"==typeof slides[globalVar.curSlide].sort.randomizeConnect){var e=$("."+slides[globalVar.curSlide].sort.randomizeConnect),o=[],i=[];for(e.each((function(e,i){$(i).find("div").each((function(e,i){o.push(i)}))}));o.length;){var s=Math.floor(Math.random()*o.length);element=o.splice(s,1),i.push(element[0])}for(var a=0;i.length;)e.each((function(e,o){$(o).data("shuffle")[a]=i.shift()})),a++}resetSort()}function resetSort(){globalVar.$curSlide.find(".sortable").each((function(e,o){slides[globalVar.curSlide].sort.randomizeConnect?$(o).append($(o).data("shuffle")):!1===slides[globalVar.curSlide].sort.randomize||void 0===slides[globalVar.curSlide].sort.randomize?$(o).append($(o).data("elements")):$(o).append($(o).data("shuffle"))}))}function sortKeyboard(e,o){var i=$(o).sortable("option","connectWith");$(e).attr("tabindex",0).on("keydown",(function(e){if(87!==e.which&&65!==e.which||$(this).insertBefore($(this).prev()),83!==e.which&&68!==e.which||$(this).insertAfter($(this).next()),81===e.which&&$(this).parent().prepend($(this)),69===e.which&&$(this).parent().append($(this)),i&&88===e.which){var o,s=[];$(i).each((function(i,a){$(a).find(e.target)[0]?o=i:s.push(a)})),s[o]?$(s[o]).append($(this)):$(s[0]).append($(this))}$(this).focus()}))}function resetQuiz(){$("#"+globalVar.curSlide+" .si-quiz__js li").removeClass("si-quiz-selected")}function initQuiz(){for(key in slides)"quiz"===slides[key].type&&("undefined"===slides[key].quiz.radio?slides[key].quiz.radio=!1:slides[key].quiz.radio&&$("#"+key+" .si-quiz__js").addClass("si-radio__js"));var e=$(".si-quiz__js"),o=globalVar.buttonType;e.each((function(e,i){var s=$(i).find("li"),a=$(i).find("div"),l=!!$(i).hasClass("si-radio__js");s.each((function(e,o){$(o).addClass("si-quiz-answer").attr("tabindex","0"),$(o).on("click.quiz",(function(){siAudio.sfx.click.play(),l&&s.removeClass("si-quiz-selected"),$(this).hasClass("si-quiz-selected")?$(this).removeClass("si-quiz-selected"):$(this).addClass("si-quiz-selected")})),$(o).on("keyup.quiz",(function(){13===event.which&&(siAudio.sfx.click.play(),l&&s.removeClass("si-quiz-selected"),$(this).hasClass("si-quiz-selected")?$(this).removeClass("si-quiz-selected"):$(this).addClass("si-quiz-selected"))}))})),a.each((function(e,i){var s=$(i).children().eq(0);l?$(s).attr("src",(function(e,o){return o.replace("mcq","scq")})):$(s).attr("src",(function(e,o){return o.replace("scq","mcq")})),$(i).find("img").attr("src",(function(e,i){return i.replace("classic",o)}))}))}))}function quizFunction(){var e=slides[globalVar.curSlide].quiz.answers,o=$("#"+globalVar.curSlide+" .si-quiz__js li");!slides[globalVar.curSlide].visited&&globalVar.devMode?o.each((function(o,i){e[$(i).attr("id")]&&$(i).css("color","blue")})):resetQuiz()}function formFunctions(){var e=$("#"+globalVar.curSlide+" form");slides[globalVar.curSlide].form.dontGenerate||generateForm(e);var o=!!e.find("input[type=submit]").length;e.addClass("form-style"),e.trigger("reset"),o||e.append('<input type="submit"/>'),e.on("submit.req-form",(function(e){e.preventDefault()}));var i=e.find("input");i.keyup((function(){var e=$(this),o=e.val().length,i=e.attr("maxLength"),s=e.next().hasClass("checkbox");o!=i||s||e.next().focus()})),i.keydown((function(e){8!=e.which&&46!=e.which||""!=$(this).val()||$(this).prev("input").focus()}))}function checkForm(){var e=slides[globalVar.curSlide].form.fields;for(var o in e){var i=e[o],s="",a=$("#"+globalVar.curSlide+" ."+i.class),l=i.answer,t=e[o].caseSensitive,n="";if(i.answer){if("checkbox"===i.type){var r=a.filter(":checked")[0];r&&(n=r.value)}else a.each((function(e,o){n+=o.value}));if(t||(l=l.toLowerCase(),n=n.toLowerCase()),s=n===l,console.log(n,l),console.log(s),!s)return!1}}return!0}function validForm(){var e=!0;return $("#"+globalVar.curSlide).find("input,textarea,select").filter("[required]").each((function(o,i){if(""===i.value)return e=!1,$("#"+globalVar.curSlide+" form").find("input[type=submit]").trigger("click"),!1})),e}function generateForm(e){var o=slides[globalVar.curSlide].form.fields;for(var i in e.html(""),o){var s=o[i],a=globalVar.curSlide.toLowerCase()+"-"+s.class;if(s.label){var l=document.createElement("label");l.htmlFor=a,$(l).text(s.label),e.append(l)}switch(s.type){case"checkbox":s.options.forEach((function(o){var i=o.toLowerCase().split(" ").join("-"),a=document.createElement("input"),l=document.createElement("label");switch(l.htmlFor=s.class+"-"+i,$(l).addClass(s.class+"-container radio-container"),a.setAttribute("type","radio"),a.id=s.class+"-"+i,a.required=!s.optional,a.name=s.class,a.value=o,$(a).addClass(s.class),e.append(l),$(l).append(a),s.style){case"x":var t=document.createElement("span");$(a).addClass("hide-radio"),$(t).addClass(s.class+"-style x-style"),$(l).append(t);break;case"dot":t=document.createElement("span");$(a).addClass("hide-radio"),$(t).addClass(s.class+"-style dot-style"),$(l).append(t)}if(s.labels){var n=document.createElement("span");$(n).addClass(s.class+"-option-label"),$(n).text(o),$(l).append(n)}}));break;case"dropdown":var t=document.createElement("select");t.id=a,t.required=!s.optional,$(t).addClass(s.class+" "+s.class+"-style"),$(t).append('<option value="">Select One</option>'),s.options.forEach((function(e){$(t).append('<option value="'+e+'">'+e+"</option>")})),e.append(t);break;default:if(s.separate)for(var n=0;n<s.answer.length;n++){var r=document.createElement("input");n||(r.id=a),r.setAttribute("type","text"),r.maxLength=1,r.required=!s.optional,$(r).addClass(s.class+" "+s.class+"-style "+s.class+"-"+(n+1)+"-style separated"),e.append(r)}else(r=document.createElement("input")).setAttribute("type","text"),r.required=!s.optional,r.id=a,s.maxLength&&(r.maxLength=s.maxLength),s.placeholder&&(r.placeholder=s.placeholder),$(r).addClass(s.class+" "+s.class+"-style"),e.append(r)}}}var curChapter,chapterNavigationSlides=["V1","I1","I2","I3"],chapterCompletionSlides=["V1","I1","I2","I3"];function initSideMenu(){var e=$("#si-side-menu"),o=$("#si-side-menu-container"),i=$(".si-menu-navigation").find("button");e.on("click.stop",(function(e){e.stopPropagation()})),o.on("click.side",(function(e){closeSideMenu()})),i.each((function(e,o){$(o).on("click.side",(function(){jumpToId(chapterNavigationSlides[e]),closeSideMenu()}))}))}function openSideMenu(){var e=$("#si-side-menu");$("#si-side-menu-container").addClass("menu-open"),e.addClass("menu-open");var o=slides[globalVar.curSlide].type;slides[globalVar.curSlide].videoLoaded&&"video"==o&&videojs(globalVar.$curSlide.find("video")[0].id).pause(),handleSideButtons()}function closeSideMenu(){var e=$("#si-side-menu");$("#si-side-menu-container").removeClass("menu-open"),e.removeClass("menu-open");var o=slides[globalVar.curSlide].type;slides[globalVar.curSlide].videoLoaded&&"video"==o&&videojs(globalVar.$curSlide.find("video")[0].id).paused()&&videojs(globalVar.$curSlide.find("video")[0].id).play()}function handleSideButtons(){var e=$(".si-menu-navigation").find("button"),o=$(".si-menu-checks__js");lock($(e)),unlock($(e[0])),e.each((function(i,s){getCompletionStatus(chapterCompletionSlides[i])&&($(o[i]).addClass("completed"),e[i+1]&&unlock($(e[i+1])))}))}function initNavigation(){var e=$(".si-nav-style__js"),o=$(".si-img-swap__js"),i=globalVar.buttonType;o.each((function(e,o){$(o).attr("src",(function(e,o){return o.replace("classic",i)}))})),e.each((function(e,o){$(o).addClass("si-nav-style-"+i)})),attachNavEventListeners()}function showNavElements(){var e=$(".si-nav__js"),o="si-click-icon si-drag-up-icon si-drag-down-icon si-drag-left-icon si-drag-right-icon",i=$("#si-click-icon");$(e).hide(),i.removeClass(o),void 0===slides[globalVar.curSlide].navElements&&(slides[globalVar.curSlide].navElements=[]),slides[globalVar.curSlide].navElements.forEach((function(e){switch(e){case"start-slide":$("#si-clock").show(),$("#si-start").show();break;case"standard-home":$("#si-logo").show(),$("#si-progress").show(),$("#si-home").show(),$("#si-back").show(),getCompletionStatus()&&$("#si-next").show();break;case"standard-menu":$("#si-logo").show(),$("#si-progress").show(),$("#si-menu").show(),$("#si-back").show(),getCompletionStatus()&&$("#si-next").show();break;case"exit-slide":$("#si-progress").show(),$("#si-exit").show(),$("#si-replay").show();break;case"click-icon":case"drag-up-icon":case"drag-down-icon":case"drag-left-icon":case"drag-right-icon":i.show().removeClass(o).addClass("si-"+e),hideClickIcon();break;default:"!"===e[0]?$("#si-"+e.split("!")[1]).hide():$("#si-"+e).show()}}))}function attachNavEventListeners(){$("#si-home").on("click touch",(function(){siAudio.sfx.click.play(),jumpToSlide(globalVar.homeSlide)})),$("#si-menu").on("click touch",(function(){siAudio.sfx.click.play(),openSideMenu()})),$("#si-full").on("click touch",(function(){siAudio.sfx.click.play(),toggleFullscreen()})),$("#si-back").on("click touch",(function(){siAudio.sfx.click.play(),setTimeout((function(){slides[globalVar.curSlide].backAction?slides[globalVar.curSlide].backAction():prevSlide()}),100)})),$("#si-next").on("click touch",(function(){siAudio.sfx.click.play(),setTimeout((function(){slides[globalVar.curSlide].nextAction?slides[globalVar.curSlide].nextAction():nextSlide()}),100)})),$("#si-replay").on("click touch",(function(){siAudio.sfx.click.play(),jumpToSlide(0)})),$("#si-exit").on("click touch",(function(){siAudio.sfx.click.play(),window.close()})),$("#si-start").on("click touch",(function(){siAudio.sfx.click.play(),slides[globalVar.curSlide].nextAction?slides[globalVar.curSlide].nextAction():nextSlide()})),$("#si-submit").on("click touch",(function(){var e=slides[globalVar.curSlide];("form"!==e.type||validForm())&&(siAudio.sfx.click.play(),handleAnswer(checkQuestion(e.type)))})),$("#si-reset").on("click touch",(function(){switch(siAudio.sfx.click.play(),slides[globalVar.curSlide].type){case"dnd":var e=dndResetObject[globalVar.curSlide];resetDnD(e.time,e.answers);break;case"sort":resetSort();break;case"quiz":resetQuiz();break;case"hotspot":resetHotspot();default:slides[globalVar.curSlide].customReset&&slides[globalVar.curSlide].customReset()}})),$("#si-custom-submit").on("click touch",(function(){("form"!==slides[globalVar.curSlide].type||validForm())&&(siAudio.sfx.click.play(),slides[globalVar.curSlide].customSubmit&&slides[globalVar.curSlide].customSubmit())})),$(".si-menu-closer").on("click touch",(function(){closeSideMenu()}))}function hideClickIcon(){$("#"+globalVar.curSlide).off("mousedown.icon"),$("#"+globalVar.curSlide).on("mousedown.icon",(function(){$("#si-click-icon").hide(),$("#"+globalVar.curSlide).off("mousedown.icon")}))}function toggleFullscreen(){var e,o=document.documentElement;document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement?(e=document.exitFullscreen||document.webkitExitFullscreen||document.webkitExitFullScreen||document.mozCancelFullScreen||document.msExitFullscreen)&&e.apply(document):(e=o.requestFullscreen||o.webkitRequestFullscreen||o.webkitRequestFullScreen||o.mozRequestFullScreen||o.msRequestFullscreen)&&e.apply(o)}var bookmarkedSlide,saveData={},chartProgressRecorded={};function firstTimeSetup(){Object.keys(slides).forEach((function(e,o){var i=slides[e].type;if(void 0===slides[e].slideNumber&&(slides[e].slideNumber=o+1),void 0!==slides[e][i]?(void 0===slides[e][i].userAttempts&&(slides[e][i].userAttempts=0),void 0===slides[e][i].trys&&(slides[e][i].trys=0)):slides[e][i]={userAttempts:0,trys:0},void 0===slides[e].include&&(slides[e].include=!0),slides[e].include){var s=slides[e].completionPath;saveData.slideCompletion||(saveData.slideCompletion={});var a=saveData.slideCompletion;s?Array.isArray(s)?s.forEach((function(o,i){a[o]||(a[o]={}),a[o][e]||(a[o][e]=0)})):(a[s]||(a[s]={}),a[s][e]||(a[s][e]=0)):(a.mainPath||(a.mainPath={}),a.mainPath[e]||(a.mainPath[e]=0))}}))}function documentSetup(){for(key in initPreloader(),globalVar.curSlide=$("section.present")[0].id,firstTimeSetup(),initAudio(),$("aside").remove(),initNavigation(),initSideMenu(),slides)"video"==slides[key].type&&(globalVar.videoSeen[key]=!1);globalVar.devMode&&devMode(),0!=$("#si-progress-meter").length&&chartInitiate(),initFeedbacks(),initQuiz(),initMenu(),functionCalls(),randomizeQuestionSlides(),Reveal.addEventListener("slidechanged",(function(e){$("#si-nav-container").removeClass("vjs-fade-out"),globalVar.curSlide=e.currentSlide.id,globalVar.$curSlide=$(e.currentSlide),closeSideMenu(),slides[e.previousSlide.id]&&"function"==typeof slides[e.previousSlide.id].onExitAction&&slides[e.previousSlide.id].onExitAction(),functionCalls()}));var e=$(".slides").width()/globalVar.fontSizeFactor;$("html").css("font-size",e),$(window).resize((function(){setTimeout((function(){var e=$(".slides").width()/globalVar.fontSizeFactor;$("html").css("font-size",e)}),1)})),$("img").on("dragstart",(function(e){e.preventDefault()}))}function actionsOnEverySlideEnter(){}function onEnterAction(e){void 0===slides[e].visited&&(slides[e].visited=!1),$(document.activeElement).blur(),siAudio[globalVar.curSlide].onEnter?siAudio.sfx.click.playing()?siAudio.sfx.click.once("end",(function(){Howler.stop(),siAudio[globalVar.curSlide].onEnter.play()})):(Howler.stop(),siAudio[globalVar.curSlide].onEnter.play()):siAudio.sfx.click.playing()?siAudio.sfx.click.once("end",(function(){Howler.stop()})):Howler.stop(),setTimeout((function(){void 0!==slides[e].onEnterAction&&slides[e].onEnterAction(),slides[e].visited=!0}),10),lmsConnected&&"start"!==e&&setTimeout((function(){saveLMS()}),1e3),useLocal&&"start"!==e&&saveProgressLocally()}function functionCalls(){switch($("body").off(),globalVar.$curSlide=$(".slides > section.present"),globalVar.curSlide=$(".slides > .present")[0].id,onEnterAction(globalVar.curSlide),actionsOnEverySlideEnter(),showNavElements(),elementsFadingOnSlide(),slides[globalVar.curSlide].type){case"menu":menuFunctions();break;case"dnd":dndFunctions();break;case"sort":sortFunctions();break;case"hotspot":hotspotFunctions();break;case"form":formFunctions();break;case"quiz":quizFunction();break;case"video":videoCheck()}0!=$("#si-progress-meter").length&&chartProgress(),setTimeout((function(){$("section.future").css("display","none"),$("section.past").css("display","none")}),55)}function checkQuestion(e){var o=!0;switch(e){case"quiz":var i=slides[globalVar.curSlide].quiz.answers,s={},a=$("#"+globalVar.curSlide+" .si-quiz-answer");for(answer in a.each((function(e,o){var a=$(o).attr("id");$(o).hasClass("si-quiz-selected")?s[a]=1:s[a]=0,i[a]||(i[a]=0)})),s)if(i[answer]!==s[answer])return o=!1;if(!o)return o;break;case"hotspot":var l=slides[globalVar.curSlide].hotspot.quiz;if(!l)throw'\nHotspot Error:\nyou have to turn on the "quiz" settings to use hotspots this way';if(!l.answers.length)throw"\nHotspot Error:\nquiz answers must be in an array";if("scq"===l.type&&l.answers.length>1)throw'\nHotspot Error:\nfor type "scq" you must have only one answer';i=l.answers,s=l.selectedAnswers;o=JSON.stringify(s)===JSON.stringify(i);break;case"form":if(!(o=checkForm()))return;break;case"dnd":var t=globalVar.dndAnswers;for(key in slides[globalVar.curSlide].dnd.quiz){var n=slides[globalVar.curSlide].dnd.quiz[key].sort(),r=t[key].sort();if(slides[globalVar.curSlide].dnd.multipleAnswers){var d=!0;if((0===r.length||n.indexOf(r[0])<0)&&(d=!1),!d)return o=!1}else{if(n.length!==r.length)return o=!1;n.forEach((function(e,i){if(r[i]!==e)return o=!1}))}if(!1===o)return o}break;case"sort":o=!0;var c=Object.keys(slides[globalVar.curSlide][e].sortables),u=[];if(c.forEach((function(o){u.push(slides[globalVar.curSlide][e].sortables[o].answer)})),c.length!==u.length)return o=!1;c.forEach((function(i,s){var a=$("#"+i).sortable("toArray");if(a.length!==u[s].length)return o=!1;!1===slides[globalVar.curSlide][e].unordered||void 0===slides[globalVar.curSlide][e].unordered?a.forEach((function(e,i){if(e!==u[s][i])return o=!1})):a.forEach((function(e){if(!u[s].some((function(o){return o===e})))return o=!1}))}));break;default:o=!1}return o}function jumpToShuffledSlide(e){var o=globalVar.shuffledSlides[e].pointer;o<globalVar.shuffledSlides[e].slides.length&&(null==o&&(o=0),jumpToSlide(globalVar.shuffledSlides[e].slides[o]),o++,globalVar.shuffledSlides[e].pointer=o)}function resetShuffledSlide(e){globalVar.shuffledSlides[e].pointer=null}function randomizeQuestionSlides(){if(1==globalVar.randomizeSlides.useRandomize){var e=globalVar.randomizeSlides.slides,o=[];if(0!=Object.keys(e))for(key in e)if(o=[],e[key][0]<e[key][1]){for(var i=e[key][0];i<=e[key][1];i++)o.push(i);shuffle(o),o.push(e[key][2]),globalVar.shuffledSlides[key]={slides:o,pointer:null}}}}function elementsFadingOnSlide(){if(0!=$("#"+globalVar.curSlide+" [data-fadeInOrder]").length){var e=[];$("#"+globalVar.curSlide+" [data-fadeInOrder]").each((function(){$(this).css("opacity","0"),$(this).css("display","none"),$(this).hide();var o=[],i=$(this).data("fadeinorder");o[0]=i,o[1]=$(this)[0],e.push(o)})),e.sort(sortArrayMatrixFunction);for(var o=0;o<e.length;o++)elementsFadeIn(e[o][1],e[o][0])}if(0!=$("#"+globalVar.curSlide+" [data-fadeoutorder]").length){e=[];$("#"+globalVar.curSlide+" [data-fadeoutorder]").each((function(){$(this).css("opacity","1"),$(this).css("display","block"),$(this).show();var o=[],i=$(this).data("fadeoutorder");o[0]=i,o[1]=$(this)[0],e.push(o)})),e.sort(sortArrayMatrixFunction);for(o=0;o<e.length;o++)elementsFadeOut(e[o][1],e[o][0])}}function elementsFadeIn(e,o){setTimeout((function(){$(e).fadeTo("fast",1)}),o)}function elementsFadeOut(e,o){setTimeout((function(){$(e).fadeTo("fast",0)}),o)}function sortArrayMatrixFunction(e,o){return e[0]===o[0]?0:e[0]<o[0]?-1:1}function shuffle(e){for(var o,i,s=e.length;0!==s;)i=Math.floor(Math.random()*s),o=e[s-=1],e[s]=e[i],e[i]=o;return e}$(document).ready((function(){initCourse(),documentSetup(),chartProgress(),globalVar.devMode||!lmsConnected&&!useLocal||jumpToSlide(bookmarkedSlide);var e=document.querySelectorAll("img.inject-me");SVGInjector(e)})),Array.prototype.equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var o=0,i=this.length;o<i;o++)if(this[o]instanceof Array&&e[o]instanceof Array){if(!this[o].equals(e[o]))return!1}else if(this[o]!=e[o])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1});var scorm=pipwerks.SCORM,lmsConnected=!1,unloaded=!1,useLocal=!1,courseURL=btoa(window.location.href.toString()),progressURL="progress"+courseURL,bookmarkURL="bookmark"+courseURL;function initCourse(){globalVar.scormSettings.useScorm?"aicc"!==globalVar.scormSettings.standard.toLowerCase()?connectToSCORMAPI():connectToAICCAPI():siLog("SCORM","INFO","SCORM is disabled.")}function connectToAICCAPI(){var e=window.parent;"function"==typeof e.SetReachedEnd&&"function"==typeof e.CommitData?(siLog("AICC","API","SUCCESS: AICC API found!"),siLog("AICC","INIT","SUCCESS: Course is now connected to the LMS!")):(siLog("AICC","API","ERROR: AICC API not found!"),siLog("AICC","INIT","ERROR: Course could not connect to the LMS!"))}function connectToSCORMAPI(){var e,o;if(useLocal&&storageAvailable("localStorage")&&(e=localStorage.getItem(bookmarkURL),o=JSON.parse(localStorage.getItem(progressURL))),lmsConnected=scorm.init()){siLog("SCORM","INIT","SUCCESS: Course is now connected with the LMS!");var i,s,a=scorm.get("cmi.suspend_data");"2004"===scorm.version?(scorm.get("cmi.completion_status"),scorm.get("cmi.learner_name"),i=scorm.get("cmi.location")):(scorm.get("cmi.core.lesson_status"),scorm.get("cmi.core.student_name"),i=scorm.get("cmi.core.lesson_location")),a&&"string"==typeof a?(s=JSON.parse(a),saveData=s):o&&(saveData=o),bookmarkedSlide=i||(e||1),window.addEventListener("unload",unloadHandler),window.addEventListener("beforeunload",unloadHandler)}else siLog("SCORM","INIT","ERROR: Course could not connect with the LMS"),o&&(saveData=o),bookmarkedSlide=e||1}function setScormCompletion(){var e=!1;if(globalVar.scormSettings.useScorm)if("aicc"===globalVar.scormSettings.standard){var o=window.parent;"function"==typeof o.SetReachedEnd&&"function"==typeof o.CommitData?siLog("AICC","COMPLETE",(e=o.SetReachedEnd()&&o.CommitData())?"SUCCESS: Course was successfully set to complete!":"ERROR: Course could not be set to complete!"):siLog("AICC","COMPLETE","ERROR: Course is not connected to the LMS")}else lmsConnected?("2004"===scorm.version?(e=scorm.set("cmi.completion_status","completed"),scorm.set("cmi.success_status","passed"),scorm.set("cmi.score.raw","100"),scorm.set("cmi.score.scaled","1")):(e=scorm.set("cmi.core.lesson_status","completed"),scorm.set("cmi.core.score.raw","100")),e?(scorm.save(),siLog("SCORM","COMPLETE","SUCCESS: Course was successfully set to complete!")):siLog("SCORM","COMPLETE","ERROR: Course could not be set to complete!")):siLog("SCORM","COMPLETE","ERROR: Course is not connected to the LMS")}function setScormIncomplete(){var e;lmsConnected?("2004"===scorm.version?(e=scorm.set("cmi.completion_status","completed"),scorm.set("cmi.success_status","failed"),scorm.set("cmi.score.raw","0"),scorm.set("cmi.score.scaled","1")):(e=scorm.set("cmi.core.lesson_status","incomplete"),scorm.set("cmi.core.score.raw","0")),e?(scorm.save(),siLog("SCORM","INCOMPLETE","SUCCESS: Course was successfully set to incomplete!")):siLog("SCORM","INCOMPLETE","ERROR: Course could not be set to incomplete!")):siLog("SCORM","INCOMPLETE","ERROR: Course is not connected to the LMS")}function unloadHandler(){lmsConnected&&!unloaded&&(saveLMS(),scorm.save(),scorm.quit(),unloaded=!0)}function saveLMS(){saveCourseProgress()&&saveBookmark()?scorm.save():siLog("SCORM","Failed to Save")}function saveCourseProgress(){var e,o=JSON.stringify(saveData);return lmsConnected&&(e=scorm.set("cmi.suspend_data",o)),e}function saveBookmark(){var e;return bookmarkedSlide=slides[globalVar.curSlide].slideNumber||"0",lmsConnected&&(e="2004"===scorm.version?scorm.set("cmi.location",bookmarkedSlide):scorm.set("cmi.core.lesson_location",bookmarkedSlide)),e}function saveProgressLocally(){bookmarkedSlide=slides[globalVar.curSlide].slideNumber||"0";var e=JSON.stringify(saveData);storageAvailable("localStorage")&&(localStorage.setItem(progressURL,e),localStorage.setItem(bookmarkURL,bookmarkedSlide))}function storageAvailable(e){var o;try{o=window[e];var i="__storage_test__";return o.setItem(i,i),o.removeItem(i),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&o&&0!==o.length}}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2pzL19qcy9sb2dnZXIuanMiLCJpbnRlcmFjdGl2ZS5qcyIsIi4uL2pzL19qcy9oZWxwZXIuanMiLCIuLi9qcy9kYXRhLmpzIiwiLi4vanMvX2pzL2NvbXBvbmVudHMvZG9tLW1hbmlwdWxhdGlvbi5qcyIsIi4uL2pzL19qcy9jb21wb25lbnRzL2Nhcm91c2VsLmpzIiwiLi4vanMvX2pzL2NvbXBvbmVudHMvYXVkaW8uanMiLCIuLi9qcy9fanMvY29tcG9uZW50cy92aWRlby5qcyIsIi4uL2pzL19qcy9jb21wb25lbnRzL3ByZWxvYWRlci5qcyIsIi4uL2pzL19qcy9jb21wb25lbnRzL2ZlZWRiYWNrLmpzIiwiLi4vanMvX2pzL2NvbXBvbmVudHMvZG5kLmpzIiwiLi4vanMvX2pzL2NvbXBvbmVudHMvaG90c3BvdC5qcyIsIi4uL2pzL19qcy9jb21wb25lbnRzL21lbnUuanMiLCIuLi9qcy9fanMvY29tcG9uZW50cy9zb3J0YWJsZS5qcyIsIi4uL2pzL19qcy9jb21wb25lbnRzL3F1aXouanMiLCIuLi9qcy9fanMvY29tcG9uZW50cy9mb3JtLmpzIiwiLi4vanMvX2pzL2NvbXBvbmVudHMvc2lkZV9tZW51LmpzIiwiLi4vanMvX2pzL2ludGVyYWN0aXZlLmpzIiwiLi4vanMvX2pzL2NvbXBvbmVudHMvbmF2aWdhdGlvbi5qcyIsIi4uL2pzL19qcy9pbnRlcmFjdGl2ZS5zY29ybS5qcyJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwic2kiLCJzaUxvZyIsImFyZ3MiLCJsYWJlbCIsInRhZyIsImFyZ3VtZW50cyIsImVtb2ppIiwiYWN0aW9uIiwia2V5IiwidmFsdWUiLCJtYWluTWVzc2FnZSIsImxlbmd0aCIsInBpcHdlcmtzUGFyc2VyIiwiYXBwbHkiLCJ0aGlzIiwiaW50ZXJhY3RpdmVQYXJzZXIiLCJpbmRleE9mIiwic2V0VGltZW91dCIsImdyb3VwQ29sbGFwc2VkIiwidHJhY2UiLCJncm91cEVuZCIsImxvZ0VudHJ5IiwicmVwbGFjZSIsInNwbGl0IiwicGlwd2Vya3MiLCJTQ09STSIsIkFQSSIsImhhbmRsZSIsImlzTmFOIiwicGFyc2VJbnQiLCJwdXNoIiwibmV4dFNsaWRlIiwiUmV2ZWFsIiwicmlnaHQiLCJwcmV2U2xpZGUiLCJsZWZ0IiwiZG93blNsaWRlIiwiZG93biIsInVwU2xpZGUiLCJ1cCIsIm5leHRIaWRlIiwiJCIsImhpZGUiLCJuZXh0U2hvdyIsInNob3ciLCJiYWNrSGlkZSIsImJhY2tTaG93IiwianVtcFRvU2xpZGUiLCJuIiwic2xpZGUiLCJqdW1wVG9JZCIsImlkIiwibnVtIiwic2xpZGVzIiwic2xpZGVOdW1iZXIiLCJsb2NrIiwiJGVsZW1lbnQiLCJhZGRDbGFzcyIsImF0dHIiLCJ1bmxvY2siLCJyZW1vdmVDbGFzcyIsInJlbW92ZUF0dHIiLCJzZXRQYXRoIiwicGF0aE5hbWUiLCJjaGVja1dob2xlUGF0aCIsImxtc0Nvbm5lY3RlZCIsInNldFNjb3JtSW5jb21wbGV0ZSIsInNhdmVEYXRhIiwicGF0aFNlbGVjdGVkIiwiZ2V0Q29tcGxldGlvblN0YXR1cyIsImlucHV0Iiwic2xpZGVJRCIsImdsb2JhbFZhciIsImN1clNsaWRlIiwic2xpZGVPYmoiLCJvbkN1clNsaWRlIiwic2xpZGVDb21wbGV0aW9uIiwic3BlY2lmaWVkUGF0aCIsImNvbXBsZXRpb25QYXRoIiwicGF0aE9iaiIsIm1haW5QYXRoIiwiQXJyYXkiLCJpc0FycmF5IiwicGF0aCIsImNvbXBsZXRlU2xpZGUiLCJpbmNsdWRlIiwiZm9yRWFjaCIsImlkeCIsImN1c3RvbU5hdlN0eWxlIiwibmF2RWxlbSIsInN0eWxlQ2xhc3MiLCJodG1sIiwib3JpZ2luYWxPbkV4aXQiLCJlbGVtIiwiaW5pdGlhbEhUTUwiLCJvbkV4aXRBY3Rpb24iLCJpbnN0YUNoZWF0QWRkb24iLCJkZXZNb2RlIiwiZG9jdW1lbnQiLCJrZXl1cCIsImUiLCJ3aGljaCIsImNzcyIsInNoaWZ0S2V5Iiwic2ltcGxlTW9kYWxDbG9zZSIsInNpbXBsZU1vZGFsT3BlbiIsIm1vZGFsIiwibmVnYXRpdmUiLCJuZWdhdGl2ZTEiLCJoczEiLCJoczIiLCJoczMiLCJoczQiLCJoczUiLCJoczYiLCJoczciLCJoczgiLCJoczkiLCJmb3JtYXRMb2ciLCJ3aW5kb3ciLCJ0YWJsZSIsIlVUSUxTIiwibXNnIiwiZGVidWciLCJpc0FjdGl2ZSIsIm9uIiwic2lBdWRpbyIsInNmeCIsImNsaWNrIiwicGxheSIsInN0YXJ0IiwidHlwZSIsIm5hdkVsZW1lbnRzIiwiYmFja0FjdGlvbiIsIm9uRW50ZXJBY3Rpb24iLCJhdWRpbyIsImludHJvIiwidjEiLCJuZXh0QWN0aW9uIiwidmlkZW9Mb2FkZWQiLCJpMSIsIm9uRW50ZXIiLCJwb3NpdGl2ZSIsIm5lZ2F0aXZlMiIsIm5lZ2F0aXZlRmluYWwiLCJxdWl6IiwicmFkaW8iLCJhbnN3ZXJzIiwiaTEtY29ycmVjdDEiLCJpMS1jb3JyZWN0MiIsImkxLWNvcnJlY3QzIiwidXNlckF0dGVtcHRzIiwiaG90c3BvdCIsImNsaWNrQW55d2hlcmUiLCJpMiIsImkyLWNvcnJlY3QiLCJpMyIsImRuZCIsImkzX2Ryb3AiLCJkcm9wQ291bnRlciIsImFjdGlvbnMiLCJpM19kcmFnMSIsIm9uRHJvcCIsImRyYWdnYWJsZSIsImkzX2RyYWcyIiwiZW5kIiwic2V0U2Nvcm1Db21wbGV0aW9uIiwiJHNpTW9kYWxDbG9zZXIiLCJwYXJzZUhUTUwiLCJkaXNhYmxlQnV0dG9ucyIsInNlbGVjdG9yIiwiZW5hYmxlQnV0dG9ucyIsInRocmVlRE5hdmlnYXRpb25TZXR1cCIsInRocmVlRE1vdmUiLCJ0aHJlZURCdXR0b25zIiwiaXRlbXMiLCJjbGlja3MiLCJjc3NTZXR1cCIsInRocmVlREl0ZW1zIiwibnVtYmVyT2ZJdGVtcyIsImVhY2giLCJpdGVtIiwicmlnaHRPckxlZnQiLCJ0dXJuIiwiYnV0dG9uIiwiY3VycmVudFBvc2l0aW9uIiwibmV4dFBvc2l0aW9uIiwiYXBwZW5kIiwiaW5pdEF1ZGlvIiwiSG93bCIsInNyYyIsInZvbHVtZSIsIndyb25nIiwibm90aGluZyIsInRyYWNrIiwidmlkZW9DaGVjayIsIiRjdXJTbGlkZSIsImZpbmQiLCJ2aWRlb0lEIiwidmlkZW9qcyIsImxhbmd1YWdlIiwiYXV0b3BsYXkiLCJjb250cm9sQmFyIiwidm9sdW1lUGFuZWwiLCJpbmxpbmUiLCJodG1sNSIsIm5hdGl2ZVRleHRUcmFja3MiLCJwbHVnaW5zIiwidmlkZW9Kc1Jlc29sdXRpb25Td2l0Y2hlciIsImRlZmF1bHQiLCJkeW5hbWljTGFiZWwiLCJob3RrZXlzIiwiZW5hYmxlTnVtYmVycyIsImVuYWJsZU1vZGlmaWVyc0Zvck51bWJlcnMiLCJhbHdheXNDYXB0dXJlSG90a2V5cyIsInNlZWtCdXR0b25zIiwiYmFjayIsInJlYWR5IiwidmlkZW9TZWVraW5nIiwidmlkZW8iLCJwcm9ncmVzc0NvbnRyb2wiLCJkaXNhYmxlIiwidGV4dFRyYWNrcyIsInRyYWNrc18iLCJ0ZXh0VHJhY2tTZXR0aW5ncyIsInNldFZhbHVlcyIsImJhY2tncm91bmRPcGFjaXR5IiwiZWRnZVN0eWxlIiwiY29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ0ZXh0T3BhY2l0eSIsIndpbmRvd09wYWNpdHkiLCJmb250RmFtaWx5Iiwid2luZG93Q29sb3IiLCJ1cGRhdGVEaXNwbGF5IiwidmlkZW9TZWVuIiwiZmFkZU5hdmlnYXRpb24iLCJwYXVzZWQiLCJjdXJyZW50VGltZSIsInBhdXNlIiwidW5sb2NrZXJTb3VuZCIsImluaXRQcmVsb2FkZXIiLCJvbmxvYWQiLCJmYWRlT3V0IiwiZmFkZUluIiwicHJldmVudERlZmF1bHQiLCJoaWRlUHJlbG9hZGVyIiwidW5kZWZpbmVkIiwicGxheWVySWQiLCJpbml0RmVlZGJhY2tzIiwibW9kYWxDb250YWluZXIiLCJtb2RhbHMiLCJtb2RhbENsb3NlcnMiLCJjbGlja0FueXdoZXJlSG90c3BvdCIsInN0b3BQcm9wYWdhdGlvbiIsIm1vZGFsQ2xvc2luZ0FjdGlvbnMiLCJjbG9zZXIiLCJhbnN3ZXJDb3JyZWN0IiwiY3VycmVudE1vZGFsIiwiY3VycmVudE1vZGFsVHlwZSIsInRyeXMiLCJvbmNlIiwib25TdWNjZXNzQWN0aW9uIiwiYW5zd2VySW5jb3JyZWN0IiwiYXR0ZW1wdHMiLCJvbkZhaWx1cmVBY3Rpb24xIiwib25GYWlsdXJlQWN0aW9uMiIsImhhbmRsZUFuc3dlciIsImJvbCIsIkhvd2xlciIsInN0b3AiLCJub0ZlZWRiYWNrIiwiaXNOZXh0QWN0aW9uIiwiY2xvc2VGZWVkYmFja0FjdGlvbiIsImhhbmRsZUhvdHNwb3RDbG9zZSIsIkZCS2V5Ym9hcmQiLCJGQml0ZW1zIiwiY2hpbGRyZW4iLCJoYXNDbGFzcyIsImZvY3VzIiwiZXZlbnQiLCJrZXlDb2RlIiwidHJpZ2dlciIsImFjdGl2ZUVsZW1lbnQiLCJibHVyIiwic2V0dGluZ3MiLCIkaG90c3BvdHMiLCJpIiwiaG90c3BvdElkeCIsIm1haW5Pbk1vZGFsQ2xvc2UiLCJvbk1vZGFsQ2xvc2UiLCJpbmR2T25Nb2RhbENsb3NlIiwiaW5kdiIsIm1vZGFsV2FybiIsImNsaWNrQ2hlY2tlciIsInNlZW4iLCJuZXh0SG90c3BvdCIsIm5leHRIb3RzcG90U2V0dGluZ3MiLCJtYWluT25VbmxvY2siLCJpbmR2T25VbmxvY2siLCJyZXN1bHQiLCJoYXNDb3JyZWN0Q2xhc3MiLCJjdXN0b21Db21wbGV0ZUFjdGlvbiIsImxpbmVhciIsIm9uVW5sb2NrIiwiYWN0aXZlQ2xhc3MiLCJob3ZlciIsInJlc2V0RG5EIiwicmV2ZXJ0VGltZSIsImRuZEFuc3dlcnMiLCJyZXNldFNvcnQiLCJyZXNldFF1aXoiLCJvZmYiLCJkbmRSZXNldE9iamVjdCIsIk9HUG9zIiwiZGF0YSIsImFuaW1hdGUiLCJ0b3AiLCJkbmRGdW5jdGlvbnMiLCJjdXJEcmFnIiwiY3VyRHJvcCIsInNuYXBwaW5nIiwiJGRyYWdFbGVtZW50cyIsIiRkcm9wRWxlbWVudHMiLCJnZW5lcmF0ZUFuc3dlclRlbXBsYXRlIiwidmlzaXRlZCIsImV2ZW50cyIsImRuZEFjdGlvbnMiLCJsZWZ0SW5pdCIsInBhcmVudCIsIndpZHRoIiwidG9TdHJpbmciLCJ0b3BJbml0IiwiaGVpZ2h0IiwiY3VyUG9zIiwicHJldlBvcyIsImRyb3BJRCIsImtleUJvYXJkQWNjZXNzIiwiZHJhZ0VsZW1lbnRzIiwidGltZSIsImRyb3BwYWJsZSIsInVpIiwiaGVscGVyIiwiZHJhZyIsImRyYWdnaW5nIiwicmV2ZXJ0Iiwic3RhY2siLCJyZXZlcnREdXJhdGlvbiIsImRyYWdTdG9wIiwiYWNjZXB0Iiwib3ZlciIsInRhcmdldCIsImRyb3AiLCJkcm9wcGVkIiwiZHJhZ1RhcmdldCIsImRyb3BUYXJnZXQiLCJwb3MiLCJzcGFjZUF2YWlsYWJsZSIsImRuZDJEcm9wIiwiZG5kMURyb3AiLCJzd2FwIiwiZHJvcElkIiwibmV3QXJyIiwiZmlsdGVyIiwiZHJhZ0lkIiwidXBkYXRlUG9zIiwibW92ZSIsInN3YXBEcmFnUG9zIiwic3dhcERyYWdJZCIsInBvcCIsInN3YXBEcmFnIiwic3dhcEFyciIsInJlbW92ZURhdGEiLCJkcmFnSXRlbSIsIm5ld1BvcyIsImRyYWdJdGVtSUQiLCJvbkRyYWdTdGFydCIsIm9uRHJhZyIsIm9uRHJhZ092ZXIiLCJvbkRyYWdFbmQiLCJzdHIiLCJzdHJhIiwiT2JqZWN0Iiwia2V5cyIsIkpTT04iLCJwYXJzZSIsImRyYWdFbGVtZW50IiwiYWNjZXNzaWJpbGl0eSIsImRyb3BzIiwiZHJvcElkeCIsIiRkcmFnIiwiaG90c3BvdEZ1bmN0aW9ucyIsIiRtb2RhbEJsb2NrZXIiLCJzZWxlY3RlZENsYXNzIiwiY29ycmVjdENsYXNzIiwidW5sb2NrZWRDbGFzcyIsImNvbXBsZXRlZENsYXNzIiwibW9kYWxTdHlsZUNsYXNzIiwiaG90c3BvdFN0eWxlQ2xhc3MiLCJjb21wbGV0ZUFjdGlvbiIsInNwb3QiLCJjb3JyZWN0SG90c3BvdHMiLCJhdWRpb1NldHVwIiwic2VsZWN0ZWRBbnN3ZXJzIiwidXNlTW9kYWxzIiwiaGFuZGxlSG90c3BvdCIsImhvU3AiLCJtYWluT25DbGljayIsIm9uQ2xpY2siLCJpbmR2T25DbGljayIsIiR0aGlzTW9kYWwiLCJtb2RhbElEIiwiJHRoaXNIb3RzcG90IiwidG9nZ2xlQ2xhc3MiLCJxdWl6SG90c3BvdCIsImFsbFNlZW4iLCJyZXNldEhvdHNwb3QiLCJpbml0TWVudSIsIm51bWJlciIsImJ1dHRvbnMiLCJkZWZhdWx0TmF2IiwiY29tcGxldGlvbklEcyIsIm1lbnVGdW5jdGlvbnMiLCJtZW51QnV0dG9ucyIsImFsbENvbXBsZXRlIiwic29ydEZ1bmN0aW9ucyIsInNvcnRhYmxlIiwic29ydGFibGVFbGVtZW50cyIsInNodWZmbGVFbGVtZW50cyIsInNvcnQiLCJzb3J0S2V5Ym9hcmQiLCJlbGVtZW50cyIsInNodWZmbGUiLCJzaHVmZmxlQXJyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic29tZSIsImVsIiwibGlzdHMiLCJlbGVtZW50QXJyIiwic2h1ZmZsZWQiLCJsaXN0IiwiaWR4MiIsImRpdiIsImVsZW1lbnQiLCJzcGxpY2UiLCJzaGlmdCIsInNvcnRJdGVtIiwic29ydExpc3QiLCJjb25uZWN0ZWQiLCJpbnNlcnRCZWZvcmUiLCJwcmV2IiwiaW5zZXJ0QWZ0ZXIiLCJuZXh0IiwicHJlcGVuZCIsInBhcmVudEluZGV4IiwibmV3TGlzdHMiLCJpbml0UXVpeiIsInF1aXp6ZXMiLCJidXR0b25UeXBlIiwiY2hvaWNlcyIsImlzUmFkaW8iLCJjaG9pY2UiLCJpbWFnZSIsImVxIiwiaW5kZXgiLCJxdWl6RnVuY3Rpb24iLCJmb3JtRnVuY3Rpb25zIiwiJGZvcm0iLCJmb3JtIiwiZG9udEdlbmVyYXRlIiwiZ2VuZXJhdGVGb3JtIiwiaGFzU3VibWl0IiwiaW5wdXRzIiwiJHRoaXMiLCJjaGFyYWN0ZXJzIiwidmFsIiwibWF4TGVuZ3RoIiwibGFzdElucHV0Iiwia2V5ZG93biIsImNoZWNrRm9ybSIsImZpZWxkcyIsImZpZWxkIiwiY2xhc3MiLCJhbnN3ZXIiLCJjYXNlU2Vuc2l0aXZlIiwidXNlckFuc3dlciIsInNlbGVjdGVkQW5zd2VyIiwidG9Mb3dlckNhc2UiLCJ2YWxpZEZvcm0iLCJ2YWxpZCIsImlucHV0SUQiLCJjcmVhdGVFbGVtZW50IiwiaHRtbEZvciIsInRleHQiLCJvcHRpb25zIiwib3B0aW9uIiwib3B0aW9uTGFiZWwiLCJqb2luIiwicmFkaW9MYWJlbCIsInNldEF0dHJpYnV0ZSIsInJlcXVpcmVkIiwib3B0aW9uYWwiLCJuYW1lIiwic3R5bGUiLCJjdXN0b21DaGVjayIsImxhYmVscyIsInNMYWJlbCIsImRyb3Bkb3duIiwic2VwYXJhdGUiLCJ0ZXh0SW5wdXQiLCJwbGFjZWhvbGRlciIsImN1ckNoYXB0ZXIiLCJjaGFwdGVyTmF2aWdhdGlvblNsaWRlcyIsImNoYXB0ZXJDb21wbGV0aW9uU2xpZGVzIiwiaW5pdFNpZGVNZW51IiwiJG1lbnUiLCIkY29udGFpbmVyIiwiY2xvc2VTaWRlTWVudSIsIm9wZW5TaWRlTWVudSIsImhhbmRsZVNpZGVCdXR0b25zIiwiY2hlY2tzIiwiaW5pdE5hdmlnYXRpb24iLCJzd2FwU3R5bGVzIiwic3dhcEltYWdlcyIsIm5hdiIsImF0dGFjaE5hdkV2ZW50TGlzdGVuZXJzIiwic2hvd05hdkVsZW1lbnRzIiwibmF2QnV0dG9ucyIsImljb25DbGFzc2VzIiwiJGNsaWNrIiwiaGlkZUNsaWNrSWNvbiIsImhvbWVTbGlkZSIsInRvZ2dsZUZ1bGxzY3JlZW4iLCJjbG9zZSIsInRoaXNTbGlkZSIsImNoZWNrUXVlc3Rpb24iLCJkbmRBcmdzIiwiY3VzdG9tUmVzZXQiLCJjdXN0b21TdWJtaXQiLCJyZXF1ZXN0TWV0aG9kIiwiZG9jdW1lbnRFbGVtZW50IiwiZnVsbHNjcmVlbkVsZW1lbnQiLCJtb3pGdWxsU2NyZWVuRWxlbWVudCIsIm1zRnVsbHNjcmVlbkVsZW1lbnQiLCJ3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCIsImV4aXRGdWxsc2NyZWVuIiwid2Via2l0RXhpdEZ1bGxzY3JlZW4iLCJ3ZWJraXRFeGl0RnVsbFNjcmVlbiIsIm1vekNhbmNlbEZ1bGxTY3JlZW4iLCJtc0V4aXRGdWxsc2NyZWVuIiwicmVxdWVzdEZ1bGxzY3JlZW4iLCJ3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiIsIndlYmtpdFJlcXVlc3RGdWxsU2NyZWVuIiwibW96UmVxdWVzdEZ1bGxTY3JlZW4iLCJtc1JlcXVlc3RGdWxsc2NyZWVuIiwiYm9va21hcmtlZFNsaWRlIiwiY2hhcnRQcm9ncmVzc1JlY29yZGVkIiwiZmlyc3RUaW1lU2V0dXAiLCJwIiwiZG9jdW1lbnRTZXR1cCIsInJlbW92ZSIsImNoYXJ0SW5pdGlhdGUiLCJmdW5jdGlvbkNhbGxzIiwicmFuZG9taXplUXVlc3Rpb25TbGlkZXMiLCJhZGRFdmVudExpc3RlbmVyIiwiY3VycmVudFNsaWRlIiwicHJldmlvdXNTbGlkZSIsImZvbnRTaXplIiwiZm9udFNpemVGYWN0b3IiLCJyZXNpemUiLCJhY3Rpb25zT25FdmVyeVNsaWRlRW50ZXIiLCJwbGF5aW5nIiwic2F2ZUxNUyIsInVzZUxvY2FsIiwic2F2ZVByb2dyZXNzTG9jYWxseSIsImVsZW1lbnRzRmFkaW5nT25TbGlkZSIsImNoYXJ0UHJvZ3Jlc3MiLCJjb3JyZWN0QW5zd2VycyIsInN0cmluZ2lmeSIsInVzZXJBbnN3ZXJzIiwiY29ycmVjdEFuc3dlciIsIm11bHRpcGxlQW5zd2VycyIsImluY2x1ZGVkIiwibGlzdEFycmF5Iiwic29ydGFibGVzIiwiYW5zd2VyQXJyYXkiLCJsaXN0SWQiLCJwb3NzaWJsZUFuc3dlciIsInVub3JkZXJlZCIsImp1bXBUb1NodWZmbGVkU2xpZGUiLCJwYXJ0Iiwic2h1ZmZsZWRTbGlkZXMiLCJwb2ludGVyIiwicmVzZXRTaHVmZmxlZFNsaWRlIiwicmFuZG9taXplU2xpZGVzIiwidXNlUmFuZG9taXplIiwieCIsImFyeSIsInRlbXAiLCJzb3J0QXJyYXlNYXRyaXhGdW5jdGlvbiIsImVsZW1lbnRzRmFkZUluIiwiZWxlbWVudHNGYWRlT3V0IiwiZmFkZVRvIiwiYSIsImIiLCJhcnJheSIsInRlbXBvcmFyeVZhbHVlIiwicmFuZG9tSW5kZXgiLCJjdXJyZW50SW5kZXgiLCJpbml0Q291cnNlIiwibXlTVkdzVG9JbmplY3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiU1ZHSW5qZWN0b3IiLCJwcm90b3R5cGUiLCJlcXVhbHMiLCJsIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwic2Nvcm0iLCJ1bmxvYWRlZCIsImNvdXJzZVVSTCIsImJ0b2EiLCJsb2NhdGlvbiIsImhyZWYiLCJwcm9ncmVzc1VSTCIsImJvb2ttYXJrVVJMIiwic2Nvcm1TZXR0aW5ncyIsInVzZVNjb3JtIiwic3RhbmRhcmQiLCJjb25uZWN0VG9TQ09STUFQSSIsImNvbm5lY3RUb0FJQ0NBUEkiLCJTRCIsIlNldFJlYWNoZWRFbmQiLCJDb21taXREYXRhIiwiYm9va21hcmtMb2NhbCIsImxvY2FsRGF0YSIsInN0b3JhZ2VBdmFpbGFibGUiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaW5pdCIsImJvb2ttYXJrU2Nvcm0iLCJzY29ybURhdGEiLCJyYXdEYXRhIiwiZ2V0IiwidmVyc2lvbiIsInVubG9hZEhhbmRsZXIiLCJzdWNjZXNzIiwic2V0Iiwic2F2ZSIsInF1aXQiLCJzYXZlQ291cnNlUHJvZ3Jlc3MiLCJzYXZlQm9va21hcmsiLCJkYXRhU3RyaW5nIiwic2V0SXRlbSIsInN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwiRE9NRXhjZXB0aW9uIiwiY29kZSJdLCJtYXBwaW5ncyI6IkFBQUEsR0NBQUEsUUFBUUMsSUFBSSwrQ0RBWixNQUFBQyxHQUNBLElBQUFBLEdBQUEsR0FhQSxTQUFBQyxRQUNBLElBQUFDLEVBQUEsR0FDQUMsRUFBQSxLQUNBQyxFQUFBQyxVQUFBLEdBQ0FDLEVBQUEsSUFDQUMsRUFBQSxHQUNBQyxFQUFBLEdBQ0FDLEVBQUEsR0FDQUMsRUFBQUwsVUFBQSxHQVFBLEdBTkFILEVBQUEsR0FBQUcsVUFBQSxJQUFBLEdBQ0FILEVBQUEsR0FBQUcsVUFBQSxJQUFBLEdBQ0FILEVBQUEsR0FBQUcsVUFBQSxJQUFBLEdBQ0FILEVBQUEsR0FBQUcsVUFBQSxJQUFBLEdBQ0FILEVBQUEsR0FBQUcsVUFBQSxJQUFBLEdBRUFBLFVBQUFNLE9BQUEsRUFBQSxDQUVBUixFQUFBLFVBQ0FJ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LHVCQUFBL2lCLEVBQUFvWixNQUVBLCtCQUFBcFosRUFBQW9aLE9BRUF3SixHQUNBLElBQUFBLEVBQUFyb0IiLCJmaWxlIjoiaW50ZXJhY3RpdmUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaWYgKHR5cGVvZiBzaSA9PT0gJ3VuZGVmaW5lZCcgfHwgc2kgPT09IG51bGwpIHtcblx0dmFyIHNpID0ge307XG59XG5cbnNpLmxvZyA9IFtdO1xuXG5zaS5mb3JtYXRMb2cgPSBmdW5jdGlvbiAoKSB7XG5cdGlmICh3aW5kb3cuY29uc29sZS50YWJsZSkge1xuXHRcdGNvbnNvbGUudGFibGUoc2kubG9nKTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLmxvZyhzaS5sb2cpO1xuXHR9XG59O1xuXG5mdW5jdGlvbiBzaUxvZygpIHtcblx0dmFyIGFyZ3MgPSBbXTtcblx0dmFyIGxhYmVsID0gJ1tdJztcblx0dmFyIHRhZyA9IGFyZ3VtZW50c1swXTtcblx0dmFyIGVtb2ppID0gJ+KdjCc7XG5cdHZhciBhY3Rpb24gPSAnJztcblx0dmFyIGtleSA9ICcnO1xuXHR2YXIgdmFsdWUgPSAnJztcblx0dmFyIG1haW5NZXNzYWdlID0gYXJndW1lbnRzWzFdO1xuXG5cdGFyZ3NbMF0gPSBhcmd1bWVudHNbMF0gfHwgJyc7XG5cdGFyZ3NbMV0gPSBhcmd1bWVudHNbMV0gfHwgJyc7XG5cdGFyZ3NbMl0gPSBhcmd1bWVudHNbMl0gfHwgJyc7XG5cdGFyZ3NbM10gPSBhcmd1bWVudHNbM10gfHwgJyc7XG5cdGFyZ3NbNF0gPSBhcmd1bWVudHNbNF0gfHwgJyc7XG5cblx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG5cdFx0Ly8gSlVTVCBBIFNVUEVSIFNJTVBMRSBDT05TT0xFLkxPRyBXSVRIIFNUQUNLIFRSQUNFXG5cdFx0bGFiZWwgPSAnW/CfpJpTU0ldJztcblx0XHR2YXIgYWN0aW9uID0gJ/CfkqFTSU1QTEUnO1xuXHRcdHZhciBrZXkgPSBhcmdzWzBdO1xuXHRcdHZhciB2YWx1ZSA9ICcnO1xuXHR9IGVsc2Uge1xuXHRcdC8vIFNPTUVUSElORyBNT1JFIElOVk9MVkVELCBIT1BFRlVMTFkgV0lUSCBUQUcgQU5EIEFMTFxuXHRcdC8vIENPTUlORyBFSVRIRVIgRlJPTSBGUkFNRVdPUksgT1IgUElQV0VSS1MgU0NPUk0gQVBJIFdSQVBQRVJcblx0XHQvLyBjb25zb2xlLmVycm9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cblx0XHRpZiAodGFnID09PSAncGlwd2Vya3MnKSB7XG5cdFx0XHQvLyBERUFMSU5HIFdJVEggUElQV0VSS1MgREVCVUcgTUVTU0FHRVMgVEhBVCBXRSBISUpBQ0tFRFxuXHRcdFx0cGlwd2Vya3NQYXJzZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gREVBTElORyBXSVRIIE9VUiBPV04gTUVTU0FHRVMsIENPTUlORyBGUk9NIElOU0lERSBUSEUgRlJBTUVXT1JLXG5cdFx0XHRpbnRlcmFjdGl2ZVBhcnNlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdH1cblx0fVxuXG5cdC8vIE5hc3R5IGhhY2sgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIFNDT1JNIEFQSSBvYmplY3QgaXMgYWN0dWFsbHkgYXZhaWxhYmxlXG5cdC8vICh3aGljaCBzZWVtcyB0byB0YWtlIGEgZmV3IHRpY2tzIGFmdGVyIGluaXRpYWxpemF0aW9uKSB0byBsb2cgdG8gY29uc29sZS5cblx0Ly8gVGhhdCdzIHdoeSB3ZSBoYXZlIHRoYXQgdGltZW91dCBoZXJlLlxuXHRpZiAoYWN0aW9uLmluZGV4T2YoJ0FQSTonKSA+IC0xKSB7XG5cdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRjb25zb2xlLmdyb3VwQ29sbGFwc2VkKGxhYmVsICsgYWN0aW9uICsga2V5LCB2YWx1ZSk7XG5cdFx0XHRjb25zb2xlLnRyYWNlKCdTdGFjayB0cmFjZTonKTtcblx0XHRcdGNvbnNvbGUuZ3JvdXBFbmQoKTtcblx0XHR9LCAxKTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLmdyb3VwQ29sbGFwc2VkKGxhYmVsICsgYWN0aW9uICsga2V5ICsgJyAnICsgdmFsdWUpO1xuXHRcdGNvbnNvbGUudHJhY2UoJ1N0YWNrIHRyYWNlOicpO1xuXHRcdGNvbnNvbGUuZ3JvdXBFbmQoKTtcblx0fVxuXG5cdC8vIEZvciBzaXR1YXRpb25zIHdoZXJlIHRoZSBjb25zb2xlIGlzbid0IGVub3VnaCwgYmVjYXVzZSBpdCBtaWdodCBub3QgaGF2ZSBiZWVuIGxvZ2dnaW5nXG5cdC8vIHJpZ2h0IGZyb20gdGhlIHN0YXJ0IChsb29raW5nIGF0IHlvdSBpbnRlcm5ldCBleHBsb3JlciEpLCB3ZSBhbHNvIHdhbnQgdG8gaGF2ZSBhbGwgdGhlXG5cdC8vIGxvZyB3b3J0aHkgZXZlbnRzIGluIGEgbmVhdCBhcnJheS4gVGhhdCB3YXkgd2UgY2FuIGxvb2sgYXQgaXQgKG9yIGV4cG9ydCBpdCBldmVuISlcblx0Ly8gd2hlbmV2ZXIgd2Ugd2FudCFcblx0dmFyIGxvZ0VudHJ5ID0ge1xuXHRcdGxhYmVsOiBsYWJlbCxcblx0XHRhY3Rpb246IGFjdGlvbixcblx0XHRrZXk6IGtleSxcblx0XHR2YWx1ZTogdmFsdWVcblx0fTtcblxuXHRzaS5sb2cucHVzaChsb2dFbnRyeSk7XG5cblx0ZnVuY3Rpb24gcGlwd2Vya3NQYXJzZXIoKSB7XG5cdFx0dGFnID0gJ1BJUDpTQ09STSc7XG5cblx0XHRpZiAodHlwZW9mIGFyZ3VtZW50c1sxXSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdC8vIHRyYWNlTXNnUHJlZml4ID0gXCJTQ09STS5kYXRhLmdldCgnXCIgKyBwYXJhbWV0ZXIgKyBcIicpIFwiO1xuXHRcdFx0Ly8gdHJhY2VNc2dQcmVmaXggPSBcIlNDT1JNLmRhdGEuc2V0KCdcIiArIHBhcmFtZXRlciArIFwiJykgXCI7XG5cdFx0XHRpZiAobWFpbk1lc3NhZ2UuaW5kZXhPZignU0NPUk0uZGF0YScpID4gLTEpIHtcblx0XHRcdFx0ZW1vamkgPSAn8J+Svic7XG5cdFx0XHRcdGlmIChtYWluTWVzc2FnZS5pbmRleE9mKCcuZ2V0JykgPiAtMSkge1xuXHRcdFx0XHRcdG1haW5NZXNzYWdlID0gbWFpbk1lc3NhZ2UucmVwbGFjZSgvU0NPUk0uZGF0YS5nZXRcXCgvZ2ksICcnKTtcblx0XHRcdFx0XHRhY3Rpb24gPSAn4o+qIEdFVCc7XG5cdFx0XHRcdH0gZWxzZSBpZiAobWFpbk1lc3NhZ2UuaW5kZXhPZignLnNldCcpID4gLTEpIHtcblx0XHRcdFx0XHRtYWluTWVzc2FnZSA9IG1haW5NZXNzYWdlLnJlcGxhY2UoL1NDT1JNLmRhdGEuc2V0XFwoL2dpLCAnJyk7XG5cdFx0XHRcdFx0YWN0aW9uID0gJ1NFVCDij6knO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG1haW5NZXNzYWdlID0gbWFpbk1lc3NhZ2UucmVwbGFjZSgvXFwpL2dpLCAnOicpO1xuXHRcdFx0XHRrZXkgPSBtYWluTWVzc2FnZS5zcGxpdCgnICB2YWx1ZTogJylbMF0gfHwgJyc7XG5cdFx0XHRcdHZhbHVlID0gbWFpbk1lc3NhZ2Uuc3BsaXQoJyAgdmFsdWU6ICcpWzFdIHx8ICcnO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyB0cmFjZU1zZ1ByZWZpeCA9ICdTQ09STS5jb25uZWN0aW9uLmluaXRpYWxpemUgJztcblx0XHRcdC8vIHRyYWNlTXNnUHJlZml4ID0gJ1NDT1JNLmNvbm5lY3Rpb24udGVybWluYXRlICc7XG5cdFx0XHRpZiAobWFpbk1lc3NhZ2UuaW5kZXhPZignU0NPUk0uY29ubmVjdGlvbicpID4gLTEgfHwgbWFpbk1lc3NhZ2UuaW5kZXhPZignY29ubmVjdGlvbi5pbml0aWFsaXplJykgPiAtMSkge1xuXHRcdFx0XHRlbW9qaSA9ICfwn5SMJztcblx0XHRcdFx0aWYgKG1haW5NZXNzYWdlLmluZGV4T2YoJy5pbml0aWFsaXplJykgPiAtMSkge1xuXHRcdFx0XHRcdG1haW5NZXNzYWdlID0gbWFpbk1lc3NhZ2UucmVwbGFjZSgvU0NPUk0uY29ubmVjdGlvbi5pbml0aWFsaXplIC9naSwgJycpO1xuXHRcdFx0XHRcdGFjdGlvbiA9ICfwn6SdIElOSVQnO1xuXHRcdFx0XHRcdGlmIChtYWluTWVzc2FnZS5pbmRleE9mKCdjb25uZWN0aW9uLmluaXRpYWxpemUgY2FsbGVkLicpID4gLTEpIHtcblx0XHRcdFx0XHRcdG1haW5NZXNzYWdlID0gbWFpbk1lc3NhZ2UucmVwbGFjZSgvY29ubmVjdGlvbi5pbml0aWFsaXplIGNhbGxlZC4vZ2ksICcnKTtcblx0XHRcdFx0XHRcdGtleSA9ICdJbml0aWFsaXppbmcgTE1TIGNvbm5lY3Rpb24uLi4nO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChtYWluTWVzc2FnZS5pbmRleE9mKCcudGVybWluYXRlJykgPiAtMSkge1xuXHRcdFx0XHRcdG1haW5NZXNzYWdlID0gbWFpbk1lc3NhZ2UucmVwbGFjZSgvU0NPUk0uY29ubmVjdGlvbi50ZXJtaW5hdGUgL2dpLCAnJyk7XG5cdFx0XHRcdFx0YWN0aW9uID0gJ/CfkoAgVEVSTSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG1haW5NZXNzYWdlLmluZGV4T2YoJ2ZhaWxlZCcpID4gLTEgfHwgbWFpbk1lc3NhZ2UuaW5kZXhPZignYWJvcnRlZCcpID4gLTEpIHtcblx0XHRcdFx0XHRtYWluTWVzc2FnZSA9IG1haW5NZXNzYWdlLnJlcGxhY2UoL2ZhaWxlZC9naSwgJ+KdjCBGQUlMRUQnKTtcblx0XHRcdFx0XHRtYWluTWVzc2FnZSA9IG1haW5NZXNzYWdlLnJlcGxhY2UoL2Fib3J0ZWQvZ2ksICfinYwgQUJPUlRFRCcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIHRyYWNlTXNnUHJlZml4ID0gJ1NDT1JNLkFQSS5maW5kJyxcblx0XHRcdGlmIChtYWluTWVzc2FnZS5pbmRleE9mKCdBUEknKSA+IC0xKSB7XG5cdFx0XHRcdGVtb2ppID0gJ/Cfk5YnO1xuXHRcdFx0XHRpZiAobWFpbk1lc3NhZ2UuaW5kZXhPZignLmZpbmQnKSA+IC0xKSB7XG5cdFx0XHRcdFx0bWFpbk1lc3NhZ2UgPSBtYWluTWVzc2FnZS5yZXBsYWNlKC9TQ09STS5BUEkuZmluZDogL2dpLCAnJyk7XG5cdFx0XHRcdFx0bWFpbk1lc3NhZ2UgPSBtYWluTWVzc2FnZS5yZXBsYWNlKC8uIFZlcnNpb246IC9naSwgJzogdicpO1xuXHRcdFx0XHRcdGFjdGlvbiA9ICfwn5SNIEZJTkQnO1xuXHRcdFx0XHRcdHZhbHVlID0gJyhJdCB3aWxsIGJlIGF2YWlsYWJsZSBmb3IgaW5zcGVjdGlvbiBpbiBhIGZldyB0aWNrcy4pJztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobWFpbk1lc3NhZ2UuaW5kZXhPZignQVBJOicpID4gLTEpIHtcblx0XHRcdFx0XHRhY3Rpb24gPSAn8J+UlyBBUEknO1xuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0a2V5ID0gcGlwd2Vya3MuU0NPUk0uQVBJLmhhbmRsZTtcblx0XHRcdFx0XHR9LCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChhY3Rpb24gIT09ICcnKSB7XG5cdFx0XHRhY3Rpb24gPSAnKCcgKyBhY3Rpb24gKyAnKSAnO1xuXHRcdH1cblx0XHRrZXkgPSBrZXkgfHwgbWFpbk1lc3NhZ2U7XG5cdFx0dmFsdWUgPSBpc05hTihwYXJzZUludCh2YWx1ZSwgMTApKSA/IHZhbHVlIDogcGFyc2VJbnQodmFsdWUsIDEwKTtcblx0XHRsYWJlbCA9ICdbJyArIGVtb2ppICsgdGFnICsgJ10gJztcblx0fVxuXG5cdGZ1bmN0aW9uIGludGVyYWN0aXZlUGFyc2VyKCkge1xuXHRcdHRhZyA9ICdTU0k6JyArIHRhZztcblx0XHRlbW9qaSA9ICfwn6SaJztcblx0XHRhY3Rpb24gPSBhcmdzWzFdIHx8ICcnO1xuXHRcdGtleSA9IGFyZ3NbMl0gfHwgJyc7XG5cdFx0dmFsdWUgPSBhcmdzWzNdIHx8ICcnO1xuXG5cdFx0aWYgKHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRpZiAoYXJnc1sxXSA9PT0gJ1NFVCcpIHtcblx0XHRcdFx0YWN0aW9uID0gJyhTRVQg4o+pKSAnO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdzWzFdID09PSAnR0VUJykge1xuXHRcdFx0XHRhY3Rpb24gPSAnKOKPqiBHRVQpICc7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ3NbMV0gPT09ICdJTklUJykge1xuXHRcdFx0XHRhY3Rpb24gPSAnKPCfpJ0gSU5JVCkgJztcblx0XHRcdH0gZWxzZSBpZiAoYXJnc1sxXSA9PT0gJ0NPTVBMRVRFJykge1xuXHRcdFx0XHRhY3Rpb24gPSAnKPCfj4YgQ09NUExFVEUpICc7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ3NbMV0gPT09ICdJTkZPJykge1xuXHRcdFx0XHRhY3Rpb24gPSAnKPCfkqEgSU5GTykgJztcblx0XHRcdH0gZWxzZSBpZiAoYXJnc1sxXSA9PT0gJ0FQSScpIHtcblx0XHRcdFx0YWN0aW9uID0gJyjwn5SXIEFQSSkgJztcblx0XHRcdH1cblxuXHRcdFx0aWYgKGFyZ3NbMl0uaW5kZXhPZignU1VDQ0VTUycpID4gLTEpIHtcblx0XHRcdFx0a2V5ID0gJ+KchSAnICsgYXJnc1syXTtcblx0XHRcdH1cblx0XHRcdGlmIChhcmdzWzJdLmluZGV4T2YoJ0VSUk9SJykgPiAtMSkge1xuXHRcdFx0XHRrZXkgPSAn4p2MICcgKyBhcmdzWzJdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyAgIGtleSA9IG1haW5NZXNzYWdlLnNwbGl0KFwiICB2YWx1ZTogXCIpWzBdO1xuXHRcdFx0Ly8gICB2YWx1ZSA9IG1haW5NZXNzYWdlLnNwbGl0KFwiICB2YWx1ZTogXCIpWzFdIHx8IFwiXCI7XG5cdFx0fVxuXG5cdFx0dmFsdWUgPSBpc05hTihwYXJzZUludCh2YWx1ZSwgMTApKSA/IHZhbHVlIDogcGFyc2VJbnQodmFsdWUsIDEwKTtcblx0XHRsYWJlbCA9ICdbJyArIGVtb2ppICsgdGFnICsgJ10gJztcblx0fVxufVxucGlwd2Vya3MuVVRJTFMudHJhY2UgPSBmdW5jdGlvbiAobXNnKSB7XG5cdGlmIChwaXB3ZXJrcy5kZWJ1Zy5pc0FjdGl2ZSkge1xuXHRcdGlmICh3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cpIHtcblx0XHRcdHNpTG9nKCdwaXB3ZXJrcycsIG1zZyk7XG5cdFx0fVxuXHR9XG59O1xuXG4vLyBb8J+SvlNDT1JNXSDirIXvuI9HRVQgKCdjbWkuY29yZS5zdHVkZW50X25hbWUnKSAgdmFsdWU6IGludGVyYWN0aXZlLFxuXG4vLyB0cmFjZU1zZ1ByZWZpeCA9ICdTQ09STS5kYXRhLnNhdmUgZmFpbGVkJztcbi8vIHRyYWNlTXNnUHJlZml4ID0gJ1NDT1JNLmdldFN0YXR1cyBmYWlsZWQnLFxuXG4vLyBhcmdzWzBdID0gJ1vwn5KhU0NPUk1dJztcbi8vIGFyZ3NbMF0gPSAnW+KYne+4j1NDT1JNXSc7XG4vLyBhcmdzWzBdID0gJ1vwn5GGU0NPUk1dJztcbi8vIGFyZ3NbMF0gPSAnW/CfpJ5TQ09STV0nO1xuIiwiY29uc29sZS5sb2coJ0lOVEVSQUNUSVZFIEJVSUxEIE9OOiBBdWcgOSAyMDI0IDM6MzM6NDcgUE0nKTtcbmlmICh0eXBlb2Ygc2kgPT09ICd1bmRlZmluZWQnIHx8IHNpID09PSBudWxsKSB7XG5cdHZhciBzaSA9IHt9O1xufVxuXG5zaS5sb2cgPSBbXTtcblxuc2kuZm9ybWF0TG9nID0gZnVuY3Rpb24gKCkge1xuXHRpZiAod2luZG93LmNvbnNvbGUudGFibGUpIHtcblx0XHRjb25zb2xlLnRhYmxlKHNpLmxvZyk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc29sZS5sb2coc2kubG9nKTtcblx0fVxufTtcblxuZnVuY3Rpb24gc2lMb2coKSB7XG5cdHZhciBhcmdzID0gW107XG5cdHZhciBsYWJlbCA9ICdbXSc7XG5cdHZhciB0YWcgPSBhcmd1bWVudHNbMF07XG5cdHZhciBlbW9qaSA9ICfinYwnO1xuXHR2YXIgYWN0aW9uID0gJyc7XG5cdHZhciBrZXkgPSAnJztcblx0dmFyIHZhbHVlID0gJyc7XG5cdHZhciBtYWluTWVzc2FnZSA9IGFyZ3VtZW50c1sxXTtcblxuXHRhcmdzWzBdID0gYXJndW1lbnRzWzBdIHx8ICcnO1xuXHRhcmdzWzFdID0gYXJndW1lbnRzWzFdIHx8ICcnO1xuXHRhcmdzWzJdID0gYXJndW1lbnRzWzJdIHx8ICcnO1xuXHRhcmdzWzNdID0gYXJndW1lbnRzWzNdIHx8ICcnO1xuXHRhcmdzWzRdID0gYXJndW1lbnRzWzRdIHx8ICcnO1xuXG5cdGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikge1xuXHRcdC8vIEpVU1QgQSBTVVBFUiBTSU1QTEUgQ09OU09MRS5MT0cgV0lUSCBTVEFDSyBUUkFDRVxuXHRcdGxhYmVsID0gJ1vwn6SaU1NJXSc7XG5cdFx0dmFyIGFjdGlvbiA9ICfwn5KhU0lNUExFJztcblx0XHR2YXIga2V5ID0gYXJnc1swXTtcblx0XHR2YXIgdmFsdWUgPSAnJztcblx0fSBlbHNlIHtcblx0XHQvLyBTT01FVEhJTkcgTU9SRSBJTlZPTFZFRCwgSE9QRUZVTExZIFdJVEggVEFHIEFORCBBTExcblx0XHQvLyBDT01JTkcgRUlUSEVSIEZST00gRlJBTUVXT1JLIE9SIFBJUFdFUktTIFNDT1JNIEFQSSBXUkFQUEVSXG5cdFx0Ly8gY29uc29sZS5lcnJvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG5cdFx0aWYgKHRhZyA9PT0gJ3BpcHdlcmtzJykge1xuXHRcdFx0Ly8gREVBTElORyBXSVRIIFBJUFdFUktTIERFQlVHIE1FU1NBR0VTIFRIQVQgV0UgSElKQUNLRURcblx0XHRcdHBpcHdlcmtzUGFyc2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIERFQUxJTkcgV0lUSCBPVVIgT1dOIE1FU1NBR0VTLCBDT01JTkcgRlJPTSBJTlNJREUgVEhFIEZSQU1FV09SS1xuXHRcdFx0aW50ZXJhY3RpdmVQYXJzZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHR9XG5cdH1cblxuXHQvLyBOYXN0eSBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBTQ09STSBBUEkgb2JqZWN0IGlzIGFjdHVhbGx5IGF2YWlsYWJsZVxuXHQvLyAod2hpY2ggc2VlbXMgdG8gdGFrZSBhIGZldyB0aWNrcyBhZnRlciBpbml0aWFsaXphdGlvbikgdG8gbG9nIHRvIGNvbnNvbGUuXG5cdC8vIFRoYXQncyB3aHkgd2UgaGF2ZSB0aGF0IHRpbWVvdXQgaGVyZS5cblx0aWYgKGFjdGlvbi5pbmRleE9mKCdBUEk6JykgPiAtMSkge1xuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc29sZS5ncm91cENvbGxhcHNlZChsYWJlbCArIGFjdGlvbiArIGtleSwgdmFsdWUpO1xuXHRcdFx0Y29uc29sZS50cmFjZSgnU3RhY2sgdHJhY2U6Jyk7XG5cdFx0XHRjb25zb2xlLmdyb3VwRW5kKCk7XG5cdFx0fSwgMSk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc29sZS5ncm91cENvbGxhcHNlZChsYWJlbCArIGFjdGlvbiArIGtleSArICcgJyArIHZhbHVlKTtcblx0XHRjb25zb2xlLnRyYWNlKCdTdGFjayB0cmFjZTonKTtcblx0XHRjb25zb2xlLmdyb3VwRW5kKCk7XG5cdH1cblxuXHQvLyBGb3Igc2l0dWF0aW9ucyB3aGVyZSB0aGUgY29uc29sZSBpc24ndCBlbm91Z2gsIGJlY2F1c2UgaXQgbWlnaHQgbm90IGhhdmUgYmVlbiBsb2dnZ2luZ1xuXHQvLyByaWdodCBmcm9tIHRoZSBzdGFydCAobG9va2luZyBhdCB5b3UgaW50ZXJuZXQgZXhwbG9yZXIhKSwgd2UgYWxzbyB3YW50IHRvIGhhdmUgYWxsIHRoZVxuXHQvLyBsb2cgd29ydGh5IGV2ZW50cyBpbiBhIG5lYXQgYXJyYXkuIFRoYXQgd2F5IHdlIGNhbiBsb29rIGF0IGl0IChvciBleHBvcnQgaXQgZXZlbiEpXG5cdC8vIHdoZW5ldmVyIHdlIHdhbnQhXG5cdHZhciBsb2dFbnRyeSA9IHtcblx0XHRsYWJlbDogbGFiZWwsXG5cdFx0YWN0aW9uOiBhY3Rpb24sXG5cdFx0a2V5OiBrZXksXG5cdFx0dmFsdWU6IHZhbHVlXG5cdH07XG5cblx0c2kubG9nLnB1c2gobG9nRW50cnkpO1xuXG5cdGZ1bmN0aW9uIHBpcHdlcmtzUGFyc2VyKCkge1xuXHRcdHRhZyA9ICdQSVA6U0NPUk0nO1xuXG5cdFx0aWYgKHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdzdHJpbmcnKSB7XG5cdFx0XHQvLyB0cmFjZU1zZ1ByZWZpeCA9IFwiU0NPUk0uZGF0YS5nZXQoJ1wiICsgcGFyYW1ldGVyICsgXCInKSBcIjtcblx0XHRcdC8vIHRyYWNlTXNnUHJlZml4ID0gXCJTQ09STS5kYXRhLnNldCgnXCIgKyBwYXJhbWV0ZXIgKyBcIicpIFwiO1xuXHRcdFx0aWYgKG1haW5NZXNzYWdlLmluZGV4T2YoJ1NDT1JNLmRhdGEnKSA+IC0xKSB7XG5cdFx0XHRcdGVtb2ppID0gJ/Cfkr4nO1xuXHRcdFx0XHRpZiAobWFpbk1lc3NhZ2UuaW5kZXhPZignLmdldCcpID4gLTEpIHtcblx0XHRcdFx0XHRtYWluTWVzc2FnZSA9IG1haW5NZXNzYWdlLnJlcGxhY2UoL1NDT1JNLmRhdGEuZ2V0XFwoL2dpLCAnJyk7XG5cdFx0XHRcdFx0YWN0aW9uID0gJ+KPqiBHRVQnO1xuXHRcdFx0XHR9IGVsc2UgaWYgKG1haW5NZXNzYWdlLmluZGV4T2YoJy5zZXQnKSA+IC0xKSB7XG5cdFx0XHRcdFx0bWFpbk1lc3NhZ2UgPSBtYWluTWVzc2FnZS5yZXBsYWNlKC9TQ09STS5kYXRhLnNldFxcKC9naSwgJycpO1xuXHRcdFx0XHRcdGFjdGlvbiA9ICdTRVQg4o+pJztcblx0XHRcdFx0fVxuXHRcdFx0XHRtYWluTWVzc2FnZSA9IG1haW5NZXNzYWdlLnJlcGxhY2UoL1xcKS9naSwgJzonKTtcblx0XHRcdFx0a2V5ID0gbWFpbk1lc3NhZ2Uuc3BsaXQoJyAgdmFsdWU6ICcpWzBdIHx8ICcnO1xuXHRcdFx0XHR2YWx1ZSA9IG1haW5NZXNzYWdlLnNwbGl0KCcgIHZhbHVlOiAnKVsxXSB8fCAnJztcblx0XHRcdH1cblxuXHRcdFx0Ly8gdHJhY2VNc2dQcmVmaXggPSAnU0NPUk0uY29ubmVjdGlvbi5pbml0aWFsaXplICc7XG5cdFx0XHQvLyB0cmFjZU1zZ1ByZWZpeCA9ICdTQ09STS5jb25uZWN0aW9uLnRlcm1pbmF0ZSAnO1xuXHRcdFx0aWYgKG1haW5NZXNzYWdlLmluZGV4T2YoJ1NDT1JNLmNvbm5lY3Rpb24nKSA+IC0xIHx8IG1haW5NZXNzYWdlLmluZGV4T2YoJ2Nvbm5lY3Rpb24uaW5pdGlhbGl6ZScpID4gLTEpIHtcblx0XHRcdFx0ZW1vamkgPSAn8J+UjCc7XG5cdFx0XHRcdGlmIChtYWluTWVzc2FnZS5pbmRleE9mKCcuaW5pdGlhbGl6ZScpID4gLTEpIHtcblx0XHRcdFx0XHRtYWluTWVzc2FnZSA9IG1haW5NZXNzYWdlLnJlcGxhY2UoL1NDT1JNLmNvbm5lY3Rpb24uaW5pdGlhbGl6ZSAvZ2ksICcnKTtcblx0XHRcdFx0XHRhY3Rpb24gPSAn8J+knSBJTklUJztcblx0XHRcdFx0XHRpZiAobWFpbk1lc3NhZ2UuaW5kZXhPZignY29ubmVjdGlvbi5pbml0aWFsaXplIGNhbGxlZC4nKSA+IC0xKSB7XG5cdFx0XHRcdFx0XHRtYWluTWVzc2FnZSA9IG1haW5NZXNzYWdlLnJlcGxhY2UoL2Nvbm5lY3Rpb24uaW5pdGlhbGl6ZSBjYWxsZWQuL2dpLCAnJyk7XG5cdFx0XHRcdFx0XHRrZXkgPSAnSW5pdGlhbGl6aW5nIExNUyBjb25uZWN0aW9uLi4uJztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAobWFpbk1lc3NhZ2UuaW5kZXhPZignLnRlcm1pbmF0ZScpID4gLTEpIHtcblx0XHRcdFx0XHRtYWluTWVzc2FnZSA9IG1haW5NZXNzYWdlLnJlcGxhY2UoL1NDT1JNLmNvbm5lY3Rpb24udGVybWluYXRlIC9naSwgJycpO1xuXHRcdFx0XHRcdGFjdGlvbiA9ICfwn5KAIFRFUk0nO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChtYWluTWVzc2FnZS5pbmRleE9mKCdmYWlsZWQnKSA+IC0xIHx8IG1haW5NZXNzYWdlLmluZGV4T2YoJ2Fib3J0ZWQnKSA+IC0xKSB7XG5cdFx0XHRcdFx0bWFpbk1lc3NhZ2UgPSBtYWluTWVzc2FnZS5yZXBsYWNlKC9mYWlsZWQvZ2ksICfinYwgRkFJTEVEJyk7XG5cdFx0XHRcdFx0bWFpbk1lc3NhZ2UgPSBtYWluTWVzc2FnZS5yZXBsYWNlKC9hYm9ydGVkL2dpLCAn4p2MIEFCT1JURUQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyB0cmFjZU1zZ1ByZWZpeCA9ICdTQ09STS5BUEkuZmluZCcsXG5cdFx0XHRpZiAobWFpbk1lc3NhZ2UuaW5kZXhPZignQVBJJykgPiAtMSkge1xuXHRcdFx0XHRlbW9qaSA9ICfwn5OWJztcblx0XHRcdFx0aWYgKG1haW5NZXNzYWdlLmluZGV4T2YoJy5maW5kJykgPiAtMSkge1xuXHRcdFx0XHRcdG1haW5NZXNzYWdlID0gbWFpbk1lc3NhZ2UucmVwbGFjZSgvU0NPUk0uQVBJLmZpbmQ6IC9naSwgJycpO1xuXHRcdFx0XHRcdG1haW5NZXNzYWdlID0gbWFpbk1lc3NhZ2UucmVwbGFjZSgvLiBWZXJzaW9uOiAvZ2ksICc6IHYnKTtcblx0XHRcdFx0XHRhY3Rpb24gPSAn8J+UjSBGSU5EJztcblx0XHRcdFx0XHR2YWx1ZSA9ICcoSXQgd2lsbCBiZSBhdmFpbGFibGUgZm9yIGluc3BlY3Rpb24gaW4gYSBmZXcgdGlja3MuKSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG1haW5NZXNzYWdlLmluZGV4T2YoJ0FQSTonKSA+IC0xKSB7XG5cdFx0XHRcdFx0YWN0aW9uID0gJ/CflJcgQVBJJztcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGtleSA9IHBpcHdlcmtzLlNDT1JNLkFQSS5oYW5kbGU7XG5cdFx0XHRcdFx0fSwgMSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoYWN0aW9uICE9PSAnJykge1xuXHRcdFx0YWN0aW9uID0gJygnICsgYWN0aW9uICsgJykgJztcblx0XHR9XG5cdFx0a2V5ID0ga2V5IHx8IG1haW5NZXNzYWdlO1xuXHRcdHZhbHVlID0gaXNOYU4ocGFyc2VJbnQodmFsdWUsIDEwKSkgPyB2YWx1ZSA6IHBhcnNlSW50KHZhbHVlLCAxMCk7XG5cdFx0bGFiZWwgPSAnWycgKyBlbW9qaSArIHRhZyArICddICc7XG5cdH1cblxuXHRmdW5jdGlvbiBpbnRlcmFjdGl2ZVBhcnNlcigpIHtcblx0XHR0YWcgPSAnU1NJOicgKyB0YWc7XG5cdFx0ZW1vamkgPSAn8J+kmic7XG5cdFx0YWN0aW9uID0gYXJnc1sxXSB8fCAnJztcblx0XHRrZXkgPSBhcmdzWzJdIHx8ICcnO1xuXHRcdHZhbHVlID0gYXJnc1szXSB8fCAnJztcblxuXHRcdGlmICh0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnc3RyaW5nJykge1xuXHRcdFx0aWYgKGFyZ3NbMV0gPT09ICdTRVQnKSB7XG5cdFx0XHRcdGFjdGlvbiA9ICcoU0VUIOKPqSkgJztcblx0XHRcdH0gZWxzZSBpZiAoYXJnc1sxXSA9PT0gJ0dFVCcpIHtcblx0XHRcdFx0YWN0aW9uID0gJyjij6ogR0VUKSAnO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdzWzFdID09PSAnSU5JVCcpIHtcblx0XHRcdFx0YWN0aW9uID0gJyjwn6SdIElOSVQpICc7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ3NbMV0gPT09ICdDT01QTEVURScpIHtcblx0XHRcdFx0YWN0aW9uID0gJyjwn4+GIENPTVBMRVRFKSAnO1xuXHRcdFx0fSBlbHNlIGlmIChhcmdzWzFdID09PSAnSU5GTycpIHtcblx0XHRcdFx0YWN0aW9uID0gJyjwn5KhIElORk8pICc7XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ3NbMV0gPT09ICdBUEknKSB7XG5cdFx0XHRcdGFjdGlvbiA9ICco8J+UlyBBUEkpICc7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChhcmdzWzJdLmluZGV4T2YoJ1NVQ0NFU1MnKSA+IC0xKSB7XG5cdFx0XHRcdGtleSA9ICfinIUgJyArIGFyZ3NbMl07XG5cdFx0XHR9XG5cdFx0XHRpZiAoYXJnc1syXS5pbmRleE9mKCdFUlJPUicpID4gLTEpIHtcblx0XHRcdFx0a2V5ID0gJ+KdjCAnICsgYXJnc1syXTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gICBrZXkgPSBtYWluTWVzc2FnZS5zcGxpdChcIiAgdmFsdWU6IFwiKVswXTtcblx0XHRcdC8vICAgdmFsdWUgPSBtYWluTWVzc2FnZS5zcGxpdChcIiAgdmFsdWU6IFwiKVsxXSB8fCBcIlwiO1xuXHRcdH1cblxuXHRcdHZhbHVlID0gaXNOYU4ocGFyc2VJbnQodmFsdWUsIDEwKSkgPyB2YWx1ZSA6IHBhcnNlSW50KHZhbHVlLCAxMCk7XG5cdFx0bGFiZWwgPSAnWycgKyBlbW9qaSArIHRhZyArICddICc7XG5cdH1cbn1cbnBpcHdlcmtzLlVUSUxTLnRyYWNlID0gZnVuY3Rpb24gKG1zZykge1xuXHRpZiAocGlwd2Vya3MuZGVidWcuaXNBY3RpdmUpIHtcblx0XHRpZiAod2luZG93LmNvbnNvbGUgJiYgd2luZG93LmNvbnNvbGUubG9nKSB7XG5cdFx0XHRzaUxvZygncGlwd2Vya3MnLCBtc2cpO1xuXHRcdH1cblx0fVxufTtcblxuLy8gW/Cfkr5TQ09STV0g4qyF77iPR0VUICgnY21pLmNvcmUuc3R1ZGVudF9uYW1lJykgIHZhbHVlOiBpbnRlcmFjdGl2ZSxcblxuLy8gdHJhY2VNc2dQcmVmaXggPSAnU0NPUk0uZGF0YS5zYXZlIGZhaWxlZCc7XG4vLyB0cmFjZU1zZ1ByZWZpeCA9ICdTQ09STS5nZXRTdGF0dXMgZmFpbGVkJyxcblxuLy8gYXJnc1swXSA9ICdb8J+SoVNDT1JNXSc7XG4vLyBhcmdzWzBdID0gJ1vimJ3vuI9TQ09STV0nO1xuLy8gYXJnc1swXSA9ICdb8J+RhlNDT1JNXSc7XG4vLyBhcmdzWzBdID0gJ1vwn6SeU0NPUk1dJztcblxuLy9Tb21lIHNob3J0Y3V0cyBmb3IgZnVuY3Rpb25zXG4vKipcbiAqXG4gKi9cbmZ1bmN0aW9uIG5leHRTbGlkZSgpIHtcblx0UmV2ZWFsLnJpZ2h0KCk7XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gcHJldlNsaWRlKCkge1xuXHRSZXZlYWwubGVmdCgpO1xufVxuXG4vKipcbiAqXG4gKi9cbmZ1bmN0aW9uIGRvd25TbGlkZSgpIHtcblx0UmV2ZWFsLmRvd24oKTtcbn1cblxuLyoqXG4gKlxuICovXG5mdW5jdGlvbiB1cFNsaWRlKCkge1xuXHRSZXZlYWwudXAoKTtcbn1cblxuLyoqXG4gKlxuICovXG5mdW5jdGlvbiBuZXh0SGlkZSgpIHtcblx0JCgnI3NpLW5leHQnKS5oaWRlKCk7XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gbmV4dFNob3coKSB7XG5cdCQoJyNzaS1uZXh0Jykuc2hvdygpO1xufVxuXG4vKipcbiAqXG4gKi9cbmZ1bmN0aW9uIGJhY2tIaWRlKCkge1xuXHQkKCcjc2ktYmFjaycpLmhpZGUoKTtcbn1cblxuLyoqXG4gKlxuICovXG5mdW5jdGlvbiBiYWNrU2hvdygpIHtcblx0JCgnI3NpLWJhY2snKS5zaG93KCk7XG59XG5cbi8qKlxuICogQHBhcmFtIG5cbiAqL1xuZnVuY3Rpb24ganVtcFRvU2xpZGUobikge1xuXHRSZXZlYWwuc2xpZGUobiAtIDEpO1xufVxuXG4vKipcbiAqIEBwYXJhbSBpZFxuICovXG5mdW5jdGlvbiBqdW1wVG9JZChpZCkge1xuXHR2YXIgbnVtID0gc2xpZGVzW2lkXS5zbGlkZU51bWJlcjtcblx0UmV2ZWFsLnNsaWRlKG51bSAtIDEpO1xufVxuXG4vKipcbiAqIEBwYXJhbSAkZWxlbWVudFxuICovXG5mdW5jdGlvbiBsb2NrKCRlbGVtZW50KSB7XG5cdCRlbGVtZW50LmFkZENsYXNzKCdub0V2ZW50cycpO1xuXHQkZWxlbWVudC5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xufVxuXG4vKipcbiAqIEBwYXJhbSAkZWxlbWVudFxuICovXG5mdW5jdGlvbiB1bmxvY2soJGVsZW1lbnQpIHtcblx0JGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ25vRXZlbnRzJyk7XG5cdCRlbGVtZW50LnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHBhdGhOYW1lXG4gKi9cbmZ1bmN0aW9uIHNldFBhdGgocGF0aE5hbWUpIHtcblx0aWYgKCFjaGVja1dob2xlUGF0aChwYXRoTmFtZSkgJiYgbG1zQ29ubmVjdGVkKSB7XG5cdFx0c2V0U2Nvcm1JbmNvbXBsZXRlKCk7XG5cdH1cblx0cmV0dXJuIChzYXZlRGF0YS5wYXRoU2VsZWN0ZWQgPSBwYXRoTmFtZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIGlucHV0XG4gKi9cbmZ1bmN0aW9uIGdldENvbXBsZXRpb25TdGF0dXMoaW5wdXQpIHtcblx0dmFyIGNoZWNrU3BlY2lmaWNQYXRoID0gaW5wdXQgJiYgaW5wdXRbMF0gPT09ICdAJztcblxuXHRpZiAoY2hlY2tTcGVjaWZpY1BhdGgpIHJldHVybiBjaGVja1dob2xlUGF0aChpbnB1dC5zcGxpdCgnQCcpWzFdKTtcblxuXHR2YXIgc2xpZGVJRCA9IGlucHV0ID8gaW5wdXQgOiBnbG9iYWxWYXIuY3VyU2xpZGU7XG5cdHZhciBzbGlkZU9iaiA9IHNsaWRlc1tzbGlkZUlEXTtcblxuXHQvLyBpZiAoIXNsaWRlT2JqKSByZXR1cm4gY29uc29sZS53YXJuKCdpbnZhbGlkIHNsaWRlJyk7XG5cdC8vIGlmICghc2xpZGVPYmouaW5jbHVkZSkgcmV0dXJuIGNvbnNvbGUud2FybignaW5jbHVkZTogZmFsc2UnKTtcblxuXHR2YXIgb25DdXJTbGlkZSA9IHNsaWRlSUQgPT09IGdsb2JhbFZhci5jdXJTbGlkZTtcblx0dmFyIHNsaWRlQ29tcGxldGlvbiA9IHNhdmVEYXRhLnNsaWRlQ29tcGxldGlvbjtcblx0dmFyIHBhdGhTZWxlY3RlZCA9IHNhdmVEYXRhLnBhdGhTZWxlY3RlZDtcblx0dmFyIHNwZWNpZmllZFBhdGggPSBzbGlkZU9iai5jb21wbGV0aW9uUGF0aDtcblx0dmFyIHBhdGhPYmogPSBzbGlkZUNvbXBsZXRpb24ubWFpblBhdGg7XG5cblx0aWYgKHNwZWNpZmllZFBhdGgpIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShzcGVjaWZpZWRQYXRoKSkge1xuXHRcdFx0aWYgKHBhdGhTZWxlY3RlZCAmJiBzcGVjaWZpZWRQYXRoLmluZGV4T2YocGF0aFNlbGVjdGVkKSA+PSAwKSB7XG5cdFx0XHRcdHBhdGhPYmogPSBzbGlkZUNvbXBsZXRpb25bcGF0aFNlbGVjdGVkXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBhdGhPYmogPSBzbGlkZUNvbXBsZXRpb25bc3BlY2lmaWVkUGF0aFswXV07XG5cdFx0XHRcdGlmIChvbkN1clNsaWRlKSBzZXRQYXRoKHNwZWNpZmllZFBhdGhbMF0pO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRwYXRoT2JqID0gc2xpZGVDb21wbGV0aW9uW3NwZWNpZmllZFBhdGhdO1xuXHRcdFx0aWYgKG9uQ3VyU2xpZGUpIHNldFBhdGgoc3BlY2lmaWVkUGF0aCk7XG5cdFx0fVxuXHR9XG5cdC8vIGNvbnNvbGUubG9nKGlucHV0KTtcblxuXHRyZXR1cm4gcGF0aE9ialtzbGlkZUlEXTtcbn1cblxuZnVuY3Rpb24gY2hlY2tXaG9sZVBhdGgocGF0aCkge1xuXHR2YXIgcGF0aE9iaiA9IHNhdmVEYXRhLnNsaWRlQ29tcGxldGlvbltwYXRoXTtcblx0Zm9yICh2YXIga2V5IGluIHBhdGhPYmopIHtcblx0XHRpZiAoIXBhdGhPYmpba2V5XSkgcmV0dXJuIDA7XG5cdH1cblx0cmV0dXJuIDE7XG59XG5cbmZ1bmN0aW9uIGNvbXBsZXRlU2xpZGUoKSB7XG5cdGlmICghc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaW5jbHVkZSkgcmV0dXJuO1xuXG5cdHZhciBzbGlkZUlEID0gZ2xvYmFsVmFyLmN1clNsaWRlO1xuXHR2YXIgc3BlY2lmaWVkUGF0aCA9IHNsaWRlc1tzbGlkZUlEXS5jb21wbGV0aW9uUGF0aDtcblx0dmFyIHNsaWRlQ29tcGxldGlvbiA9IHNhdmVEYXRhLnNsaWRlQ29tcGxldGlvbjtcblxuXHRpZiAoc3BlY2lmaWVkUGF0aCkge1xuXHRcdGlmIChBcnJheS5pc0FycmF5KHNwZWNpZmllZFBhdGgpKSB7XG5cdFx0XHRzcGVjaWZpZWRQYXRoLmZvckVhY2goZnVuY3Rpb24gKHBhdGgsIGlkeCkge1xuXHRcdFx0XHRzbGlkZUNvbXBsZXRpb25bcGF0aF1bc2xpZGVJRF0gPSAxO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHNsaWRlQ29tcGxldGlvbltzcGVjaWZpZWRQYXRoXVtzbGlkZUlEXSA9IDE7XG5cdH0gZWxzZSBzbGlkZUNvbXBsZXRpb24ubWFpblBhdGhbc2xpZGVJRF0gPSAxO1xufVxuXG4vKipcbiAqIEBwYXJhbSBuYXZFbGVtXG4gKiBAcGFyYW0gc3R5bGVDbGFzc1xuICogQHBhcmFtIGh0bWxcbiAqL1xuZnVuY3Rpb24gY3VzdG9tTmF2U3R5bGUobmF2RWxlbSwgc3R5bGVDbGFzcywgaHRtbCkge1xuXHR2YXIgZWxlbSA9ICQoJyNzaS0nICsgbmF2RWxlbSk7XG5cdHZhciBpbml0aWFsSFRNTCA9IGVsZW0uaHRtbCgpO1xuXHR2YXIgY3VyU2xpZGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXTtcblxuXHRpZiAoaHRtbCkgZWxlbS5odG1sKGh0bWwpO1xuXG5cdGVsZW0uYWRkQ2xhc3Moc3R5bGVDbGFzcyk7XG5cblx0Y3VyU2xpZGUub25FeGl0QWN0aW9uID0gKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgb3JpZ2luYWxPbkV4aXQgPSBjdXJTbGlkZS5vbkV4aXRBY3Rpb247XG5cdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmIChvcmlnaW5hbE9uRXhpdCkgb3JpZ2luYWxPbkV4aXQuYXBwbHkodGhpcyk7XG5cdFx0XHRlbGVtLmh0bWwoaW5pdGlhbEhUTUwpO1xuXHRcdFx0ZWxlbS5yZW1vdmVDbGFzcyhzdHlsZUNsYXNzKTtcblx0XHR9O1xuXHR9KSgpO1xufVxuXG4vLy8vLy8vLy8vLy8qRmVhdHVyZTppZGViZWhvbGQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIGluc3RhQ2hlYXRBZGRvbigpIHtcblx0Ly8gY29uc29sZS5sb2coXCJIZWxsbywgSSdtIHlvdXIgaW5zdGFDaGVhdOKEoiBhZGRvbiBmb3IgdG9kYXkhXCIpO1xufVxuXG4vL3RoZSBob2x5IGNoZWF0ZnVuY3Rpb24hISFcbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gZGV2TW9kZSgpIHtcblx0Ly8gQ2hlYXQgY29kZS4gU2VlIERvb20uXG5cblx0JCgnYm9keScpLmFkZENsYXNzKCdkZXYtbW9kZScpO1xuXHRjb25zb2xlLmxvZygnR09EIE1PREUhJyk7XG5cdCQoJyNndWlkZWxpbmVzJykuc2hvdygpO1xuXG5cdCQoZG9jdW1lbnQpLmtleXVwKGZ1bmN0aW9uIChlKSB7XG5cdFx0Ly8gJ2cnIGtleSB0b2dnbGVzIGdyaWQgbGluZXNcblx0XHRpZiAoZS53aGljaCA9PSA3MSkge1xuXHRcdFx0aWYgKCQoJyNndWlkZWxpbmVzJykuY3NzKCdkaXNwbGF5JykgIT0gJ25vbmUnKSB7XG5cdFx0XHRcdCQoJyNndWlkZWxpbmVzJykuaGlkZSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnI2d1aWRlbGluZXMnKS5zaG93KCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gc2hpZnQgKyBhcnJvdyBrZXlzIGFsbG93IG5hdmlnYXRpb24gdGhyb3VnaCBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBzbGlkZXNcblx0XHRpZiAoZS5zaGlmdEtleSAmJiBlLndoaWNoID09IDM3KSB7XG5cdFx0XHRSZXZlYWwubGVmdCgpO1xuXHRcdH1cblx0XHRpZiAoZS5zaGlmdEtleSAmJiBlLndoaWNoID09IDM5KSB7XG5cdFx0XHRSZXZlYWwucmlnaHQoKTtcblx0XHR9XG5cdFx0aWYgKGUuc2hpZnRLZXkgJiYgZS53aGljaCA9PSAzOCkge1xuXHRcdFx0UmV2ZWFsLnVwKCk7XG5cdFx0fVxuXHRcdGlmIChlLnNoaWZ0S2V5ICYmIGUud2hpY2ggPT0gNDApIHtcblx0XHRcdFJldmVhbC5kb3duKCk7XG5cdFx0fVxuXG5cdFx0Ly8gJ2onIGtleSByZXZlYWxzIHBvc2l0aXZlIGZlZWRiYWNrXG5cdFx0aWYgKGUud2hpY2ggPT09IDc0KSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ3Bvc2l0aXZlJyk7XG5cdFx0fVxuXHRcdC8vICAnaycga2V5IHJldmVhbHMgbmVnYXRpdmUgZmVlZGJhY2sgMVxuXHRcdGlmIChlLndoaWNoID09PSA3NSkge1xuXHRcdFx0c2ltcGxlTW9kYWxDbG9zZSgpO1xuXHRcdFx0aWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLm5lZ2F0aXZlKSB7XG5cdFx0XHRcdHNpbXBsZU1vZGFsT3BlbignbmVnYXRpdmUnKTtcblx0XHRcdH0gZWxzZSBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwubmVnYXRpdmUxKSB7XG5cdFx0XHRcdHNpbXBsZU1vZGFsT3BlbignbmVnYXRpdmUxJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vICdsJyBrZXkgcmV2ZWFscyBuZWdhdGl2ZSBmZWVkYmFjayAyXG5cdFx0aWYgKGUud2hpY2ggPT09IDc2KSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ25lZ2F0aXZlRmluYWwnKTtcblx0XHR9XG5cdFx0Ly8gMSAtIDkgZm9yIGhvdHNwb3RzXG5cdFx0aWYgKGUud2hpY2ggPT09IDQ5ICYmIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLmhzMSkge1xuXHRcdFx0c2ltcGxlTW9kYWxDbG9zZSgpO1xuXHRcdFx0c2ltcGxlTW9kYWxPcGVuKCdoczEnKTtcblx0XHR9XG5cdFx0aWYgKGUud2hpY2ggPT09IDUwICYmIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLmhzMikge1xuXHRcdFx0c2ltcGxlTW9kYWxDbG9zZSgpO1xuXHRcdFx0c2ltcGxlTW9kYWxPcGVuKCdoczInKTtcblx0XHR9XG5cdFx0aWYgKGUud2hpY2ggPT09IDUxICYmIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLmhzMykge1xuXHRcdFx0c2ltcGxlTW9kYWxDbG9zZSgpO1xuXHRcdFx0c2ltcGxlTW9kYWxPcGVuKCdoczMnKTtcblx0XHR9XG5cdFx0aWYgKGUud2hpY2ggPT09IDUyICYmIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLmhzNCkge1xuXHRcdFx0c2ltcGxlTW9kYWxDbG9zZSgpO1xuXHRcdFx0c2ltcGxlTW9kYWxPcGVuKCdoczQnKTtcblx0XHR9XG5cdFx0aWYgKGUud2hpY2ggPT09IDUzICYmIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLmhzNSkge1xuXHRcdFx0c2ltcGxlTW9kYWxDbG9zZSgpO1xuXHRcdFx0c2ltcGxlTW9kYWxPcGVuKCdoczUnKTtcblx0XHR9XG5cdFx0aWYgKGUud2hpY2ggPT09IDU0ICYmIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLmhzNikge1xuXHRcdFx0c2ltcGxlTW9kYWxDbG9zZSgpO1xuXHRcdFx0c2ltcGxlTW9kYWxPcGVuKCdoczYnKTtcblx0XHR9XG5cdFx0aWYgKGUud2hpY2ggPT09IDU1ICYmIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLmhzNykge1xuXHRcdFx0c2ltcGxlTW9kYWxDbG9zZSgpO1xuXHRcdFx0c2ltcGxlTW9kYWxPcGVuKCdoczcnKTtcblx0XHR9XG5cdFx0aWYgKGUud2hpY2ggPT09IDU2ICYmIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLmhzOCkge1xuXHRcdFx0c2ltcGxlTW9kYWxDbG9zZSgpO1xuXHRcdFx0c2ltcGxlTW9kYWxPcGVuKCdoczgnKTtcblx0XHR9XG5cdFx0aWYgKGUud2hpY2ggPT09IDU3ICYmIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLmhzOSkge1xuXHRcdFx0c2ltcGxlTW9kYWxDbG9zZSgpO1xuXHRcdFx0c2ltcGxlTW9kYWxPcGVuKCdoczknKTtcblx0XHR9XG5cblx0XHQvLyAgJzsnIGtleSBoaWRlcyBhbGwgZmVlZGJhY2tzXG5cdFx0aWYgKGUud2hpY2ggPT0gMTg2KSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gZG8gbm90IHVzZSB0aGUgaWQgJ3Rlc3QnIGZvciBhIHNsaWRlXG5cbiQoJyNidG4tc3RhcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdGp1bXBUb1NsaWRlKDIpO1xuXHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG59KTtcblxuJChmdW5jdGlvbiAoKSB7XG5cdHNsaWRlcyA9IHtcblx0XHRzdGFydDoge1xuXHRcdFx0dHlwZTogJ3RleHQnLFxuXHRcdFx0bmF2RWxlbWVudHM6IFsnY2xvY2snXSxcblx0XHRcdGJhY2tBY3Rpb246IGZ1bmN0aW9uICgpIHt9LCAvL2xlYXZlIFN0YXJ0IGJhY2tBY3Rpb24gYXMgZnVuY3Rpb24gdG8gcHJldmVudCBJRTkgZXJyb3JzXG5cdFx0XHRvbkVudGVyQWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdGF1ZGlvOiB7XG5cdFx0XHRcdC8vIG9uRW50ZXI6IFwibWVkaWEvYXVkaW8vU3RhcnQvMC5tcDNcIlxuXHRcdFx0fSxcblx0XHRcdGluY2x1ZGU6IGZhbHNlIC8vIHRoaXMga2V5IGRldGVybWluZXMgaWYgdGhlIHNsaWRlIHdpbGwgYmUgdXNlZCBhcyBwYXJ0IG9mIHRoZSBjb21wbGV0aW9uIG9mIHRoZSBwcm9ncmVzcyBtZXRlci4gZGVmYXVsdCBpcyB0cnVlLiAgZG8gbm90IGNhbGwgY29tcGxldGVTbGlkZSgpIG9uIGFueSBzbGlkZSB3aGVyZSB0aGlzIGlzIHNldCB0byBmYWxzZVxuXHRcdH0sXG5cdFx0aW50cm86IHtcblx0XHRcdHR5cGU6ICd0ZXh0Jyxcblx0XHRcdG5hdkVsZW1lbnRzOiBbJ3N0YW5kYXJkLW1lbnUnLCAnIW1lbnUnLCAnaG9tZScsICduZXh0J10sXG5cdFx0XHRiYWNrQWN0aW9uOiBwcmV2U2xpZGUsXG5cdFx0XHRvbkVudGVyQWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdGF1ZGlvOiB7XG5cdFx0XHRcdC8vIG9uRW50ZXI6IFwibWVkaWEvYXVkaW8vU3RhcnQvMC5tcDNcIlxuXHRcdFx0fSxcblx0XHRcdGluY2x1ZGU6IGZhbHNlIC8vIHRoaXMga2V5IGRldGVybWluZXMgaWYgdGhlIHNsaWRlIHdpbGwgYmUgdXNlZCBhcyBwYXJ0IG9mIHRoZSBjb21wbGV0aW9uIG9mIHRoZSBwcm9ncmVzcyBtZXRlci4gZGVmYXVsdCBpcyB0cnVlLiAgZG8gbm90IGNhbGwgY29tcGxldGVTbGlkZSgpIG9uIGFueSBzbGlkZSB3aGVyZSB0aGlzIGlzIHNldCB0byBmYWxzZVxuXHRcdH0sXG5cdFx0djE6IHtcblx0XHRcdHR5cGU6ICd2aWRlbycsXG5cdFx0XHRuYXZFbGVtZW50czogWydzdGFuZGFyZC1tZW51JywgJyFwcm9ncmVzcycsICchbG9nbycsICchbWVudScsICdob21lJ10sXG5cdFx0XHRiYWNrQWN0aW9uOiBwcmV2U2xpZGUsXG5cdFx0XHRuZXh0QWN0aW9uOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGNvbXBsZXRlU2xpZGUoKTtcblx0XHRcdFx0bmV4dFNsaWRlKCk7XG5cdFx0XHR9LFxuXHRcdFx0b25FbnRlckFjdGlvbjogZnVuY3Rpb24gKCkge30sXG5cdFx0XHQvLyB2aWRlb1NlZWtpbmc6IHRydWUsIC8vY2hhbmdlIGdsb2JhbGx5IGluIGdsb2JhbFZhclxuXHRcdFx0dmlkZW9Mb2FkZWQ6IGZhbHNlIC8vZG9uJ3QgZWRpdFxuXHRcdH0sXG5cdFx0aTE6IHtcblx0XHRcdHR5cGU6ICdxdWl6Jyxcblx0XHRcdG5hdkVsZW1lbnRzOiBbJ3N0YW5kYXJkLW1lbnUnLCAnc3VibWl0JywgJyFtZW51JywgJ2hvbWUnXSxcblx0XHRcdG5leHRBY3Rpb246IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Y29tcGxldGVTbGlkZSgpO1xuXHRcdFx0XHRuZXh0U2xpZGUoKTtcblx0XHRcdH0sXG5cdFx0XHRiYWNrQWN0aW9uOiBwcmV2U2xpZGUsXG5cdFx0XHRvbkVudGVyQWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdGF1ZGlvOiB7XG5cdFx0XHRcdG9uRW50ZXI6ICdtZWRpYS9hdWRpby92by9ub3RoaW5nLm1wMycsXG5cdFx0XHRcdHBvc2l0aXZlOiAnbWVkaWEvYXVkaW8vdm8vbm90aGluZy5tcDMnLFxuXHRcdFx0XHRuZWdhdGl2ZTE6ICdtZWRpYS9hdWRpby92by9ub3RoaW5nLm1wMycsXG5cdFx0XHRcdG5lZ2F0aXZlMjogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJyxcblx0XHRcdFx0bmVnYXRpdmVGaW5hbDogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJ1xuXHRcdFx0fSxcblx0XHRcdHF1aXo6IHtcblx0XHRcdFx0cmFkaW86IGZhbHNlLCAvL2RlZmF1bHQgZmFsc2Vcblx0XHRcdFx0YW5zd2Vyczoge1xuXHRcdFx0XHRcdCdpMS1jb3JyZWN0MSc6IDEsXG5cdFx0XHRcdFx0J2kxLWNvcnJlY3QyJzogMSxcblx0XHRcdFx0XHQnaTEtY29ycmVjdDMnOiAxXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGF1ZGlvOiB7fSxcblx0XHRcdFx0dXNlckF0dGVtcHRzOiAyXG5cdFx0XHR9LFxuXHRcdFx0bW9kYWw6IHtcblx0XHRcdFx0cG9zaXRpdmU6ICdpMS1wb3NpdGl2ZScsXG5cdFx0XHRcdG5lZ2F0aXZlOiAnaTEtbmVnYXRpdmUnLFxuXHRcdFx0XHQvLyBuZWdhdGl2ZTI6ICdpMS1uZWdhdGl2ZS0yJyxcblx0XHRcdFx0bmVnYXRpdmVGaW5hbDogJ2kxLW5lZ2F0aXZlLWZpbmFsJ1xuXHRcdFx0fSxcblx0XHRcdGhvdHNwb3Q6IHsgY2xpY2tBbnl3aGVyZTogdHJ1ZSB9XG5cdFx0fSxcblx0XHRpMjoge1xuXHRcdFx0dHlwZTogJ3F1aXonLFxuXHRcdFx0bmF2RWxlbWVudHM6IFsnc3RhbmRhcmQtbWVudScsICdzdWJtaXQnLCAnIW1lbnUnLCAnaG9tZSddLFxuXHRcdFx0bmV4dEFjdGlvbjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb21wbGV0ZVNsaWRlKCk7XG5cdFx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdFx0fSxcblx0XHRcdGJhY2tBY3Rpb246IHByZXZTbGlkZSxcblx0XHRcdG9uRW50ZXJBY3Rpb246IGZ1bmN0aW9uICgpIHt9LFxuXHRcdFx0YXVkaW86IHtcblx0XHRcdFx0b25FbnRlcjogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJyxcblx0XHRcdFx0cG9zaXRpdmU6ICdtZWRpYS9hdWRpby92by9ub3RoaW5nLm1wMycsXG5cdFx0XHRcdG5lZ2F0aXZlMTogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJyxcblx0XHRcdFx0bmVnYXRpdmUyOiAnbWVkaWEvYXVkaW8vdm8vbm90aGluZy5tcDMnLFxuXHRcdFx0XHRuZWdhdGl2ZUZpbmFsOiAnbWVkaWEvYXVkaW8vdm8vbm90aGluZy5tcDMnXG5cdFx0XHR9LFxuXHRcdFx0cXVpejoge1xuXHRcdFx0XHRyYWRpbzogdHJ1ZSwgLy9kZWZhdWx0IGZhbHNlXG5cdFx0XHRcdGFuc3dlcnM6IHtcblx0XHRcdFx0XHQnaTItY29ycmVjdCc6IDFcblx0XHRcdFx0fSxcblx0XHRcdFx0YXVkaW86IHt9LFxuXHRcdFx0XHR1c2VyQXR0ZW1wdHM6IDJcblx0XHRcdH0sXG5cdFx0XHRtb2RhbDoge1xuXHRcdFx0XHRwb3NpdGl2ZTogJ2kyLXBvc2l0aXZlJyxcblx0XHRcdFx0bmVnYXRpdmU6ICdpMi1uZWdhdGl2ZScsXG5cdFx0XHRcdG5lZ2F0aXZlRmluYWw6ICdpMi1uZWdhdGl2ZS1maW5hbCdcblx0XHRcdH0sXG5cdFx0XHRob3RzcG90OiB7IGNsaWNrQW55d2hlcmU6IHRydWUgfVxuXHRcdH0sXG5cdFx0aTM6IHtcblx0XHRcdHR5cGU6ICdkbmQnLFxuXHRcdFx0bmF2RWxlbWVudHM6IFsnc3RhbmRhcmQtbWVudScsICdzdWJtaXQnLCAncmVzZXQnLCAnIW1lbnUnLCAnaG9tZSddLFxuXHRcdFx0bmV4dEFjdGlvbjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb21wbGV0ZVNsaWRlKCk7XG5cdFx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdFx0fSxcblx0XHRcdGJhY2tBY3Rpb246IHByZXZTbGlkZSxcblx0XHRcdG9uRW50ZXJBY3Rpb246IGZ1bmN0aW9uICgpIHt9LFxuXHRcdFx0b25FeGl0QWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdGRuZDoge1xuXHRcdFx0XHR0eXBlOiAnZG5kXzEnLFxuXHRcdFx0XHRxdWl6OiB7XG5cdFx0XHRcdFx0aTNfZHJvcDogWydpM19kcmFnMiddXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRyb3BDb3VudGVyOiB7XG5cdFx0XHRcdFx0aTNfZHJvcDogMVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR1c2VyQXR0ZW1wdHM6IDIsXG5cdFx0XHRcdGFjdGlvbnM6IHtcblx0XHRcdFx0XHQvL29wdGlvbmFsXG5cdFx0XHRcdFx0aTNfZHJhZzE6IHtcblx0XHRcdFx0XHRcdC8vIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQvLyBcdGNvbnNvbGUubG9nKCdvbkRyYWdTdGFydCcpO1xuXHRcdFx0XHRcdFx0Ly8gfSxcblx0XHRcdFx0XHRcdC8vIG9uRHJhZzogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gXHRjb25zb2xlLmxvZygnb25EcmFnJyk7XG5cdFx0XHRcdFx0XHQvLyB9LFxuXHRcdFx0XHRcdFx0Ly8gb25EcmFnT3Zlcjoge1xuXHRcdFx0XHRcdFx0Ly8gXHRpM19kcm9wOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQvLyBcdFx0Y29uc29sZS5sb2coJ29uRHJhZ092ZXInKTtcblx0XHRcdFx0XHRcdC8vIFx0fVxuXHRcdFx0XHRcdFx0Ly8gfSxcblx0XHRcdFx0XHRcdC8vIG9uRHJhZ0VuZDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gXHRjb25zb2xlLmxvZygnb25EcmFnRW5kJyk7XG5cdFx0XHRcdFx0XHQvLyB9LFxuXHRcdFx0XHRcdFx0b25Ecm9wOiB7XG5cdFx0XHRcdFx0XHRcdGkzX2Ryb3A6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHQkKCcjaTNfZHJhZzInKS5kcmFnZ2FibGUoJ29wdGlvbicsICdkaXNhYmxlZCcsIGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0XHQkKCcjaTNfZHJhZzEnKS5kcmFnZ2FibGUoJ29wdGlvbicsICdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRcdCQoJyNpM19kcmFnMicpLnJlbW92ZUNsYXNzKCdkcm9wcGVkJyk7XG5cdFx0XHRcdFx0XHRcdFx0JCgnI2kzX2RyYWcxJykuYWRkQ2xhc3MoJ2Ryb3BwZWQnKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygnb25Ecm9wJywgdGhpcyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGkzX2RyYWcyOiB7XG5cdFx0XHRcdFx0XHQvLyBvbkRyYWdTdGFydDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gXHRjb25zb2xlLmxvZygnb25EcmFnU3RhcnQnKTtcblx0XHRcdFx0XHRcdC8vIH0sXG5cdFx0XHRcdFx0XHQvLyBvbkRyYWc6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ29uRHJhZycpO1xuXHRcdFx0XHRcdFx0Ly8gfSxcblx0XHRcdFx0XHRcdC8vIG9uRHJhZ092ZXI6IHtcblx0XHRcdFx0XHRcdC8vIFx0aTNfZHJvcDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gXHRcdGNvbnNvbGUubG9nKCdvbkRyYWdPdmVyJyk7XG5cdFx0XHRcdFx0XHQvLyBcdH1cblx0XHRcdFx0XHRcdC8vIH0sXG5cdFx0XHRcdFx0XHQvLyBvbkRyYWdFbmQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ29uRHJhZ0VuZCcpO1xuXHRcdFx0XHRcdFx0Ly8gfSxcblx0XHRcdFx0XHRcdG9uRHJvcDoge1xuXHRcdFx0XHRcdFx0XHRpM19kcm9wOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0JCgnI2kzX2RyYWcxJykuZHJhZ2dhYmxlKCdvcHRpb24nLCAnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdFx0JCgnI2kzX2RyYWcyJykuZHJhZ2dhYmxlKCdvcHRpb24nLCAnZGlzYWJsZWQnLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHQkKCcjaTNfZHJhZzEnKS5yZW1vdmVDbGFzcygnZHJvcHBlZCcpO1xuXHRcdFx0XHRcdFx0XHRcdCQoJyNpM19kcmFnMicpLmFkZENsYXNzKCdkcm9wcGVkJyk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ29uRHJvcCcsIHRoaXMpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIHNuYXBwaW5nOiBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdGF1ZGlvOiB7XG5cdFx0XHRcdG9uRW50ZXI6ICdtZWRpYS9hdWRpby92by9ub3RoaW5nLm1wMycsXG5cdFx0XHRcdHBvc2l0aXZlOiAnbWVkaWEvYXVkaW8vdm8vbm90aGluZy5tcDMnLFxuXHRcdFx0XHRuZWdhdGl2ZTogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJyxcblx0XHRcdFx0bmVnYXRpdmVGaW5hbDogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJ1xuXHRcdFx0fSxcblx0XHRcdG1vZGFsOiB7XG5cdFx0XHRcdC8vIG5vRmVlZGJhY2s6IHRydWUsIC8vZGVmYXVsdHMgdG8gZmFsc2UsIHNldCB0byB0cnVlIGlmIHlvdSBkbyBub3Qgd2FudCBmZWVkYmFja3Ncblx0XHRcdFx0cG9zaXRpdmU6ICdpMy1wb3NpdGl2ZScsXG5cdFx0XHRcdG5lZ2F0aXZlOiAnaTMtbmVnYXRpdmUnLFxuXHRcdFx0XHRuZWdhdGl2ZUZpbmFsOiAnaTMtbmVnYXRpdmUtZmluYWwnXG5cdFx0XHR9LFxuXHRcdFx0aG90c3BvdDogeyBjbGlja0FueXdoZXJlOiB0cnVlIH1cblx0XHR9LFxuXHRcdGVuZDoge1xuXHRcdFx0dHlwZTogJ3RleHQnLFxuXHRcdFx0bmF2RWxlbWVudHM6IFsnZXhpdC1zbGlkZScsICdob21lJywgJyFleGl0J10sXG5cdFx0XHRiYWNrQWN0aW9uOiBwcmV2U2xpZGUsXG5cdFx0XHRuZXh0QWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdG9uRW50ZXJBY3Rpb246IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Ly8gRG8gbm90IGNoZWNrIGZvciBcImxtc0Nvbm5lY3RlZFwiLCBiZWNhdXNlIHRoYXQncyBkb25lIGluIHNldFNjb3JtQ29tcGxldGlvbigpIGFueXdheXMgYW5kIEFJQ0Mgd291bGRuJ3Qgd29yayBhbnltb3JlLlxuXHRcdFx0XHRzZXRTY29ybUNvbXBsZXRpb24oKTtcblx0XHRcdH0sXG5cdFx0XHRhdWRpbzoge1xuXHRcdFx0XHQvLyBvbkVudGVyOiBcIm1lZGlhL2F1ZGlvL1Jlc3VsdC8wLm1wM1wiLFxuXHRcdFx0fSxcblx0XHRcdGluY2x1ZGU6IGZhbHNlXG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIEFkZCBcInNpLW1vZGFsLWNsb3NlclwiIGJ1dHRvbiB0byBhbGwgbW9kYWxzXG5cbnZhciAkc2lNb2RhbENsb3NlciA9ICQucGFyc2VIVE1MKFxuXHQnPGJ1dHRvbiBjbGFzcz1cInNpLW1vZGFsLWNsb3NlciBzaS1tb2RhbC1jbG9zZXJfX2pzXCI+PGltZyBjbGFzcz1cInNpLWltZy1zd2FwX19qcyBpbmplY3QtbWVcIiBzcmM9XCIuL21lZGlhL2ltZ3MvbmF2aWdhdGlvbi9jbGFzc2ljL2Nsb3NlLWNyb3NzLnN2Z1wiIGFsdD1cIlwiIC8+PC9idXR0b24+J1xuKTtcbiQoJy5zaS1tb2RhbF9fanMnKS5hcHBlbmQoJHNpTW9kYWxDbG9zZXIpO1xuXG4vLzNkIGNhcm91c2VsXG5mdW5jdGlvbiBkaXNhYmxlQnV0dG9ucyhzZWxlY3Rvcikge1xuICAgICQoc2VsZWN0b3IpLmFkZENsYXNzKCdub0V2ZW50cycpXG4gICAgJChzZWxlY3RvcikuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG59XG5cblxuZnVuY3Rpb24gZW5hYmxlQnV0dG9ucyhzZWxlY3Rvcikge1xuICAgICQoc2VsZWN0b3IpLnJlbW92ZUNsYXNzKCdub0V2ZW50cycpXG4gICAgJChzZWxlY3RvcikucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbn1cblxuZnVuY3Rpb24gdGhyZWVETmF2aWdhdGlvblNldHVwKCkge1xuICAgICQoJy5yaWdodEJ1dHRvbicpLm9uKCdjbGljay50aHJlZWRjYXJvdXNlbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyZWVETW92ZSgncmlnaHQnKVxuICAgIH0pXG4gICAgJCgnLmxlZnRCdXR0b24nKS5vbignY2xpY2sudGhyZWVkY2Fyb3VzZWwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRocmVlRE1vdmUoJ2xlZnQnKVxuICAgIH0pXG5cbiAgICAvL3RocmVlREJ1dHRvbnMgPSByb3RhdGluZyBpdGVtcy9idXR0b25zXG4gICAgdGhyZWVEQnV0dG9ucyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLml0ZW1zID0gJCgnLnRocmVlZGInKVxuICAgIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmNsaWNrcyA9IDA7XG4gICAgLy9NYWtlcyBvbmx5IHRoZSBmcm9udCBidXR0b24gY2xpY2thYmxlXG4gICAgZGlzYWJsZUJ1dHRvbnModGhyZWVEQnV0dG9ucylcbiAgICBlbmFibGVCdXR0b25zKHRocmVlREJ1dHRvbnNbMF0pXG5cbiAgICAvLzNkIGNzcyBzZXR1cFxuICAgIGNzc1NldHVwKClcbn1cblxuZnVuY3Rpb24gY3NzU2V0dXAoKSB7XG4gICAgLy9odG1sIGl0ZW1zIHRvIHBvc2l0aW9uXG4gICAgdmFyIHRocmVlREl0ZW1zID0gJCgnLnRocmVlZGInKVxuXG4gICAgLy9udW1iZXIgb2YgaXRlbXNcbiAgICB2YXIgbnVtYmVyT2ZJdGVtcyA9IHRocmVlREl0ZW1zLmxlbmd0aDtcblxuICAgIC8vYXNzaWduIGZpcnN0IHBvc2l0aW9uc1xuICAgIHRocmVlREl0ZW1zLmVhY2goZnVuY3Rpb24gKGlkeCwgaXRlbSkge1xuICAgICAgICAkKGl0ZW0pLmFkZENsYXNzKCdpdGVtJyArIChpZHggKyAxKSArICdvZicgKyBudW1iZXJPZkl0ZW1zICsgJyAnICsgbnVtYmVyT2ZJdGVtcyArICdpdGVtcycpXG4gICAgfSlcbn1cblxuXG5mdW5jdGlvbiB0aHJlZURNb3ZlKHJpZ2h0T3JMZWZ0KSB7XG4gICAgLy90aHJlZURCdXR0b25zID0gcm90YXRpbmcgaXRlbXMvYnV0dG9uc1xuICAgIHZhciB0aHJlZURCdXR0b25zID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaXRlbXNcblxuICAgIC8vY2xpY2tzIGtlZXBzIHRyYWNrIG9mIHRoZSBpdGVtcydzIHBvc2l0aW9uXG4gICAgdmFyIGNsaWNrcyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmNsaWNrc1xuXG4gICAgLy9udW1iZXIgb2YgaXRlbXNcbiAgICB2YXIgbnVtYmVyT2ZJdGVtcyA9ICQoJy50aHJlZWRiJykubGVuZ3RoO1xuXG4gICAgLy9udW1iZXIgZm9yIGEgbGVmdCB0dXJuXG4gICAgdmFyIHR1cm47XG4gICAgc3dpdGNoIChyaWdodE9yTGVmdCkge1xuICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgICAgIHR1cm4gPSBudW1iZXJPZkl0ZW1zIC0gMTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwibGVmdFwiOlxuICAgICAgICAgICAgdHVybiA9IDE7XG4gICAgfVxuICAgIC8vY2hhbmdlIHBvc2l0aW9ucyB0byB0aGUgbGVmdFxuICAgIHRocmVlREJ1dHRvbnMuZWFjaChmdW5jdGlvbiAoaWR4LCBidXR0b24pIHtcbiAgICAgICAgdmFyIGN1cnJlbnRQb3NpdGlvbiA9ICgoaWR4ICsgY2xpY2tzKSAlIG51bWJlck9mSXRlbXMpICsgMTtcbiAgICAgICAgdmFyIG5leHRQb3NpdGlvbiA9ICgoaWR4ICsgdHVybiArIGNsaWNrcykgJSBudW1iZXJPZkl0ZW1zKSArIDFcblxuICAgICAgICAkKGJ1dHRvbikucmVtb3ZlQ2xhc3MoJ2l0ZW0nICsgY3VycmVudFBvc2l0aW9uICsgXCJvZlwiICsgbnVtYmVyT2ZJdGVtcylcbiAgICAgICAgJChidXR0b24pLmFkZENsYXNzKCdpdGVtJyArIG5leHRQb3NpdGlvbiArIFwib2ZcIiArIG51bWJlck9mSXRlbXMpXG5cbiAgICAgICAgLy9NYWtlcyBvbmx5IHRoZSBuZXcgZnJvbnQgYnV0dG9uIGNsaWNrYWJsZVxuICAgICAgICBpZiAobmV4dFBvc2l0aW9uID09PSAxKSB7XG4gICAgICAgICAgICBkaXNhYmxlQnV0dG9ucyh0aHJlZURCdXR0b25zKVxuICAgICAgICAgICAgZGlzYWJsZUJ1dHRvbnModGhpcylcbiAgICAgICAgICAgIGVuYWJsZUJ1dHRvbnMoYnV0dG9uKVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIC8vcHJldmVudCBmYXN0IGNsaWNraW5nXG4gICAgLy8gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgLy8gICAgIGVuYWJsZUJ1dHRvbnMoJy5sZWZ0QnV0dG9uIC5yaWdodEJ1dHRvbicpXG4gICAgLy8gfSwgMzAwKVxuXG4gICAgLy91cGRhdGUgY3VycmVudCBwb3NpdGlvblxuICAgIGNsaWNrcyArPSB0dXJuXG4gICAgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uY2xpY2tzID0gY2xpY2tzXG59XG52YXIgc2lBdWRpbyA9IHt9XG5cbmZ1bmN0aW9uIGluaXRBdWRpbygpe1xuXHRzaUF1ZGlvW1wic2Z4XCJdID0ge31cblx0c2lBdWRpb1tcInNmeFwiXVtcImNsaWNrXCJdID0gbmV3IEhvd2woe1xuXHRcdHNyYzogW1wibWVkaWEvYXVkaW8vc291bmRzL21vdXNlX2NsaWNrLm1wM1wiXSxcblx0XHR2b2x1bWU6IDAuOCxcblx0fSk7XG5cdHNpQXVkaW9bXCJzZnhcIl0ud3JvbmcgPSBuZXcgSG93bCh7XG5cdFx0c3JjOiBbXCJtZWRpYS9hdWRpby9zb3VuZHMvbmVnYXRpdmUubXAzXCJdLFxuXHRcdHZvbHVtZTogMC41LFxuXHR9KTtcblx0c2lBdWRpb1tcInNmeFwiXS5yaWdodCA9IG5ldyBIb3dsKHtcblx0XHRzcmM6IFtcIm1lZGlhL2F1ZGlvL3NvdW5kcy9wb3NpdGl2ZS5tcDNcIl0sXG5cdFx0dm9sdW1lOiAwLjUsXG5cdH0pO1xuXHRzaUF1ZGlvW1wic2Z4XCJdLm5vdGhpbmcgPSBuZXcgSG93bCh7XG5cdFx0c3JjOiBbXCJtZWRpYS9hdWRpby9zb3VuZHMvbm90aGluZy5tcDNcIl0sXG5cdH0pO1xuXG5cdGZvcihrZXkgaW4gc2xpZGVzKXtcblx0XHRzaUF1ZGlvW2tleV0gPSB7fVxuXHRcdGlmKHNsaWRlc1trZXldW1wiYXVkaW9cIl0pe1xuXHRcdFx0dmFyIGF1ZGlvID0gc2xpZGVzW2tleV1bXCJhdWRpb1wiXTtcblx0XHRcdGZvcih0cmFjayBpbiBhdWRpbyl7XG5cdFx0XHRcdHNpQXVkaW9ba2V5XVt0cmFja10gPSBuZXcgSG93bCh7XG5cdFx0XHRcdFx0c3JjOiBhdWRpb1t0cmFja11cblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9ZWxzZXtcblx0XHRcdHNsaWRlc1trZXldW1wiYXVkaW9cIl0gPSB7fVxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiB2aWRlb0NoZWNrKCkge1xuXHR2YXIgdHlwZSA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnR5cGU7XG5cdGlmICh0eXBlID09ICd2aWRlbycpIHtcblx0XHR2YXIgdmlkZW8gPSBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJ3ZpZGVvJylbMF07XG5cdFx0dmFyIHZpZGVvSUQgPSBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJ3ZpZGVvJylbMF0uaWQ7XG5cblx0XHRpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0udmlkZW9Mb2FkZWQgPT0gZmFsc2UpIHtcblx0XHRcdHZpZGVvanModmlkZW9JRCwge1xuXHRcdFx0XHRsYW5ndWFnZTogJ2VuJyxcblx0XHRcdFx0YXV0b3BsYXk6IHRydWUsXG5cdFx0XHRcdGNvbnRyb2xCYXI6IHtcblx0XHRcdFx0XHR2b2x1bWVQYW5lbDoge1xuXHRcdFx0XHRcdFx0aW5saW5lOiB0cnVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRodG1sNToge1xuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZG9jcy52aWRlb2pzLmNvbS9kb2NzL2d1aWRlcy90ZXh0LXRyYWNrcy5odG1sI2VtdWxhdGVkLXRleHQtdHJhY2tzXG5cdFx0XHRcdFx0Ly8gcHJldmVudHMgaVBob25lIGFuZCBzYWZhcmkgZnJvbSB1c2luZyB0aGVpciBvd24gc3VidGl0bGUgc3lzdGVtXG5cdFx0XHRcdFx0bmF0aXZlVGV4dFRyYWNrczogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0cGx1Z2luczoge1xuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9rbW9za3dpYWsvdmlkZW9qcy1yZXNvbHV0aW9uLXN3aXRjaGVyI3BsdWdpbi1vcHRpb25zXG5cdFx0XHRcdFx0dmlkZW9Kc1Jlc29sdXRpb25Td2l0Y2hlcjoge1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDogJ2hpZ2gnLFxuXHRcdFx0XHRcdFx0ZHluYW1pY0xhYmVsOiB0cnVlXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vY3RkMTUwMC92aWRlb2pzLWhvdGtleXMjb3B0aW9uc1xuXHRcdFx0XHRcdGhvdGtleXM6IHtcblx0XHRcdFx0XHRcdGVuYWJsZU51bWJlcnM6IGZhbHNlLFxuXHRcdFx0XHRcdFx0ZW5hYmxlTW9kaWZpZXJzRm9yTnVtYmVyczogZmFsc2UsXG5cdFx0XHRcdFx0XHRhbHdheXNDYXB0dXJlSG90a2V5czogdHJ1ZVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c2Vla0J1dHRvbnM6IHtcblx0XHRcdFx0XHRcdGJhY2s6IDEwXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KS5yZWFkeShmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gZGlzYWJsZSBwcm9ncmVzcyBjb250cm9sIChzZWVraW5nKSBpZiBnbG9iYWxWYXIgb3IgZGF0YS5qcyBpcyBjb25maWd1cmVkIHRoYXQgd2F5LlxuXHRcdFx0XHQvLyB2aWRlb1NlZWtpbmcgKGRhdGEuanMpIGlzIG92ZXJydWxpbmcgcHJvZ3Jlc3NDb250cm9sIChnbG9iYWxWYXIpLlxuXHRcdFx0XHQvLyBpZiBkZXZNb2RlIGlzIG9uLCBzZWVraW5nIGlzIGFsd2F5cyBlbmFibGVkLlxuXG5cdFx0XHRcdGlmICghZ2xvYmFsVmFyLmRldk1vZGUpIHtcblx0XHRcdFx0XHRpZiAoIXNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnZpZGVvU2Vla2luZykge1xuXHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS52aWRlb1NlZWtpbmcgPT09IGZhbHNlIHx8XG5cdFx0XHRcdFx0XHRcdGdsb2JhbFZhci52aWRlby5wcm9ncmVzc0NvbnRyb2wgPT09IGZhbHNlXG5cdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0dmlkZW9qcyhcblx0XHRcdFx0XHRcdFx0XHR2aWRlb0lEXG5cdFx0XHRcdFx0XHRcdCkuY29udHJvbEJhci5wcm9ncmVzc0NvbnRyb2wuZGlzYWJsZSgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh2aWRlb2pzKHZpZGVvSUQpLnRleHRUcmFja3MoKS50cmFja3NfLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHQvLyBzdWJ0aXRsZS9jYXB0aW9ucyBzdHlsZSBpcyBzZXQgdXAgaGVyZSAoZGVmYXVsdHMgaW4gY29tbWVudHMpXG5cdFx0XHRcdFx0Ly8gTk9URTogdXNlICNYWFggaGV4IHN0eWxlIGZvciBjb2xvcnMhICN4eHggb3IgI3h4eHh4eCB3aWxsIG5vdCB3b3JrIVxuXHRcdFx0XHRcdHZhciBzdWJ0aXRsZVNldHRpbmdzID0ge1xuXHRcdFx0XHRcdFx0YmFja2dyb3VuZE9wYWNpdHk6ICcwLjUnLCAvL1x0XHRcdFx0XCIxXCJcblx0XHRcdFx0XHRcdGVkZ2VTdHlsZTogJ2Ryb3BzaGFkb3cnLCAvL1x0XHRcdFx0XHRub3Qgc2V0IChub25lLCBudWxsLCAwLCAnJyBkb2Vzbid0IHdvcmssIG9ubHkgbm90IHNldHRpbmcgaXQgYXQgYWxsIHdpbGwgc2V0IGl0IHRvICdub25lJylcblx0XHRcdFx0XHRcdGNvbG9yOiAnI0ZGRicsIC8vXHRcdFx0XHRcdFx0XHRcIiNGRkZcIlxuXHRcdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yOiAnIzAwMCcsIC8vXHRcdFx0XHRcdFwiIzAwMFwiXG5cdFx0XHRcdFx0XHR0ZXh0T3BhY2l0eTogJzEnLCAvL1x0XHRcdFx0XHRcdFwiMVwiXG5cdFx0XHRcdFx0XHR3aW5kb3dPcGFjaXR5OiAnMCcsIC8vXHRcdFx0XHRcdFx0XCIwXCJcblx0XHRcdFx0XHRcdGZvbnRGYW1pbHk6ICdwcm9wb3J0aW9uYWxTYW5zU2VyaWYnLCAvL1x0XHRcInByb3BvcnRpb25hbFNhbnNTZXJpZlwiXG5cdFx0XHRcdFx0XHR3aW5kb3dDb2xvcjogJyNGRkYnIC8vXHRcdFx0XHRcdFx0XCIjMDAwXCJcblx0XHRcdFx0XHRcdC8vZm9udFBlcmNlbnQ6IDEgLy9cdFx0XHRcdFx0XHRcdG5vdCBzZXQgKDEsIDEuMCwgMS4wMCwgZXRjIGRvZXNuJ3Qgd29yaywgb25seSBub3Qgc2V0dGluZyBpdCBhdCBhbGwgd2lsbCBzZXQgaXQgdG8gMTAwJSlcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHZpZGVvanModmlkZW9JRCkudGV4dFRyYWNrU2V0dGluZ3Muc2V0VmFsdWVzKFxuXHRcdFx0XHRcdFx0c3VidGl0bGVTZXR0aW5nc1xuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0dmlkZW9qcyh2aWRlb0lEKS50ZXh0VHJhY2tTZXR0aW5ncy51cGRhdGVEaXNwbGF5KCk7XG5cblx0XHRcdFx0XHQvLyB0aGlzIHdvdWxkIHNob3cgdGhlIGZpcnN0IHN1YnRpdGxlIHRyYWNrXG5cdFx0XHRcdFx0Ly8gdmlkZW9qcyh2aWRlb0lEKS50ZXh0VHJhY2tzX1swXS5tb2RlID0gXCJzaG93aW5nXCJcblxuXHRcdFx0XHRcdC8vIHByaW50cyBvdXQgYSBuaWNlIHRhYmxlIG9mIHRoZSBjdXJyZW50IHN1YnRpdGxlIHN0eWxlIHNldHRpbmdzXG5cdFx0XHRcdFx0Ly8gY29uc29sZS50YWJsZSh2aWRlb2pzKHZpZGVvSUQpLnRleHRUcmFja1NldHRpbmdzLmdldFZhbHVlcygpKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnZpZGVvTG9hZGVkID0gdHJ1ZTtcblxuXHRcdFx0XHR2aWRlb2pzKHZpZGVvSUQpLnBsYXkoKTtcblxuXHRcdFx0XHQvLyBPbGQgd2F5IG9mIGRpc2FibGluZyBzZWVraW5nLlxuXHRcdFx0XHQvLyBPYnNvbGV0ZSBiZWNhdXNlIGl0J3Mgbm90IHJlbGlhYmxlIGluIElFLiBOZXcgbmF0aXZlIG1ldGhvZCBpcy5cblx0XHRcdFx0LyogaWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnZpZGVvU2Vla2luZyA9PSBmYWxzZSkge1xuXHRcdFx0XHRcdHZhciBzdXBwb3NlZEN1cnJlbnRUaW1lID0gMDtcblx0XHRcdFx0XHR2aWRlby5hZGRFdmVudExpc3RlbmVyKCd0aW1ldXBkYXRlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoIXZpZGVvLnNlZWtpbmcpIHtcblx0XHRcdFx0XHRcdFx0c3VwcG9zZWRDdXJyZW50VGltZSA9IHZpZGVvLmN1cnJlbnRUaW1lO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vYWxsb3dzIGJhY2t3YXJkcyBtb3ZlbWVudCBvZiB0cmFja2JhciBidXQgY2FuJ3QgbW92ZSB0cmFja2JhciBmb3J3YXJkXG5cdFx0XHRcdFx0dmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignc2Vla2luZycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKHZpZGVvLmN1cnJlbnRUaW1lID4gc3VwcG9zZWRDdXJyZW50VGltZSkge1xuXHRcdFx0XHRcdFx0XHR2aWRlby5jdXJyZW50VGltZSA9IHN1cHBvc2VkQ3VycmVudFRpbWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gKi9cblx0XHRcdH0pO1xuXHRcdFx0dmlkZW9qcyh2aWRlb0lEKS5vbignZW5kZWQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0Z2xvYmFsVmFyLnZpZGVvU2VlbltnbG9iYWxWYXIuY3VyU2xpZGVdID0gdHJ1ZTtcblx0XHRcdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubmV4dEFjdGlvbigpO1xuXHRcdFx0fSk7XG5cdFx0XHRpZihnbG9iYWxWYXIuZmFkZU5hdmlnYXRpb24pe1xuXHRcdFx0XHR2aWRlb2pzKHZpZGVvSUQpLm9uKFwidXNlcmFjdGl2ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkKFwiI3NpLW5hdi1jb250YWluZXJcIikucmVtb3ZlQ2xhc3MoXCJ2anMtZmFkZS1vdXRcIik7XG5cdFx0XHRcdH0pO1xuXHRcblx0XHRcdFx0dmlkZW9qcyh2aWRlb0lEKS5vbihcInVzZXJpbmFjdGl2ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIXZpZGVvanModmlkZW9JRCkucGF1c2VkKCkpIHtcblx0XHRcdFx0XHQkKFwiI3NpLW5hdi1jb250YWluZXJcIikuYWRkQ2xhc3MoXCJ2anMtZmFkZS1vdXRcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmlkZW9qcyh2aWRlb0lEKS5jdXJyZW50VGltZSgwKTtcblx0XHRcdHZpZGVvanModmlkZW9JRCkucGxheSgpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRpZiAoJCgnc2VjdGlvbicpLmZpbmQoJ3ZpZGVvJykubGVuZ3RoID4gMCkge1xuXHRcdFx0JCgnc2VjdGlvbicpXG5cdFx0XHRcdC5maW5kKCd2aWRlbycpWzBdXG5cdFx0XHRcdC5wYXVzZSgpO1xuXHRcdH1cblx0fVxufVxuXG52YXIgdW5sb2NrZXJTb3VuZCA9IG5ldyBIb3dsKHtcblx0c3JjOiBbJ21lZGlhL2F1ZGlvL3NvdW5kcy9ub3RoaW5nLm1wMyddXG59KTtcbnVubG9ja2VyU291bmQub24oJ3VubG9jaycsIGZ1bmN0aW9uICgpIHtcblx0Ly8gY29uc29sZS5sb2coJ0hPV0xFUjogQXVkaW8gdW5sb2NrZWQuJyk7XG5cdGhpZGVQcmVsb2FkZXIoKTtcblx0dW5sb2NrZXJTb3VuZC5wbGF5KCk7XG59KTtcbnVubG9ja2VyU291bmQub24oJ3BsYXknLCBmdW5jdGlvbiAoKSB7XG5cdC8vIGNvbnNvbGUubG9nKCdIT1dMRVI6IEF1ZGlvIHBsYXlpbmcuJyk7XG5cdGhpZGVQcmVsb2FkZXIoKTtcbn0pO1xudW5sb2NrZXJTb3VuZC5wbGF5KCk7XG5cbmZ1bmN0aW9uIGluaXRQcmVsb2FkZXIoKSB7XG5cdC8vIFNFVFVQIFRIRSBQUkVMT0FERVJcblx0d2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHQkKCcjcHJlbG9hZGVyX3RleHRfMScpLmZhZGVPdXQoJ3Nsb3cnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHQkKCcjcHJlbG9hZGVyX3RleHRfMicpLmZhZGVJbignc2xvdycpO1xuXHRcdH0pO1xuXHRcdCQoJyNQcmVsb2FkZXInKS5vbignY2xpY2sgdG91Y2gnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHRcdFx0aGlkZVByZWxvYWRlcigpO1xuXHRcdH0pO1xuXHR9O1xuXHQvLyAkKCdzZWN0aW9uLnByZXNlbnQnKS5oaWRlKCk7XG59XG5cbmZ1bmN0aW9uIGhpZGVQcmVsb2FkZXIoKSB7XG5cdCQoJyNQcmVsb2FkZXInKS5mYWRlT3V0KCdzbG93JywgZnVuY3Rpb24gKCkge1xuXHRcdCQoJ3NlY3Rpb24ucHJlc2VudCcpLmZhZGVJbignc2xvdycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXSAhPT0gdW5kZWZpbmVkICYmIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnR5cGUgPT0gJ3ZpZGVvJykge1xuXHRcdFx0XHR2YXIgdmlkZW8gPSBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJ3ZpZGVvJylbMF07XG5cdFx0XHRcdHZpZGVvanModmlkZW8ucGxheWVySWQpLnBsYXkoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8vIGluaXRQcmVsb2FkZXIoKVxuXG4vLy8vLy8vLy8vLy8qRmVhdHVyZTpQb3NpdGl2ZSBGZWVkYmFjayBGdW5jdGlvbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLyoqXG4gKlxuICovXG5mdW5jdGlvbiBpbml0RmVlZGJhY2tzKCkge1xuXHR2YXIgbW9kYWxDb250YWluZXIgPSAkKCcuc2ktbW9kYWwtY29udGFpbmVyX19qcycpO1xuXHR2YXIgbW9kYWxzID0gJCgnLnNpLW1vZGFsX19qcycpO1xuXHR2YXIgbW9kYWxDbG9zZXJzID0gJCgnLnNpLW1vZGFsLWNsb3Nlcl9fanMnKTtcblxuXHRtb2RhbHMub24oJ2NsaWNrLnByZXZlbnQnLCBmdW5jdGlvbiAoZSkge1xuXHRcdHZhciBob3RzcG90ID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaG90c3BvdDtcblx0XHR2YXIgY2xpY2tBbnl3aGVyZUhvdHNwb3QgPSBob3RzcG90ICYmIGhvdHNwb3QuY2xpY2tBbnl3aGVyZTtcblxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGlmICghY2xpY2tBbnl3aGVyZUhvdHNwb3QpIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH0pO1xuXHRtb2RhbENvbnRhaW5lci5vbignY2xpY2suY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG5cdFx0bW9kYWxDbG9zaW5nQWN0aW9ucygpO1xuXHR9KTtcblx0bW9kYWxDbG9zZXJzLmVhY2goZnVuY3Rpb24gKGlkeCwgY2xvc2VyKSB7XG5cdFx0JChjbG9zZXIpLm9uKCdjbGljay5jbG9zZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdG1vZGFsQ2xvc2luZ0FjdGlvbnMoKTtcblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gYW5zd2VyQ29ycmVjdCgpIHtcblx0dmFyIGN1cnJlbnRNb2RhbCA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLnBvc2l0aXZlO1xuXHR2YXIgbW9kYWxDb250YWluZXIgPSAkKCcuc2ktbW9kYWwtY29udGFpbmVyX19qcycpO1xuXHRtb2RhbENvbnRhaW5lci5hZGRDbGFzcygnc2ktbW9kYWwtY29udGFpbmVyLW9wZW4nKTtcblx0JCgnIycgKyBjdXJyZW50TW9kYWwpLmFkZENsYXNzKCdzaS1jdXJyZW50LW1vZGFsJyk7XG5cdGdsb2JhbFZhci5jdXJyZW50TW9kYWwgPSBjdXJyZW50TW9kYWw7XG5cdGdsb2JhbFZhci5jdXJyZW50TW9kYWxUeXBlID0gJ3Bvc2l0aXZlJztcblx0dmFyIHR5cGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS50eXBlO1xuXHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVt0eXBlXS50cnlzID0gMDtcblx0aWYgKHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5wb3NpdGl2ZSkge1xuXHRcdHNpQXVkaW8uc2Z4LnJpZ2h0Lm9uY2UoJ2VuZCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5wb3NpdGl2ZS5wbGF5KCk7XG5cdFx0fSk7XG5cdFx0c2lBdWRpby5zZngucmlnaHQucGxheSgpO1xuXHR9IGVsc2Uge1xuXHRcdHNpQXVkaW8uc2Z4LnJpZ2h0LnBsYXkoKTtcblx0fVxuXG5cdGlmICh0eXBlb2Ygc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25TdWNjZXNzQWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25TdWNjZXNzQWN0aW9uKCk7XG5cdH1cbn1cblxuLy8vLy8vLy8vLy8vKkZlYXR1cmU6TmVnYXRpdmUgRmVlZGJhY2sgRnVuY3Rpb25zLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vKipcbiAqXG4gKi9cbmZ1bmN0aW9uIGFuc3dlckluY29ycmVjdCgpIHtcblx0dmFyIHR5cGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS50eXBlO1xuXHR2YXIgdHJ5cyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnRyeXM7XG5cdHZhciBhdHRlbXB0cyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnVzZXJBdHRlbXB0cztcblx0dmFyIG1vZGFsQ29udGFpbmVyID0gJCgnLnNpLW1vZGFsLWNvbnRhaW5lcl9fanMnKTtcblx0aWYgKGF0dGVtcHRzID09PSAwKSB7XG5cdFx0dHJ5cyA9IDA7XG5cdH0gZWxzZSB7XG5cdFx0dHJ5cysrO1xuXHR9XG5cdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnRyeXMgPSB0cnlzO1xuXG5cdGlmICh0cnlzIDwgYXR0ZW1wdHMgfHwgYXR0ZW1wdHMgPT09IDApIHtcblx0XHR2YXIgY3VycmVudE1vZGFsO1xuXHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5tb2RhbFsnbmVnYXRpdmUnICsgdHJ5c10pIHtcblx0XHRcdGN1cnJlbnRNb2RhbCA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsWyduZWdhdGl2ZScgKyB0cnlzXTtcblx0XHRcdGdsb2JhbFZhci5jdXJyZW50TW9kYWwgPSBjdXJyZW50TW9kYWw7XG5cdFx0XHRnbG9iYWxWYXIuY3VycmVudE1vZGFsVHlwZSA9ICduZWdhdGl2ZScgKyB0cnlzO1xuXHRcdH0gZWxzZSBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwubmVnYXRpdmUpIHtcblx0XHRcdGN1cnJlbnRNb2RhbCA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLm5lZ2F0aXZlO1xuXHRcdFx0Z2xvYmFsVmFyLmN1cnJlbnRNb2RhbCA9IGN1cnJlbnRNb2RhbDtcblx0XHRcdGdsb2JhbFZhci5jdXJyZW50TW9kYWxUeXBlID0gJ25lZ2F0aXZlJztcblx0XHR9XG5cblx0XHRtb2RhbENvbnRhaW5lci5hZGRDbGFzcygnc2ktbW9kYWwtY29udGFpbmVyLW9wZW4nKTtcblx0XHQkKCcjJyArIGN1cnJlbnRNb2RhbCkuYWRkQ2xhc3MoJ3NpLWN1cnJlbnQtbW9kYWwnKTtcblx0XHRpZiAoc2lBdWRpb1tnbG9iYWxWYXIuY3VyU2xpZGVdWyduZWdhdGl2ZScgKyB0cnlzXSkge1xuXHRcdFx0c2lBdWRpby5zZngud3Jvbmcub25jZSgnZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRzaUF1ZGlvW2dsb2JhbFZhci5jdXJTbGlkZV1bJ25lZ2F0aXZlJyArIHRyeXNdLnBsYXkoKTtcblx0XHRcdH0pO1xuXHRcdFx0c2lBdWRpby5zZngud3JvbmcucGxheSgpO1xuXHRcdH0gZWxzZSBpZiAoc2lBdWRpb1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5lZ2F0aXZlKSB7XG5cdFx0XHRzaUF1ZGlvLnNmeC53cm9uZy5vbmNlKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5uZWdhdGl2ZS5wbGF5KCk7XG5cdFx0XHR9KTtcblx0XHRcdHNpQXVkaW8uc2Z4Lndyb25nLnBsYXkoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2lBdWRpby5zZngud3JvbmcucGxheSgpO1xuXHRcdH1cblxuXHRcdGlmICh0eXBlb2Ygc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25GYWlsdXJlQWN0aW9uMSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25GYWlsdXJlQWN0aW9uMSgpO1xuXHRcdH1cblx0fSBlbHNlIGlmIChhdHRlbXB0cyAhPT0gMCAmJiB0cnlzID09PSBhdHRlbXB0cykge1xuXHRcdGN1cnJlbnRNb2RhbCA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLm5lZ2F0aXZlRmluYWw7XG5cdFx0Z2xvYmFsVmFyLmN1cnJlbnRNb2RhbCA9IGN1cnJlbnRNb2RhbDtcblx0XHRnbG9iYWxWYXIuY3VycmVudE1vZGFsVHlwZSA9ICduZWdhdGl2ZUZpbmFsJztcblxuXHRcdG1vZGFsQ29udGFpbmVyLmFkZENsYXNzKCdzaS1tb2RhbC1jb250YWluZXItb3BlbicpO1xuXHRcdCQoJyMnICsgY3VycmVudE1vZGFsKS5hZGRDbGFzcygnc2ktY3VycmVudC1tb2RhbCcpO1xuXHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnRyeXMgPSAwO1xuXG5cdFx0aWYgKHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5uZWdhdGl2ZUZpbmFsKSB7XG5cdFx0XHRzaUF1ZGlvLnNmeC53cm9uZy5vbmNlKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5uZWdhdGl2ZUZpbmFsLnBsYXkoKTtcblx0XHRcdH0pO1xuXHRcdFx0c2lBdWRpby5zZngud3JvbmcucGxheSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzaUF1ZGlvLnNmeC53cm9uZy5wbGF5KCk7XG5cdFx0fVxuXG5cdFx0aWYgKHR5cGVvZiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5vbkZhaWx1cmVBY3Rpb24yID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5vbkZhaWx1cmVBY3Rpb24yKCk7XG5cdFx0fVxuXHR9XG59XG4vLy8vLy8vLy8vLy8qRmVhdHVyZTpQb3NpdGl2ZSBhbmQgTmVnYXRpdmUgRmVlZGJhY2sgSGFuZGxlciAmIGNsb3NlRmVlZGJhY2tBY3Rpb24vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8qKlxuICogQHBhcmFtIGJvbFxuICovXG5mdW5jdGlvbiBoYW5kbGVBbnN3ZXIoYm9sKSB7XG5cdEhvd2xlci5zdG9wKCk7XG5cdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5tb2RhbC5ub0ZlZWRiYWNrKSB7XG5cdFx0dmFyIGlzTmV4dEFjdGlvbiA9IHR5cGVvZiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5uZXh0QWN0aW9uID09PSAnZnVuY3Rpb24nO1xuXHRcdGlmIChib2wpIHtcblx0XHRcdGlmICh0eXBlb2Ygc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25TdWNjZXNzQWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm9uU3VjY2Vzc0FjdGlvbigpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAodHlwZW9mIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm9uRmFpbHVyZUFjdGlvbjEgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25GYWlsdXJlQWN0aW9uMSgpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoaXNOZXh0QWN0aW9uKSB7XG5cdFx0XHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5uZXh0QWN0aW9uKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHQvLyAkKCcjc2ktbmF2LWNvbnRhaW5lcicpLmFkZENsYXNzKCdmZWVkYmFjay1vcGVuJyk7XG5cdFx0aWYgKGJvbCA9PSB0cnVlKSB7XG5cdFx0XHRhbnN3ZXJDb3JyZWN0KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuc3dlckluY29ycmVjdCgpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSBpdGVtXG4gKi9cbmZ1bmN0aW9uIGNsb3NlRmVlZGJhY2tBY3Rpb24oaXRlbSkge1xuXHR2YXIgYm9sID0gdHlwZW9mIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24gPT09ICdmdW5jdGlvbic7XG5cdHN3aXRjaCAoaXRlbSkge1xuXHRcdGNhc2UgJ3Bvc2l0aXZlJzpcblx0XHRcdGlmIChib2wpIHtcblx0XHRcdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubmV4dEFjdGlvbigpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bmV4dFNsaWRlKCk7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICduZWdhdGl2ZSc6XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdob3RzcG90Jzpcblx0XHRcdGhhbmRsZUhvdHNwb3RDbG9zZSgpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnbmVnYXRpdmVGaW5hbCc6XG5cdFx0XHRpZiAoYm9sKSB7XG5cdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24oKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdGJyZWFrO1xuXHR9XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gRkJLZXlib2FyZCgpIHtcblx0Ly8gdmFyIGtleSA9ICQoXCIjRkJLZXlcIilcblx0dmFyIEZCaXRlbXMgPSAkKCcuc2ktY3VycmVudC1tb2RhbCcpLmNoaWxkcmVuKCkuY2hpbGRyZW4oKTtcblx0dmFyIGlkeDtcblx0aWYgKCQoRkJpdGVtc1swXSkuaGFzQ2xhc3MoJ2llOWhhY2snKSkge1xuXHRcdGlkeCA9IDE7XG5cdH0gZWxzZSB7XG5cdFx0aWR4ID0gMDtcblx0fVxuXHQkKEZCaXRlbXNbaWR4XSkuZm9jdXMoKTtcblxuXHQkKCdib2R5Jykub24oJ2tleWRvd24uZHJhZycsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuXHRcdFx0Y2FzZSA5OiAvL2N5Y2xlcyB0aHJvdWdoIG9ubHkgRkIgZWxlbWVudHMgd2hpbGUgaXQgaXMgb3BlblxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRpZiAoaWR4IDwgRkJpdGVtcy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0aWR4ICs9IDE7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWR4ID0gMDtcblx0XHRcdFx0fVxuXHRcdFx0XHQkKEZCaXRlbXNbaWR4XSkuZm9jdXMoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDI3OiAvLyBhbGxvd3MgdXNlciB0byBwcmVzcyBlc2NhcGUga2V5IHRvIHJldHVybiB0byBub3JtYWwgYW5kIHBsYWNlcyBmb2N1cyBvbiBwcmV2aW91cyBlbGVtZW50XG5cdFx0XHRcdCQoJy5zaS1jdXJyZW50LW1vZGFsJykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0JChkb2N1bWVudC5hY3RpdmVFbGVtZW50KS5ibHVyKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAxMzogLy8gYWxsb3dzIHVzZXIgdG8gcHJlc3MgZW50ZXIga2V5IHRvIHJldHVybiB0byBub3JtYWwgYW5kIHJlbW92ZXMgYWxsIGZvY3VzIChzbyB0aGF0IHN1Ym1pdCBrZXkgaXMgbm90IGNsaWNrZWQgd2hlbiBGQiBjbG9zZXMpXG5cdFx0XHRcdCQoJy5zaS1jdXJyZW50LW1vZGFsJykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0JChkb2N1bWVudC5hY3RpdmVFbGVtZW50KS5ibHVyKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9KTtcbn1cblxuLyoqXG4gKlxuICovXG5mdW5jdGlvbiBoYW5kbGVIb3RzcG90Q2xvc2UoKSB7XG5cdHZhciBzZXR0aW5ncyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmhvdHNwb3Q7XG5cdHZhciAkaG90c3BvdHMgPSAkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSkuZmluZCgnIC5ob3RzcG90LWJ1dHRvbl9fanMnKTtcblx0dmFyIGkgPSBnbG9iYWxWYXIuaG90c3BvdElkeDtcblx0dmFyIGhvdHNwb3QgPSAkaG90c3BvdHNbaV07XG5cdHZhciBtb2RhbCA9ICcjJyArIGdsb2JhbFZhci5jdXJyZW50TW9kYWw7XG5cdHZhciBtYWluT25Nb2RhbENsb3NlID0gc2V0dGluZ3Mub25Nb2RhbENsb3NlO1xuXHR2YXIgaW5kdk9uTW9kYWxDbG9zZSA9IHNldHRpbmdzLmluZHZbaSArIDFdICYmIHNldHRpbmdzLmluZHZbaSArIDFdLm9uTW9kYWxDbG9zZTtcblx0dmFyIG1vZGFsV2FybiA9IFwieW91IGhhdmVuJ3QgY3JlYXRlZCBhIG1vZGFsIGZvciB0aGlzIGhvdHNwb3RcIjtcblx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaG90c3BvdC5jbGlja0NoZWNrZXJbaSArIDFdLnNlZW4gPSB0cnVlO1xuXHRtYWluT25Nb2RhbENsb3NlICYmIG1haW5Pbk1vZGFsQ2xvc2UoaG90c3BvdCwgbW9kYWwgfHwgbW9kYWxXYXJuKTtcblx0aW5kdk9uTW9kYWxDbG9zZSAmJiBpbmR2T25Nb2RhbENsb3NlKGhvdHNwb3QsIG1vZGFsIHx8IG1vZGFsV2Fybik7XG5cblx0dmFyIHJlc3VsdCA9IHRydWU7XG5cblx0Zm9yICh2YXIgaXRlbSBpbiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5ob3RzcG90LmNsaWNrQ2hlY2tlcikge1xuXHRcdGlmIChcblx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmhvdHNwb3QuY2xpY2tDaGVja2VyW2l0ZW1dLnNlZW4gPT09IGZhbHNlICYmXG5cdFx0XHQhc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaG90c3BvdC5jbGlja0NoZWNrZXJbaXRlbV0uaGFzQ29ycmVjdENsYXNzXG5cdFx0KSB7XG5cdFx0XHRyZXN1bHQgPSBmYWxzZTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdGlmIChyZXN1bHQpIHtcblx0XHRpZiAoc2V0dGluZ3MuY3VzdG9tQ29tcGxldGVBY3Rpb24pIHtcblx0XHRcdHNldHRpbmdzLmN1c3RvbUNvbXBsZXRlQWN0aW9uKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24oKTtcblx0XHR9XG5cdH1cblx0LyoqXG5cdCAqIEBwYXJhbSBuZXh0SG90c3BvdFxuXHQgKiBAcGFyYW0gbmV4dEhvdHNwb3RTZXR0aW5nc1xuXHQgKi9cblx0ZnVuY3Rpb24gdW5sb2NrTmV4dEhvdHNwb3QobmV4dEhvdHNwb3QsIG5leHRIb3RzcG90U2V0dGluZ3MpIHtcblx0XHR2YXIgbWFpbk9uVW5sb2NrID0gc2V0dGluZ3Mub25VbmxvY2s7XG5cdFx0dmFyIGluZHZPblVubG9jayA9IG5leHRIb3RzcG90U2V0dGluZ3MgJiYgbmV4dEhvdHNwb3RTZXR0aW5ncy5vblVubG9jaztcblxuXHRcdCRob3RzcG90cy5yZW1vdmVDbGFzcyhzZXR0aW5ncy5hY3RpdmVDbGFzcyk7XG5cblx0XHR1bmxvY2soJChuZXh0SG90c3BvdCkpO1xuXHRcdCQobmV4dEhvdHNwb3QpLmFkZENsYXNzKHNldHRpbmdzLmFjdGl2ZUNsYXNzKTtcblxuXHRcdG1haW5PblVubG9jayAmJiBtYWluT25VbmxvY2sobmV4dEhvdHNwb3QpO1xuXHRcdGluZHZPblVubG9jayAmJiBpbmR2T25VbmxvY2sobmV4dEhvdHNwb3QpO1xuXHR9XG5cblx0aWYgKHNldHRpbmdzLmxpbmVhciA9PT0gdHJ1ZSkgdW5sb2NrTmV4dEhvdHNwb3QoJGhvdHNwb3RzW2kgKyAxXSwgc2V0dGluZ3MuaW5kdltpICsgMl0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSBjb250YWluZXJcbiAqL1xuZnVuY3Rpb24gbW9kYWxDbG9zaW5nQWN0aW9ucygpIHtcblx0SG93bGVyLnN0b3AoKTtcblx0aWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnR5cGUgPT09ICdob3RzcG90JyAmJiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5ob3RzcG90LmhvdmVyKSB7XG5cdFx0Y29uc29sZS5sb2coJ2hvdmVyLWhvdHNwb3QsIG5vIGNsaWNrIGF1ZGlvJyk7XG5cdH0gZWxzZSB7XG5cdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHR9XG5cblx0c3dpdGNoIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS50eXBlKSB7XG5cdFx0Y2FzZSAnZG5kJzpcblx0XHRcdHJlc2V0RG5EKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnJldmVydFRpbWUsIGdsb2JhbFZhci5kbmRBbnN3ZXJzKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3NvcnQnOlxuXHRcdFx0cmVzZXRTb3J0KCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdxdWl6Jzpcblx0XHRcdHJlc2V0UXVpeigpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Ly8gY2FzZSAnaG90c3BvdCc6XG5cdFx0Ly8gXHRyZXNldEhvdHNwb3QoKTtcblx0XHQvLyBcdGJyZWFrO1xuXHR9XG5cblx0Y2xvc2VGZWVkYmFja0FjdGlvbihnbG9iYWxWYXIuY3VycmVudE1vZGFsVHlwZSk7XG5cdCQoJ2JvZHknKS5vZmYoJ2tleWRvd24uZHJhZycpO1xuXG5cdCQoJy5zaS1tb2RhbC1jb250YWluZXJfX2pzJykucmVtb3ZlQ2xhc3MoJ3NpLW1vZGFsLWNvbnRhaW5lci1vcGVuIHNpLWhvdmVyLWhvdHNwb3QnKTtcblx0Ly8gY29uc29sZS5sb2coJCgnIycgKyBnbG9iYWxWYXIuY3VycmVudE1vZGFsKSk7XG5cdCQoJyMnICsgZ2xvYmFsVmFyLmN1cnJlbnRNb2RhbCkucmVtb3ZlQ2xhc3MoJ3NpLWN1cnJlbnQtbW9kYWwnKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gaWRcbiAqL1xuZnVuY3Rpb24gc2ltcGxlTW9kYWxPcGVuKGlkKSB7XG5cdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5tb2RhbFtpZF0pIHtcblx0XHR2YXIgY3VycmVudE1vZGFsID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWxbaWRdO1xuXHRcdGlmIChzaUF1ZGlvW2dsb2JhbFZhci5jdXJTbGlkZV1baWRdKSB7XG5cdFx0XHRzaUF1ZGlvW2dsb2JhbFZhci5jdXJTbGlkZV1baWRdLnBsYXkoKTtcblx0XHR9XG5cdFx0JCgnLnNpLW1vZGFsLWNvbnRhaW5lcl9fanMnKS5hZGRDbGFzcygnc2ktbW9kYWwtY29udGFpbmVyLW9wZW4nKTtcblx0XHQkKCcjJyArIGN1cnJlbnRNb2RhbCkuYWRkQ2xhc3MoJ3NpLWN1cnJlbnQtbW9kYWwnKTtcblx0XHRnbG9iYWxWYXIuY3VycmVudE1vZGFsID0gY3VycmVudE1vZGFsO1xuXHR9XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gc2ltcGxlTW9kYWxDbG9zZSgpIHtcblx0SG93bGVyLnN0b3AoKTtcblx0JCgnLnNpLW1vZGFsLWNvbnRhaW5lcl9fanMnKS5yZW1vdmVDbGFzcygnc2ktbW9kYWwtY29udGFpbmVyLW9wZW4nKTtcblx0JCgnIycgKyBnbG9iYWxWYXIuY3VycmVudE1vZGFsKS5yZW1vdmVDbGFzcygnc2ktY3VycmVudC1tb2RhbCcpO1xufVxuXG4vLy8vLy8vLy8vLy8qRmVhdHVyZTpEcmFnIGFuZCBEcm9wLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG52YXIgZG5kUmVzZXRPYmplY3QgPSB7fVxuZnVuY3Rpb24gcmVzZXREbkQocmV2ZXJ0VGltZSwgZG5kQW5zd2Vycykge1xuICAgIGdsb2JhbFZhci4kY3VyU2xpZGUuZmluZCgnLmRyYWdnYWJsZScpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdCQodGhpcykuZHJhZ2dhYmxlKCdvcHRpb24nLCAnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnZHJvcHBlZCcpO1xuICAgICAgICB2YXIgT0dQb3MgPSAkKHRoaXMpLmRhdGEoJ09HUG9zJyk7XG4gICAgICAgICQodGhpcykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgdG9wOiBPR1Bvcy50b3AsXG4gICAgICAgICAgICAgICAgbGVmdDogT0dQb3MubGVmdFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJldmVydFRpbWVcbiAgICAgICAgKTtcbiAgICAgICAgJCh0aGlzKS5kYXRhKCdkcm9wSWQnLCAnJyk7XG4gICAgICAgICQodGhpcykuZGF0YSgnY3VyUG9zJywge1xuICAgICAgICAgICAgdG9wOiBPR1Bvcy50b3AsXG4gICAgICAgICAgICBsZWZ0OiBPR1Bvcy5sZWZ0XG4gICAgICAgIH0pO1xuICAgICAgICAkKHRoaXMpLmRhdGEoJ3ByZXZQb3MnLCB7XG4gICAgICAgICAgICB0b3A6IE9HUG9zLnRvcCxcbiAgICAgICAgICAgIGxlZnQ6IE9HUG9zLmxlZnRcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZ2xvYmFsVmFyLiRjdXJTbGlkZS5maW5kKCcuZHJvcHBhYmxlJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuZGF0YSgnZHJhZ0VsZW1lbnRzJywgW10pO1xuICAgICAgICAkKHRoaXMpLmRhdGEoJ2Ryb3BDb3VudGVyJywgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydkcm9wQ291bnRlciddW3RoaXMuaWRdKTtcbiAgICB9KTtcbiAgICAvL3Jlc2V0IGRuZEFuc3dlcnNlY3RcbiAgICBmb3IgKGtleSBpbiBkbmRBbnN3ZXJzKSB7XG4gICAgICAgIGRuZEFuc3dlcnNba2V5XSA9IFtdO1xuICAgIH1cblxuICAgIGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5kbmQudHlwZSA9PSAnZG5kXzInKSB7XG4gICAgICAgIGdsb2JhbFZhci4kY3VyU2xpZGUuZmluZCgnLmRyYWdnYWJsZScpLmZhZGVJbigpO1xuICAgICAgICBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJy5kcmFnZ2FibGUnKS5yZW1vdmVDbGFzcygnc2hyaW5rJyk7XG4gICAgfVxuXG4gICAgZ2xvYmFsVmFyLmRuZEFuc3dlcnMgPSBkbmRBbnN3ZXJzO1xuICAgIHJldHVybiBkbmRBbnN3ZXJzO1xufVxuXG5mdW5jdGlvbiBkbmRGdW5jdGlvbnMoKSB7XG4gICAgdmFyIGN1ckRyYWc7XG4gICAgdmFyIGN1ckRyb3A7XG4gICAgdmFyICRkcmFnRWxlbWVudHMgPSBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJy5kcmFnZ2FibGUnKTtcbiAgICB2YXIgJGRyb3BFbGVtZW50cyA9IGdsb2JhbFZhci4kY3VyU2xpZGUuZmluZCgnLmRyb3BwYWJsZScpO1xuICAgIHZhciByZXZlcnRUaW1lO1xuICAgIHZhciBzbmFwcGluZztcbiAgICB2YXIgZG5kQW5zd2VycyA9IGdlbmVyYXRlQW5zd2VyVGVtcGxhdGUoKTtcblxuICAgIC8vIGFzc2lnbiBjdXN0b20gb3IgZGVmYXVsdCB2YWx1ZXMgdG8gcmV2ZXJ0IGFuZCBzbmFwcGluZ1xuICAgIGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ3JldmVydFRpbWUnXSkge1xuICAgICAgICByZXZlcnRUaW1lID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydyZXZlcnRUaW1lJ107XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV2ZXJ0VGltZSA9IDUwMDtcbiAgICB9XG4gICAgaWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXVsnc25hcHBpbmcnXSkge1xuICAgICAgICBzbmFwcGluZyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXVsnc25hcHBpbmcnXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzbmFwcGluZyA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8gRmlyc3QgZW50cmFuY2Ugc2V0dXAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0udmlzaXRlZCA9PSBmYWxzZSkge1xuICAgICAgICAvLyBkcmFnZ2FibGUgc2V0dXA6IHNldCBwb3NpdGlvbiBkYXRhLCBhdHRhY2hlcyBkbmQgZXZlbnQgZnVuY3Rpb25zLCBhZGQga2V5Ym9hcmQgYWNjZXNzXG4gICAgICAgICRkcmFnRWxlbWVudHMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRzID0gZG5kQWN0aW9ucyh0aGlzLmlkKTtcbiAgICAgICAgICAgIHZhciBsZWZ0SW5pdCA9XG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAocGFyc2VJbnQoJCh0aGlzKS5jc3MoJ2xlZnQnKSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBhcmVudCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAud2lkdGgoKSkgKlxuICAgICAgICAgICAgICAgICAgICAxMDBcbiAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCkgKyAnJSc7XG4gICAgICAgICAgICB2YXIgdG9wSW5pdCA9XG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAocGFyc2VJbnQoJCh0aGlzKS5jc3MoJ3RvcCcpKSAvXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAucGFyZW50KClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5oZWlnaHQoKSkgKlxuICAgICAgICAgICAgICAgICAgICAxMDBcbiAgICAgICAgICAgICAgICApLnRvU3RyaW5nKCkgKyAnJSc7XG4gICAgICAgICAgICAkKHRoaXMpLmRhdGEoe1xuICAgICAgICAgICAgICAgIE9HUG9zOiB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogdG9wSW5pdCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogbGVmdEluaXRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGN1clBvczoge1xuICAgICAgICAgICAgICAgICAgICB0b3A6IHRvcEluaXQsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnRJbml0XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcmV2UG9zOiB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogdG9wSW5pdCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogbGVmdEluaXRcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRyb3BJRDogJycsXG4gICAgICAgICAgICAgICAgZXZlbnRzOiBldmVudHMsXG4gICAgICAgICAgICAgICAgcmV2ZXJ0VGltZTogcmV2ZXJ0VGltZSxcbiAgICAgICAgICAgICAgICBzbmFwcGluZzogc25hcHBpbmdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBtYWtlcyBkbmQga2V5Ym9hcmQgYWNjZXNzaWJsZVxuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCd0YWJpbmRleCcsICcwJyk7XG4gICAgICAgICAgICBrZXlCb2FyZEFjY2Vzcyh0aGlzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZHJvcHBhYmxlIHNldHVwOiBkcmFnIGFycmF5LCBkcm9wIGNvdW50ZXIsIGtleWJvYXJkIGFjY2Vzc1xuICAgICAgICAkZHJvcEVsZW1lbnRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5kYXRhKHtcbiAgICAgICAgICAgICAgICBkcmFnRWxlbWVudHM6IFtdLFxuICAgICAgICAgICAgICAgIGRyb3BDb3VudGVyOiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ2Ryb3BDb3VudGVyJ11bdGhpcy5pZF1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBuZWNlc3NhcnkgdG8gbWFrZSBkbmQga2V5Ym9hcmQgYWNjZXNzaWJsZVxuICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCd0YWJpbmRleCcsICctMScpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkbmRSZXNldE9iamVjdFtnbG9iYWxWYXIuY3VyU2xpZGVdID0ge1xuICAgICAgICAgICAgdGltZTogcmV2ZXJ0VGltZSxcbiAgICAgICAgICAgIGFuc3dlcnM6IGRuZEFuc3dlcnNcbiAgICAgICAgfVxuICAgICAgICAvLyBTdWJzZXF1ZW50IFZpc2l0cy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJGRyYWdFbGVtZW50cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZHJhZ2dhYmxlKCdkaXNhYmxlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICAkZHJvcEVsZW1lbnRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5kcm9wcGFibGUoJ2Rpc2FibGUnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlc2V0RG5EKHJldmVydFRpbWUsIGRuZEFuc3dlcnMpO1xuICAgIH1cbiAgICAvLyBlbmQgc2V0dXBcblxuICAgIC8vIGRyYWdnYWJsZSBvcHRpb25zOiBhZGQgYW55IGFkZGl0aW9uYWwgbmVlZGVkIGtleXMgZnJvbSBqUXVlcnkgZHJhZ2dhYmxlIEFQSSBoZXJlXG4gICAgJGRyYWdFbGVtZW50cy5kcmFnZ2FibGUoe1xuICAgICAgICBzdGFydDogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgY3VyRHJhZyA9IHVpLmhlbHBlclswXTtcbiAgICAgICAgICAgICQoY3VyRHJhZylcbiAgICAgICAgICAgICAgICAuZGF0YSgnZXZlbnRzJylbJ29uRHJhZ1N0YXJ0J10oKTtcbiAgICAgICAgfSxcbiAgICAgICAgZHJhZzogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgZHJhZ2dpbmcoY3VyRHJhZyk7XG4gICAgICAgIH0sXG4gICAgICAgIHJldmVydDogJ2ludmFsaWQnLFxuICAgICAgICBzdGFjazogJy5kcmFnZ2FibGUnLFxuICAgICAgICByZXZlcnREdXJhdGlvbjogcmV2ZXJ0VGltZSxcbiAgICAgICAgc3RvcDogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgZHJhZ1N0b3AoY3VyRHJhZyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGRyb3BwYWJsZSBvcHRpb25zOiBhZGQgYW55IGFkZGl0aW9uYWwgbmVlZGVkIGtleXMgZnJvbSBqUXVlcnkgZHJvcHBhYmxlIEFQSSBoZXJlXG4gICAgJGRyb3BFbGVtZW50cy5kcm9wcGFibGUoe1xuICAgICAgICBhY2NlcHQ6ICcuZHJhZ2dhYmxlJyxcbiAgICAgICAgb3ZlcjogZnVuY3Rpb24gKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgY3VyRHJvcCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgICAgIGlmICgkKGN1ckRyYWcpLmRhdGEoJ2V2ZW50cycpWydvbkRyYWdPdmVyJ11bY3VyRHJvcC5pZF0pIHtcbiAgICAgICAgICAgICAgICAkKGN1ckRyYWcpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKCdldmVudHMnKVsnb25EcmFnT3ZlciddW2N1ckRyb3AuaWRdKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRyb3A6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGRyb3BwZWQoY3VyRHJvcCwgY3VyRHJhZyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGFjdGl2YXRlIGJvdGhcbiAgICAkZHJhZ0VsZW1lbnRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLmRyYWdnYWJsZSgnZW5hYmxlJyk7XG4gICAgfSk7XG5cbiAgICAkZHJvcEVsZW1lbnRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLmRyb3BwYWJsZSgnZW5hYmxlJyk7XG4gICAgfSk7XG59IC8vZW5kIGRuZEZ1bmN0aW9uc1xuXG4vLyBEbmQgRXZlbnQgRnVuY3Rpb25zLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vLyBydW5zIHdoaWxlIGRyYWdnaW5nIGVsZW1lbnQ7XG5mdW5jdGlvbiBkcmFnZ2luZyhkcmFnVGFyZ2V0KSB7XG4gICAgJChkcmFnVGFyZ2V0KVxuICAgICAgICAuZGF0YSgnZXZlbnRzJylbJ29uRHJhZyddKCk7XG59XG5cbi8vIHJ1bnMgd2hlbiBkcmFnIGVsZW1lbnQgaXMgcmVsZWFzZWQgb3V0c2lkZSBvZiB2YWxpZCBkcm9wIGFyZWE7XG5mdW5jdGlvbiBkcmFnU3RvcChkcmFnVGFyZ2V0KSB7XG4gICAgJChkcmFnVGFyZ2V0KVxuICAgICAgICAuZGF0YSgnZXZlbnRzJylbJ29uRHJhZ0VuZCddKCk7XG59XG5cbi8vSW1wb3J0YW50IEZ1bmN0aW9uISBSdW5zIG9uIGRyb3AgaW50byB2YWxpZCBkcm9wIGFyZWEvLy9cbmZ1bmN0aW9uIGRyb3BwZWQoZHJvcFRhcmdldCwgZHJhZ1RhcmdldCkge1xuICAgIHZhciBwb3MgPSB7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogMFxuICAgIH07XG4gICAgdmFyIHNuYXBwaW5nID0gJChkcmFnVGFyZ2V0KS5kYXRhKCdzbmFwcGluZycpO1xuICAgIHZhciBzcGFjZUF2YWlsYWJsZSA9ICQoZHJvcFRhcmdldCkuZGF0YSgnZHJhZ0VsZW1lbnRzJykubGVuZ3RoIDwgJChkcm9wVGFyZ2V0KS5kYXRhKCdkcm9wQ291bnRlcicpO1xuXG4gICAgLy9nZXQgcG9zaXRpb25pbmdcbiAgICBpZiAoc25hcHBpbmcpIHtcbiAgICAgICAgcG9zLnRvcCA9XG4gICAgICAgICAgICAoXG4gICAgICAgICAgICAgICAgKHBhcnNlSW50KCQoZHJvcFRhcmdldCkuY3NzKCd0b3AnKSkgL1xuICAgICAgICAgICAgICAgICAgICAkKGRyb3BUYXJnZXQpXG4gICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxuICAgICAgICAgICAgICAgICAgICAuaGVpZ2h0KCkpICpcbiAgICAgICAgICAgICAgICAxMDBcbiAgICAgICAgICAgICkudG9TdHJpbmcoKSArICclJztcbiAgICAgICAgcG9zLmxlZnQgPVxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgIChwYXJzZUludCgkKGRyb3BUYXJnZXQpLmNzcygnbGVmdCcpKSAvXG4gICAgICAgICAgICAgICAgICAgICQoZHJvcFRhcmdldClcbiAgICAgICAgICAgICAgICAgICAgLnBhcmVudCgpXG4gICAgICAgICAgICAgICAgICAgIC53aWR0aCgpKSAqXG4gICAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICApLnRvU3RyaW5nKCkgKyAnJSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcG9zLnRvcCA9ICgocGFyc2VJbnQoJChkcmFnVGFyZ2V0KS5jc3MoJ3RvcCcpKSAvICQoJy5yZXZlYWwnKS5oZWlnaHQoKSkgKiAxMDApLnRvU3RyaW5nKCkgKyAnJSc7XG4gICAgICAgIHBvcy5sZWZ0ID0gKChwYXJzZUludCgkKGRyYWdUYXJnZXQpLmNzcygnbGVmdCcpKSAvICQoJy5yZXZlYWwnKS53aWR0aCgpKSAqIDEwMCkudG9TdHJpbmcoKSArICclJztcbiAgICB9XG5cbiAgICAvLyBydW4gY3VzdG9tIGRyb3AgZnVuY3Rpb25cbiAgICBpZiAoJChkcmFnVGFyZ2V0KS5kYXRhKCdldmVudHMnKVsnb25Ecm9wJ11bZHJvcFRhcmdldC5pZF0pIHtcbiAgICAgICAgJChkcmFnVGFyZ2V0KVxuICAgICAgICAgICAgLmRhdGEoJ2V2ZW50cycpWydvbkRyb3AnXVtkcm9wVGFyZ2V0LmlkXSgpO1xuICAgIH1cblxuICAgIC8vIGhhbmRsZSBkcm9wIGZvciBlYWNoIHR5cGVcbiAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddLnR5cGUgPT0gJ2RuZF8yJykge1xuICAgICAgICBpZiAoc3BhY2VBdmFpbGFibGUpIHtcbiAgICAgICAgICAgIGRuZDJEcm9wKGRyYWdUYXJnZXQsIGRyb3BUYXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV2ZXJ0KGRyYWdUYXJnZXQpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ10udHlwZSA9PSAnZG5kXzEnKSB7XG4gICAgICAgIGlmIChzcGFjZUF2YWlsYWJsZSkge1xuICAgICAgICAgICAgZG5kMURyb3AoZHJhZ1RhcmdldCwgZHJvcFRhcmdldCwgcG9zKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN3YXAoZHJhZ1RhcmdldCwgZHJvcFRhcmdldCwgcG9zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoa2V5IGluIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXVsncXVpeiddKSB7XG4gICAgICAgIGdsb2JhbFZhci5kbmRBbnN3ZXJzW2tleV0gPSAkKCcjJyArIGtleSkuZGF0YSgnZHJhZ0VsZW1lbnRzJyk7XG4gICAgfVxufSAvL2VuZCBkcm9wcGVkXG5cbi8vLy8vLy8vIERyb3BzIGFuZCBTd2FwIC8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZG5kMkRyb3AoZHJhZywgZHJvcCkge1xuICAgICQoZHJvcClcbiAgICAgICAgLmRhdGEoJ2RyYWdFbGVtZW50cycpXG4gICAgICAgIC5wdXNoKGRyYWcuaWQpO1xuICAgICQoZHJhZykuYWRkQ2xhc3MoJ3NocmluaycpO1xuICAgICQoZHJhZykuZGF0YSgnZHJvcHBlZCcsIHRydWUpO1xufVxuXG5mdW5jdGlvbiBkbmQxRHJvcChkcmFnLCBkcm9wLCBwb3MpIHtcbiAgICB2YXIgZHJvcElkID0gJChkcmFnKS5kYXRhKCdkcm9wSWQnKTtcbiAgICBpZiAoZHJvcElkKSB7XG4gICAgICAgIHZhciBuZXdBcnIgPSAkKCcjJyArIGRyb3BJZClcbiAgICAgICAgICAgIC5kYXRhKCdkcmFnRWxlbWVudHMnKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZHJhZ0lkKSB7XG4gICAgICAgICAgICAgICAgZHJhZ0lkICE9PSBkcmFnLmlkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICQoJyMnICsgZHJvcElkKS5kYXRhKCdkcmFnRWxlbWVudHMnLCBuZXdBcnIpO1xuICAgIH1cbiAgICB1cGRhdGVQb3MoZHJhZywgcG9zKTtcbiAgICAkKGRyYWcpLmRhdGEoJ2Ryb3BJZCcsIGRyb3AuaWQpO1xuICAgICQoZHJvcClcbiAgICAgICAgLmRhdGEoJ2RyYWdFbGVtZW50cycpXG4gICAgICAgIC5wdXNoKGRyYWcuaWQpO1xuICAgIG1vdmUoZHJhZyk7XG59XG5cbmZ1bmN0aW9uIHN3YXAoZHJhZywgZHJvcCwgcG9zKSB7XG4gICAgdmFyIGRyb3BJZCA9ICQoZHJhZykuZGF0YSgnZHJvcElkJyk7XG4gICAgdmFyIHN3YXBEcmFnSWQgPSAkKGRyb3ApXG4gICAgICAgIC5kYXRhKCdkcmFnRWxlbWVudHMnKVxuICAgICAgICAucG9wKCk7XG4gICAgdmFyIHN3YXBEcmFnID0gJCgnIycgKyBzd2FwRHJhZ0lkKTtcbiAgICB2YXIgc3dhcERyYWdQb3M7XG4gICAgdmFyIHN3YXBBcnIgPSBbXTtcblxuICAgIGlmIChkcm9wSWQpIHtcbiAgICAgICAgdmFyIG5ld0FyciA9ICQoJyMnICsgZHJvcElkKVxuICAgICAgICAgICAgLmRhdGEoJ2RyYWdFbGVtZW50cycpXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChkcmFnSWQpIHtcbiAgICAgICAgICAgICAgICBkcmFnSWQgIT09IGRyYWcuaWQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgbmV3QXJyLnB1c2goc3dhcERyYWdJZCk7XG4gICAgICAgICQoJyMnICsgZHJvcElkKS5kYXRhKCdkcmFnRWxlbWVudHMnLCBuZXdBcnIpO1xuICAgICAgICBzd2FwRHJhZ1BvcyA9ICQoZHJhZykuZGF0YSgnY3VyUG9zJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3dhcERyYWdQb3MgPSAkKHN3YXBEcmFnKS5kYXRhKCdPR1BvcycpO1xuICAgICAgICBzd2FwRHJhZy5yZW1vdmVEYXRhKCdkcm9wSWQnKVxuICAgIH1cbiAgICBzd2FwQXJyID0gJCgnIycgKyBkcm9wLmlkKVxuICAgICAgICAuZGF0YSgnZHJhZ0VsZW1lbnRzJylcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZHJhZ0lkKSB7XG4gICAgICAgICAgICBkcmFnSWQgIT09IHN3YXBEcmFnSWQ7XG4gICAgICAgIH0pO1xuICAgIHN3YXBBcnIucHVzaChkcmFnLmlkKTtcbiAgICAkKCcjJyArIGRyb3AuaWQpLmRhdGEoJ2RyYWdFbGVtZW50cycsIHN3YXBBcnIpO1xuXG4gICAgJChkcmFnKS5kYXRhKCdkcm9wSWQnLCBkcm9wLmlkKTtcbiAgICAkKHN3YXBEcmFnKS5kYXRhKCdkcm9wSWQnLCBkcm9wSWQpO1xuXG4gICAgdXBkYXRlUG9zKHN3YXBEcmFnLCBzd2FwRHJhZ1Bvcyk7XG4gICAgdXBkYXRlUG9zKGRyYWcsIHBvcyk7XG5cbiAgICBtb3ZlKGRyYWcpO1xuICAgIG1vdmUoc3dhcERyYWcpO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vIERuRCBIZWxwZXIgRnVuY3Rpb25zLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5mdW5jdGlvbiByZXZlcnQoZHJhZ0l0ZW0pIHtcbiAgICB2YXIgcmV2ZXJ0VGltZSA9ICQoZHJhZ0l0ZW0pLmRhdGEoJ3JldmVydFRpbWUnKTtcbiAgICAkKGRyYWdJdGVtKS5hbmltYXRlKHtcbiAgICAgICAgICAgIHRvcDogJChkcmFnSXRlbSkuZGF0YSgncHJldlBvcycpWyd0b3AnXSxcbiAgICAgICAgICAgIGxlZnQ6ICQoZHJhZ0l0ZW0pLmRhdGEoJ3ByZXZQb3MnKVsnbGVmdCddXG4gICAgICAgIH0sXG4gICAgICAgIHJldmVydFRpbWVcbiAgICApO1xufVxuXG5mdW5jdGlvbiBtb3ZlKGRyYWdJdGVtKSB7XG4gICAgdmFyIHJldmVydFRpbWUgPSAzMDA7XG4gICAgJChkcmFnSXRlbSkuYW5pbWF0ZSh7XG4gICAgICAgICAgICB0b3A6ICQoZHJhZ0l0ZW0pLmRhdGEoJ2N1clBvcycpWyd0b3AnXSxcbiAgICAgICAgICAgIGxlZnQ6ICQoZHJhZ0l0ZW0pLmRhdGEoJ2N1clBvcycpWydsZWZ0J11cbiAgICAgICAgfSxcbiAgICAgICAgcmV2ZXJ0VGltZVxuICAgICk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVBvcyhkcmFnSXRlbSwgbmV3UG9zKSB7XG4gICAgJChkcmFnSXRlbSkuZGF0YSgncHJldlBvcycsICQoZHJhZ0l0ZW0pLmRhdGEoJ2N1clBvcycpKTtcbiAgICAkKGRyYWdJdGVtKS5kYXRhKCdjdXJQb3MnLCBuZXdQb3MpO1xufVxuXG4vLyBHcmFicyBjdXN0b20gZXZlbnQgYWN0aW9ucyBvciBhc3NpZ25zIGRlZmF1bHQgdmFsdWVzIHRvIGFsbCBhY3Rpb24ga2V5cy4gTWFrZXMgYWN0aW9uIGtleSBlbnRpcmVseSBvcHRpb25hbFxuZnVuY3Rpb24gZG5kQWN0aW9ucyhkcmFnSXRlbUlEKSB7XG4gICAgdmFyIGFjdGlvbnMgPSB7XG4gICAgICAgIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgb25EcmFnOiBmdW5jdGlvbiAoKSB7fSxcbiAgICAgICAgb25EcmFnT3Zlcjoge30sXG4gICAgICAgIG9uRHJhZ0VuZDogZnVuY3Rpb24gKCkge30sXG4gICAgICAgIG9uRHJvcDoge31cbiAgICB9O1xuICAgIGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ2FjdGlvbnMnXSkge1xuICAgICAgICBpZiAoIXNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXVsnYWN0aW9ucyddW2RyYWdJdGVtSURdKSB7XG4gICAgICAgICAgICBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ2FjdGlvbnMnXVtkcmFnSXRlbUlEXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBhY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydhY3Rpb25zJ11bZHJhZ0l0ZW1JRF1ba2V5XSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnNba2V5XSA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXVsnYWN0aW9ucyddW2RyYWdJdGVtSURdW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ2FjdGlvbnMnXSA9IHt9O1xuICAgIH1cbiAgICBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ2FjdGlvbnMnXVtkcmFnSXRlbUlEXSA9IGFjdGlvbnM7XG4gICAgcmV0dXJuIGFjdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQW5zd2VyVGVtcGxhdGUoKSB7XG4gICAgdmFyIGkgPSAwO1xuICAgIHZhciBzdHIgPSAnJztcbiAgICB2YXIgZG5kQW5zd2VycztcbiAgICAvL3dyaXRlIGEgYmxhbmsgb2JqZWN0L2Fuc3dlcnMgaW50byB0aGUgZ2xvYmFsVmFyXG4gICAgZ2xvYmFsVmFyLmRuZEFuc3dlcnMgPSB7fTtcbiAgICBmb3IgKGtleSBpbiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ3F1aXonXSkge1xuICAgICAgICBpKys7XG5cbiAgICAgICAgdmFyIHN0cmEgPSAnXCInICsga2V5ICsgJ1wiOicgKyAnW10nO1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydxdWl6J10pLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICBpZiAoaSAhPSBPYmplY3Qua2V5cyhzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ3F1aXonXSkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgc3RyYSA9IHN0cmEgKyAnLCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RyID0gc3RyICsgc3RyYTtcbiAgICB9XG4gICAgc3RyID0gJ3snICsgc3RyICsgJ30nO1xuICAgIGRuZEFuc3dlcnMgPSBKU09OLnBhcnNlKHN0cik7XG4gICAgZ2xvYmFsVmFyLmRuZEFuc3dlcnMgPSBkbmRBbnN3ZXJzO1xuICAgIHJldHVybiBkbmRBbnN3ZXJzO1xufVxuXG5mdW5jdGlvbiBrZXlCb2FyZEFjY2VzcyhkcmFnRWxlbWVudCkge1xuICAgIHZhciBhY2Nlc3NpYmlsaXR5ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBkcm9wcyA9IGdsb2JhbFZhci4kY3VyU2xpZGUuZmluZCgnLmRyb3BwYWJsZScpO1xuICAgICAgICB2YXIgZHJvcElkeCA9IDA7XG4gICAgICAgIHZhciAkZHJhZyA9ICQodGhpcyk7XG4gICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMzIpIHtcbiAgICAgICAgICAgIC8vc3BhY2ViYXIgc2VsZWN0cyBkcmFnIGVsZW1lbnRcblxuICAgICAgICAgICAgJChkcm9wc1tkcm9wSWR4XSkuZm9jdXMoKTsgLy9mb2N1c2VzIG9uIGZpcnN0IGRyb3AgYXJlYVxuICAgICAgICAgICAgJGRyYWcub2ZmKCdrZXlkb3duLmFjY2VzcycpOyAvL3JlbW92ZXMgc3BhY2ViYXIgc2VsZWN0b3JcbiAgICAgICAgICAgIGRyYWdnaW5nKCRkcmFnWzBdKTsgLy90YWtlcyBjYXJlIG9mIGRyYWcgZXZlbnRzXG5cbiAgICAgICAgICAgICQoJ2JvZHknKS5vbigna2V5ZG93bi5kcmFnJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTogLy9yZW1vdmVzIGFiaWxpdHkgdG8gdGFiIHdoaWxlIGRyYWcgZWxlbWVudCBpcyBzZWxlY3RlZFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OiAvLyBhbGxvd3MgdXNlciB0byBwcmVzcyBlc2NhcGUga2V5IHRvIHJldHVybiB0byBub3JtYWwgYW5kIHBsYWNlcyBmb2N1cyBvbiBkcmFnIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICRkcmFnLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICRkcmFnLmRhdGEoJ29yaWdpbmFsVG9wJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICRkcmFnLmRhdGEoJ29yaWdpbmFsTGVmdCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZlcnRUaW1lXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGRyYWcuZm9jdXMoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJGRyYWcub24oJ2tleWRvd24uYWNjZXNzJywgYWNjZXNzaWJpbGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5Jykub2ZmKCdrZXlkb3duLmRyYWcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OiAvL3VwIGFycm93IGN5Y2xlcyB0aHJvdWdoIGRyb3AgdGFyZ2V0c1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRyb3BJZHggPCBkcm9wcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcElkeCArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wSWR4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICQoZHJvcHNbZHJvcElkeF0pLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDogLy9kb3duIGFycm93IGN5Y2xlcyB0aHJvdWdoIGRyb3AgdGFyZ2V0c1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRyb3BJZHggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcElkeCAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wSWR4ID0gZHJvcHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICQoZHJvcHNbZHJvcElkeF0pLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzogLy9lbnRlciBrZXkgZHJvcHMgc2VsZWN0ZWQgZHJhZyBlbGVtZW50IGludG8gY3VycmVudGx5IGZvY3VzZWQgZHJvcCBhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wcGVkKGRyb3BzW2Ryb3BJZHhdLCAkZHJhZ1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWyd0eXBlJ10gPT09ICdkbmRfMicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZHJhZy5ibHVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkcmFnLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkZHJhZy5vbigna2V5ZG93bi5hY2Nlc3MnLCBhY2Nlc3NpYmlsaXR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5vZmYoJ2tleWRvd24uZHJhZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgJChkcmFnRWxlbWVudCkub24oJ2tleWRvd24uYWNjZXNzJywgYWNjZXNzaWJpbGl0eSk7XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gaG90c3BvdEZ1bmN0aW9ucygpIHtcblx0Ly8gdmFyaWFibGVzXG5cdHZhciAkc2xpZGVET00gPSAkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSk7XG5cdHZhciAkaG90c3BvdHMgPSAkc2xpZGVET00uZmluZCgnIC5ob3RzcG90LWJ1dHRvbl9fanMnKTtcblx0dmFyICRtb2RhbEJsb2NrZXIgPSAkKCcuc2ktbW9kYWwtY29udGFpbmVyX19qcycpO1xuXHR2YXIgbW9kYWxzID0gW107XG5cdCRob3RzcG90cy5lYWNoKGZ1bmN0aW9uIChpZHgsIGhvdHNwb3QpIHtcblx0XHRjb25zb2xlLmxvZygnYnJva2UnKTtcblx0XHRpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWxbJ2hzJyArIChpZHggKyAxKV0pIHtcblx0XHRcdG1vZGFscy5wdXNoKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsWydocycgKyAoaWR4ICsgMSldKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5sb2coXG5cdFx0XHRcdCdUaGVyZSBpcyBub3QgYSBjb3JyZXNwb25kaW5nIG1vZGFsIGZvciBob3RzcG90ICcgK1xuXHRcdFx0XHRcdChpZHggKyAxKSArXG5cdFx0XHRcdFx0Jy4gUGxlYXNlIGRpc3JlZ2FyZCBpZiB5b3UgYXJlIG5vdCB1c2luZyBtb2RhbHMgZm9yIHRoaXMgc2xpZGUuJ1xuXHRcdFx0KTtcblx0XHR9XG5cdH0pO1xuXHRjb25zb2xlLmxvZyhtb2RhbHMpO1xuXHR2YXIgY2xpY2tDaGVja2VyID0ge307XG5cblx0dmFyIHNsaWRlT2JqID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV07XG5cdHZhciBzZXR0aW5ncyA9IHNsaWRlT2JqLmhvdHNwb3QgfHwge307XG5cblx0dmFyIHNlbGVjdGVkQ2xhc3M7XG5cdHZhciBjb3JyZWN0Q2xhc3MgPSBzZXR0aW5ncy5jb3JyZWN0Q2xhc3MgfHwgJ2NvcnJlY3QnO1xuXHR2YXIgdW5sb2NrZWRDbGFzcyA9IHNldHRpbmdzLnVubG9ja2VkQ2xhc3MgfHwgJ3VubG9ja2VkJztcblx0dmFyIGNvbXBsZXRlZENsYXNzID0gc2V0dGluZ3MuY29tcGxldGVkQ2xhc3MgfHwgJ2NvbXBsZXRlZCc7XG5cdHZhciBtb2RhbFN0eWxlQ2xhc3MgPSBzZXR0aW5ncy5tb2RhbFN0eWxlQ2xhc3MgfHwgJ21vZGFsLXN0eWxlJztcblx0dmFyIGhvdHNwb3RTdHlsZUNsYXNzID0gc2V0dGluZ3MuaG90c3BvdFN0eWxlQ2xhc3MgfHwgJ2hvdHNwb3Qtc3R5bGUnO1xuXHR2YXIgY29tcGxldGVBY3Rpb24gPSBzZXR0aW5ncy5jdXN0b21Db21wbGV0ZUFjdGlvbiB8fCBzbGlkZU9iai5uZXh0QWN0aW9uO1xuXG5cdHNldHRpbmdzLmNvcnJlY3RDbGFzcyA9IGNvcnJlY3RDbGFzcztcblx0c2V0dGluZ3MudW5sb2NrZWRDbGFzcyA9IHVubG9ja2VkQ2xhc3M7XG5cdHNldHRpbmdzLnNlbGVjdGVkQ2xhc3MgPSBzZWxlY3RlZENsYXNzO1xuXHRzZXR0aW5ncy5jb21wbGV0ZWRDbGFzcyA9IGNvbXBsZXRlZENsYXNzO1xuXHRzZXR0aW5ncy5tb2RhbFN0eWxlQ2xhc3MgPSBtb2RhbFN0eWxlQ2xhc3M7XG5cdHNldHRpbmdzLmhvdHNwb3RTdHlsZUNsYXNzID0gaG90c3BvdFN0eWxlQ2xhc3M7XG5cblx0c2V0dGluZ3MuY2xpY2tDaGVja2VyID0gY2xpY2tDaGVja2VyO1xuXHRzZXR0aW5ncy5pbmR2ID0gc2V0dGluZ3MuaW5kdiB8fCB7fTtcblxuXHQkaG90c3BvdHMuYWRkQ2xhc3MoaG90c3BvdFN0eWxlQ2xhc3MpO1xuXHQkaG90c3BvdHMucmVtb3ZlQ2xhc3MoY29tcGxldGVkQ2xhc3MpO1xuXHQkaG90c3BvdHMucmVtb3ZlQ2xhc3ModW5sb2NrZWRDbGFzcyk7XG5cdCRob3RzcG90cy5lYWNoKGZ1bmN0aW9uIChpLCBzcG90KSB7XG5cdFx0JChzcG90KS5hZGRDbGFzcyhob3RzcG90U3R5bGVDbGFzcyArICctJyArIChpICsgMSkpO1xuXHR9KTtcblxuXHRtb2RhbHMuZm9yRWFjaChmdW5jdGlvbiAobW9kYWwsIGlkeCkge1xuXHRcdCQoJyMnICsgbW9kYWwpXG5cdFx0XHQuYWRkQ2xhc3MobW9kYWxTdHlsZUNsYXNzKVxuXHRcdFx0LmFkZENsYXNzKG1vZGFsU3R5bGVDbGFzcyArICctJyArIChpZHggKyAxKSk7XG5cblx0XHRjb25zb2xlLmxvZygkKCcjJyArIG1vZGFsKSk7XG5cblx0XHRpZiAoc2V0dGluZ3MuY2xpY2tBbnl3aGVyZSkgJCgnIycgKyBtb2RhbCkuYWRkQ2xhc3MoJ21vZGFsLWNsaWNrLWFueXdoZXJlJyk7XG5cdH0pO1xuXG5cdGlmIChzZXR0aW5ncy5jb3JyZWN0SG90c3BvdHMpXG5cdFx0c2V0dGluZ3MuY29ycmVjdEhvdHNwb3RzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHRcdCQoJGhvdHNwb3RzW2l0ZW0gLSAxXSkuYWRkQ2xhc3MoY29ycmVjdENsYXNzKTtcblx0XHR9KTtcblxuXHQvLyBidWlsZCBjbGlja0NoZWNrZXIgb2JqZWN0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgJGhvdHNwb3RzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y2xpY2tDaGVja2VyW2kgKyAxXSA9IGNsaWNrQ2hlY2tlcltpICsgMV0gfHwge307XG5cdFx0Y2xpY2tDaGVja2VyW2kgKyAxXS5zZWVuID0gZmFsc2U7XG5cblx0XHQvL2lmIGNvcnJlY3RDbGFzcyBzcGVjaWZpZWQgYWRkIGNvcnJlY3RDbGFzcyBrZXlcblx0XHRpZiAoc2V0dGluZ3MuY29ycmVjdENsYXNzKSB7XG5cdFx0XHR2YXIgY29ycmVjdENsYXNzID0gc2V0dGluZ3MuY29ycmVjdENsYXNzO1xuXHRcdFx0Y2xpY2tDaGVja2VyW2kgKyAxXS5oYXNDb3JyZWN0Q2xhc3MgPSAkKCRob3RzcG90c1tpXSkuaGFzQ2xhc3MoY29ycmVjdENsYXNzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y2xpY2tDaGVja2VyW2kgKyAxXS5oYXNDb3JyZWN0Q2xhc3MgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdGlmICghc2V0dGluZ3MuYXVkaW9TZXR1cClcblx0XHRmb3IgKHZhciBrZXkgaW4gc2V0dGluZ3MuYXVkaW8pIHtcblx0XHRcdHNldHRpbmdzLmF1ZGlvW2tleV0gPSBuZXcgSG93bCh7XG5cdFx0XHRcdHNyYzogW3NldHRpbmdzLmF1ZGlvW2tleV1dXG5cdFx0XHR9KTtcblx0XHRcdHNldHRpbmdzLmF1ZGlvU2V0dXAgPSB0cnVlO1xuXHRcdH1cblxuXHRpZiAoc2V0dGluZ3MubGluZWFyKSB7XG5cdFx0aWYgKHNldHRpbmdzLnF1aXopIHRocm93ICdcXG5Ib3RzcG90IEVycm9yOlxcbnlvdSBjYW5ub3QgdXNlIFwibGluZWFyXCIgYW5kIFwicXVpelwiIHRvZ2V0aGVyJztcblx0XHRpZiAoc2V0dGluZ3MuY29ycmVjdEhvdHNwb3RzKSB0aHJvdyAnXFxuSG90c3BvdCBFcnJvcjpcXG55b3UgY2Fubm90IHVzZSBcImxpbmVhclwiIGFuZCBcImNvcnJlY3RIb3RzcG90c1wiIHRvZ2V0aGVyJztcblx0XHQkaG90c3BvdHMucmVtb3ZlQ2xhc3ModW5sb2NrZWRDbGFzcyk7XG5cdFx0bG9jaygkaG90c3BvdHMpO1xuXHRcdHVubG9jaygkKCRob3RzcG90c1swXSkpO1xuXHRcdCQoJGhvdHNwb3RzWzBdKS5hZGRDbGFzcyh1bmxvY2tlZENsYXNzKTtcblx0fSBlbHNlIGlmIChzZXR0aW5ncy5xdWl6KSB7XG5cdFx0c2VsZWN0ZWRDbGFzcyA9IHNldHRpbmdzLnF1aXouc2VsZWN0ZWRDbGFzcyB8fCAnc2VsZWN0ZWQtaG90c3BvdCc7XG5cdFx0JGhvdHNwb3RzLnJlbW92ZUNsYXNzKHNlbGVjdGVkQ2xhc3MpO1xuXHRcdHNldHRpbmdzLnF1aXouc2VsZWN0ZWRBbnN3ZXJzID0gW107XG5cdFx0c2V0dGluZ3MudXNlTW9kYWxzID0gZmFsc2U7XG5cdH1cblxuXHQkaG90c3BvdHMuZWFjaChmdW5jdGlvbiAoaSwgaG9TcCkge1xuXHRcdHZhciAkdGhpc0hvdHNwb3QgPSAkKGhvU3ApO1xuXHRcdC8vZXZlbnQgbGlzdGVuZXIgZm9yIGhvdHNwb3RzXG5cdFx0aWYgKHNldHRpbmdzLmhvdmVyID09PSB0cnVlKSB7XG5cdFx0XHQkdGhpc0hvdHNwb3Qub2ZmKCdtb3VzZW92ZXIuaG90c3BvdCcpO1xuXHRcdFx0JHRoaXNIb3RzcG90Lm9uKCdtb3VzZW92ZXIuaG90c3BvdCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aGFuZGxlSG90c3BvdChpLCBob1NwKTtcblx0XHRcdH0pO1xuXHRcdFx0JG1vZGFsQmxvY2tlci5hZGRDbGFzcygnaG92ZXItaG90c3BvdCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkdGhpc0hvdHNwb3Qub2ZmKCdjbGljay5ob3RzcG90Jyk7XG5cdFx0XHQkdGhpc0hvdHNwb3Qub24oJ2NsaWNrLmhvdHNwb3QnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGhhbmRsZUhvdHNwb3QoaSwgaG9TcCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xuXG5cdC8qKlxuXHQgKiBAcGFyYW0gaVxuXHQgKiBAcGFyYW0gaG9TcFxuXHQgKi9cblx0ZnVuY3Rpb24gaGFuZGxlSG90c3BvdChpLCBob1NwKSB7XG5cdFx0dmFyIG1haW5PbkNsaWNrID0gc2V0dGluZ3Mub25DbGljaztcblx0XHR2YXIgaW5kdk9uQ2xpY2sgPSBzZXR0aW5ncy5pbmR2W2kgKyAxXSAmJiBzZXR0aW5ncy5pbmR2W2kgKyAxXS5vbkNsaWNrO1xuXHRcdHZhciAkdGhpc01vZGFsID0gJCgnIycgKyBtb2RhbHNbaV0pO1xuXHRcdHZhciBtb2RhbElEID0gbW9kYWxzW2ldO1xuXHRcdHZhciAkdGhpc0hvdHNwb3QgPSAkKGhvU3ApO1xuXHRcdHZhciBtb2RhbFdhcm4gPSBcInlvdSBoYXZlbid0IGNyZWF0ZWQgYSBtb2RhbCBmb3IgdGhpcyBob3RzcG90XCI7XG5cdFx0bWFpbk9uQ2xpY2sgJiYgbWFpbk9uQ2xpY2soaG9TcCwgbW9kYWxzW2ldIHx8IG1vZGFsV2Fybik7XG5cdFx0aW5kdk9uQ2xpY2sgJiYgaW5kdk9uQ2xpY2soaG9TcCwgbW9kYWxzW2ldIHx8IG1vZGFsV2Fybik7XG5cblx0XHRpZiAoc2V0dGluZ3MuYXVkaW8pIHtcblx0XHRcdEhvd2xlci5zdG9wKCk7XG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gc2V0dGluZ3MuYXVkaW8pIHNldHRpbmdzLmF1ZGlvW2tleV0uc3RvcCgpO1xuXG5cdFx0XHRzZXR0aW5ncy5hdWRpb1tpICsgMV0gJiYgc2V0dGluZ3MuYXVkaW9baSArIDFdLnBsYXkoKTtcblx0XHR9XG5cblx0XHRpZiAoc2V0dGluZ3MucXVpeikge1xuXHRcdFx0aWYgKHNldHRpbmdzLnF1aXoudHlwZSA9PT0gJ3NjcScpICRob3RzcG90cy5yZW1vdmVDbGFzcyhzZWxlY3RlZENsYXNzKTtcblx0XHRcdCR0aGlzSG90c3BvdC50b2dnbGVDbGFzcyhzZWxlY3RlZENsYXNzKTtcblx0XHRcdHNldHRpbmdzLnF1aXouc2VsZWN0ZWRBbnN3ZXJzID0gW107XG5cdFx0XHQkaG90c3BvdHMuZWFjaChmdW5jdGlvbiAoaWR4LCBxdWl6SG90c3BvdCkge1xuXHRcdFx0XHRpZiAoJChxdWl6SG90c3BvdCkuaGFzQ2xhc3Moc2VsZWN0ZWRDbGFzcykpIHNldHRpbmdzLnF1aXouc2VsZWN0ZWRBbnN3ZXJzLnB1c2goaWR4ICsgMSk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2UgaWYgKHNldHRpbmdzLnVzZU1vZGFscyA9PT0gZmFsc2UpIHtcblx0XHRcdGNsaWNrQ2hlY2tlcltpICsgMV0uc2VlbiA9IHRydWU7XG5cblx0XHRcdCQoaG9TcCkuYWRkQ2xhc3MoY29tcGxldGVkQ2xhc3MpO1xuXG5cdFx0XHRhbGxTZWVuQmVoYXZpb3IoKTtcblxuXHRcdFx0aWYgKHNldHRpbmdzLmxpbmVhciA9PT0gdHJ1ZSkgdW5sb2NrTmV4dEhvdHNwb3QoJGhvdHNwb3RzW2kgKyAxXSwgc2V0dGluZ3MuaW5kdltpICsgMl0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoc2V0dGluZ3MuaG92ZXIpIHtcblx0XHRcdFx0JCgnLnNpLW1vZGFsLWNvbnRhaW5lcl9fanMnKS5hZGRDbGFzcygnc2ktaG92ZXItaG90c3BvdCcpO1xuXHRcdFx0XHQkaG90c3BvdHMuZWFjaChmdW5jdGlvbiAoaSwgaG9TcCkge1xuXHRcdFx0XHRcdCR0aGlzSG90c3BvdC5vZmYoJ21vdXNlb3V0LmhvdHNwb3QnKTtcblx0XHRcdFx0XHQkdGhpc0hvdHNwb3Qub24oJ21vdXNlb3V0LmhvdHNwb3QnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQkKCcuc2ktbW9kYWwtY29udGFpbmVyX19qcycpLnJlbW92ZUNsYXNzKCdzaS1ob3Zlci1ob3RzcG90Jyk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnbW91c2VvdXQnKTtcblx0XHRcdFx0XHRcdCRtb2RhbEJsb2NrZXIudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRjb25zb2xlLmxvZygkdGhpc01vZGFsKTtcblx0XHRcdCQoJy5zaS1tb2RhbC1jb250YWluZXJfX2pzJykuYWRkQ2xhc3MoJ3NpLW1vZGFsLWNvbnRhaW5lci1vcGVuJyk7XG5cdFx0XHQkdGhpc01vZGFsLmFkZENsYXNzKCdzaS1jdXJyZW50LW1vZGFsJyk7XG5cdFx0XHRnbG9iYWxWYXIuY3VycmVudE1vZGFsID0gbW9kYWxJRDtcblx0XHRcdGdsb2JhbFZhci5jdXJyZW50TW9kYWxUeXBlID0gJ2hvdHNwb3QnO1xuXHRcdFx0Z2xvYmFsVmFyLmhvdHNwb3RJZHggPSBpO1xuXG5cdFx0XHQvKipcblx0XHRcdCAqIEBwYXJhbSBlXG5cdFx0XHQgKi9cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICpcblx0ICovXG5cdC8vIGZ1bmN0aW9uIGhhbmRsZUhvdHNwb3RDbG9zZSgpIHtcblx0Ly8gXHR2YXIgc2V0dGluZ3MgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5ob3RzcG90O1xuXHQvLyBcdHZhciAkaG90c3BvdHMgPSAkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSkuZmluZCgnIC5ob3RzcG90LWJ1dHRvbl9fanMnKTtcblx0Ly8gXHR2YXIgaSA9IGdsb2JhbFZhci5ob3RzcG90SWR4O1xuXHQvLyBcdHZhciBob3RzcG90ID0gJGhvdHNwb3RzW2ldO1xuXHQvLyBcdHZhciBtb2RhbCA9ICcjJyArIGdsb2JhbFZhci5jdXJyZW50TW9kYWw7XG5cdC8vIFx0dmFyIG1haW5Pbk1vZGFsQ2xvc2UgPSBzZXR0aW5ncy5vbk1vZGFsQ2xvc2U7XG5cdC8vIFx0dmFyIGluZHZPbk1vZGFsQ2xvc2UgPSBzZXR0aW5ncy5pbmR2W2kgKyAxXSAmJiBzZXR0aW5ncy5pbmR2W2kgKyAxXS5vbk1vZGFsQ2xvc2U7XG5cdC8vIFx0dmFyIG1vZGFsV2FybiA9IFwieW91IGhhdmVuJ3QgY3JlYXRlZCBhIG1vZGFsIGZvciB0aGlzIGhvdHNwb3RcIjtcblx0Ly8gXHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5ob3RzcG90LmNsaWNrQ2hlY2tlcltpICsgMV0uc2VlbiA9IHRydWU7XG5cdC8vIFx0bWFpbk9uTW9kYWxDbG9zZSAmJiBtYWluT25Nb2RhbENsb3NlKGhvdHNwb3QsIG1vZGFsIHx8IG1vZGFsV2Fybik7XG5cdC8vIFx0aW5kdk9uTW9kYWxDbG9zZSAmJiBpbmR2T25Nb2RhbENsb3NlKGhvdHNwb3QsIG1vZGFsIHx8IG1vZGFsV2Fybik7XG5cblx0Ly8gXHR2YXIgcmVzdWx0ID0gdHJ1ZTtcblxuXHQvLyBcdGZvciAodmFyIGl0ZW0gaW4gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaG90c3BvdCkge1xuXHQvLyBcdFx0aWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmhvdHNwb3RbaXRlbV0uc2VlbiA9PT0gZmFsc2UgJiYgIXNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmhvdHNwb3RbaXRlbV0uaGFzQ29ycmVjdENsYXNzKSB7XG5cdC8vIFx0XHRcdHJlc3VsdCA9IGZhbHNlO1xuXHQvLyBcdFx0XHRicmVhaztcblx0Ly8gXHRcdH1cblx0Ly8gXHR9XG5cblx0Ly8gXHRpZihyZXN1bHQpe1xuXHQvLyBcdFx0aWYoc2V0dGluZ3MuY3VzdG9tQ29tcGxldGVBY3Rpb24pe1xuXHQvLyBcdFx0XHRzZXR0aW5ncy5jdXN0b21Db21wbGV0ZUFjdGlvbigpO1xuXHQvLyBcdFx0fWVsc2V7XG5cdC8vIFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuQ3VyU2xpZGVdLm5leHRBY3Rpb24oKVxuXHQvLyBcdFx0fVxuXHQvLyBcdH1cblxuXHQvLyBcdGlmIChzZXR0aW5ncy5saW5lYXIgPT09IHRydWUpIHVubG9ja05leHRIb3RzcG90KCRob3RzcG90c1tpICsgMV0sIHNldHRpbmdzLmluZHZbaSArIDJdKTtcblx0Ly8gfVxuXG5cdC8vY2hlY2sgZm9yIGNvbXBsZXRpb24gYW5kIGRlZmluZSB3aGF0IGhhcHBlbnNcblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRmdW5jdGlvbiBhbGxTZWVuQmVoYXZpb3IoKSB7XG5cdFx0aWYgKGFsbFNlZW4oY2xpY2tDaGVja2VyKSkgY29tcGxldGVBY3Rpb24oKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBAcGFyYW0gY2xpY2tDaGVja2VyXG5cdCAqL1xuXHRmdW5jdGlvbiBhbGxTZWVuKGNsaWNrQ2hlY2tlcikge1xuXHRcdHZhciByZXN1bHQgPSB0cnVlO1xuXG5cdFx0Zm9yICh2YXIgaXRlbSBpbiBjbGlja0NoZWNrZXIpIHtcblx0XHRcdGlmIChjbGlja0NoZWNrZXJbaXRlbV0uc2VlbiA9PT0gZmFsc2UgJiYgIWNsaWNrQ2hlY2tlcltpdGVtXS5oYXNDb3JyZWN0Q2xhc3MpIHtcblx0XHRcdFx0cmVzdWx0ID0gZmFsc2U7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSBuZXh0SG90c3BvdFxuXHQgKiBAcGFyYW0gbmV4dEhvdHNwb3RTZXR0aW5nc1xuXHQgKi9cblx0ZnVuY3Rpb24gdW5sb2NrTmV4dEhvdHNwb3QobmV4dEhvdHNwb3QsIG5leHRIb3RzcG90U2V0dGluZ3MpIHtcblx0XHR2YXIgbWFpbk9uVW5sb2NrID0gc2V0dGluZ3Mub25VbmxvY2s7XG5cdFx0dmFyIGluZHZPblVubG9jayA9IG5leHRIb3RzcG90U2V0dGluZ3MgJiYgbmV4dEhvdHNwb3RTZXR0aW5ncy5vblVubG9jaztcblxuXHRcdCRob3RzcG90cy5yZW1vdmVDbGFzcyh1bmxvY2tlZENsYXNzKTtcblxuXHRcdHVubG9jaygkKG5leHRIb3RzcG90KSk7XG5cdFx0JChuZXh0SG90c3BvdCkuYWRkQ2xhc3ModW5sb2NrZWRDbGFzcyk7XG5cblx0XHRtYWluT25VbmxvY2sgJiYgbWFpbk9uVW5sb2NrKG5leHRIb3RzcG90KTtcblx0XHRpbmR2T25VbmxvY2sgJiYgaW5kdk9uVW5sb2NrKG5leHRIb3RzcG90KTtcblx0fVxufVxuXG4vKipcbiAqXG4gKi9cbmZ1bmN0aW9uIHJlc2V0SG90c3BvdCgpIHtcblx0aG90c3BvdEZ1bmN0aW9ucygpO1xufVxuXG5mdW5jdGlvbiBpbml0TWVudSgpIHtcblx0Zm9yIChrZXkgaW4gc2xpZGVzKSB7XG5cdFx0aWYgKHNsaWRlc1trZXldLnR5cGUgPT09ICdtZW51Jykge1xuXHRcdFx0aWYgKHNsaWRlc1trZXldWydtZW51J10pIHtcblx0XHRcdFx0Ly8gc2V0IGRlZmF1bHQgbWVudSBjbGFzcyBpZiBvbmUgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0aWYgKCFzbGlkZXNba2V5XVsnbWVudSddWydtZW51Q2xhc3MnXSkge1xuXHRcdFx0XHRcdHNsaWRlc1trZXldWydtZW51J11bJ21lbnVDbGFzcyddID0gJ3NpLW1lbnVfX2pzJztcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBzZXQgbWVudSBkZWZhdWx0IHRvIG5vbmxpbmVhciBpZiBsaW5lYXIgc2xpZGUga2V5IGlzIG5vdCBwcmVzZW50L3RydWVcblx0XHRcdFx0aWYgKCFzbGlkZXNba2V5XVsnbWVudSddWydsaW5lYXInXSkge1xuXHRcdFx0XHRcdHNsaWRlc1trZXldWydtZW51J11bJ2xpbmVhciddID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gc2V0IG1lbnUgZGVmYXVsdCBtZW51IG5hdmlnYXRpb24gaWYgbm90IHByZXNlbnQuICBXaWxsIG1hdGNoIGJ1dHRvbnMgdG8gc3Vic2VxdWVudCBzbGlkZXMgYWZ0ZXIgdGhlIG1lbnVcblx0XHRcdFx0aWYgKCFzbGlkZXNba2V5XVsnbWVudSddWyduYXZpZ2F0aW9uJ10pIHtcblx0XHRcdFx0XHR2YXIgbnVtYmVyID0gc2xpZGVzW2tleV1bJ3NsaWRlTnVtYmVyJ107XG5cdFx0XHRcdFx0dmFyIGJ1dHRvbnMgPSAkKCcjJyArIGtleSkuZmluZCgnLicgKyBzbGlkZXNba2V5XVsnbWVudSddWydtZW51Q2xhc3MnXSk7XG5cdFx0XHRcdFx0dmFyIGxlbmd0aCA9IGJ1dHRvbnMubGVuZ3RoO1xuXHRcdFx0XHRcdHZhciBkZWZhdWx0TmF2ID0gW107XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDE7IGkgPD0gbGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGRlZmF1bHROYXYucHVzaChudW1iZXIgKyBpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnbmF2aWdhdGlvbiddID0gZGVmYXVsdE5hdjtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBzZXQgZGVmYXVsdCBjb21wbGV0aW9uIHJlcXVpcmVtZW50cyBmb3IgZWFjaCBidXR0b24gaWYgbm90IGdpdmVuLiAgV2lsbCBtYXRjaCBidXR0b25zIHRvIHN1YnNlcXVlbnQgc2xpZGVzIGFmdGVyIHRoZSBtZW51XG5cdFx0XHRcdGlmICghc2xpZGVzW2tleV1bJ21lbnUnXVsnY29tcGxldGlvbklEcyddKSB7XG5cdFx0XHRcdFx0dmFyIG51bWJlciA9IHNsaWRlc1trZXldWydzbGlkZU51bWJlciddO1xuXHRcdFx0XHRcdHZhciBidXR0b25zID0gJCgnIycgKyBrZXkpLmZpbmQoJy4nICsgc2xpZGVzW2tleV1bJ21lbnUnXVsnbWVudUNsYXNzJ10pO1xuXHRcdFx0XHRcdHZhciBsZW5ndGggPSBidXR0b25zLmxlbmd0aDtcblx0XHRcdFx0XHR2YXIgY29tcGxldGlvbklEcyA9IFtdO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAxOyBpIDw9IGxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRmb3IgKGlkIGluIHNsaWRlcykge1xuXHRcdFx0XHRcdFx0XHRpZiAoc2xpZGVzW2lkXVsnc2xpZGVOdW1iZXInXSA9PSAobnVtYmVyICsgaSkudG9TdHJpbmcoKSkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRpb25JRHMucHVzaChpZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnY29tcGxldGlvbklEcyddID0gY29tcGxldGlvbklEcztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gc2V0IGFsbCBtZW51IGRlZmF1bHRzIGlmIHRoZSAnbWVudScga2V5IGlzIGVudGlyZWx5IGFic2VudFxuXHRcdFx0XHRzbGlkZXNba2V5XVsnbWVudSddID0ge307XG5cdFx0XHRcdHNsaWRlc1trZXldWydtZW51J11bJ21lbnVDbGFzcyddID0gJ3NpLW1lbnVfX2pzJztcblx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnbGluZWFyJ10gPSBmYWxzZTtcblx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnY29tcGxldGlvbklEcyddID0gY29tcGxldGlvbklEcztcblx0XHRcdFx0dmFyIGJ1dHRvbnMgPSAkKCcjJyArIGtleSkuZmluZCgnLicgKyBzbGlkZXNba2V5XVsnbWVudSddWydtZW51Q2xhc3MnXSk7XG5cdFx0XHRcdHZhciBudW1iZXIgPSBzbGlkZXNba2V5XVsnc2xpZGVOdW1iZXInXTtcblx0XHRcdFx0dmFyIGxlbmd0aCA9IGJ1dHRvbnMubGVuZ3RoO1xuXHRcdFx0XHR2YXIgZGVmYXVsdE5hdiA9IFtdO1xuXHRcdFx0XHR2YXIgY29tcGxldGlvbklEcyA9IFtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMTsgaSA8PSBsZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGRlZmF1bHROYXYucHVzaChudW1iZXIgKyBpKTtcblx0XHRcdFx0XHRmb3IgKGlkIGluIHNsaWRlcykge1xuXHRcdFx0XHRcdFx0aWYgKHNsaWRlc1tpZF1bJ3NsaWRlTnVtYmVyJ10gPT0gKG51bWJlciArIGkpLnRvU3RyaW5nKCkpIHtcblx0XHRcdFx0XHRcdFx0Y29tcGxldGlvbklEcy5wdXNoKGlkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnbmF2aWdhdGlvbiddID0gZGVmYXVsdE5hdjtcblx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnY29tcGxldGlvbklEcyddID0gY29tcGxldGlvbklEcztcblx0XHRcdH1cblx0XHRcdC8vIGF0dGFjaCBjbGljayBldmVudCB0byB0aGUgYnV0dG9ucyB1c2luZyBuYXZpZ2F0aW9uIGFycmF5XG5cdFx0XHRpZiAoc2xpZGVzW2tleV1bJ21lbnUnXVsnbmF2aWdhdGlvbiddLmxlbmd0aCkge1xuXHRcdFx0XHR2YXIgYnV0dG9ucyA9ICQoJyMnICsga2V5KS5maW5kKCcuJyArIHNsaWRlc1trZXldWydtZW51J11bJ21lbnVDbGFzcyddKTtcblxuXHRcdFx0XHRidXR0b25zLmVhY2goZnVuY3Rpb24gKGlkeCwgYnV0dG9uKSB7XG5cdFx0XHRcdFx0dmFyIHNsaWRlID0gc2xpZGVzW2tleV07XG5cblx0XHRcdFx0XHQkKGJ1dHRvbikub24oJ2NsaWNrLm5hdicsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGp1bXBUb0lkKHNsaWRlWydtZW51J11bJ25hdmlnYXRpb24nXVtpZHhdKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHQvLyBsb2NrIGJ1dHRvbnMgaWYgbGluZWFyIGFuZCB1bmxvY2sgdGhlIGZpcnN0IG9uZVxuXHRcdFx0aWYgKHNsaWRlc1trZXldWydtZW51J11bJ2xpbmVhciddKSB7XG5cdFx0XHRcdHZhciBidXR0b25zID0gJCgnIycgKyBrZXkpLmZpbmQoJy4nICsgc2xpZGVzW2tleV1bJ21lbnUnXVsnbWVudUNsYXNzJ10pO1xuXHRcdFx0XHRsb2NrKGJ1dHRvbnMpO1xuXHRcdFx0XHR1bmxvY2soJChidXR0b25zWzBdKSk7XG5cdFx0XHRcdCQoYnV0dG9uc1swXSkuYWRkQ2xhc3MoJ3VubG9ja2VkJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIG1lbnVGdW5jdGlvbnMoKSB7XG5cdHZhciBtZW51QnV0dG9ucyA9ICQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlKS5maW5kKCcuJyArIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydtZW51J11bJ21lbnVDbGFzcyddKTtcblx0dmFyIGxpbmVhciA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydtZW51J11bJ2xpbmVhciddO1xuXHR2YXIgY29tcGxldGlvbklEcyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydtZW51J11bJ2NvbXBsZXRpb25JRHMnXTtcblx0dmFyIGFsbENvbXBsZXRlID0gdHJ1ZTtcblxuXHRpZiAoY29tcGxldGlvbklEcy5sZW5ndGgpIHtcblx0XHRjb21wbGV0aW9uSURzLmZvckVhY2goZnVuY3Rpb24gKGlkLCBpZHgpIHtcblx0XHRcdGlmIChnZXRDb21wbGV0aW9uU3RhdHVzKGlkKSkge1xuXHRcdFx0XHQkKG1lbnVCdXR0b25zW2lkeF0pLmFkZENsYXNzKCdjb21wbGV0ZWQnKTtcblx0XHRcdFx0aWYgKGxpbmVhciAmJiBtZW51QnV0dG9uc1tpZHggKyAxXSkge1xuXHRcdFx0XHRcdCQobWVudUJ1dHRvbnMpLnJlbW92ZUNsYXNzKCd1bmxvY2tlZCcpO1xuXHRcdFx0XHRcdHVubG9jaygkKG1lbnVCdXR0b25zW2lkeCArIDFdKSk7XG5cdFx0XHRcdFx0JChtZW51QnV0dG9uc1tpZHggKyAxXSkuYWRkQ2xhc3MoJ3VubG9ja2VkJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGFsbENvbXBsZXRlID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoYWxsQ29tcGxldGUpIHtcblx0XHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnbWVudSddWydhbGxDb21wbGV0ZSddID0gdHJ1ZTtcblx0fSBlbHNlIHtcblx0XHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnbWVudSddWydhbGxDb21wbGV0ZSddID0gZmFsc2U7XG5cdH1cbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vKkZlYXR1cmU6U29ydGFibGVzLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gc29ydEZ1bmN0aW9ucygpIHtcbiAgICAvLyBmaXJzdCB2aXNpdCBzZXR1cFxuICAgIC8vIGFzc2lnbnMgb3JpZ2luYWwgcG9zaXRpb25zIGluIG9yZGVyIHRvIG1ha2UgcmVzZXQgd29ya1xuICAgIGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS52aXNpdGVkID09PSBmYWxzZSkge1xuICAgICAgICB2YXIgJHNvcnRhYmxlcyA9IGdsb2JhbFZhci4kY3VyU2xpZGUuZmluZCgnLnNvcnRhYmxlJyk7XG4gICAgICAgICRzb3J0YWJsZXMuZWFjaChmdW5jdGlvbiAoaWR4LCBzb3J0YWJsZSkge1xuICAgICAgICAgICAgdmFyIGlkID0gc29ydGFibGUuaWQ7XG5cbiAgICAgICAgICAgIC8vIGluaXRpYWxpemUgc29ydGFibGVzIHdpdGggb3Igd2l0aG91dCBvcHRpb25zXG4gICAgICAgICAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ3NvcnQnXVsnc29ydGFibGVzJ11baWRdKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydzb3J0J11bJ3NvcnRhYmxlcyddW2lkXVsnb3B0aW9ucyddKSB7XG4gICAgICAgICAgICAgICAgICAgICQoc29ydGFibGUpLnNvcnRhYmxlKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydzb3J0J11bJ3NvcnRhYmxlcyddW2lkXVsnb3B0aW9ucyddKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKHNvcnRhYmxlKS5zb3J0YWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vbWFrZXMgYmVnaW5uaW5nIG9yZGVyIGRlZmF1bHQgYW5zd2VyIGlmIG5vIGFuc3dlciBpcyBnaXZlblxuICAgICAgICAgICAgICAgIGlmICghc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ3NvcnQnXVsnc29ydGFibGVzJ11baWRdWydhbnN3ZXInXSkge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnc29ydCddWydzb3J0YWJsZXMnXVtpZF1bJ2Fuc3dlciddID0gJChzb3J0YWJsZSkuc29ydGFibGUoJ3RvQXJyYXknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoc29ydGFibGUpLnNvcnRhYmxlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzb3J0YWJsZUVsZW1lbnRzID0gJCgnIycgKyBpZCArICc+IGRpdicpO1xuICAgICAgICAgICAgLy8gbmVjZXNzYXJ5IHRvIG1ha2UgYSBjb3B5IG90aGVyd2lzZSByZWFzc2lnbmluZyBvbmUgb2YgdGhlIGRhdGEgZWxlbWVudHMgb3ZlcndyaXRlcyB0aGUgb3RoZXJcbiAgICAgICAgICAgIHZhciBzaHVmZmxlRWxlbWVudHMgPSAkKCcjJyArIGlkICsgJz4gZGl2Jyk7XG5cbiAgICAgICAgICAgIC8vIFRoaXMgaGFuZGxlcyBrZXlib2FyZCBhY2Nlc3NpYmlsaXR5IGZvciBzb3J0YWJsZXNcblxuICAgICAgICAgICAgc29ydGFibGVFbGVtZW50cy5lYWNoKGZ1bmN0aW9uIChpZHgsIHNvcnQpIHtcbiAgICAgICAgICAgICAgICBzb3J0S2V5Ym9hcmQoc29ydCwgc29ydGFibGUpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoc29ydGFibGUpLmRhdGEoe1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBzb3J0YWJsZUVsZW1lbnRzLFxuICAgICAgICAgICAgICAgIHNodWZmbGU6IHNodWZmbGVFbGVtZW50c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHJhbmRvbWl6ZXMgcGxhY2VtZW50IG9mIGRpdnMgZXZlcnkgdGltZSB0aGUgc2xpZGUgaXMgZW50ZXJlZFxuICAgIGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnc29ydCddWydyYW5kb21pemUnXSA9PT0gdHJ1ZSkge1xuICAgICAgICB2YXIgJHNvcnRhYmxlczIgPSBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJy5zb3J0YWJsZScpO1xuICAgICAgICAkc29ydGFibGVzMi5lYWNoKGZ1bmN0aW9uIChpZHgsIHNvcnRhYmxlKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSAkKHNvcnRhYmxlKS5kYXRhKCdlbGVtZW50cycpO1xuICAgICAgICAgICAgdmFyIHNodWZmbGVBcnIgPSBbXTtcblxuICAgICAgICAgICAgLy8gY3JlYXRlIGFuIGFycmF5IG9mIHVuaXF1ZSByYW5kb20gbnVtYmVycyB0byBzZXJ2ZSBhcyBpbmRpY2VzXG4gICAgICAgICAgICB3aGlsZSAoc2h1ZmZsZUFyci5sZW5ndGggPCBlbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbnVtID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZWxlbWVudHMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAvLyB0ZXN0cyB0aGF0IHRoZSBudW0gdmFyaWFibGUgaGFzIG5vdCBhbHJlYWR5IGJlZW4gYWRkZWQgdG8gdGhlIGFycmF5XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAhc2h1ZmZsZUFyci5zb21lKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsID09PSBudW07XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHNodWZmbGVBcnIucHVzaChudW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gdXNlIHRoZSBhcnJheSBvZiByYW5kb20gbnVtYmVycyB0byByZWFzc2lnbiBlbGVtZW50cyBpbiB0aGUgc2h1ZmZsZSBkYXRhIGF0dHJpYnV0ZVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICQoc29ydGFibGUpLmRhdGEoJ3NodWZmbGUnKVtpXSA9ICQoc29ydGFibGUpLmRhdGEoJ2VsZW1lbnRzJylbc2h1ZmZsZUFycltpXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHJhbmRvbWl6ZXMgYWNyb3NzIGNvbm5lY3RlZCBsaXN0c1xuICAgIGlmIChcbiAgICAgICAgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ3NvcnQnXVsncmFuZG9taXplQ29ubmVjdCddICYmXG4gICAgICAgIHR5cGVvZiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnc29ydCddWydyYW5kb21pemVDb25uZWN0J10gPT09ICdzdHJpbmcnXG4gICAgKSB7XG4gICAgICAgIHZhciBsaXN0cyA9ICQoJy4nICsgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ3NvcnQnXVsncmFuZG9taXplQ29ubmVjdCddKTtcbiAgICAgICAgdmFyIGVsZW1lbnRBcnIgPSBbXTtcbiAgICAgICAgdmFyIHNodWZmbGVkID0gW107XG4gICAgICAgIGxpc3RzLmVhY2goZnVuY3Rpb24gKGlkeCwgbGlzdCkge1xuICAgICAgICAgICAgJChsaXN0KVxuICAgICAgICAgICAgICAgIC5maW5kKCdkaXYnKVxuICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChpZHgyLCBkaXYpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudEFyci5wdXNoKGRpdik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdoaWxlIChlbGVtZW50QXJyLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIG51bSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVsZW1lbnRBcnIubGVuZ3RoKTtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50QXJyLnNwbGljZShudW0sIDEpO1xuICAgICAgICAgICAgc2h1ZmZsZWQucHVzaChlbGVtZW50WzBdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgd2hpbGUgKHNodWZmbGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgbGlzdHMuZWFjaChmdW5jdGlvbiAoaWR4LCBsaXN0KSB7XG4gICAgICAgICAgICAgICAgJChsaXN0KS5kYXRhKCdzaHVmZmxlJylbaV0gPSBzaHVmZmxlZC5zaGlmdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldFNvcnQoKTtcbn1cblxuLy8gcmVzZXQgd29ya3MgZm9yIGJvdGggcmFuZG9taXplZCBhbmQgbm9uLXJhbmRvbWl6ZWQgc29ydCBzbGlkZXMuICB5b3UgZG8gbm90IG5lZWQgdG8gcHV0IHRoZSByYW5kb21pemUga2V5IGlmIHlvdSBkb24ndCBuZWVkIGl0LlxuLy8gcmVzZXQgd2lsbCBlaXRoZXIgcmVzZXQgdG8gdGhlIGh0bWwgb3JkZXIgb2YgZGl2cyBvciB0byB0aGUgY3VycmVudCByYW5kb21pemVkIG9yZGVyXG5mdW5jdGlvbiByZXNldFNvcnQoKSB7XG4gICAgdmFyICRzb3J0YWJsZXMgPSBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJy5zb3J0YWJsZScpO1xuICAgICRzb3J0YWJsZXMuZWFjaChmdW5jdGlvbiAoaWR4LCBzb3J0YWJsZSkge1xuICAgICAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ3NvcnQnXVsncmFuZG9taXplQ29ubmVjdCddKSB7XG4gICAgICAgICAgICAkKHNvcnRhYmxlKS5hcHBlbmQoJChzb3J0YWJsZSkuZGF0YSgnc2h1ZmZsZScpKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydzb3J0J11bJ3JhbmRvbWl6ZSddID09PSBmYWxzZSB8fFxuICAgICAgICAgICAgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ3NvcnQnXVsncmFuZG9taXplJ10gPT09IHVuZGVmaW5lZFxuICAgICAgICApIHtcbiAgICAgICAgICAgICQoc29ydGFibGUpLmFwcGVuZCgkKHNvcnRhYmxlKS5kYXRhKCdlbGVtZW50cycpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoc29ydGFibGUpLmFwcGVuZCgkKHNvcnRhYmxlKS5kYXRhKCdzaHVmZmxlJykpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8vIGFjY2Vzc2liaWxpdHkgZnVuY3Rpb25cbmZ1bmN0aW9uIHNvcnRLZXlib2FyZChzb3J0SXRlbSwgc29ydExpc3QpIHtcbiAgICB2YXIgY29ubmVjdGVkID0gJChzb3J0TGlzdCkuc29ydGFibGUoJ29wdGlvbicsICdjb25uZWN0V2l0aCcpO1xuXG4gICAgJChzb3J0SXRlbSlcbiAgICAgICAgLmF0dHIoJ3RhYmluZGV4JywgMClcbiAgICAgICAgLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDg3IHx8IGV2ZW50LndoaWNoID09PSA2NSkge1xuICAgICAgICAgICAgICAgIC8vIGxlZnQgb3IgdXAgb25lIHNwYWNlICgndycsICdhJylcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmluc2VydEJlZm9yZSgkKHRoaXMpLnByZXYoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDgzIHx8IGV2ZW50LndoaWNoID09PSA2OCkge1xuICAgICAgICAgICAgICAgIC8vIHJpZ2h0IG9yIGRvd24gb25lIHNwYWNlICgncycsJ2QnKVxuICAgICAgICAgICAgICAgICQodGhpcykuaW5zZXJ0QWZ0ZXIoJCh0aGlzKS5uZXh0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSA4MSkge1xuICAgICAgICAgICAgICAgIC8vIFwicVwiIHRvcCBvZiBsaXN0XG4gICAgICAgICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAucGFyZW50KClcbiAgICAgICAgICAgICAgICAgICAgLnByZXBlbmQoJCh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDY5KSB7XG4gICAgICAgICAgICAgICAgLy8gXCJlXCIgYm90dG9tIG9mIGxpc3RcbiAgICAgICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbm5lY3RlZCAmJiBldmVudC53aGljaCA9PT0gODgpIHtcbiAgICAgICAgICAgICAgICAvLyAneCcgbW92ZSBpdGVtIHRvIGNvbm5lY3RlZCBsaXN0c1xuICAgICAgICAgICAgICAgIHZhciBuZXdMaXN0cyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRJbmRleDtcbiAgICAgICAgICAgICAgICAkKGNvbm5lY3RlZCkuZWFjaChmdW5jdGlvbiAoaWR4LCBsaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJChsaXN0KS5maW5kKGV2ZW50LnRhcmdldClbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0xpc3RzLnB1c2gobGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJbmRleCA9IGlkeDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChuZXdMaXN0c1twYXJlbnRJbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgJChuZXdMaXN0c1twYXJlbnRJbmRleF0pLmFwcGVuZCgkKHRoaXMpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKG5ld0xpc3RzWzBdKS5hcHBlbmQoJCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJCh0aGlzKS5mb2N1cygpO1xuICAgICAgICB9KTtcbn1cbi8vLy8vLy8vLy8vLypGZWF0dXJlOk11bHRpcGxlIENob2ljZS9TaW5nbGUgQ2hvaWNlIFF1ZXN0aW9ucy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiByZXNldFF1aXooKSB7XG5cdHZhciBjaG9pY2VzID0gJCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUgKyAnIC5zaS1xdWl6X19qcyBsaScpO1xuXHRjaG9pY2VzLnJlbW92ZUNsYXNzKCdzaS1xdWl6LXNlbGVjdGVkJyk7XG59XG5mdW5jdGlvbiBpbml0UXVpeigpIHtcblx0Zm9yIChrZXkgaW4gc2xpZGVzKSB7XG5cdFx0aWYgKHNsaWRlc1trZXldLnR5cGUgPT09ICdxdWl6Jykge1xuXHRcdFx0aWYgKHNsaWRlc1trZXldLnF1aXoucmFkaW8gPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHNsaWRlc1trZXldLnF1aXoucmFkaW8gPSBmYWxzZTtcblx0XHRcdH0gZWxzZSBpZiAoc2xpZGVzW2tleV0ucXVpei5yYWRpbykge1xuXHRcdFx0XHQkKCcjJyArIGtleSArICcgLnNpLXF1aXpfX2pzJykuYWRkQ2xhc3MoJ3NpLXJhZGlvX19qcycpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHR2YXIgcXVpenplcyA9ICQoJy5zaS1xdWl6X19qcycpO1xuXHR2YXIgYnV0dG9uVHlwZSA9IGdsb2JhbFZhci5idXR0b25UeXBlO1xuXHRxdWl6emVzLmVhY2goZnVuY3Rpb24gKGlkeCwgcXVpeikge1xuXHRcdHZhciBjaG9pY2VzID0gJChxdWl6KS5maW5kKCdsaScpO1xuXHRcdHZhciBidXR0b25zID0gJChxdWl6KS5maW5kKCdkaXYnKTtcblx0XHR2YXIgaXNSYWRpbyA9ICQocXVpeikuaGFzQ2xhc3MoJ3NpLXJhZGlvX19qcycpID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdGNob2ljZXMuZWFjaChmdW5jdGlvbiAoaWR4LCBjaG9pY2UpIHtcblx0XHRcdCQoY2hvaWNlKS5hZGRDbGFzcygnc2ktcXVpei1hbnN3ZXInKS5hdHRyKCd0YWJpbmRleCcsICcwJyk7XG5cdFx0XHQkKGNob2ljZSkub24oJ2NsaWNrLnF1aXonLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXkoKTtcblx0XHRcdFx0aWYgKGlzUmFkaW8pIHtcblx0XHRcdFx0XHRjaG9pY2VzLnJlbW92ZUNsYXNzKCdzaS1xdWl6LXNlbGVjdGVkJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCQodGhpcykuaGFzQ2xhc3MoJ3NpLXF1aXotc2VsZWN0ZWQnKSkge1xuXHRcdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ3NpLXF1aXotc2VsZWN0ZWQnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdzaS1xdWl6LXNlbGVjdGVkJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0JChjaG9pY2UpLm9uKCdrZXl1cC5xdWl6JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZiAoZXZlbnQud2hpY2ggPT09IDEzKSB7XG5cdFx0XHRcdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHRcdFx0XHRcdGlmIChpc1JhZGlvKSB7XG5cdFx0XHRcdFx0XHRjaG9pY2VzLnJlbW92ZUNsYXNzKCdzaS1xdWl6LXNlbGVjdGVkJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICgkKHRoaXMpLmhhc0NsYXNzKCdzaS1xdWl6LXNlbGVjdGVkJykpIHtcblx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ3NpLXF1aXotc2VsZWN0ZWQnKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnc2ktcXVpei1zZWxlY3RlZCcpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0YnV0dG9ucy5lYWNoKGZ1bmN0aW9uIChpZHgsIGJ1dHRvbikge1xuXHRcdFx0dmFyIGltYWdlID0gJChidXR0b24pLmNoaWxkcmVuKCkuZXEoMCk7XG5cdFx0XHRpZiAoaXNSYWRpbykge1xuXHRcdFx0XHQkKGltYWdlKS5hdHRyKCdzcmMnLCBmdW5jdGlvbiAoaW5kZXgsIGF0dHIpIHtcblx0XHRcdFx0XHRyZXR1cm4gYXR0ci5yZXBsYWNlKCdtY3EnLCAnc2NxJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JChpbWFnZSkuYXR0cignc3JjJywgZnVuY3Rpb24gKGluZGV4LCBhdHRyKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGF0dHIucmVwbGFjZSgnc2NxJywgJ21jcScpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0JChidXR0b24pXG5cdFx0XHRcdC5maW5kKCdpbWcnKVxuXHRcdFx0XHQuYXR0cignc3JjJywgZnVuY3Rpb24gKGluZGV4LCBhdHRyKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGF0dHIucmVwbGFjZSgnY2xhc3NpYycsIGJ1dHRvblR5cGUpO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblx0fSk7XG59XG5mdW5jdGlvbiBxdWl6RnVuY3Rpb24oKSB7XG5cdHZhciBhbnN3ZXJzID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ3F1aXonXVsnYW5zd2VycyddO1xuXHR2YXIgY2hvaWNlcyA9ICQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlICsgJyAuc2ktcXVpel9fanMgbGknKTtcblx0aWYgKCFzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsndmlzaXRlZCddICYmIGdsb2JhbFZhci5kZXZNb2RlKSB7XG5cdFx0Y2hvaWNlcy5lYWNoKGZ1bmN0aW9uIChpZHgsIGNob2ljZSkge1xuXHRcdFx0aWYgKGFuc3dlcnNbJChjaG9pY2UpLmF0dHIoJ2lkJyldKSB7XG5cdFx0XHRcdCQoY2hvaWNlKS5jc3MoJ2NvbG9yJywgJ2JsdWUnKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHRyZXNldFF1aXooKTtcblx0fVxufVxuXG5mdW5jdGlvbiBmb3JtRnVuY3Rpb25zKCkge1xuXHR2YXIgJGZvcm0gPSAkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSArICcgZm9ybScpO1xuXG5cdGlmICghc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uZm9ybS5kb250R2VuZXJhdGUpIHtcblx0XHRnZW5lcmF0ZUZvcm0oJGZvcm0pO1xuXHR9XG5cblx0dmFyIGhhc1N1Ym1pdCA9ICEhJGZvcm0uZmluZCgnaW5wdXRbdHlwZT1zdWJtaXRdJykubGVuZ3RoO1xuXG5cdCRmb3JtLmFkZENsYXNzKCdmb3JtLXN0eWxlJyk7XG5cdCRmb3JtLnRyaWdnZXIoJ3Jlc2V0Jyk7XG5cblx0aWYgKCFoYXNTdWJtaXQpIHtcblx0XHQkZm9ybS5hcHBlbmQoJzxpbnB1dCB0eXBlPVwic3VibWl0XCIvPicpO1xuXHR9XG5cblx0JGZvcm0ub24oJ3N1Ym1pdC5yZXEtZm9ybScsIGZ1bmN0aW9uIChlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHR9KTtcblxuXHR2YXIgaW5wdXRzID0gJGZvcm0uZmluZCgnaW5wdXQnKTtcblx0aW5wdXRzLmtleXVwKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXHRcdHZhciBjaGFyYWN0ZXJzID0gJHRoaXMudmFsKCkubGVuZ3RoO1xuXHRcdHZhciBtYXhMZW5ndGggPSAkdGhpcy5hdHRyKCdtYXhMZW5ndGgnKTtcblx0XHR2YXIgbGFzdElucHV0ID0gJHRoaXMubmV4dCgpLmhhc0NsYXNzKCdjaGVja2JveCcpO1xuXG5cdFx0aWYgKGNoYXJhY3RlcnMgPT0gbWF4TGVuZ3RoICYmICFsYXN0SW5wdXQpIHtcblx0XHRcdCR0aGlzLm5leHQoKS5mb2N1cygpO1xuXHRcdH1cblx0fSk7XG5cdGlucHV0cy5rZXlkb3duKGZ1bmN0aW9uIChlKSB7XG5cdFx0aWYgKChlLndoaWNoID09IDggfHwgZS53aGljaCA9PSA0NikgJiYgJCh0aGlzKS52YWwoKSA9PSAnJykge1xuXHRcdFx0JCh0aGlzKS5wcmV2KCdpbnB1dCcpLmZvY3VzKCk7XG5cdFx0fVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gY2hlY2tGb3JtKCkge1xuXHR2YXIgZmllbGRzID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uZm9ybS5maWVsZHM7XG5cblx0Zm9yICh2YXIga2V5IGluIGZpZWxkcykge1xuXHRcdHZhciBmaWVsZCA9IGZpZWxkc1trZXldO1xuXHRcdHZhciByZXN1bHQgPSAnJztcblx0XHR2YXIgaW5wdXRzID0gJCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUgKyAnIC4nICsgZmllbGQuY2xhc3MpO1xuXHRcdHZhciBhbnN3ZXIgPSBmaWVsZC5hbnN3ZXI7XG5cdFx0dmFyIGNhc2VTZW5zaXRpdmUgPSBmaWVsZHNba2V5XS5jYXNlU2Vuc2l0aXZlO1xuXHRcdHZhciB1c2VyQW5zd2VyID0gJyc7XG5cblx0XHRpZiAoZmllbGQuYW5zd2VyKSB7XG5cdFx0XHRpZiAoZmllbGQudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuXHRcdFx0XHR2YXIgc2VsZWN0ZWRBbnN3ZXIgPSBpbnB1dHMuZmlsdGVyKCc6Y2hlY2tlZCcpWzBdO1xuXHRcdFx0XHRpZiAoc2VsZWN0ZWRBbnN3ZXIpIHVzZXJBbnN3ZXIgPSBzZWxlY3RlZEFuc3dlci52YWx1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlucHV0cy5lYWNoKGZ1bmN0aW9uIChpLCBpbnB1dCkge1xuXHRcdFx0XHRcdHVzZXJBbnN3ZXIgKz0gaW5wdXQudmFsdWU7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFjYXNlU2Vuc2l0aXZlKSB7XG5cdFx0XHRcdGFuc3dlciA9IGFuc3dlci50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHR1c2VyQW5zd2VyID0gdXNlckFuc3dlci50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXN1bHQgPSB1c2VyQW5zd2VyID09PSBhbnN3ZXI7XG5cblx0XHRcdGNvbnNvbGUubG9nKHVzZXJBbnN3ZXIsIGFuc3dlcik7XG5cdFx0XHRjb25zb2xlLmxvZyhyZXN1bHQpO1xuXHRcdFx0aWYgKCFyZXN1bHQpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gdmFsaWRGb3JtKCkge1xuXHR2YXIgdmFsaWQgPSB0cnVlO1xuXHR2YXIgcmVxdWlyZWRGaWVsZHMgPSAkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSlcblx0XHQuZmluZCgnaW5wdXQsdGV4dGFyZWEsc2VsZWN0Jylcblx0XHQuZmlsdGVyKCdbcmVxdWlyZWRdJyk7XG5cdHJlcXVpcmVkRmllbGRzLmVhY2goZnVuY3Rpb24gKGksIGZpZWxkKSB7XG5cdFx0aWYgKGZpZWxkLnZhbHVlID09PSAnJykge1xuXHRcdFx0dmFsaWQgPSBmYWxzZTtcblx0XHRcdCQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlICsgJyBmb3JtJylcblx0XHRcdFx0LmZpbmQoJ2lucHV0W3R5cGU9c3VibWl0XScpXG5cdFx0XHRcdC50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiB2YWxpZDtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVGb3JtKCRmb3JtKSB7XG5cdHZhciBmaWVsZHMgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5mb3JtLmZpZWxkcztcblxuXHQkZm9ybS5odG1sKCcnKTtcblx0Zm9yICh2YXIga2V5IGluIGZpZWxkcykge1xuXHRcdHZhciBmaWVsZCA9IGZpZWxkc1trZXldO1xuXG5cdFx0dmFyIGlucHV0SUQgPSBnbG9iYWxWYXIuY3VyU2xpZGUudG9Mb3dlckNhc2UoKSArICctJyArIGZpZWxkLmNsYXNzO1xuXG5cdFx0aWYgKGZpZWxkLmxhYmVsKSB7XG5cdFx0XHR2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuXG5cdFx0XHRsYWJlbC5odG1sRm9yID0gaW5wdXRJRDtcblx0XHRcdCQobGFiZWwpLnRleHQoZmllbGQubGFiZWwpO1xuXG5cdFx0XHQkZm9ybS5hcHBlbmQobGFiZWwpO1xuXHRcdH1cblx0XHQvLyBlc3RhYmxpc2ggdHlwZVxuXHRcdHN3aXRjaCAoZmllbGQudHlwZSkge1xuXHRcdFx0Y2FzZSAnY2hlY2tib3gnOlxuXHRcdFx0XHRmaWVsZC5vcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbikge1xuXHRcdFx0XHRcdHZhciBvcHRpb25MYWJlbCA9IG9wdGlvbi50b0xvd2VyQ2FzZSgpLnNwbGl0KCcgJykuam9pbignLScpO1xuXHRcdFx0XHRcdHZhciByYWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cdFx0XHRcdFx0dmFyIHJhZGlvTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuXG5cdFx0XHRcdFx0cmFkaW9MYWJlbC5odG1sRm9yID0gZmllbGQuY2xhc3MgKyAnLScgKyBvcHRpb25MYWJlbDtcblx0XHRcdFx0XHQkKHJhZGlvTGFiZWwpLmFkZENsYXNzKGZpZWxkLmNsYXNzICsgJy1jb250YWluZXIgcmFkaW8tY29udGFpbmVyJyk7XG5cblx0XHRcdFx0XHRyYWRpby5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAncmFkaW8nKTtcblx0XHRcdFx0XHRyYWRpby5pZCA9IGZpZWxkLmNsYXNzICsgJy0nICsgb3B0aW9uTGFiZWw7XG5cdFx0XHRcdFx0cmFkaW8ucmVxdWlyZWQgPSAhZmllbGQub3B0aW9uYWw7XG5cdFx0XHRcdFx0cmFkaW8ubmFtZSA9IGZpZWxkLmNsYXNzO1xuXHRcdFx0XHRcdHJhZGlvLnZhbHVlID0gb3B0aW9uO1xuXHRcdFx0XHRcdCQocmFkaW8pLmFkZENsYXNzKGZpZWxkLmNsYXNzKTtcblxuXHRcdFx0XHRcdCRmb3JtLmFwcGVuZChyYWRpb0xhYmVsKTtcblx0XHRcdFx0XHQkKHJhZGlvTGFiZWwpLmFwcGVuZChyYWRpbyk7XG5cblx0XHRcdFx0XHRzd2l0Y2ggKGZpZWxkLnN0eWxlKSB7XG5cdFx0XHRcdFx0XHRjYXNlICd4Jzpcblx0XHRcdFx0XHRcdFx0dmFyIGN1c3RvbUNoZWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXG5cdFx0XHRcdFx0XHRcdCQocmFkaW8pLmFkZENsYXNzKCdoaWRlLXJhZGlvJyk7XG5cdFx0XHRcdFx0XHRcdCQoY3VzdG9tQ2hlY2spLmFkZENsYXNzKGZpZWxkLmNsYXNzICsgJy1zdHlsZSB4LXN0eWxlJyk7XG5cblx0XHRcdFx0XHRcdFx0JChyYWRpb0xhYmVsKS5hcHBlbmQoY3VzdG9tQ2hlY2spO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ2RvdCc6XG5cdFx0XHRcdFx0XHRcdHZhciBjdXN0b21DaGVjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuXHRcdFx0XHRcdFx0XHQkKHJhZGlvKS5hZGRDbGFzcygnaGlkZS1yYWRpbycpO1xuXHRcdFx0XHRcdFx0XHQkKGN1c3RvbUNoZWNrKS5hZGRDbGFzcyhmaWVsZC5jbGFzcyArICctc3R5bGUgZG90LXN0eWxlJyk7XG5cblx0XHRcdFx0XHRcdFx0JChyYWRpb0xhYmVsKS5hcHBlbmQoY3VzdG9tQ2hlY2spO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGZpZWxkLmxhYmVscykge1xuXHRcdFx0XHRcdFx0dmFyIHNMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuXHRcdFx0XHRcdFx0JChzTGFiZWwpLmFkZENsYXNzKGZpZWxkLmNsYXNzICsgJy1vcHRpb24tbGFiZWwnKTtcblx0XHRcdFx0XHRcdCQoc0xhYmVsKS50ZXh0KG9wdGlvbik7XG5cblx0XHRcdFx0XHRcdCQocmFkaW9MYWJlbCkuYXBwZW5kKHNMYWJlbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdkcm9wZG93bic6XG5cdFx0XHRcdHZhciBkcm9wZG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuXHRcdFx0XHRkcm9wZG93bi5pZCA9IGlucHV0SUQ7XG5cdFx0XHRcdGRyb3Bkb3duLnJlcXVpcmVkID0gIWZpZWxkLm9wdGlvbmFsO1xuXHRcdFx0XHQkKGRyb3Bkb3duKS5hZGRDbGFzcyhmaWVsZC5jbGFzcyArICcgJyArIGZpZWxkLmNsYXNzICsgJy1zdHlsZScpO1xuXHRcdFx0XHQkKGRyb3Bkb3duKS5hcHBlbmQoJzxvcHRpb24gdmFsdWU9XCJcIj5TZWxlY3QgT25lPC9vcHRpb24+Jyk7XG5cdFx0XHRcdGZpZWxkLm9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uKSB7XG5cdFx0XHRcdFx0JChkcm9wZG93bikuYXBwZW5kKCc8b3B0aW9uIHZhbHVlPVwiJyArIG9wdGlvbiArICdcIj4nICsgb3B0aW9uICsgJzwvb3B0aW9uPicpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0JGZvcm0uYXBwZW5kKGRyb3Bkb3duKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHQvLyBjcmVhdGUgZmllbGRcblx0XHRcdFx0aWYgKCFmaWVsZC5zZXBhcmF0ZSkge1xuXHRcdFx0XHRcdHZhciB0ZXh0SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuXG5cdFx0XHRcdFx0dGV4dElucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG5cdFx0XHRcdFx0dGV4dElucHV0LnJlcXVpcmVkID0gIWZpZWxkLm9wdGlvbmFsO1xuXHRcdFx0XHRcdHRleHRJbnB1dC5pZCA9IGlucHV0SUQ7XG5cdFx0XHRcdFx0aWYgKGZpZWxkLm1heExlbmd0aCkgdGV4dElucHV0Lm1heExlbmd0aCA9IGZpZWxkLm1heExlbmd0aDtcblx0XHRcdFx0XHRpZiAoZmllbGQucGxhY2Vob2xkZXIpIHRleHRJbnB1dC5wbGFjZWhvbGRlciA9IGZpZWxkLnBsYWNlaG9sZGVyO1xuXHRcdFx0XHRcdCQodGV4dElucHV0KS5hZGRDbGFzcyhmaWVsZC5jbGFzcyArICcgJyArIGZpZWxkLmNsYXNzICsgJy1zdHlsZScpO1xuXG5cdFx0XHRcdFx0JGZvcm0uYXBwZW5kKHRleHRJbnB1dCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gc2VwYXJhdGUgZmllbGRzIHBlciBsZXR0ZXJcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGZpZWxkLmFuc3dlci5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0dmFyIHRleHRJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cblx0XHRcdFx0XHRcdGlmICghaSkgdGV4dElucHV0LmlkID0gaW5wdXRJRDtcblx0XHRcdFx0XHRcdHRleHRJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuXHRcdFx0XHRcdFx0dGV4dElucHV0Lm1heExlbmd0aCA9IDE7XG5cdFx0XHRcdFx0XHR0ZXh0SW5wdXQucmVxdWlyZWQgPSAhZmllbGQub3B0aW9uYWw7XG5cdFx0XHRcdFx0XHQkKHRleHRJbnB1dCkuYWRkQ2xhc3MoXG5cdFx0XHRcdFx0XHRcdGZpZWxkLmNsYXNzICtcblx0XHRcdFx0XHRcdFx0XHQnICcgK1xuXHRcdFx0XHRcdFx0XHRcdGZpZWxkLmNsYXNzICtcblx0XHRcdFx0XHRcdFx0XHQnLXN0eWxlICcgK1xuXHRcdFx0XHRcdFx0XHRcdGZpZWxkLmNsYXNzICtcblx0XHRcdFx0XHRcdFx0XHQnLScgK1xuXHRcdFx0XHRcdFx0XHRcdChpICsgMSkgK1xuXHRcdFx0XHRcdFx0XHRcdCctc3R5bGUgc2VwYXJhdGVkJ1xuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0JGZvcm0uYXBwZW5kKHRleHRJbnB1dCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxufVxuXG52YXIgY2hhcHRlck5hdmlnYXRpb25TbGlkZXMgPSBbJ1YxJywgJ0kxJywgJ0kyJywgJ0kzJ107XG52YXIgY2hhcHRlckNvbXBsZXRpb25TbGlkZXMgPSBbJ1YxJywgJ0kxJywgJ0kyJywgJ0kzJ107XG5cbmZ1bmN0aW9uIGluaXRTaWRlTWVudSgpIHtcblx0dmFyICRtZW51ID0gJCgnI3NpLXNpZGUtbWVudScpO1xuXHR2YXIgJGNvbnRhaW5lciA9ICQoJyNzaS1zaWRlLW1lbnUtY29udGFpbmVyJyk7XG5cdHZhciBidXR0b25zID0gJCgnLnNpLW1lbnUtbmF2aWdhdGlvbicpLmZpbmQoJ2J1dHRvbicpO1xuXG5cdCRtZW51Lm9uKCdjbGljay5zdG9wJywgZnVuY3Rpb24gKGUpIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHR9KTtcblx0JGNvbnRhaW5lci5vbignY2xpY2suc2lkZScsIGZ1bmN0aW9uIChlKSB7XG5cdFx0Y2xvc2VTaWRlTWVudSgpO1xuXHR9KTtcblxuXHRidXR0b25zLmVhY2goZnVuY3Rpb24gKGlkeCwgYnV0dG9uKSB7XG5cdFx0JChidXR0b24pLm9uKCdjbGljay5zaWRlJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGlkID0gY2hhcHRlck5hdmlnYXRpb25TbGlkZXNbaWR4XTtcblx0XHRcdGp1bXBUb0lkKGlkKTtcblx0XHRcdGNsb3NlU2lkZU1lbnUoKTtcblx0XHR9KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIG9wZW5TaWRlTWVudSgpIHtcblx0dmFyICRtZW51ID0gJCgnI3NpLXNpZGUtbWVudScpO1xuXHR2YXIgJGNvbnRhaW5lciA9ICQoJyNzaS1zaWRlLW1lbnUtY29udGFpbmVyJyk7XG5cblx0JGNvbnRhaW5lci5hZGRDbGFzcygnbWVudS1vcGVuJyk7XG5cdCRtZW51LmFkZENsYXNzKCdtZW51LW9wZW4nKTtcblx0Ly8gdGhpcyBpcyBmb3IgcGF1c2luZyB0aGUgdmlkZW8gd2hlbiB5b3Ugb3BlbiB0aGUgc2lkZSBtZW51XG5cdHZhciB0eXBlID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0udHlwZTtcblx0aWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnZpZGVvTG9hZGVkICYmIHR5cGUgPT0gJ3ZpZGVvJykge1xuXHRcdHZpZGVvanMoZ2xvYmFsVmFyLiRjdXJTbGlkZS5maW5kKCd2aWRlbycpWzBdLmlkKS5wYXVzZSgpO1xuXHR9XG5cblx0aGFuZGxlU2lkZUJ1dHRvbnMoKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VTaWRlTWVudSgpIHtcblx0dmFyICRtZW51ID0gJCgnI3NpLXNpZGUtbWVudScpO1xuXHR2YXIgJGNvbnRhaW5lciA9ICQoJyNzaS1zaWRlLW1lbnUtY29udGFpbmVyJyk7XG5cblx0JGNvbnRhaW5lci5yZW1vdmVDbGFzcygnbWVudS1vcGVuJyk7XG5cdCRtZW51LnJlbW92ZUNsYXNzKCdtZW51LW9wZW4nKTtcblx0Ly8gdW5wYXVzZSB0aGUgdmlkZW8gd2hlbiB5b3UgY2xvc2UgdGhlIHNpZGUgbWVudVxuXHR2YXIgdHlwZSA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnR5cGU7XG5cdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS52aWRlb0xvYWRlZCAmJiB0eXBlID09ICd2aWRlbycpIHtcblx0XHRpZiAodmlkZW9qcyhnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJ3ZpZGVvJylbMF0uaWQpLnBhdXNlZCgpKSB7XG5cdFx0XHR2aWRlb2pzKGdsb2JhbFZhci4kY3VyU2xpZGUuZmluZCgndmlkZW8nKVswXS5pZCkucGxheSgpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBoYW5kbGVTaWRlQnV0dG9ucygpIHtcblx0dmFyIGJ1dHRvbnMgPSAkKCcuc2ktbWVudS1uYXZpZ2F0aW9uJykuZmluZCgnYnV0dG9uJyk7XG5cdHZhciBjaGVja3MgPSAkKCcuc2ktbWVudS1jaGVja3NfX2pzJyk7XG5cblx0bG9jaygkKGJ1dHRvbnMpKTtcblx0dW5sb2NrKCQoYnV0dG9uc1swXSkpO1xuXHRidXR0b25zLmVhY2goZnVuY3Rpb24gKGlkeCwgYnV0dG9uKSB7XG5cdFx0aWYgKGdldENvbXBsZXRpb25TdGF0dXMoY2hhcHRlckNvbXBsZXRpb25TbGlkZXNbaWR4XSkpIHtcblx0XHRcdCQoY2hlY2tzW2lkeF0pLmFkZENsYXNzKCdjb21wbGV0ZWQnKTtcblx0XHRcdGlmIChidXR0b25zW2lkeCArIDFdKSB7XG5cdFx0XHRcdHVubG9jaygkKGJ1dHRvbnNbaWR4ICsgMV0pKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBpbml0TmF2aWdhdGlvbigpIHtcblx0dmFyIHN3YXBTdHlsZXMgPSAkKCcuc2ktbmF2LXN0eWxlX19qcycpO1xuXHR2YXIgc3dhcEltYWdlcyA9ICQoJy5zaS1pbWctc3dhcF9fanMnKTtcblx0dmFyIGJ1dHRvblR5cGUgPSBnbG9iYWxWYXIuYnV0dG9uVHlwZTtcblxuXHQvLyBzd2FwIGFsbCBzdHlsZSByZWxhdGVkIGltYWdlc1xuXHRzd2FwSW1hZ2VzLmVhY2goZnVuY3Rpb24gKGlkeCwgaW1hZ2UpIHtcblx0XHQkKGltYWdlKS5hdHRyKCdzcmMnLCBmdW5jdGlvbiAoaW5kZXgsIGF0dHIpIHtcblx0XHRcdHJldHVybiBhdHRyLnJlcGxhY2UoJ2NsYXNzaWMnLCBidXR0b25UeXBlKTtcblx0XHR9KTtcblx0fSk7XG5cdHN3YXBTdHlsZXMuZWFjaChmdW5jdGlvbiAoaWR4LCBuYXYpIHtcblx0XHQkKG5hdikuYWRkQ2xhc3MoJ3NpLW5hdi1zdHlsZS0nICsgYnV0dG9uVHlwZSk7XG5cdH0pO1xuXG5cdGF0dGFjaE5hdkV2ZW50TGlzdGVuZXJzKCk7XG59XG5cbmZ1bmN0aW9uIHNob3dOYXZFbGVtZW50cygpIHtcblx0dmFyIG5hdkJ1dHRvbnMgPSAkKCcuc2ktbmF2X19qcycpO1xuXHR2YXIgaWNvbkNsYXNzZXMgPSAnc2ktY2xpY2staWNvbiBzaS1kcmFnLXVwLWljb24gc2ktZHJhZy1kb3duLWljb24gc2ktZHJhZy1sZWZ0LWljb24gc2ktZHJhZy1yaWdodC1pY29uJztcblx0dmFyICRjbGljayA9ICQoJyNzaS1jbGljay1pY29uJyk7XG5cdCQobmF2QnV0dG9ucykuaGlkZSgpO1xuXHQkY2xpY2sucmVtb3ZlQ2xhc3MoaWNvbkNsYXNzZXMpO1xuXG5cdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5uYXZFbGVtZW50cyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubmF2RWxlbWVudHMgPSBbXTtcblx0fVxuXG5cdHZhciBuYXZpZ2F0aW9uID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubmF2RWxlbWVudHM7XG5cdG5hdmlnYXRpb24uZm9yRWFjaChmdW5jdGlvbiAobmF2KSB7XG5cdFx0c3dpdGNoIChuYXYpIHtcblx0XHRcdGNhc2UgJ3N0YXJ0LXNsaWRlJzpcblx0XHRcdFx0JCgnI3NpLWNsb2NrJykuc2hvdygpO1xuXHRcdFx0XHQkKCcjc2ktc3RhcnQnKS5zaG93KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnc3RhbmRhcmQtaG9tZSc6XG5cdFx0XHRcdCQoJyNzaS1sb2dvJykuc2hvdygpO1xuXHRcdFx0XHQkKCcjc2ktcHJvZ3Jlc3MnKS5zaG93KCk7XG5cdFx0XHRcdCQoJyNzaS1ob21lJykuc2hvdygpO1xuXHRcdFx0XHQkKCcjc2ktYmFjaycpLnNob3coKTtcblx0XHRcdFx0aWYgKGdldENvbXBsZXRpb25TdGF0dXMoKSkge1xuXHRcdFx0XHRcdCQoJyNzaS1uZXh0Jykuc2hvdygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnc3RhbmRhcmQtbWVudSc6XG5cdFx0XHRcdCQoJyNzaS1sb2dvJykuc2hvdygpO1xuXHRcdFx0XHQkKCcjc2ktcHJvZ3Jlc3MnKS5zaG93KCk7XG5cdFx0XHRcdCQoJyNzaS1tZW51Jykuc2hvdygpO1xuXHRcdFx0XHQkKCcjc2ktYmFjaycpLnNob3coKTtcblx0XHRcdFx0aWYgKGdldENvbXBsZXRpb25TdGF0dXMoKSkge1xuXHRcdFx0XHRcdCQoJyNzaS1uZXh0Jykuc2hvdygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnZXhpdC1zbGlkZSc6XG5cdFx0XHRcdCQoJyNzaS1wcm9ncmVzcycpLnNob3coKTtcblx0XHRcdFx0JCgnI3NpLWV4aXQnKS5zaG93KCk7XG5cdFx0XHRcdCQoJyNzaS1yZXBsYXknKS5zaG93KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnY2xpY2staWNvbic6XG5cdFx0XHRcdCRjbGlja1xuXHRcdFx0XHRcdC5zaG93KClcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoaWNvbkNsYXNzZXMpXG5cdFx0XHRcdFx0LmFkZENsYXNzKCdzaS0nICsgbmF2KTtcblx0XHRcdFx0aGlkZUNsaWNrSWNvbigpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2RyYWctdXAtaWNvbic6XG5cdFx0XHRcdCRjbGlja1xuXHRcdFx0XHRcdC5zaG93KClcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoaWNvbkNsYXNzZXMpXG5cdFx0XHRcdFx0LmFkZENsYXNzKCdzaS0nICsgbmF2KTtcblx0XHRcdFx0aGlkZUNsaWNrSWNvbigpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2RyYWctZG93bi1pY29uJzpcblx0XHRcdFx0JGNsaWNrXG5cdFx0XHRcdFx0LnNob3coKVxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhpY29uQ2xhc3Nlcylcblx0XHRcdFx0XHQuYWRkQ2xhc3MoJ3NpLScgKyBuYXYpO1xuXHRcdFx0XHRoaWRlQ2xpY2tJY29uKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnZHJhZy1sZWZ0LWljb24nOlxuXHRcdFx0XHQkY2xpY2tcblx0XHRcdFx0XHQuc2hvdygpXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKGljb25DbGFzc2VzKVxuXHRcdFx0XHRcdC5hZGRDbGFzcygnc2ktJyArIG5hdik7XG5cdFx0XHRcdGhpZGVDbGlja0ljb24oKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdkcmFnLXJpZ2h0LWljb24nOlxuXHRcdFx0XHQkY2xpY2tcblx0XHRcdFx0XHQuc2hvdygpXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKGljb25DbGFzc2VzKVxuXHRcdFx0XHRcdC5hZGRDbGFzcygnc2ktJyArIG5hdik7XG5cdFx0XHRcdGhpZGVDbGlja0ljb24oKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRpZiAobmF2WzBdID09PSAnIScpICQoJyNzaS0nICsgbmF2LnNwbGl0KCchJylbMV0pLmhpZGUoKTtcblx0XHRcdFx0ZWxzZSAkKCcjc2ktJyArIG5hdikuc2hvdygpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBhdHRhY2hOYXZFdmVudExpc3RlbmVycygpIHtcblx0JCgnI3NpLWhvbWUnKS5vbignY2xpY2sgdG91Y2gnLCBmdW5jdGlvbiAoKSB7XG5cdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHRcdGp1bXBUb1NsaWRlKGdsb2JhbFZhci5ob21lU2xpZGUpO1xuXHR9KTtcblxuXHQkKCcjc2ktbWVudScpLm9uKCdjbGljayB0b3VjaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG5cdFx0b3BlblNpZGVNZW51KCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1mdWxsJykub24oJ2NsaWNrIHRvdWNoJywgZnVuY3Rpb24gKCkge1xuXHRcdHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXkoKTtcblx0XHR0b2dnbGVGdWxsc2NyZWVuKCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1iYWNrJykub24oJ2NsaWNrIHRvdWNoJywgZnVuY3Rpb24gKCkge1xuXHRcdHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXkoKTtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnYmFja0FjdGlvbiddKSB7XG5cdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmJhY2tBY3Rpb24oKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHByZXZTbGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0sIDEwMCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1uZXh0Jykub24oJ2NsaWNrIHRvdWNoJywgZnVuY3Rpb24gKCkge1xuXHRcdHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXkoKTtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnbmV4dEFjdGlvbiddKSB7XG5cdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24oKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0sIDEwMCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1yZXBsYXknKS5vbignY2xpY2sgdG91Y2gnLCBmdW5jdGlvbiAoKSB7XG5cdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHRcdGp1bXBUb1NsaWRlKDApO1xuXHR9KTtcblxuXHQkKCcjc2ktZXhpdCcpLm9uKCdjbGljayB0b3VjaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG5cdFx0d2luZG93LmNsb3NlKCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1zdGFydCcpLm9uKCdjbGljayB0b3VjaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG5cdFx0aWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWyduZXh0QWN0aW9uJ10pIHtcblx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmV4dFNsaWRlKCk7XG5cdFx0fVxuXHR9KTtcblxuXHQkKCcjc2ktc3VibWl0Jykub24oJ2NsaWNrIHRvdWNoJywgZnVuY3Rpb24gKCkge1xuXHRcdHZhciB0aGlzU2xpZGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXTtcblx0XHRpZiAodGhpc1NsaWRlLnR5cGUgPT09ICdmb3JtJyAmJiAhdmFsaWRGb3JtKCkpIHJldHVybjtcblxuXHRcdHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXkoKTtcblx0XHR2YXIgYm9sID0gY2hlY2tRdWVzdGlvbih0aGlzU2xpZGUudHlwZSk7XG5cdFx0aGFuZGxlQW5zd2VyKGJvbCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1yZXNldCcpLm9uKCdjbGljayB0b3VjaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG5cdFx0c3dpdGNoIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS50eXBlKSB7XG5cdFx0XHRjYXNlICdkbmQnOlxuXHRcdFx0XHR2YXIgZG5kQXJncyA9IGRuZFJlc2V0T2JqZWN0W2dsb2JhbFZhci5jdXJTbGlkZV07XG5cdFx0XHRcdHJlc2V0RG5EKGRuZEFyZ3NbJ3RpbWUnXSwgZG5kQXJnc1snYW5zd2VycyddKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdzb3J0Jzpcblx0XHRcdFx0cmVzZXRTb3J0KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAncXVpeic6XG5cdFx0XHRcdHJlc2V0UXVpeigpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2hvdHNwb3QnOlxuXHRcdFx0XHRyZXNldEhvdHNwb3QoKTtcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnY3VzdG9tUmVzZXQnXSkge1xuXHRcdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmN1c3RvbVJlc2V0KCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9KTtcblx0JCgnI3NpLWN1c3RvbS1zdWJtaXQnKS5vbignY2xpY2sgdG91Y2gnLCBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHRoaXNTbGlkZSA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdO1xuXHRcdGlmICh0aGlzU2xpZGUudHlwZSA9PT0gJ2Zvcm0nICYmICF2YWxpZEZvcm0oKSkgcmV0dXJuO1xuXG5cdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnY3VzdG9tU3VibWl0J10pIHtcblx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmN1c3RvbVN1Ym1pdCgpO1xuXHRcdH1cblx0fSk7XG5cblx0JCgnLnNpLW1lbnUtY2xvc2VyJykub24oJ2NsaWNrIHRvdWNoJywgZnVuY3Rpb24gKCkge1xuXHRcdGNsb3NlU2lkZU1lbnUoKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGhpZGVDbGlja0ljb24oKSB7XG5cdCQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlKS5vZmYoJ21vdXNlZG93bi5pY29uJyk7XG5cdCQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlKS5vbignbW91c2Vkb3duLmljb24nLCBmdW5jdGlvbiAoKSB7XG5cdFx0JCgnI3NpLWNsaWNrLWljb24nKS5oaWRlKCk7XG5cdFx0JCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUpLm9mZignbW91c2Vkb3duLmljb24nKTtcblx0fSk7XG59XG5cbi8vIGZ1bmN0aW9uIHVzZWQgYnkgZnVsbHNjcmVlbiBuYXYgYnV0dG9uXG5mdW5jdGlvbiB0b2dnbGVGdWxsc2NyZWVuKCkge1xuXHR2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0dmFyIGZ1bGxzY3JlZW4gPVxuXHRcdGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50IHx8XG5cdFx0ZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHxcblx0XHRkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50IHx8XG5cdFx0ZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQ7XG5cdGlmIChmdWxsc2NyZWVuKSB7XG5cdFx0dmFyIHJlcXVlc3RNZXRob2QgPVxuXHRcdFx0ZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4gfHxcblx0XHRcdGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuIHx8XG5cdFx0XHRkb2N1bWVudC53ZWJraXRFeGl0RnVsbFNjcmVlbiB8fFxuXHRcdFx0ZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbiB8fFxuXHRcdFx0ZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbjtcblxuXHRcdGlmIChyZXF1ZXN0TWV0aG9kKSB7XG5cdFx0XHRyZXF1ZXN0TWV0aG9kLmFwcGx5KGRvY3VtZW50KTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0dmFyIHJlcXVlc3RNZXRob2QgPVxuXHRcdFx0ZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbiB8fFxuXHRcdFx0ZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiB8fFxuXHRcdFx0ZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbiB8fFxuXHRcdFx0ZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbiB8fFxuXHRcdFx0ZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuO1xuXG5cdFx0aWYgKHJlcXVlc3RNZXRob2QpIHtcblx0XHRcdHJlcXVlc3RNZXRob2QuYXBwbHkoZWxlbWVudCk7XG5cdFx0fVxuXHR9XG59XG5cbi8vIGZ1bmN0aW9uIGluZm9LZXlib2FyZCgpIHtcbi8vICAgICB2YXIgaW5mb0l0ZW1zID0gJCgnLmluZm9JdGVtJyk7XG4vLyAgICAgdmFyIGlkeCA9IDA7XG4vLyAgICAgJCgnI0luZm9fQ2xvc2VyJykuZm9jdXMoKTtcblxuLy8gICAgICQoJ2JvZHknKS5vbigna2V5ZG93bi5kcmFnJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4vLyAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuLy8gICAgICAgICAgICAgY2FzZSA5OiAvL3Jlc3RyaWN0cyB0YWIgbW92ZW1lbnQgdG8gaW5mbyBvdmVybGF5IGVsZW1lbnRzXG4vLyAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgICAgICAgICBpZiAoaWR4IDwgaW5mb0l0ZW1zLmxlbmd0aCAtIDEpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4vLyAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICAgICAgICAgaWR4ID0gMDtcbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgJChpbmZvSXRlbXNbaWR4XSkuZm9jdXMoKTtcbi8vICAgICAgICAgICAgICAgICBicmVhaztcbi8vICAgICAgICAgICAgIGNhc2UgMjc6IC8vIGFsbG93cyB1c2VyIHRvIHByZXNzIGVzY2FwZSBrZXkgdG8gcmV0dXJuIHRvIG5vcm1hbFxuLy8gICAgICAgICAgICAgICAgICQoJyNJbmZvX0Nsb3NlcicpLnRyaWdnZXIoJ2NsaWNrJyk7XG4vLyAgICAgICAgICAgICAgICAgYnJlYWs7XG4vLyAgICAgICAgICAgICBkZWZhdWx0OlxuLy8gICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSk7XG4vLyB9XG5cbnZhciBjdXJDaGFwdGVyO1xudmFyIHNhdmVEYXRhID0ge307XG52YXIgYm9va21hcmtlZFNsaWRlO1xudmFyIGNoYXJ0UHJvZ3Jlc3NSZWNvcmRlZCA9IHt9O1xuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXHRpbml0Q291cnNlKCk7XG5cdGRvY3VtZW50U2V0dXAoKTtcblx0Y2hhcnRQcm9ncmVzcygpO1xuXHRpZiAoIWdsb2JhbFZhci5kZXZNb2RlICYmIChsbXNDb25uZWN0ZWQgfHwgdXNlTG9jYWwpKSB7XG5cdFx0anVtcFRvU2xpZGUoYm9va21hcmtlZFNsaWRlKTtcblx0fVxuXHQvLyBFbGVtZW50cyB0byBpbmplY3Rcblx0dmFyIG15U1ZHc1RvSW5qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nLmluamVjdC1tZScpO1xuXHQvLyBEbyB0aGUgaW5qZWN0aW9uLiBrZWVwIGxhc3QhISFcblx0U1ZHSW5qZWN0b3IobXlTVkdzVG9JbmplY3QpO1xufSk7XG5cbmZ1bmN0aW9uIGZpcnN0VGltZVNldHVwKCkge1xuXHQvL2ZpcnN0IGFuZCBvbmx5IGV4ZWN1dGlvbiBvZiBjb2RlLCB3aGVuIHRoZSBjb3Vyc2Ugc3RhcnRzIGZpcnN0IHRpbWUgZ2l2ZXMgYWxsIHNsaWRlcyBhIG51bWJlciBhbmQgc2V0cyBkZWZhdWx0cyBmb3IgdXNlciBhdHRlbXB0cyBhbmQgdHJ5c1xuXHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNsaWRlcyk7XG5cdGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBpZHgpIHtcblx0XHR2YXIgdHlwZSA9IHNsaWRlc1trZXldLnR5cGU7XG5cblx0XHQvLyBnaXZlIHNsaWRlbnVtYmVyIHVzZWQgZm9yIGJvb2ttYXJraW5nXG5cdFx0aWYgKHNsaWRlc1trZXldLnNsaWRlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHNsaWRlc1trZXldLnNsaWRlTnVtYmVyID0gaWR4ICsgMTtcblx0XHR9XG5cdFx0Ly8gc2V0IHVzZXIgYXR0ZW1wdHMgYW5kIHRyeXMgaWYgbm90IGRlZmluZWRcblx0XHRpZiAoc2xpZGVzW2tleV1bdHlwZV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYgKHNsaWRlc1trZXldW3R5cGVdLnVzZXJBdHRlbXB0cyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHNsaWRlc1trZXldW3R5cGVdLnVzZXJBdHRlbXB0cyA9IDA7XG5cdFx0XHR9XG5cdFx0XHRpZiAoc2xpZGVzW2tleV1bdHlwZV0udHJ5cyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHNsaWRlc1trZXldW3R5cGVdLnRyeXMgPSAwO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzbGlkZXNba2V5XVt0eXBlXSA9IHtcblx0XHRcdFx0dXNlckF0dGVtcHRzOiAwLFxuXHRcdFx0XHR0cnlzOiAwXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIENyZWF0ZSB0aGUgb2JqZWN0IHNlbnQgdG8gdGhlIExNUyB0byBwZXJzaXN0IHNsaWRlIGNvbXBsZXRpb25cblx0XHQvLyBzZXQgaW5jbHVkZSB0byBmYWxzZSBvbiBhIHNsaWRlIGluIG9yZGVyIHRvIGV4Y2x1ZGUgaXQgZnJvbSB0aGUgY291cnNlIHByb2dyZXNzaW9uXG5cdFx0aWYgKHNsaWRlc1trZXldLmluY2x1ZGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0c2xpZGVzW2tleV0uaW5jbHVkZSA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKHNsaWRlc1trZXldLmluY2x1ZGUpIHtcblx0XHRcdHZhciBwYXRoID0gc2xpZGVzW2tleV0uY29tcGxldGlvblBhdGg7XG5cblx0XHRcdGlmICghc2F2ZURhdGEuc2xpZGVDb21wbGV0aW9uKSBzYXZlRGF0YS5zbGlkZUNvbXBsZXRpb24gPSB7fTtcblxuXHRcdFx0dmFyIHNsaWRlQ29tcGxldGlvbiA9IHNhdmVEYXRhLnNsaWRlQ29tcGxldGlvbjtcblxuXHRcdFx0aWYgKHBhdGgpIHtcblx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkocGF0aCkpIHtcblx0XHRcdFx0XHRwYXRoLmZvckVhY2goZnVuY3Rpb24gKHAsIGkpIHtcblx0XHRcdFx0XHRcdGlmICghc2xpZGVDb21wbGV0aW9uW3BdKSBzbGlkZUNvbXBsZXRpb25bcF0gPSB7fTtcblx0XHRcdFx0XHRcdGlmICghc2xpZGVDb21wbGV0aW9uW3BdW2tleV0pIHNsaWRlQ29tcGxldGlvbltwXVtrZXldID0gMDtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIXNsaWRlQ29tcGxldGlvbltwYXRoXSkgc2xpZGVDb21wbGV0aW9uW3BhdGhdID0ge307XG5cdFx0XHRcdFx0aWYgKCFzbGlkZUNvbXBsZXRpb25bcGF0aF1ba2V5XSkgc2xpZGVDb21wbGV0aW9uW3BhdGhdW2tleV0gPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoIXNsaWRlQ29tcGxldGlvbi5tYWluUGF0aCkgc2xpZGVDb21wbGV0aW9uLm1haW5QYXRoID0ge307XG5cdFx0XHRcdGlmICghc2xpZGVDb21wbGV0aW9uLm1haW5QYXRoW2tleV0pIHNsaWRlQ29tcGxldGlvbi5tYWluUGF0aFtrZXldID0gMDtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBkb2N1bWVudFNldHVwKCkge1xuXHRpbml0UHJlbG9hZGVyKCk7XG5cdGdsb2JhbFZhci5jdXJTbGlkZSA9ICQoJ3NlY3Rpb24nICsgJy5wcmVzZW50JylbMF0uaWQ7XG5cdGZpcnN0VGltZVNldHVwKCk7XG5cdGluaXRBdWRpbygpO1xuXHQkKCdhc2lkZScpLnJlbW92ZSgpO1xuXHRpbml0TmF2aWdhdGlvbigpO1xuXHRpbml0U2lkZU1lbnUoKTtcblxuXHRmb3IgKGtleSBpbiBzbGlkZXMpIHtcblx0XHRpZiAoc2xpZGVzW2tleV0udHlwZSA9PSAndmlkZW8nKSB7XG5cdFx0XHRnbG9iYWxWYXIudmlkZW9TZWVuW2tleV0gPSBmYWxzZTtcblx0XHR9XG5cdH1cblx0aWYgKGdsb2JhbFZhci5kZXZNb2RlKSB7XG5cdFx0ZGV2TW9kZSgpO1xuXHR9XG5cblx0aWYgKCQoJyNzaS1wcm9ncmVzcy1tZXRlcicpLmxlbmd0aCAhPSAwKSB7XG5cdFx0Y2hhcnRJbml0aWF0ZSgpO1xuXHR9XG5cdGluaXRGZWVkYmFja3MoKTtcblx0aW5pdFF1aXooKTtcblx0aW5pdE1lbnUoKTtcblx0ZnVuY3Rpb25DYWxscygpO1xuXHRyYW5kb21pemVRdWVzdGlvblNsaWRlcygpO1xuXG5cdFJldmVhbC5hZGRFdmVudExpc3RlbmVyKCdzbGlkZWNoYW5nZWQnLCBmdW5jdGlvbiAoZSkge1xuXHRcdCQoJyNzaS1uYXYtY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ3Zqcy1mYWRlLW91dCcpO1xuXHRcdGdsb2JhbFZhci5jdXJTbGlkZSA9IGUuY3VycmVudFNsaWRlLmlkO1xuXHRcdGdsb2JhbFZhci4kY3VyU2xpZGUgPSAkKGUuY3VycmVudFNsaWRlKTtcblxuXHRcdGNsb3NlU2lkZU1lbnUoKTtcblx0XHRpZiAoc2xpZGVzW2UucHJldmlvdXNTbGlkZS5pZF0gJiYgdHlwZW9mIHNsaWRlc1tlLnByZXZpb3VzU2xpZGUuaWRdLm9uRXhpdEFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0c2xpZGVzW2UucHJldmlvdXNTbGlkZS5pZF0ub25FeGl0QWN0aW9uKCk7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uQ2FsbHMoKTtcblx0fSk7XG5cblx0Ly9zZXQgZm9udCBzaXplc1xuXHR2YXIgZm9udFNpemUgPSAkKCcuc2xpZGVzJykud2lkdGgoKSAvIGdsb2JhbFZhci5mb250U2l6ZUZhY3Rvcjtcblx0JCgnaHRtbCcpLmNzcygnZm9udC1zaXplJywgZm9udFNpemUpO1xuXG5cdCQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGZvbnRTaXplID0gJCgnLnNsaWRlcycpLndpZHRoKCkgLyBnbG9iYWxWYXIuZm9udFNpemVGYWN0b3I7XG5cdFx0XHQkKCdodG1sJykuY3NzKCdmb250LXNpemUnLCBmb250U2l6ZSk7XG5cdFx0fSwgMSk7XG5cdH0pO1xuXG5cdCQoJ2ltZycpLm9uKCdkcmFnc3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWN0aW9uc09uRXZlcnlTbGlkZUVudGVyKCkge1xuXHQvL3doYXRldmVyIHlvdSB3YW50IHRvIGV4ZWN1dGUgb24gZXZlcnkgc2xpZGUgY2hhbmdlXG59XG5cbi8vZXhlY3V0ZSB3aGF0ZXZlciBpcyBpbnNpZGUgb25FbnRlckFjdGlvbiwgc2V0cyB2aXNpdGVkIHRvIHRydWVcbmZ1bmN0aW9uIG9uRW50ZXJBY3Rpb24oaWQpIHtcblx0aWYgKHNsaWRlc1tpZF0udmlzaXRlZCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0c2xpZGVzW2lkXS52aXNpdGVkID0gZmFsc2U7XG5cdH1cblxuXHQkKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLmJsdXIoKTtcblx0aWYgKHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5vbkVudGVyKSB7XG5cdFx0aWYgKHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXlpbmcoKSkge1xuXHRcdFx0c2lBdWRpby5zZnguY2xpY2sub25jZSgnZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRIb3dsZXIuc3RvcCgpO1xuXHRcdFx0XHRzaUF1ZGlvW2dsb2JhbFZhci5jdXJTbGlkZV0ub25FbnRlci5wbGF5KCk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0SG93bGVyLnN0b3AoKTtcblx0XHRcdHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5vbkVudGVyLnBsYXkoKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0aWYgKHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXlpbmcoKSkge1xuXHRcdFx0c2lBdWRpby5zZnguY2xpY2sub25jZSgnZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRIb3dsZXIuc3RvcCgpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdEhvd2xlci5zdG9wKCk7XG5cdFx0fVxuXHR9XG5cblx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHNsaWRlc1tpZF0ub25FbnRlckFjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRzbGlkZXNbaWRdLm9uRW50ZXJBY3Rpb24oKTtcblx0XHR9XG5cblx0XHRzbGlkZXNbaWRdLnZpc2l0ZWQgPSB0cnVlO1xuXHR9LCAxMCk7XG5cdGlmIChsbXNDb25uZWN0ZWQgJiYgaWQgIT09ICdzdGFydCcpIHtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdHNhdmVMTVMoKTtcblx0XHR9LCAxMDAwKTtcblx0fVxuXHRpZiAodXNlTG9jYWwgJiYgaWQgIT09ICdzdGFydCcpIHtcblx0XHRzYXZlUHJvZ3Jlc3NMb2NhbGx5KCk7XG5cdH1cbn1cblxuLy9PcmRlciBvZiBjYWxsaW5nIHRoZSBmdW5jdGlvbnMgdG8gZ2VuZXJhdGUgdGhlIGN1cnJlbnQgc2xpZGVcbmZ1bmN0aW9uIGZ1bmN0aW9uQ2FsbHMoKSB7XG5cdCQoJ2JvZHknKS5vZmYoKTtcblx0Z2xvYmFsVmFyLiRjdXJTbGlkZSA9ICQoJy5zbGlkZXMgPiBzZWN0aW9uLnByZXNlbnQnKTtcblx0Z2xvYmFsVmFyLmN1clNsaWRlID0gJCgnLnNsaWRlcyA+IC5wcmVzZW50JylbMF0uaWQ7XG5cblx0b25FbnRlckFjdGlvbihnbG9iYWxWYXIuY3VyU2xpZGUpO1xuXHRhY3Rpb25zT25FdmVyeVNsaWRlRW50ZXIoKTtcblx0c2hvd05hdkVsZW1lbnRzKCk7XG5cdGVsZW1lbnRzRmFkaW5nT25TbGlkZSgpO1xuXG5cdHN3aXRjaCAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0udHlwZSkge1xuXHRcdGNhc2UgJ21lbnUnOlxuXHRcdFx0bWVudUZ1bmN0aW9ucygpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnZG5kJzpcblx0XHRcdGRuZEZ1bmN0aW9ucygpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnc29ydCc6XG5cdFx0XHRzb3J0RnVuY3Rpb25zKCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdob3RzcG90Jzpcblx0XHRcdGhvdHNwb3RGdW5jdGlvbnMoKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2Zvcm0nOlxuXHRcdFx0Zm9ybUZ1bmN0aW9ucygpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAncXVpeic6XG5cdFx0XHRxdWl6RnVuY3Rpb24oKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3ZpZGVvJzpcblx0XHRcdHZpZGVvQ2hlY2soKTtcblx0XHRcdGJyZWFrO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRicmVhaztcblx0fVxuXG5cdGlmICgkKCcjc2ktcHJvZ3Jlc3MtbWV0ZXInKS5sZW5ndGggIT0gMCkge1xuXHRcdGNoYXJ0UHJvZ3Jlc3MoKTtcblx0fVxuXG5cdC8vIElFOSBCdWdmaXhcblx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0JCgnc2VjdGlvbi5mdXR1cmUnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuXHRcdCQoJ3NlY3Rpb24ucGFzdCcpLmNzcygnZGlzcGxheScsICdub25lJyk7XG5cdH0sIDU1KTtcbn1cblxuLy8vLy8vLy8vLy8vKkZlYXR1cmU6IFF1ZXN0aW9uIENoZWNrIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vLyBUaGlzIGZ1bmN0aW9uIGNvbnRhaW5zIHRoZSBtYWluIGxvZ2ljIGluIGRldGVybWluaW5nIGlmIGEgcXVlc3Rpb24gaXMgcmlnaHQgb3Igd3Jvbmdcbi8vIEl0IGRldGVybWluZXMgdGhlIHF1ZXN0aW9uIHR5cGUsIHJ1bnMgdGhlIGxvZ2ljIGZvciB0aGF0IHR5cGUgYW5kIHJldHVybnMgYSBib29sZWFuXG4vLyBUaGlzIGJvb2xlYW4sIGNhbGxlZCBib2wsICBpcyBmZWQgYXMgYW4gYXJndW1lbnQgdG8gRkJDaGVjayhib2wpIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciBoYW5kbGluZyBmZWVkYmFjayByZXNwb25zZXNcblxuLy8gVG8gYWRkIHVuaXF1ZSBsb2dpYyBmb3IgYSBjdXN0b20gdHlwZSwgZXh0ZW5kIHRoZSBtYWluIHN3aXRjaCBzdGF0ZW1lbnQsIGFzc2lnbiB0cnVlIG9yIGZhbHNlIHRvIGJvbCwgdGhlbiAnYnJlYWsnXG5mdW5jdGlvbiBjaGVja1F1ZXN0aW9uKHR5cGUpIHtcblx0dmFyIGJvbCA9IHRydWU7XG5cdHZhciBib2wyO1xuXHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRjYXNlICdxdWl6Jzpcblx0XHRcdHZhciBjb3JyZWN0QW5zd2VycyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnF1aXouYW5zd2Vycztcblx0XHRcdHZhciBzZWxlY3RlZEFuc3dlcnMgPSB7fTtcblx0XHRcdHZhciBjaG9pY2VzID0gJCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUgKyAnIC5zaS1xdWl6LWFuc3dlcicpO1xuXHRcdFx0Y2hvaWNlcy5lYWNoKGZ1bmN0aW9uIChpZHgsIGNob2ljZSkge1xuXHRcdFx0XHR2YXIgaWQgPSAkKGNob2ljZSkuYXR0cignaWQnKTtcblx0XHRcdFx0aWYgKCQoY2hvaWNlKS5oYXNDbGFzcygnc2ktcXVpei1zZWxlY3RlZCcpKSB7XG5cdFx0XHRcdFx0c2VsZWN0ZWRBbnN3ZXJzW2lkXSA9IDE7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VsZWN0ZWRBbnN3ZXJzW2lkXSA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFjb3JyZWN0QW5zd2Vyc1tpZF0pIHtcblx0XHRcdFx0XHRjb3JyZWN0QW5zd2Vyc1tpZF0gPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGZvciAoYW5zd2VyIGluIHNlbGVjdGVkQW5zd2Vycykge1xuXHRcdFx0XHRpZiAoY29ycmVjdEFuc3dlcnNbYW5zd2VyXSAhPT0gc2VsZWN0ZWRBbnN3ZXJzW2Fuc3dlcl0pIHtcblx0XHRcdFx0XHRib2wgPSBmYWxzZTtcblx0XHRcdFx0XHRyZXR1cm4gYm9sO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWJvbCkge1xuXHRcdFx0XHRyZXR1cm4gYm9sO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnaG90c3BvdCc6XG5cdFx0XHR2YXIgcXVpeiA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmhvdHNwb3QucXVpejtcblx0XHRcdGlmICghcXVpeikgdGhyb3cgJ1xcbkhvdHNwb3QgRXJyb3I6XFxueW91IGhhdmUgdG8gdHVybiBvbiB0aGUgXCJxdWl6XCIgc2V0dGluZ3MgdG8gdXNlIGhvdHNwb3RzIHRoaXMgd2F5Jztcblx0XHRcdGlmICghcXVpei5hbnN3ZXJzLmxlbmd0aCkgdGhyb3cgJ1xcbkhvdHNwb3QgRXJyb3I6XFxucXVpeiBhbnN3ZXJzIG11c3QgYmUgaW4gYW4gYXJyYXknO1xuXHRcdFx0aWYgKHF1aXoudHlwZSA9PT0gJ3NjcScgJiYgcXVpei5hbnN3ZXJzLmxlbmd0aCA+IDEpXG5cdFx0XHRcdHRocm93ICdcXG5Ib3RzcG90IEVycm9yOlxcbmZvciB0eXBlIFwic2NxXCIgeW91IG11c3QgaGF2ZSBvbmx5IG9uZSBhbnN3ZXInO1xuXHRcdFx0dmFyIGNvcnJlY3RBbnN3ZXJzID0gcXVpei5hbnN3ZXJzO1xuXHRcdFx0dmFyIHNlbGVjdGVkQW5zd2VycyA9IHF1aXouc2VsZWN0ZWRBbnN3ZXJzO1xuXHRcdFx0Ym9sID0gSlNPTi5zdHJpbmdpZnkoc2VsZWN0ZWRBbnN3ZXJzKSA9PT0gSlNPTi5zdHJpbmdpZnkoY29ycmVjdEFuc3dlcnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnZm9ybSc6XG5cdFx0XHRib2wgPSBjaGVja0Zvcm0oKTtcblx0XHRcdGlmICghYm9sKSByZXR1cm47XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdkbmQnOlxuXHRcdFx0dmFyIHVzZXJBbnN3ZXJzID0gZ2xvYmFsVmFyLmRuZEFuc3dlcnM7XG5cdFx0XHRmb3IgKGtleSBpbiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5kbmQucXVpeikge1xuXHRcdFx0XHR2YXIgY29ycmVjdEFuc3dlciA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmRuZC5xdWl6W2tleV0uc29ydCgpO1xuXHRcdFx0XHR2YXIgdXNlckFuc3dlciA9IHVzZXJBbnN3ZXJzW2tleV0uc29ydCgpO1xuXHRcdFx0XHRpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uZG5kLm11bHRpcGxlQW5zd2Vycykge1xuXHRcdFx0XHRcdHZhciBpbmNsdWRlZCA9IHRydWU7XG5cdFx0XHRcdFx0aWYgKHVzZXJBbnN3ZXIubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRpbmNsdWRlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAoY29ycmVjdEFuc3dlci5pbmRleE9mKHVzZXJBbnN3ZXJbMF0pIDwgMCkge1xuXHRcdFx0XHRcdFx0XHRpbmNsdWRlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIWluY2x1ZGVkKSB7XG5cdFx0XHRcdFx0XHRib2wgPSBmYWxzZTtcblx0XHRcdFx0XHRcdHJldHVybiBib2w7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChjb3JyZWN0QW5zd2VyLmxlbmd0aCAhPT0gdXNlckFuc3dlci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGJvbCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGJvbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjb3JyZWN0QW5zd2VyLmZvckVhY2goZnVuY3Rpb24gKGFuc3dlciwgaWR4KSB7XG5cdFx0XHRcdFx0XHRpZiAodXNlckFuc3dlcltpZHhdICE9PSBhbnN3ZXIpIHtcblx0XHRcdFx0XHRcdFx0Ym9sID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBib2w7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYm9sID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdHJldHVybiBib2w7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3NvcnQnOlxuXHRcdFx0Ym9sID0gdHJ1ZTtcblx0XHRcdHZhciBsaXN0QXJyYXkgPSBPYmplY3Qua2V5cyhzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVt0eXBlXS5zb3J0YWJsZXMpO1xuXHRcdFx0dmFyIGFuc3dlckFycmF5ID0gW107XG5cdFx0XHRsaXN0QXJyYXkuZm9yRWFjaChmdW5jdGlvbiAobGlzdCkge1xuXHRcdFx0XHRhbnN3ZXJBcnJheS5wdXNoKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnNvcnRhYmxlc1tsaXN0XS5hbnN3ZXIpO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIGNoZWNrIHRoYXQgYW5zd2VycyBoYXZlIGJlZW4gcHJvdmlkZWQgZm9yIGFsbCBzb3J0YWJsZSBsaXN0cyBiZWZvcmUgcHJvY2VlZGluZ1xuXHRcdFx0aWYgKGxpc3RBcnJheS5sZW5ndGggIT09IGFuc3dlckFycmF5Lmxlbmd0aCkge1xuXHRcdFx0XHRib2wgPSBmYWxzZTtcblx0XHRcdFx0cmV0dXJuIGJvbDtcblx0XHRcdH1cblxuXHRcdFx0bGlzdEFycmF5LmZvckVhY2goZnVuY3Rpb24gKGxpc3RJZCwgaWR4KSB7XG5cdFx0XHRcdHZhciBwb3NzaWJsZUFuc3dlciA9ICQoJyMnICsgbGlzdElkKS5zb3J0YWJsZSgndG9BcnJheScpO1xuXG5cdFx0XHRcdC8vIEluY29ycmVjdCBpZiB0aGUgYW1vdW50IG9mIGl0ZW1zIGluIHRoZSBjaGVja2VkIHNvcnRhYmxlIGRvZXMgbm90IG1hdGNoIHRoZSBhbW91bnQgb2YgYW5zd2VycyBwcm92aWRlZCBpbiB0aGUgYW5zd2VyIGtleVxuXHRcdFx0XHRpZiAocG9zc2libGVBbnN3ZXIubGVuZ3RoICE9PSBhbnN3ZXJBcnJheVtpZHhdLmxlbmd0aCkge1xuXHRcdFx0XHRcdGJvbCA9IGZhbHNlO1xuXHRcdFx0XHRcdHJldHVybiBib2w7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBFeGN1dGVzIGlmIHVub3JkZXJlZCBrZXkgaXMgc2V0IHRvIGZhbHNlIG9yIGlmIGtleSBpcyBhYnNlbnRcblx0XHRcdFx0Ly8gVGhpcyBicmFuY2ggaXMgb25seSBjb3JyZWN0IGlmIHRoZSBzdWJtaXR0ZWQgYW5zd2VyIG1hdGNoZXMgdGhlIGFuc3dlciBrZXkgaW4gYm90aCBjb250ZW50IEFORCBvcmRlclxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bdHlwZV0udW5vcmRlcmVkID09PSBmYWxzZSB8fFxuXHRcdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnVub3JkZXJlZCA9PT0gdW5kZWZpbmVkXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHBvc3NpYmxlQW5zd2VyLmZvckVhY2goZnVuY3Rpb24gKGFuc3dlciwgaWR4Mikge1xuXHRcdFx0XHRcdFx0aWYgKGFuc3dlciAhPT0gYW5zd2VyQXJyYXlbaWR4XVtpZHgyXSkge1xuXHRcdFx0XHRcdFx0XHRib2wgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJvbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBFeGVjdXRlcyBpZiB1bm9yZGVyZWQga2V5IGlzIHNldCB0byB0cnVlLlxuXHRcdFx0XHRcdC8vIFRoaXMgYnJhbmNoIGlzIGNvcnJlY3QgaWYgdGhlIHN1Ym1pdHRlZCBhbnN3ZXIgbWF0Y2hlcyB0aGUgYW5zd2VyIGtleSBpbiBjb250ZW50IG9ubHkuIE9yZGVyIGlzIGlycmVsZXZhbnRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRwb3NzaWJsZUFuc3dlci5mb3JFYWNoKGZ1bmN0aW9uIChhbnN3ZXIpIHtcblx0XHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdFx0IWFuc3dlckFycmF5W2lkeF0uc29tZShmdW5jdGlvbiAoZWwpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZWwgPT09IGFuc3dlcjtcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRib2wgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJvbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0Ym9sID0gZmFsc2U7XG5cdFx0XHRicmVhaztcblx0fSAvL2VuZCBzd2l0Y2hcblx0cmV0dXJuIGJvbDtcbn0gLy9jaGVja1F1ZXN0aW9uXG4vLy8vLy8vLy8vKkZlYXR1cmU6U2h1ZmZsZWQgU2xpZGVzLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBqdW1wVG9TaHVmZmxlZFNsaWRlKHBhcnQpIHtcblx0dmFyIG4gPSBnbG9iYWxWYXIuc2h1ZmZsZWRTbGlkZXNbcGFydF0ucG9pbnRlcjtcblx0aWYgKG4gPCBnbG9iYWxWYXIuc2h1ZmZsZWRTbGlkZXNbcGFydF0uc2xpZGVzLmxlbmd0aCkge1xuXHRcdGlmIChuID09IG51bGwpIHtcblx0XHRcdC8vZmlyc3QgdGltZSBjYWxsXG5cdFx0XHRuID0gMDtcblx0XHR9XG5cdFx0anVtcFRvU2xpZGUoZ2xvYmFsVmFyLnNodWZmbGVkU2xpZGVzW3BhcnRdLnNsaWRlc1tuXSk7XG5cdFx0bisrO1xuXHRcdGdsb2JhbFZhci5zaHVmZmxlZFNsaWRlc1twYXJ0XS5wb2ludGVyID0gbjtcblx0fVxufVxuXG5mdW5jdGlvbiByZXNldFNodWZmbGVkU2xpZGUocGFydCkge1xuXHRnbG9iYWxWYXIuc2h1ZmZsZWRTbGlkZXNbcGFydF0ucG9pbnRlciA9IG51bGw7XG59XG5cbi8vLy8vLy8vLypGZWF0dXJlOlJhbmRvbWl6ZSBRdWVzdGlvbnMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiByYW5kb21pemVRdWVzdGlvblNsaWRlcygpIHtcblx0aWYgKGdsb2JhbFZhci5yYW5kb21pemVTbGlkZXMudXNlUmFuZG9taXplID09IHRydWUpIHtcblx0XHR2YXIgeCA9IGdsb2JhbFZhci5yYW5kb21pemVTbGlkZXMuc2xpZGVzO1xuXHRcdHZhciBuID0gW107XG5cdFx0aWYgKE9iamVjdC5rZXlzKHgpICE9IDApIHtcblx0XHRcdGZvciAoa2V5IGluIHgpIHtcblx0XHRcdFx0biA9IFtdO1xuXHRcdFx0XHRpZiAoeFtrZXldWzBdIDwgeFtrZXldWzFdKSB7XG5cdFx0XHRcdFx0Ly8xc3QgdmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gMm5kXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IHhba2V5XVswXTsgaSA8PSB4W2tleV1bMV07IGkrKykge1xuXHRcdFx0XHRcdFx0bi5wdXNoKGkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzaHVmZmxlKG4pO1xuXHRcdFx0XHRcdG4ucHVzaCh4W2tleV1bMl0pO1xuXHRcdFx0XHRcdGdsb2JhbFZhci5zaHVmZmxlZFNsaWRlc1trZXldID0ge1xuXHRcdFx0XHRcdFx0c2xpZGVzOiBuLFxuXHRcdFx0XHRcdFx0cG9pbnRlcjogbnVsbFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuLy8vLy8vLy8vLy8vKkZlYXR1cmU6RmFkaW5nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZWxlbWVudHNGYWRpbmdPblNsaWRlKCkge1xuXHRpZiAoJCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUgKyAnIFtkYXRhLWZhZGVJbk9yZGVyXScpLmxlbmd0aCAhPSAwKSB7XG5cdFx0dmFyIGFyeSA9IFtdO1xuXHRcdCQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlICsgJyBbZGF0YS1mYWRlSW5PcmRlcl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdCQodGhpcykuY3NzKCdvcGFjaXR5JywgJzAnKTtcblx0XHRcdCQodGhpcykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcblx0XHRcdCQodGhpcykuaGlkZSgpO1xuXHRcdFx0dmFyIHRlbXAgPSBbXTtcblx0XHRcdHZhciBzdHIgPSAkKHRoaXMpLmRhdGEoJ2ZhZGVpbm9yZGVyJyk7XG5cdFx0XHR0ZW1wWzBdID0gc3RyO1xuXHRcdFx0dGVtcFsxXSA9ICQodGhpcylbMF07XG5cdFx0XHRhcnkucHVzaCh0ZW1wKTtcblx0XHR9KTtcblx0XHRhcnkuc29ydChzb3J0QXJyYXlNYXRyaXhGdW5jdGlvbik7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcnkubGVuZ3RoOyBpKyspIHtcblx0XHRcdGVsZW1lbnRzRmFkZUluKGFyeVtpXVsxXSwgYXJ5W2ldWzBdKTtcblx0XHR9XG5cdH1cblxuXHRpZiAoJCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUgKyAnIFtkYXRhLWZhZGVvdXRvcmRlcl0nKS5sZW5ndGggIT0gMCkge1xuXHRcdHZhciBhcnkgPSBbXTtcblx0XHQkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSArICcgW2RhdGEtZmFkZW91dG9yZGVyXScpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0JCh0aGlzKS5jc3MoJ29wYWNpdHknLCAnMScpO1xuXHRcdFx0JCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcblx0XHRcdCQodGhpcykuc2hvdygpO1xuXHRcdFx0dmFyIHRlbXAgPSBbXTtcblx0XHRcdHZhciBzdHIgPSAkKHRoaXMpLmRhdGEoJ2ZhZGVvdXRvcmRlcicpO1xuXHRcdFx0dGVtcFswXSA9IHN0cjtcblx0XHRcdHRlbXBbMV0gPSAkKHRoaXMpWzBdO1xuXHRcdFx0YXJ5LnB1c2godGVtcCk7XG5cdFx0fSk7XG5cdFx0YXJ5LnNvcnQoc29ydEFycmF5TWF0cml4RnVuY3Rpb24pO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJ5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRlbGVtZW50c0ZhZGVPdXQoYXJ5W2ldWzFdLCBhcnlbaV1bMF0pO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBlbGVtZW50c0ZhZGVJbihlbCwgeCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHQkKGVsKS5mYWRlVG8oJ2Zhc3QnLCAxKTtcblx0fSwgeCk7XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRzRmFkZU91dChlbCwgeCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHQkKGVsKS5mYWRlVG8oJ2Zhc3QnLCAwKTtcblx0fSwgeCk7XG59XG5cbi8vIGFyeS5zb3J0KHNvcnRBcnJheU1hdHJpeEZ1bmN0aW9uKTsgbXVzdCBiZSBhcnk9W1s0LHh4XSxbMix4eF0sWzEseHhdXVxuZnVuY3Rpb24gc29ydEFycmF5TWF0cml4RnVuY3Rpb24oYSwgYikge1xuXHRpZiAoYVswXSA9PT0gYlswXSkge1xuXHRcdHJldHVybiAwO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBhWzBdIDwgYlswXSA/IC0xIDogMTtcblx0fVxufVxuXG4vLy8vLy8vLy8vLy8qRmVhdHVyZTpNaXNjZWxsYW5lb3VzLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8vc2h1ZmZsZSBhbiBhcnJheSwgcmV0dXJucyBzaHVmZmxlZCBhcnJheVxuLy8gdXNlZCBpbiBzbGlkZSByYW5kb21pemVyIGFuZCBtY3Evc2NxIHJhbmRvbWl6ZXJcbmZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcblx0dmFyIGN1cnJlbnRJbmRleCA9IGFycmF5Lmxlbmd0aCxcblx0XHR0ZW1wb3JhcnlWYWx1ZSxcblx0XHRyYW5kb21JbmRleDtcblx0Ly8gV2hpbGUgdGhlcmUgcmVtYWluIGVsZW1lbnRzIHRvIHNodWZmbGUuLi5cblx0d2hpbGUgKDAgIT09IGN1cnJlbnRJbmRleCkge1xuXHRcdC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudC4uLlxuXHRcdHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY3VycmVudEluZGV4KTtcblx0XHRjdXJyZW50SW5kZXggLT0gMTtcblx0XHQvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnQuXG5cdFx0dGVtcG9yYXJ5VmFsdWUgPSBhcnJheVtjdXJyZW50SW5kZXhdO1xuXHRcdGFycmF5W2N1cnJlbnRJbmRleF0gPSBhcnJheVtyYW5kb21JbmRleF07XG5cdFx0YXJyYXlbcmFuZG9tSW5kZXhdID0gdGVtcG9yYXJ5VmFsdWU7XG5cdH1cblx0cmV0dXJuIGFycmF5O1xufVxuXG4vL2FkZHMgZXF1YWxzL2NoZWNrcyB0byBzZWUgaWYgYXJyYXlzIGVxdWFsIGVhY2ggb3RoZXJcbkFycmF5LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAoYXJyYXkpIHtcblx0Ly8gaWYgdGhlIG90aGVyIGFycmF5IGlzIGEgZmFsc3kgdmFsdWUsIHJldHVyblxuXHRpZiAoIWFycmF5KSByZXR1cm4gZmFsc2U7XG5cblx0Ly8gY29tcGFyZSBsZW5ndGhzIC0gY2FuIHNhdmUgYSBsb3Qgb2YgdGltZVxuXHRpZiAodGhpcy5sZW5ndGggIT0gYXJyYXkubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cblx0Zm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdC8vIENoZWNrIGlmIHdlIGhhdmUgbmVzdGVkIGFycmF5c1xuXHRcdGlmICh0aGlzW2ldIGluc3RhbmNlb2YgQXJyYXkgJiYgYXJyYXlbaV0gaW5zdGFuY2VvZiBBcnJheSkge1xuXHRcdFx0Ly8gcmVjdXJzZSBpbnRvIHRoZSBuZXN0ZWQgYXJyYXlzXG5cdFx0XHRpZiAoIXRoaXNbaV0uZXF1YWxzKGFycmF5W2ldKSkgcmV0dXJuIGZhbHNlO1xuXHRcdH0gZWxzZSBpZiAodGhpc1tpXSAhPSBhcnJheVtpXSkge1xuXHRcdFx0Ly8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0cnVlO1xufTtcbi8vIEhpZGUgbWV0aG9kIGZyb20gZm9yLWluIGxvb3BzXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnZXF1YWxzJywge1xuXHRlbnVtZXJhYmxlOiBmYWxzZVxufSk7XG5cbnZhciBzY29ybSA9IHBpcHdlcmtzLlNDT1JNOyAvL1Nob3J0Y3V0XG52YXIgbG1zQ29ubmVjdGVkID0gZmFsc2U7XG52YXIgdW5sb2FkZWQgPSBmYWxzZTtcbnZhciB1c2VMb2NhbCA9IGZhbHNlO1xudmFyIGNvdXJzZVVSTCA9IGJ0b2Eod2luZG93LmxvY2F0aW9uLmhyZWYudG9TdHJpbmcoKSk7XG52YXIgcHJvZ3Jlc3NVUkwgPSAncHJvZ3Jlc3MnICsgY291cnNlVVJMO1xudmFyIGJvb2ttYXJrVVJMID0gJ2Jvb2ttYXJrJyArIGNvdXJzZVVSTDtcblxuZnVuY3Rpb24gaW5pdENvdXJzZSgpIHtcblx0Ly8gRG8gd2UgZXZlbiB3YW50IHRvIHRhbGsgdG8gdGhlIExNUz9cblx0aWYgKGdsb2JhbFZhci5zY29ybVNldHRpbmdzLnVzZVNjb3JtKSB7XG5cdFx0aWYgKGdsb2JhbFZhci5zY29ybVNldHRpbmdzLnN0YW5kYXJkLnRvTG93ZXJDYXNlKCkgIT09ICdhaWNjJykge1xuXHRcdFx0Y29ubmVjdFRvU0NPUk1BUEkoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29ubmVjdFRvQUlDQ0FQSSgpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRzaUxvZygnU0NPUk0nLCAnSU5GTycsICdTQ09STSBpcyBkaXNhYmxlZC4nKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjb25uZWN0VG9BSUNDQVBJKCkge1xuXHR2YXIgU0QgPSB3aW5kb3cucGFyZW50O1xuXG5cdGlmICh0eXBlb2YgU0QuU2V0UmVhY2hlZEVuZCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgU0QuQ29tbWl0RGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHNpTG9nKCdBSUNDJywgJ0FQSScsICdTVUNDRVNTOiBBSUNDIEFQSSBmb3VuZCEnKTtcblx0XHRzaUxvZygnQUlDQycsICdJTklUJywgJ1NVQ0NFU1M6IENvdXJzZSBpcyBub3cgY29ubmVjdGVkIHRvIHRoZSBMTVMhJyk7XG5cdH0gZWxzZSB7XG5cdFx0c2lMb2coJ0FJQ0MnLCAnQVBJJywgJ0VSUk9SOiBBSUNDIEFQSSBub3QgZm91bmQhJyk7XG5cdFx0c2lMb2coJ0FJQ0MnLCAnSU5JVCcsICdFUlJPUjogQ291cnNlIGNvdWxkIG5vdCBjb25uZWN0IHRvIHRoZSBMTVMhJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY29ubmVjdFRvU0NPUk1BUEkoKSB7XG5cdHZhciBib29rbWFya0xvY2FsO1xuXHR2YXIgbG9jYWxEYXRhO1xuXHRpZiAodXNlTG9jYWwgJiYgc3RvcmFnZUF2YWlsYWJsZSgnbG9jYWxTdG9yYWdlJykpIHtcblx0XHRib29rbWFya0xvY2FsID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYm9va21hcmtVUkwpO1xuXHRcdGxvY2FsRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0ocHJvZ3Jlc3NVUkwpKTtcblx0fVxuXHQvL3Njb3JtLmluaXQgcmV0dXJucyBhIGJvb2xlYW5cblx0bG1zQ29ubmVjdGVkID0gc2Nvcm0uaW5pdCgpO1xuXHQvL0lmIHRoZSBzY29ybS5pbml0IGZ1bmN0aW9uIHN1Y2NlZWRlZC4uLlxuXHRpZiAobG1zQ29ubmVjdGVkKSB7XG5cdFx0c2lMb2coJ1NDT1JNJywgJ0lOSVQnLCAnU1VDQ0VTUzogQ291cnNlIGlzIG5vdyBjb25uZWN0ZWQgd2l0aCB0aGUgTE1TIScpO1xuXHRcdHZhciBjb21wbGV0aW9uc3RhdHVzO1xuXHRcdHZhciBsZWFybmVybmFtZTtcblx0XHR2YXIgcmF3RGF0YSA9IHNjb3JtLmdldCgnY21pLnN1c3BlbmRfZGF0YScpO1xuXHRcdHZhciBib29rbWFya1Njb3JtO1xuXHRcdHZhciBzY29ybURhdGE7XG5cdFx0aWYgKHNjb3JtLnZlcnNpb24gPT09ICcyMDA0Jykge1xuXHRcdFx0Y29tcGxldGlvbnN0YXR1cyA9IHNjb3JtLmdldCgnY21pLmNvbXBsZXRpb25fc3RhdHVzJyk7XG5cdFx0XHRsZWFybmVybmFtZSA9IHNjb3JtLmdldCgnY21pLmxlYXJuZXJfbmFtZScpO1xuXHRcdFx0Ym9va21hcmtTY29ybSA9IHNjb3JtLmdldCgnY21pLmxvY2F0aW9uJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbXBsZXRpb25zdGF0dXMgPSBzY29ybS5nZXQoJ2NtaS5jb3JlLmxlc3Nvbl9zdGF0dXMnKTtcblx0XHRcdGxlYXJuZXJuYW1lID0gc2Nvcm0uZ2V0KCdjbWkuY29yZS5zdHVkZW50X25hbWUnKTtcblx0XHRcdGJvb2ttYXJrU2Nvcm0gPSBzY29ybS5nZXQoJ2NtaS5jb3JlLmxlc3Nvbl9sb2NhdGlvbicpO1xuXHRcdH1cblx0XHRpZiAocmF3RGF0YSAmJiB0eXBlb2YgcmF3RGF0YSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdHNjb3JtRGF0YSA9IEpTT04ucGFyc2UocmF3RGF0YSk7XG5cdFx0XHRzYXZlRGF0YSA9IHNjb3JtRGF0YTtcblx0XHR9IGVsc2UgaWYgKGxvY2FsRGF0YSkge1xuXHRcdFx0c2F2ZURhdGEgPSBsb2NhbERhdGE7XG5cdFx0fVxuXG5cdFx0aWYgKGJvb2ttYXJrU2Nvcm0pIHtcblx0XHRcdGJvb2ttYXJrZWRTbGlkZSA9IGJvb2ttYXJrU2Nvcm07XG5cdFx0fSBlbHNlIGlmIChib29rbWFya0xvY2FsKSB7XG5cdFx0XHRib29rbWFya2VkU2xpZGUgPSBib29rbWFya0xvY2FsO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRib29rbWFya2VkU2xpZGUgPSAxO1xuXHRcdH1cblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgdW5sb2FkSGFuZGxlcik7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHVubG9hZEhhbmRsZXIpO1xuXHRcdC8vSWYgdGhlIGNvdXJzZSBjb3VsZG4ndCBjb25uZWN0IHRvIHRoZSBMTVMgZm9yIHNvbWUgcmVhc29uLi4uXG5cdH0gZWxzZSB7XG5cdFx0Ly8uLi4gbGV0J3MgYWxlcnQgdGhlIHVzZXIgdGhlbiBjbG9zZSB0aGUgd2luZG93LlxuXHRcdHNpTG9nKCdTQ09STScsICdJTklUJywgJ0VSUk9SOiBDb3Vyc2UgY291bGQgbm90IGNvbm5lY3Qgd2l0aCB0aGUgTE1TJyk7XG5cdFx0aWYgKGxvY2FsRGF0YSkge1xuXHRcdFx0c2F2ZURhdGEgPSBsb2NhbERhdGE7XG5cdFx0fVxuXHRcdGlmIChib29rbWFya0xvY2FsKSB7XG5cdFx0XHRib29rbWFya2VkU2xpZGUgPSBib29rbWFya0xvY2FsO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRib29rbWFya2VkU2xpZGUgPSAxO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBzZXRTY29ybUNvbXBsZXRpb24oKSB7XG5cdHZhciBzdWNjZXNzID0gZmFsc2U7XG5cblx0Ly8gRG8gd2UgZXZlbiB3YW50IHRvIHRhbGsgdG8gdGhlIExNUz9cblx0aWYgKGdsb2JhbFZhci5zY29ybVNldHRpbmdzLnVzZVNjb3JtKSB7XG5cdFx0Ly8gQUlDQzpcblx0XHQvLyBPbiB0aGUgb2ZmIGNoYW5jZSB0aGF0IHdlIHdhbnQgdG8gdXNlIEFJQ0MgaW5zdGVhZCBvZiBTQ09STVxuXG5cdFx0aWYgKGdsb2JhbFZhci5zY29ybVNldHRpbmdzLnN0YW5kYXJkID09PSAnYWljYycpIHtcblx0XHRcdHZhciBTRCA9IHdpbmRvdy5wYXJlbnQ7XG5cblx0XHRcdC8vIENoZWNrIGlmIHRoZSBBSUNDIEFQSSBpcyBhdmFpbGFibGUgaW4gcGFyZW50IGFuZCB0ZWxsIGl0IHRvIHNldCB0aGUgY291cnNlIHRvIGNvbXBsZXRlXG5cblx0XHRcdGlmICh0eXBlb2YgU0QuU2V0UmVhY2hlZEVuZCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgU0QuQ29tbWl0RGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHQvLyBJZiBib3RoIG9mIHRoZSBmb2xsb3dpbmcgQUlDQyBBUEkgZnVuY3Rpb25zIHJldHVybiB0cnVlLCB3ZSBhcmUgZG9uZSBoZXJlIVxuXHRcdFx0XHRzdWNjZXNzID0gU0QuU2V0UmVhY2hlZEVuZCgpICYmIFNELkNvbW1pdERhdGEoKTtcblx0XHRcdFx0aWYgKHN1Y2Nlc3MpIHtcblx0XHRcdFx0XHRzaUxvZygnQUlDQycsICdDT01QTEVURScsICdTVUNDRVNTOiBDb3Vyc2Ugd2FzIHN1Y2Nlc3NmdWxseSBzZXQgdG8gY29tcGxldGUhJyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gb3RoZXJ3aXNlIHNvbWV0aGluZyB3ZW50IGhvcnJpYmx5IHdyb25nLlxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRzaUxvZygnQUlDQycsICdDT01QTEVURScsICdFUlJPUjogQ291cnNlIGNvdWxkIG5vdCBiZSBzZXQgdG8gY29tcGxldGUhJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIG90aGVyd2lzZSB0aGUgQVBJIGlzbid0IGF2YWlsYWJsZVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHNpTG9nKCdBSUNDJywgJ0NPTVBMRVRFJywgJ0VSUk9SOiBDb3Vyc2UgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgTE1TJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU0NPUk06XG5cblx0XHQvL0lmIGxtc0Nvbm5lY3RlZCBpcyB0cnVlICh3aGljaCBvbmx5IGhhcHBlbnMgaWYgd2UgYXJlIHVzaW5nIHRoZSBTQ09STSBzdGFuZGFyZCkuLi5cblx0XHRlbHNlIGlmIChsbXNDb25uZWN0ZWQpIHtcblx0XHRcdC8vLi4uIHRyeSBzZXR0aW5nIHRoZSBjb3Vyc2Ugc3RhdHVzIHRvIFwiY29tcGxldGVkXCJcblx0XHRcdGlmIChzY29ybS52ZXJzaW9uID09PSAnMjAwNCcpIHtcblx0XHRcdFx0c3VjY2VzcyA9IHNjb3JtLnNldCgnY21pLmNvbXBsZXRpb25fc3RhdHVzJywgJ2NvbXBsZXRlZCcpO1xuXHRcdFx0XHRzY29ybS5zZXQoJ2NtaS5zdWNjZXNzX3N0YXR1cycsICdwYXNzZWQnKTtcblx0XHRcdFx0c2Nvcm0uc2V0KCdjbWkuc2NvcmUucmF3JywgJzEwMCcpO1xuXHRcdFx0XHRzY29ybS5zZXQoJ2NtaS5zY29yZS5zY2FsZWQnLCAnMScpO1xuXHRcdFx0XHQvLyBzY29ybS5zZXQoXCJjbWkuc2NvcmUubWluXCIsIGdsb2JhbFZhci5taW5TY29yZSk7XG5cdFx0XHRcdC8vIHNjb3JtLnNldChcImNtaS5zY29yZS5tYXhcIiwgZ2xvYmFsVmFyLm1heFNjb3JlKTtcblx0XHRcdFx0Ly8gc2Nvcm0uc2V0KFwiYWRsLm5hdi5yZXF1ZXN0XCIsIFwiZXhpdFwiKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3VjY2VzcyA9IHNjb3JtLnNldCgnY21pLmNvcmUubGVzc29uX3N0YXR1cycsICdjb21wbGV0ZWQnKTtcblx0XHRcdFx0c2Nvcm0uc2V0KCdjbWkuY29yZS5zY29yZS5yYXcnLCAnMTAwJyk7XG5cdFx0XHRcdC8vIHNjb3JtLnNldChcImNtaS5jb3JlLnNjb3JlLm1pblwiLCBnbG9iYWxWYXIubWluU2NvcmUpO1xuXHRcdFx0XHQvLyBzY29ybS5zZXQoXCJjbWkuY29yZS5zY29yZS5tYXhcIiwgZ2xvYmFsVmFyLm1heFNjb3JlKTtcblx0XHRcdH1cblx0XHRcdC8vSWYgdGhlIGNvdXJzZSB3YXMgc3VjY2Vzc2Z1bGx5IHNldCB0byBcImNvbXBsZXRlZFwiLi4uXG5cdFx0XHRpZiAoc3VjY2Vzcykge1xuXHRcdFx0XHRzY29ybS5zYXZlKCk7XG5cdFx0XHRcdHNpTG9nKCdTQ09STScsICdDT01QTEVURScsICdTVUNDRVNTOiBDb3Vyc2Ugd2FzIHN1Y2Nlc3NmdWxseSBzZXQgdG8gY29tcGxldGUhJyk7XG5cdFx0XHR9XG5cdFx0XHQvL0lmIHRoZSBjb3Vyc2UgY291bGRuJ3QgYmUgc2V0IHRvIGNvbXBsZXRlZCBmb3Igc29tZSByZWFzb24uLi5cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHQvL2FsZXJ0IHRoZSB1c2VyXG5cdFx0XHRcdHNpTG9nKCdTQ09STScsICdDT01QTEVURScsICdFUlJPUjogQ291cnNlIGNvdWxkIG5vdCBiZSBzZXQgdG8gY29tcGxldGUhJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIG90aGVyd2lzZSB0aGUgY291cnNlIGlzbid0IGNvbm5lY3RlZCB0byB0aGUgTE1TIGZvciBzb21lIHJlYXNvbi4uLlxuXHRcdGVsc2Uge1xuXHRcdFx0Ly9hbGVydCB0aGUgdXNlclxuXHRcdFx0c2lMb2coJ1NDT1JNJywgJ0NPTVBMRVRFJywgJ0VSUk9SOiBDb3Vyc2UgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgTE1TJyk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHNldFNjb3JtSW5jb21wbGV0ZSgpIHtcblx0aWYgKGxtc0Nvbm5lY3RlZCkge1xuXHRcdHZhciBzdWNjZXNzO1xuXHRcdC8vLi4uIHRyeSBzZXR0aW5nIHRoZSBjb3Vyc2Ugc3RhdHVzIHRvIFwiY29tcGxldGVkXCJcblx0XHRpZiAoc2Nvcm0udmVyc2lvbiA9PT0gJzIwMDQnKSB7XG5cdFx0XHRzdWNjZXNzID0gc2Nvcm0uc2V0KCdjbWkuY29tcGxldGlvbl9zdGF0dXMnLCAnY29tcGxldGVkJyk7XG5cdFx0XHRzY29ybS5zZXQoJ2NtaS5zdWNjZXNzX3N0YXR1cycsICdmYWlsZWQnKTtcblx0XHRcdHNjb3JtLnNldCgnY21pLnNjb3JlLnJhdycsICcwJyk7XG5cdFx0XHRzY29ybS5zZXQoJ2NtaS5zY29yZS5zY2FsZWQnLCAnMScpO1xuXHRcdFx0Ly8gc2Nvcm0uc2V0KFwiY21pLnNjb3JlLm1pblwiLCBnbG9iYWxWYXIubWluU2NvcmUpO1xuXHRcdFx0Ly8gc2Nvcm0uc2V0KFwiY21pLnNjb3JlLm1heFwiLCBnbG9iYWxWYXIubWF4U2NvcmUpO1xuXHRcdFx0Ly8gc2Nvcm0uc2V0KFwiYWRsLm5hdi5yZXF1ZXN0XCIsIFwiZXhpdFwiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdWNjZXNzID0gc2Nvcm0uc2V0KCdjbWkuY29yZS5sZXNzb25fc3RhdHVzJywgJ2luY29tcGxldGUnKTtcblx0XHRcdHNjb3JtLnNldCgnY21pLmNvcmUuc2NvcmUucmF3JywgJzAnKTtcblx0XHRcdC8vIHNjb3JtLnNldChcImNtaS5jb3JlLnNjb3JlLm1pblwiLCBnbG9iYWxWYXIubWluU2NvcmUpO1xuXHRcdFx0Ly8gc2Nvcm0uc2V0KFwiY21pLmNvcmUuc2NvcmUubWF4XCIsIGdsb2JhbFZhci5tYXhTY29yZSk7XG5cdFx0fVxuXHRcdC8vSWYgdGhlIGNvdXJzZSB3YXMgc3VjY2Vzc2Z1bGx5IHNldCB0byBcImluY29tcGxldGVcIi4uLlxuXHRcdGlmIChzdWNjZXNzKSB7XG5cdFx0XHRzY29ybS5zYXZlKCk7XG5cdFx0XHRzaUxvZygnU0NPUk0nLCAnSU5DT01QTEVURScsICdTVUNDRVNTOiBDb3Vyc2Ugd2FzIHN1Y2Nlc3NmdWxseSBzZXQgdG8gaW5jb21wbGV0ZSEnKTtcblx0XHR9XG5cdFx0Ly9JZiB0aGUgY291cnNlIGNvdWxkbid0IGJlIHNldCB0byBpbmNvbXBsZXRlIGZvciBzb21lIHJlYXNvbi4uLlxuXHRcdGVsc2Uge1xuXHRcdFx0Ly9hbGVydCB0aGUgdXNlclxuXHRcdFx0c2lMb2coJ1NDT1JNJywgJ0lOQ09NUExFVEUnLCAnRVJST1I6IENvdXJzZSBjb3VsZCBub3QgYmUgc2V0IHRvIGluY29tcGxldGUhJyk7XG5cdFx0fVxuXHR9XG5cdC8vSWYgdGhlIGNvdXJzZSBpc24ndCBjb25uZWN0ZWQgdG8gdGhlIExNUyBmb3Igc29tZSByZWFzb24uLi5cblx0ZWxzZSB7XG5cdFx0Ly9hbGVydCB0aGUgdXNlclxuXHRcdHNpTG9nKCdTQ09STScsICdJTkNPTVBMRVRFJywgJ0VSUk9SOiBDb3Vyc2UgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgTE1TJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdW5sb2FkSGFuZGxlcigpIHtcblx0aWYgKGxtc0Nvbm5lY3RlZCAmJiAhdW5sb2FkZWQpIHtcblx0XHRzYXZlTE1TKCk7XG5cdFx0c2Nvcm0uc2F2ZSgpOyAvL3NhdmUgYWxsIGRhdGEgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIHNlbnRcblx0XHRzY29ybS5xdWl0KCk7IC8vY2xvc2UgdGhlIFNDT1JNIEFQSSBjb25uZWN0aW9uIHByb3Blcmx5XG5cdFx0dW5sb2FkZWQgPSB0cnVlO1xuXHR9XG59XG5mdW5jdGlvbiBzYXZlTE1TKCkge1xuXHRpZiAoc2F2ZUNvdXJzZVByb2dyZXNzKCkgJiYgc2F2ZUJvb2ttYXJrKCkpIHtcblx0XHRzY29ybS5zYXZlKCk7XG5cdH0gZWxzZSB7XG5cdFx0c2lMb2coJ1NDT1JNJywgJ0ZhaWxlZCB0byBTYXZlJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gc2F2ZUNvdXJzZVByb2dyZXNzKCkge1xuXHR2YXIgc3VjY2Vzcztcblx0dmFyIGRhdGFTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShzYXZlRGF0YSk7XG5cdGlmIChsbXNDb25uZWN0ZWQpIHtcblx0XHRzdWNjZXNzID0gc2Nvcm0uc2V0KCdjbWkuc3VzcGVuZF9kYXRhJywgZGF0YVN0cmluZyk7XG5cdH1cblx0cmV0dXJuIHN1Y2Nlc3M7XG59XG5mdW5jdGlvbiBzYXZlQm9va21hcmsoKSB7XG5cdHZhciBzdWNjZXNzO1xuXHRib29rbWFya2VkU2xpZGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5zbGlkZU51bWJlciB8fCAnMCc7XG5cdGlmIChsbXNDb25uZWN0ZWQpIHtcblx0XHRpZiAoc2Nvcm0udmVyc2lvbiA9PT0gJzIwMDQnKSB7XG5cdFx0XHRzdWNjZXNzID0gc2Nvcm0uc2V0KCdjbWkubG9jYXRpb24nLCBib29rbWFya2VkU2xpZGUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdWNjZXNzID0gc2Nvcm0uc2V0KCdjbWkuY29yZS5sZXNzb25fbG9jYXRpb24nLCBib29rbWFya2VkU2xpZGUpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBzdWNjZXNzO1xufVxuXG5mdW5jdGlvbiBzYXZlUHJvZ3Jlc3NMb2NhbGx5KCkge1xuXHRib29rbWFya2VkU2xpZGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5zbGlkZU51bWJlciB8fCAnMCc7XG5cdHZhciBkYXRhU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoc2F2ZURhdGEpO1xuXHRpZiAoc3RvcmFnZUF2YWlsYWJsZSgnbG9jYWxTdG9yYWdlJykpIHtcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwcm9ncmVzc1VSTCwgZGF0YVN0cmluZyk7XG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oYm9va21hcmtVUkwsIGJvb2ttYXJrZWRTbGlkZSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gc3RvcmFnZUF2YWlsYWJsZSh0eXBlKSB7XG5cdHZhciBzdG9yYWdlO1xuXHR0cnkge1xuXHRcdHN0b3JhZ2UgPSB3aW5kb3dbdHlwZV07XG5cdFx0dmFyIHggPSAnX19zdG9yYWdlX3Rlc3RfXyc7XG5cdFx0c3RvcmFnZS5zZXRJdGVtKHgsIHgpO1xuXHRcdHN0b3JhZ2UucmVtb3ZlSXRlbSh4KTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdHJldHVybiAoXG5cdFx0XHRlIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uICYmXG5cdFx0XHQvLyBldmVyeXRoaW5nIGV4Y2VwdCBGaXJlZm94XG5cdFx0XHQoZS5jb2RlID09PSAyMiB8fFxuXHRcdFx0XHQvLyBGaXJlZm94XG5cdFx0XHRcdGUuY29kZSA9PT0gMTAxNCB8fFxuXHRcdFx0XHQvLyB0ZXN0IG5hbWUgZmllbGQgdG9vLCBiZWNhdXNlIGNvZGUgbWlnaHQgbm90IGJlIHByZXNlbnRcblx0XHRcdFx0Ly8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxuXHRcdFx0XHRlLm5hbWUgPT09ICdRdW90YUV4Y2VlZGVkRXJyb3InIHx8XG5cdFx0XHRcdC8vIEZpcmVmb3hcblx0XHRcdFx0ZS5uYW1lID09PSAnTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRUQnKSAmJlxuXHRcdFx0Ly8gYWNrbm93bGVkZ2UgUXVvdGFFeGNlZWRlZEVycm9yIG9ubHkgaWYgdGhlcmUncyBzb21ldGhpbmcgYWxyZWFkeSBzdG9yZWRcblx0XHRcdHN0b3JhZ2UgJiZcblx0XHRcdHN0b3JhZ2UubGVuZ3RoICE9PSAwXG5cdFx0KTtcblx0fVxufVxuXG4iLCIvL1NvbWUgc2hvcnRjdXRzIGZvciBmdW5jdGlvbnNcbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gbmV4dFNsaWRlKCkge1xuXHRSZXZlYWwucmlnaHQoKTtcbn1cblxuLyoqXG4gKlxuICovXG5mdW5jdGlvbiBwcmV2U2xpZGUoKSB7XG5cdFJldmVhbC5sZWZ0KCk7XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gZG93blNsaWRlKCkge1xuXHRSZXZlYWwuZG93bigpO1xufVxuXG4vKipcbiAqXG4gKi9cbmZ1bmN0aW9uIHVwU2xpZGUoKSB7XG5cdFJldmVhbC51cCgpO1xufVxuXG4vKipcbiAqXG4gKi9cbmZ1bmN0aW9uIG5leHRIaWRlKCkge1xuXHQkKCcjc2ktbmV4dCcpLmhpZGUoKTtcbn1cblxuLyoqXG4gKlxuICovXG5mdW5jdGlvbiBuZXh0U2hvdygpIHtcblx0JCgnI3NpLW5leHQnKS5zaG93KCk7XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gYmFja0hpZGUoKSB7XG5cdCQoJyNzaS1iYWNrJykuaGlkZSgpO1xufVxuXG4vKipcbiAqXG4gKi9cbmZ1bmN0aW9uIGJhY2tTaG93KCkge1xuXHQkKCcjc2ktYmFjaycpLnNob3coKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gblxuICovXG5mdW5jdGlvbiBqdW1wVG9TbGlkZShuKSB7XG5cdFJldmVhbC5zbGlkZShuIC0gMSk7XG59XG5cbi8qKlxuICogQHBhcmFtIGlkXG4gKi9cbmZ1bmN0aW9uIGp1bXBUb0lkKGlkKSB7XG5cdHZhciBudW0gPSBzbGlkZXNbaWRdLnNsaWRlTnVtYmVyO1xuXHRSZXZlYWwuc2xpZGUobnVtIC0gMSk7XG59XG5cbi8qKlxuICogQHBhcmFtICRlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIGxvY2soJGVsZW1lbnQpIHtcblx0JGVsZW1lbnQuYWRkQ2xhc3MoJ25vRXZlbnRzJyk7XG5cdCRlbGVtZW50LmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG59XG5cbi8qKlxuICogQHBhcmFtICRlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIHVubG9jaygkZWxlbWVudCkge1xuXHQkZWxlbWVudC5yZW1vdmVDbGFzcygnbm9FdmVudHMnKTtcblx0JGVsZW1lbnQucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gcGF0aE5hbWVcbiAqL1xuZnVuY3Rpb24gc2V0UGF0aChwYXRoTmFtZSkge1xuXHRpZiAoIWNoZWNrV2hvbGVQYXRoKHBhdGhOYW1lKSAmJiBsbXNDb25uZWN0ZWQpIHtcblx0XHRzZXRTY29ybUluY29tcGxldGUoKTtcblx0fVxuXHRyZXR1cm4gKHNhdmVEYXRhLnBhdGhTZWxlY3RlZCA9IHBhdGhOYW1lKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gaW5wdXRcbiAqL1xuZnVuY3Rpb24gZ2V0Q29tcGxldGlvblN0YXR1cyhpbnB1dCkge1xuXHR2YXIgY2hlY2tTcGVjaWZpY1BhdGggPSBpbnB1dCAmJiBpbnB1dFswXSA9PT0gJ0AnO1xuXG5cdGlmIChjaGVja1NwZWNpZmljUGF0aCkgcmV0dXJuIGNoZWNrV2hvbGVQYXRoKGlucHV0LnNwbGl0KCdAJylbMV0pO1xuXG5cdHZhciBzbGlkZUlEID0gaW5wdXQgPyBpbnB1dCA6IGdsb2JhbFZhci5jdXJTbGlkZTtcblx0dmFyIHNsaWRlT2JqID0gc2xpZGVzW3NsaWRlSURdO1xuXG5cdC8vIGlmICghc2xpZGVPYmopIHJldHVybiBjb25zb2xlLndhcm4oJ2ludmFsaWQgc2xpZGUnKTtcblx0Ly8gaWYgKCFzbGlkZU9iai5pbmNsdWRlKSByZXR1cm4gY29uc29sZS53YXJuKCdpbmNsdWRlOiBmYWxzZScpO1xuXG5cdHZhciBvbkN1clNsaWRlID0gc2xpZGVJRCA9PT0gZ2xvYmFsVmFyLmN1clNsaWRlO1xuXHR2YXIgc2xpZGVDb21wbGV0aW9uID0gc2F2ZURhdGEuc2xpZGVDb21wbGV0aW9uO1xuXHR2YXIgcGF0aFNlbGVjdGVkID0gc2F2ZURhdGEucGF0aFNlbGVjdGVkO1xuXHR2YXIgc3BlY2lmaWVkUGF0aCA9IHNsaWRlT2JqLmNvbXBsZXRpb25QYXRoO1xuXHR2YXIgcGF0aE9iaiA9IHNsaWRlQ29tcGxldGlvbi5tYWluUGF0aDtcblxuXHRpZiAoc3BlY2lmaWVkUGF0aCkge1xuXHRcdGlmIChBcnJheS5pc0FycmF5KHNwZWNpZmllZFBhdGgpKSB7XG5cdFx0XHRpZiAocGF0aFNlbGVjdGVkICYmIHNwZWNpZmllZFBhdGguaW5kZXhPZihwYXRoU2VsZWN0ZWQpID49IDApIHtcblx0XHRcdFx0cGF0aE9iaiA9IHNsaWRlQ29tcGxldGlvbltwYXRoU2VsZWN0ZWRdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cGF0aE9iaiA9IHNsaWRlQ29tcGxldGlvbltzcGVjaWZpZWRQYXRoWzBdXTtcblx0XHRcdFx0aWYgKG9uQ3VyU2xpZGUpIHNldFBhdGgoc3BlY2lmaWVkUGF0aFswXSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHBhdGhPYmogPSBzbGlkZUNvbXBsZXRpb25bc3BlY2lmaWVkUGF0aF07XG5cdFx0XHRpZiAob25DdXJTbGlkZSkgc2V0UGF0aChzcGVjaWZpZWRQYXRoKTtcblx0XHR9XG5cdH1cblx0Ly8gY29uc29sZS5sb2coaW5wdXQpO1xuXG5cdHJldHVybiBwYXRoT2JqW3NsaWRlSURdO1xufVxuXG5mdW5jdGlvbiBjaGVja1dob2xlUGF0aChwYXRoKSB7XG5cdHZhciBwYXRoT2JqID0gc2F2ZURhdGEuc2xpZGVDb21wbGV0aW9uW3BhdGhdO1xuXHRmb3IgKHZhciBrZXkgaW4gcGF0aE9iaikge1xuXHRcdGlmICghcGF0aE9ialtrZXldKSByZXR1cm4gMDtcblx0fVxuXHRyZXR1cm4gMTtcbn1cblxuZnVuY3Rpb24gY29tcGxldGVTbGlkZSgpIHtcblx0aWYgKCFzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5pbmNsdWRlKSByZXR1cm47XG5cblx0dmFyIHNsaWRlSUQgPSBnbG9iYWxWYXIuY3VyU2xpZGU7XG5cdHZhciBzcGVjaWZpZWRQYXRoID0gc2xpZGVzW3NsaWRlSURdLmNvbXBsZXRpb25QYXRoO1xuXHR2YXIgc2xpZGVDb21wbGV0aW9uID0gc2F2ZURhdGEuc2xpZGVDb21wbGV0aW9uO1xuXG5cdGlmIChzcGVjaWZpZWRQYXRoKSB7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkoc3BlY2lmaWVkUGF0aCkpIHtcblx0XHRcdHNwZWNpZmllZFBhdGguZm9yRWFjaChmdW5jdGlvbiAocGF0aCwgaWR4KSB7XG5cdFx0XHRcdHNsaWRlQ29tcGxldGlvbltwYXRoXVtzbGlkZUlEXSA9IDE7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Ugc2xpZGVDb21wbGV0aW9uW3NwZWNpZmllZFBhdGhdW3NsaWRlSURdID0gMTtcblx0fSBlbHNlIHNsaWRlQ29tcGxldGlvbi5tYWluUGF0aFtzbGlkZUlEXSA9IDE7XG59XG5cbi8qKlxuICogQHBhcmFtIG5hdkVsZW1cbiAqIEBwYXJhbSBzdHlsZUNsYXNzXG4gKiBAcGFyYW0gaHRtbFxuICovXG5mdW5jdGlvbiBjdXN0b21OYXZTdHlsZShuYXZFbGVtLCBzdHlsZUNsYXNzLCBodG1sKSB7XG5cdHZhciBlbGVtID0gJCgnI3NpLScgKyBuYXZFbGVtKTtcblx0dmFyIGluaXRpYWxIVE1MID0gZWxlbS5odG1sKCk7XG5cdHZhciBjdXJTbGlkZSA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdO1xuXG5cdGlmIChodG1sKSBlbGVtLmh0bWwoaHRtbCk7XG5cblx0ZWxlbS5hZGRDbGFzcyhzdHlsZUNsYXNzKTtcblxuXHRjdXJTbGlkZS5vbkV4aXRBY3Rpb24gPSAoZnVuY3Rpb24gKCkge1xuXHRcdHZhciBvcmlnaW5hbE9uRXhpdCA9IGN1clNsaWRlLm9uRXhpdEFjdGlvbjtcblx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKG9yaWdpbmFsT25FeGl0KSBvcmlnaW5hbE9uRXhpdC5hcHBseSh0aGlzKTtcblx0XHRcdGVsZW0uaHRtbChpbml0aWFsSFRNTCk7XG5cdFx0XHRlbGVtLnJlbW92ZUNsYXNzKHN0eWxlQ2xhc3MpO1xuXHRcdH07XG5cdH0pKCk7XG59XG5cbi8vLy8vLy8vLy8vLypGZWF0dXJlOmlkZWJlaG9sZC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gaW5zdGFDaGVhdEFkZG9uKCkge1xuXHQvLyBjb25zb2xlLmxvZyhcIkhlbGxvLCBJJ20geW91ciBpbnN0YUNoZWF04oSiIGFkZG9uIGZvciB0b2RheSFcIik7XG59XG5cbi8vdGhlIGhvbHkgY2hlYXRmdW5jdGlvbiEhIVxuLyoqXG4gKlxuICovXG5mdW5jdGlvbiBkZXZNb2RlKCkge1xuXHQvLyBDaGVhdCBjb2RlLiBTZWUgRG9vbS5cblxuXHQkKCdib2R5JykuYWRkQ2xhc3MoJ2Rldi1tb2RlJyk7XG5cdGNvbnNvbGUubG9nKCdHT0QgTU9ERSEnKTtcblx0JCgnI2d1aWRlbGluZXMnKS5zaG93KCk7XG5cblx0JChkb2N1bWVudCkua2V5dXAoZnVuY3Rpb24gKGUpIHtcblx0XHQvLyAnZycga2V5IHRvZ2dsZXMgZ3JpZCBsaW5lc1xuXHRcdGlmIChlLndoaWNoID09IDcxKSB7XG5cdFx0XHRpZiAoJCgnI2d1aWRlbGluZXMnKS5jc3MoJ2Rpc3BsYXknKSAhPSAnbm9uZScpIHtcblx0XHRcdFx0JCgnI2d1aWRlbGluZXMnKS5oaWRlKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCcjZ3VpZGVsaW5lcycpLnNob3coKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBzaGlmdCArIGFycm93IGtleXMgYWxsb3cgbmF2aWdhdGlvbiB0aHJvdWdoIGhvcml6b250YWwgYW5kIHZlcnRpY2FsIHNsaWRlc1xuXHRcdGlmIChlLnNoaWZ0S2V5ICYmIGUud2hpY2ggPT0gMzcpIHtcblx0XHRcdFJldmVhbC5sZWZ0KCk7XG5cdFx0fVxuXHRcdGlmIChlLnNoaWZ0S2V5ICYmIGUud2hpY2ggPT0gMzkpIHtcblx0XHRcdFJldmVhbC5yaWdodCgpO1xuXHRcdH1cblx0XHRpZiAoZS5zaGlmdEtleSAmJiBlLndoaWNoID09IDM4KSB7XG5cdFx0XHRSZXZlYWwudXAoKTtcblx0XHR9XG5cdFx0aWYgKGUuc2hpZnRLZXkgJiYgZS53aGljaCA9PSA0MCkge1xuXHRcdFx0UmV2ZWFsLmRvd24oKTtcblx0XHR9XG5cblx0XHQvLyAnaicga2V5IHJldmVhbHMgcG9zaXRpdmUgZmVlZGJhY2tcblx0XHRpZiAoZS53aGljaCA9PT0gNzQpIHtcblx0XHRcdHNpbXBsZU1vZGFsQ2xvc2UoKTtcblx0XHRcdHNpbXBsZU1vZGFsT3BlbigncG9zaXRpdmUnKTtcblx0XHR9XG5cdFx0Ly8gICdrJyBrZXkgcmV2ZWFscyBuZWdhdGl2ZSBmZWVkYmFjayAxXG5cdFx0aWYgKGUud2hpY2ggPT09IDc1KSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwubmVnYXRpdmUpIHtcblx0XHRcdFx0c2ltcGxlTW9kYWxPcGVuKCduZWdhdGl2ZScpO1xuXHRcdFx0fSBlbHNlIGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5tb2RhbC5uZWdhdGl2ZTEpIHtcblx0XHRcdFx0c2ltcGxlTW9kYWxPcGVuKCduZWdhdGl2ZTEnKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gJ2wnIGtleSByZXZlYWxzIG5lZ2F0aXZlIGZlZWRiYWNrIDJcblx0XHRpZiAoZS53aGljaCA9PT0gNzYpIHtcblx0XHRcdHNpbXBsZU1vZGFsQ2xvc2UoKTtcblx0XHRcdHNpbXBsZU1vZGFsT3BlbignbmVnYXRpdmVGaW5hbCcpO1xuXHRcdH1cblx0XHQvLyAxIC0gOSBmb3IgaG90c3BvdHNcblx0XHRpZiAoZS53aGljaCA9PT0gNDkgJiYgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwuaHMxKSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ2hzMScpO1xuXHRcdH1cblx0XHRpZiAoZS53aGljaCA9PT0gNTAgJiYgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwuaHMyKSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ2hzMicpO1xuXHRcdH1cblx0XHRpZiAoZS53aGljaCA9PT0gNTEgJiYgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwuaHMzKSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ2hzMycpO1xuXHRcdH1cblx0XHRpZiAoZS53aGljaCA9PT0gNTIgJiYgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwuaHM0KSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ2hzNCcpO1xuXHRcdH1cblx0XHRpZiAoZS53aGljaCA9PT0gNTMgJiYgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwuaHM1KSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ2hzNScpO1xuXHRcdH1cblx0XHRpZiAoZS53aGljaCA9PT0gNTQgJiYgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwuaHM2KSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ2hzNicpO1xuXHRcdH1cblx0XHRpZiAoZS53aGljaCA9PT0gNTUgJiYgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwuaHM3KSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ2hzNycpO1xuXHRcdH1cblx0XHRpZiAoZS53aGljaCA9PT0gNTYgJiYgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwuaHM4KSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ2hzOCcpO1xuXHRcdH1cblx0XHRpZiAoZS53aGljaCA9PT0gNTcgJiYgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwuaHM5KSB7XG5cdFx0XHRzaW1wbGVNb2RhbENsb3NlKCk7XG5cdFx0XHRzaW1wbGVNb2RhbE9wZW4oJ2hzOScpO1xuXHRcdH1cblxuXHRcdC8vICAnOycga2V5IGhpZGVzIGFsbCBmZWVkYmFja3Ncblx0XHRpZiAoZS53aGljaCA9PSAxODYpIHtcblx0XHRcdHNpbXBsZU1vZGFsQ2xvc2UoKTtcblx0XHR9XG5cdH0pO1xufVxuIiwiLy8gZG8gbm90IHVzZSB0aGUgaWQgJ3Rlc3QnIGZvciBhIHNsaWRlXG5cbiQoJyNidG4tc3RhcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdGp1bXBUb1NsaWRlKDIpO1xuXHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG59KTtcblxuJChmdW5jdGlvbiAoKSB7XG5cdHNsaWRlcyA9IHtcblx0XHRzdGFydDoge1xuXHRcdFx0dHlwZTogJ3RleHQnLFxuXHRcdFx0bmF2RWxlbWVudHM6IFsnY2xvY2snXSxcblx0XHRcdGJhY2tBY3Rpb246IGZ1bmN0aW9uICgpIHt9LCAvL2xlYXZlIFN0YXJ0IGJhY2tBY3Rpb24gYXMgZnVuY3Rpb24gdG8gcHJldmVudCBJRTkgZXJyb3JzXG5cdFx0XHRvbkVudGVyQWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdGF1ZGlvOiB7XG5cdFx0XHRcdC8vIG9uRW50ZXI6IFwibWVkaWEvYXVkaW8vU3RhcnQvMC5tcDNcIlxuXHRcdFx0fSxcblx0XHRcdGluY2x1ZGU6IGZhbHNlIC8vIHRoaXMga2V5IGRldGVybWluZXMgaWYgdGhlIHNsaWRlIHdpbGwgYmUgdXNlZCBhcyBwYXJ0IG9mIHRoZSBjb21wbGV0aW9uIG9mIHRoZSBwcm9ncmVzcyBtZXRlci4gZGVmYXVsdCBpcyB0cnVlLiAgZG8gbm90IGNhbGwgY29tcGxldGVTbGlkZSgpIG9uIGFueSBzbGlkZSB3aGVyZSB0aGlzIGlzIHNldCB0byBmYWxzZVxuXHRcdH0sXG5cdFx0aW50cm86IHtcblx0XHRcdHR5cGU6ICd0ZXh0Jyxcblx0XHRcdG5hdkVsZW1lbnRzOiBbJ3N0YW5kYXJkLW1lbnUnLCAnIW1lbnUnLCAnaG9tZScsICduZXh0J10sXG5cdFx0XHRiYWNrQWN0aW9uOiBwcmV2U2xpZGUsXG5cdFx0XHRvbkVudGVyQWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdGF1ZGlvOiB7XG5cdFx0XHRcdC8vIG9uRW50ZXI6IFwibWVkaWEvYXVkaW8vU3RhcnQvMC5tcDNcIlxuXHRcdFx0fSxcblx0XHRcdGluY2x1ZGU6IGZhbHNlIC8vIHRoaXMga2V5IGRldGVybWluZXMgaWYgdGhlIHNsaWRlIHdpbGwgYmUgdXNlZCBhcyBwYXJ0IG9mIHRoZSBjb21wbGV0aW9uIG9mIHRoZSBwcm9ncmVzcyBtZXRlci4gZGVmYXVsdCBpcyB0cnVlLiAgZG8gbm90IGNhbGwgY29tcGxldGVTbGlkZSgpIG9uIGFueSBzbGlkZSB3aGVyZSB0aGlzIGlzIHNldCB0byBmYWxzZVxuXHRcdH0sXG5cdFx0djE6IHtcblx0XHRcdHR5cGU6ICd2aWRlbycsXG5cdFx0XHRuYXZFbGVtZW50czogWydzdGFuZGFyZC1tZW51JywgJyFwcm9ncmVzcycsICchbG9nbycsICchbWVudScsICdob21lJ10sXG5cdFx0XHRiYWNrQWN0aW9uOiBwcmV2U2xpZGUsXG5cdFx0XHRuZXh0QWN0aW9uOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGNvbXBsZXRlU2xpZGUoKTtcblx0XHRcdFx0bmV4dFNsaWRlKCk7XG5cdFx0XHR9LFxuXHRcdFx0b25FbnRlckFjdGlvbjogZnVuY3Rpb24gKCkge30sXG5cdFx0XHQvLyB2aWRlb1NlZWtpbmc6IHRydWUsIC8vY2hhbmdlIGdsb2JhbGx5IGluIGdsb2JhbFZhclxuXHRcdFx0dmlkZW9Mb2FkZWQ6IGZhbHNlIC8vZG9uJ3QgZWRpdFxuXHRcdH0sXG5cdFx0aTE6IHtcblx0XHRcdHR5cGU6ICdxdWl6Jyxcblx0XHRcdG5hdkVsZW1lbnRzOiBbJ3N0YW5kYXJkLW1lbnUnLCAnc3VibWl0JywgJyFtZW51JywgJ2hvbWUnXSxcblx0XHRcdG5leHRBY3Rpb246IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Y29tcGxldGVTbGlkZSgpO1xuXHRcdFx0XHRuZXh0U2xpZGUoKTtcblx0XHRcdH0sXG5cdFx0XHRiYWNrQWN0aW9uOiBwcmV2U2xpZGUsXG5cdFx0XHRvbkVudGVyQWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdGF1ZGlvOiB7XG5cdFx0XHRcdG9uRW50ZXI6ICdtZWRpYS9hdWRpby92by9ub3RoaW5nLm1wMycsXG5cdFx0XHRcdHBvc2l0aXZlOiAnbWVkaWEvYXVkaW8vdm8vbm90aGluZy5tcDMnLFxuXHRcdFx0XHRuZWdhdGl2ZTE6ICdtZWRpYS9hdWRpby92by9ub3RoaW5nLm1wMycsXG5cdFx0XHRcdG5lZ2F0aXZlMjogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJyxcblx0XHRcdFx0bmVnYXRpdmVGaW5hbDogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJ1xuXHRcdFx0fSxcblx0XHRcdHF1aXo6IHtcblx0XHRcdFx0cmFkaW86IGZhbHNlLCAvL2RlZmF1bHQgZmFsc2Vcblx0XHRcdFx0YW5zd2Vyczoge1xuXHRcdFx0XHRcdCdpMS1jb3JyZWN0MSc6IDEsXG5cdFx0XHRcdFx0J2kxLWNvcnJlY3QyJzogMSxcblx0XHRcdFx0XHQnaTEtY29ycmVjdDMnOiAxXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGF1ZGlvOiB7fSxcblx0XHRcdFx0dXNlckF0dGVtcHRzOiAyXG5cdFx0XHR9LFxuXHRcdFx0bW9kYWw6IHtcblx0XHRcdFx0cG9zaXRpdmU6ICdpMS1wb3NpdGl2ZScsXG5cdFx0XHRcdG5lZ2F0aXZlOiAnaTEtbmVnYXRpdmUnLFxuXHRcdFx0XHQvLyBuZWdhdGl2ZTI6ICdpMS1uZWdhdGl2ZS0yJyxcblx0XHRcdFx0bmVnYXRpdmVGaW5hbDogJ2kxLW5lZ2F0aXZlLWZpbmFsJ1xuXHRcdFx0fSxcblx0XHRcdGhvdHNwb3Q6IHsgY2xpY2tBbnl3aGVyZTogdHJ1ZSB9XG5cdFx0fSxcblx0XHRpMjoge1xuXHRcdFx0dHlwZTogJ3F1aXonLFxuXHRcdFx0bmF2RWxlbWVudHM6IFsnc3RhbmRhcmQtbWVudScsICdzdWJtaXQnLCAnIW1lbnUnLCAnaG9tZSddLFxuXHRcdFx0bmV4dEFjdGlvbjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb21wbGV0ZVNsaWRlKCk7XG5cdFx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdFx0fSxcblx0XHRcdGJhY2tBY3Rpb246IHByZXZTbGlkZSxcblx0XHRcdG9uRW50ZXJBY3Rpb246IGZ1bmN0aW9uICgpIHt9LFxuXHRcdFx0YXVkaW86IHtcblx0XHRcdFx0b25FbnRlcjogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJyxcblx0XHRcdFx0cG9zaXRpdmU6ICdtZWRpYS9hdWRpby92by9ub3RoaW5nLm1wMycsXG5cdFx0XHRcdG5lZ2F0aXZlMTogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJyxcblx0XHRcdFx0bmVnYXRpdmUyOiAnbWVkaWEvYXVkaW8vdm8vbm90aGluZy5tcDMnLFxuXHRcdFx0XHRuZWdhdGl2ZUZpbmFsOiAnbWVkaWEvYXVkaW8vdm8vbm90aGluZy5tcDMnXG5cdFx0XHR9LFxuXHRcdFx0cXVpejoge1xuXHRcdFx0XHRyYWRpbzogdHJ1ZSwgLy9kZWZhdWx0IGZhbHNlXG5cdFx0XHRcdGFuc3dlcnM6IHtcblx0XHRcdFx0XHQnaTItY29ycmVjdCc6IDFcblx0XHRcdFx0fSxcblx0XHRcdFx0YXVkaW86IHt9LFxuXHRcdFx0XHR1c2VyQXR0ZW1wdHM6IDJcblx0XHRcdH0sXG5cdFx0XHRtb2RhbDoge1xuXHRcdFx0XHRwb3NpdGl2ZTogJ2kyLXBvc2l0aXZlJyxcblx0XHRcdFx0bmVnYXRpdmU6ICdpMi1uZWdhdGl2ZScsXG5cdFx0XHRcdG5lZ2F0aXZlRmluYWw6ICdpMi1uZWdhdGl2ZS1maW5hbCdcblx0XHRcdH0sXG5cdFx0XHRob3RzcG90OiB7IGNsaWNrQW55d2hlcmU6IHRydWUgfVxuXHRcdH0sXG5cdFx0aTM6IHtcblx0XHRcdHR5cGU6ICdkbmQnLFxuXHRcdFx0bmF2RWxlbWVudHM6IFsnc3RhbmRhcmQtbWVudScsICdzdWJtaXQnLCAncmVzZXQnLCAnIW1lbnUnLCAnaG9tZSddLFxuXHRcdFx0bmV4dEFjdGlvbjogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb21wbGV0ZVNsaWRlKCk7XG5cdFx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdFx0fSxcblx0XHRcdGJhY2tBY3Rpb246IHByZXZTbGlkZSxcblx0XHRcdG9uRW50ZXJBY3Rpb246IGZ1bmN0aW9uICgpIHt9LFxuXHRcdFx0b25FeGl0QWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdGRuZDoge1xuXHRcdFx0XHR0eXBlOiAnZG5kXzEnLFxuXHRcdFx0XHRxdWl6OiB7XG5cdFx0XHRcdFx0aTNfZHJvcDogWydpM19kcmFnMiddXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRyb3BDb3VudGVyOiB7XG5cdFx0XHRcdFx0aTNfZHJvcDogMVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR1c2VyQXR0ZW1wdHM6IDIsXG5cdFx0XHRcdGFjdGlvbnM6IHtcblx0XHRcdFx0XHQvL29wdGlvbmFsXG5cdFx0XHRcdFx0aTNfZHJhZzE6IHtcblx0XHRcdFx0XHRcdC8vIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQvLyBcdGNvbnNvbGUubG9nKCdvbkRyYWdTdGFydCcpO1xuXHRcdFx0XHRcdFx0Ly8gfSxcblx0XHRcdFx0XHRcdC8vIG9uRHJhZzogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gXHRjb25zb2xlLmxvZygnb25EcmFnJyk7XG5cdFx0XHRcdFx0XHQvLyB9LFxuXHRcdFx0XHRcdFx0Ly8gb25EcmFnT3Zlcjoge1xuXHRcdFx0XHRcdFx0Ly8gXHRpM19kcm9wOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHQvLyBcdFx0Y29uc29sZS5sb2coJ29uRHJhZ092ZXInKTtcblx0XHRcdFx0XHRcdC8vIFx0fVxuXHRcdFx0XHRcdFx0Ly8gfSxcblx0XHRcdFx0XHRcdC8vIG9uRHJhZ0VuZDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gXHRjb25zb2xlLmxvZygnb25EcmFnRW5kJyk7XG5cdFx0XHRcdFx0XHQvLyB9LFxuXHRcdFx0XHRcdFx0b25Ecm9wOiB7XG5cdFx0XHRcdFx0XHRcdGkzX2Ryb3A6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHQkKCcjaTNfZHJhZzInKS5kcmFnZ2FibGUoJ29wdGlvbicsICdkaXNhYmxlZCcsIGZhbHNlKTtcblx0XHRcdFx0XHRcdFx0XHQkKCcjaTNfZHJhZzEnKS5kcmFnZ2FibGUoJ29wdGlvbicsICdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRcdCQoJyNpM19kcmFnMicpLnJlbW92ZUNsYXNzKCdkcm9wcGVkJyk7XG5cdFx0XHRcdFx0XHRcdFx0JCgnI2kzX2RyYWcxJykuYWRkQ2xhc3MoJ2Ryb3BwZWQnKTtcblx0XHRcdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygnb25Ecm9wJywgdGhpcyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGkzX2RyYWcyOiB7XG5cdFx0XHRcdFx0XHQvLyBvbkRyYWdTdGFydDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gXHRjb25zb2xlLmxvZygnb25EcmFnU3RhcnQnKTtcblx0XHRcdFx0XHRcdC8vIH0sXG5cdFx0XHRcdFx0XHQvLyBvbkRyYWc6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ29uRHJhZycpO1xuXHRcdFx0XHRcdFx0Ly8gfSxcblx0XHRcdFx0XHRcdC8vIG9uRHJhZ092ZXI6IHtcblx0XHRcdFx0XHRcdC8vIFx0aTNfZHJvcDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0Ly8gXHRcdGNvbnNvbGUubG9nKCdvbkRyYWdPdmVyJyk7XG5cdFx0XHRcdFx0XHQvLyBcdH1cblx0XHRcdFx0XHRcdC8vIH0sXG5cdFx0XHRcdFx0XHQvLyBvbkRyYWdFbmQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ29uRHJhZ0VuZCcpO1xuXHRcdFx0XHRcdFx0Ly8gfSxcblx0XHRcdFx0XHRcdG9uRHJvcDoge1xuXHRcdFx0XHRcdFx0XHRpM19kcm9wOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0JCgnI2kzX2RyYWcxJykuZHJhZ2dhYmxlKCdvcHRpb24nLCAnZGlzYWJsZWQnLCBmYWxzZSk7XG5cdFx0XHRcdFx0XHRcdFx0JCgnI2kzX2RyYWcyJykuZHJhZ2dhYmxlKCdvcHRpb24nLCAnZGlzYWJsZWQnLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHQkKCcjaTNfZHJhZzEnKS5yZW1vdmVDbGFzcygnZHJvcHBlZCcpO1xuXHRcdFx0XHRcdFx0XHRcdCQoJyNpM19kcmFnMicpLmFkZENsYXNzKCdkcm9wcGVkJyk7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ29uRHJvcCcsIHRoaXMpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIHNuYXBwaW5nOiBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdGF1ZGlvOiB7XG5cdFx0XHRcdG9uRW50ZXI6ICdtZWRpYS9hdWRpby92by9ub3RoaW5nLm1wMycsXG5cdFx0XHRcdHBvc2l0aXZlOiAnbWVkaWEvYXVkaW8vdm8vbm90aGluZy5tcDMnLFxuXHRcdFx0XHRuZWdhdGl2ZTogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJyxcblx0XHRcdFx0bmVnYXRpdmVGaW5hbDogJ21lZGlhL2F1ZGlvL3ZvL25vdGhpbmcubXAzJ1xuXHRcdFx0fSxcblx0XHRcdG1vZGFsOiB7XG5cdFx0XHRcdC8vIG5vRmVlZGJhY2s6IHRydWUsIC8vZGVmYXVsdHMgdG8gZmFsc2UsIHNldCB0byB0cnVlIGlmIHlvdSBkbyBub3Qgd2FudCBmZWVkYmFja3Ncblx0XHRcdFx0cG9zaXRpdmU6ICdpMy1wb3NpdGl2ZScsXG5cdFx0XHRcdG5lZ2F0aXZlOiAnaTMtbmVnYXRpdmUnLFxuXHRcdFx0XHRuZWdhdGl2ZUZpbmFsOiAnaTMtbmVnYXRpdmUtZmluYWwnXG5cdFx0XHR9LFxuXHRcdFx0aG90c3BvdDogeyBjbGlja0FueXdoZXJlOiB0cnVlIH1cblx0XHR9LFxuXHRcdGVuZDoge1xuXHRcdFx0dHlwZTogJ3RleHQnLFxuXHRcdFx0bmF2RWxlbWVudHM6IFsnZXhpdC1zbGlkZScsICdob21lJywgJyFleGl0J10sXG5cdFx0XHRiYWNrQWN0aW9uOiBwcmV2U2xpZGUsXG5cdFx0XHRuZXh0QWN0aW9uOiBmdW5jdGlvbiAoKSB7fSxcblx0XHRcdG9uRW50ZXJBY3Rpb246IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Ly8gRG8gbm90IGNoZWNrIGZvciBcImxtc0Nvbm5lY3RlZFwiLCBiZWNhdXNlIHRoYXQncyBkb25lIGluIHNldFNjb3JtQ29tcGxldGlvbigpIGFueXdheXMgYW5kIEFJQ0Mgd291bGRuJ3Qgd29yayBhbnltb3JlLlxuXHRcdFx0XHRzZXRTY29ybUNvbXBsZXRpb24oKTtcblx0XHRcdH0sXG5cdFx0XHRhdWRpbzoge1xuXHRcdFx0XHQvLyBvbkVudGVyOiBcIm1lZGlhL2F1ZGlvL1Jlc3VsdC8wLm1wM1wiLFxuXHRcdFx0fSxcblx0XHRcdGluY2x1ZGU6IGZhbHNlXG5cdFx0fVxuXHR9O1xufSk7XG4iLCIvLyBBZGQgXCJzaS1tb2RhbC1jbG9zZXJcIiBidXR0b24gdG8gYWxsIG1vZGFsc1xuXG52YXIgJHNpTW9kYWxDbG9zZXIgPSAkLnBhcnNlSFRNTChcblx0JzxidXR0b24gY2xhc3M9XCJzaS1tb2RhbC1jbG9zZXIgc2ktbW9kYWwtY2xvc2VyX19qc1wiPjxpbWcgY2xhc3M9XCJzaS1pbWctc3dhcF9fanMgaW5qZWN0LW1lXCIgc3JjPVwiLi9tZWRpYS9pbWdzL25hdmlnYXRpb24vY2xhc3NpYy9jbG9zZS1jcm9zcy5zdmdcIiBhbHQ9XCJcIiAvPjwvYnV0dG9uPidcbik7XG4kKCcuc2ktbW9kYWxfX2pzJykuYXBwZW5kKCRzaU1vZGFsQ2xvc2VyKTtcbiIsIi8vM2QgY2Fyb3VzZWxcbmZ1bmN0aW9uIGRpc2FibGVCdXR0b25zKHNlbGVjdG9yKSB7XG4gICAgJChzZWxlY3RvcikuYWRkQ2xhc3MoJ25vRXZlbnRzJylcbiAgICAkKHNlbGVjdG9yKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbn1cblxuXG5mdW5jdGlvbiBlbmFibGVCdXR0b25zKHNlbGVjdG9yKSB7XG4gICAgJChzZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ25vRXZlbnRzJylcbiAgICAkKHNlbGVjdG9yKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xufVxuXG5mdW5jdGlvbiB0aHJlZUROYXZpZ2F0aW9uU2V0dXAoKSB7XG4gICAgJCgnLnJpZ2h0QnV0dG9uJykub24oJ2NsaWNrLnRocmVlZGNhcm91c2VsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJlZURNb3ZlKCdyaWdodCcpXG4gICAgfSlcbiAgICAkKCcubGVmdEJ1dHRvbicpLm9uKCdjbGljay50aHJlZWRjYXJvdXNlbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyZWVETW92ZSgnbGVmdCcpXG4gICAgfSlcblxuICAgIC8vdGhyZWVEQnV0dG9ucyA9IHJvdGF0aW5nIGl0ZW1zL2J1dHRvbnNcbiAgICB0aHJlZURCdXR0b25zID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaXRlbXMgPSAkKCcudGhyZWVkYicpXG4gICAgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uY2xpY2tzID0gMDtcbiAgICAvL01ha2VzIG9ubHkgdGhlIGZyb250IGJ1dHRvbiBjbGlja2FibGVcbiAgICBkaXNhYmxlQnV0dG9ucyh0aHJlZURCdXR0b25zKVxuICAgIGVuYWJsZUJ1dHRvbnModGhyZWVEQnV0dG9uc1swXSlcblxuICAgIC8vM2QgY3NzIHNldHVwXG4gICAgY3NzU2V0dXAoKVxufVxuXG5mdW5jdGlvbiBjc3NTZXR1cCgpIHtcbiAgICAvL2h0bWwgaXRlbXMgdG8gcG9zaXRpb25cbiAgICB2YXIgdGhyZWVESXRlbXMgPSAkKCcudGhyZWVkYicpXG5cbiAgICAvL251bWJlciBvZiBpdGVtc1xuICAgIHZhciBudW1iZXJPZkl0ZW1zID0gdGhyZWVESXRlbXMubGVuZ3RoO1xuXG4gICAgLy9hc3NpZ24gZmlyc3QgcG9zaXRpb25zXG4gICAgdGhyZWVESXRlbXMuZWFjaChmdW5jdGlvbiAoaWR4LCBpdGVtKSB7XG4gICAgICAgICQoaXRlbSkuYWRkQ2xhc3MoJ2l0ZW0nICsgKGlkeCArIDEpICsgJ29mJyArIG51bWJlck9mSXRlbXMgKyAnICcgKyBudW1iZXJPZkl0ZW1zICsgJ2l0ZW1zJylcbiAgICB9KVxufVxuXG5cbmZ1bmN0aW9uIHRocmVlRE1vdmUocmlnaHRPckxlZnQpIHtcbiAgICAvL3RocmVlREJ1dHRvbnMgPSByb3RhdGluZyBpdGVtcy9idXR0b25zXG4gICAgdmFyIHRocmVlREJ1dHRvbnMgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5pdGVtc1xuXG4gICAgLy9jbGlja3Mga2VlcHMgdHJhY2sgb2YgdGhlIGl0ZW1zJ3MgcG9zaXRpb25cbiAgICB2YXIgY2xpY2tzID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uY2xpY2tzXG5cbiAgICAvL251bWJlciBvZiBpdGVtc1xuICAgIHZhciBudW1iZXJPZkl0ZW1zID0gJCgnLnRocmVlZGInKS5sZW5ndGg7XG5cbiAgICAvL251bWJlciBmb3IgYSBsZWZ0IHR1cm5cbiAgICB2YXIgdHVybjtcbiAgICBzd2l0Y2ggKHJpZ2h0T3JMZWZ0KSB7XG4gICAgICAgIGNhc2UgXCJyaWdodFwiOlxuICAgICAgICAgICAgdHVybiA9IG51bWJlck9mSXRlbXMgLSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJsZWZ0XCI6XG4gICAgICAgICAgICB0dXJuID0gMTtcbiAgICB9XG4gICAgLy9jaGFuZ2UgcG9zaXRpb25zIHRvIHRoZSBsZWZ0XG4gICAgdGhyZWVEQnV0dG9ucy5lYWNoKGZ1bmN0aW9uIChpZHgsIGJ1dHRvbikge1xuICAgICAgICB2YXIgY3VycmVudFBvc2l0aW9uID0gKChpZHggKyBjbGlja3MpICUgbnVtYmVyT2ZJdGVtcykgKyAxO1xuICAgICAgICB2YXIgbmV4dFBvc2l0aW9uID0gKChpZHggKyB0dXJuICsgY2xpY2tzKSAlIG51bWJlck9mSXRlbXMpICsgMVxuXG4gICAgICAgICQoYnV0dG9uKS5yZW1vdmVDbGFzcygnaXRlbScgKyBjdXJyZW50UG9zaXRpb24gKyBcIm9mXCIgKyBudW1iZXJPZkl0ZW1zKVxuICAgICAgICAkKGJ1dHRvbikuYWRkQ2xhc3MoJ2l0ZW0nICsgbmV4dFBvc2l0aW9uICsgXCJvZlwiICsgbnVtYmVyT2ZJdGVtcylcblxuICAgICAgICAvL01ha2VzIG9ubHkgdGhlIG5ldyBmcm9udCBidXR0b24gY2xpY2thYmxlXG4gICAgICAgIGlmIChuZXh0UG9zaXRpb24gPT09IDEpIHtcbiAgICAgICAgICAgIGRpc2FibGVCdXR0b25zKHRocmVlREJ1dHRvbnMpXG4gICAgICAgICAgICBkaXNhYmxlQnV0dG9ucyh0aGlzKVxuICAgICAgICAgICAgZW5hYmxlQnV0dG9ucyhidXR0b24pXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgLy9wcmV2ZW50IGZhc3QgY2xpY2tpbmdcbiAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAvLyAgICAgZW5hYmxlQnV0dG9ucygnLmxlZnRCdXR0b24gLnJpZ2h0QnV0dG9uJylcbiAgICAvLyB9LCAzMDApXG5cbiAgICAvL3VwZGF0ZSBjdXJyZW50IHBvc2l0aW9uXG4gICAgY2xpY2tzICs9IHR1cm5cbiAgICBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5jbGlja3MgPSBjbGlja3Ncbn0iLCJ2YXIgc2lBdWRpbyA9IHt9XG5cbmZ1bmN0aW9uIGluaXRBdWRpbygpe1xuXHRzaUF1ZGlvW1wic2Z4XCJdID0ge31cblx0c2lBdWRpb1tcInNmeFwiXVtcImNsaWNrXCJdID0gbmV3IEhvd2woe1xuXHRcdHNyYzogW1wibWVkaWEvYXVkaW8vc291bmRzL21vdXNlX2NsaWNrLm1wM1wiXSxcblx0XHR2b2x1bWU6IDAuOCxcblx0fSk7XG5cdHNpQXVkaW9bXCJzZnhcIl0ud3JvbmcgPSBuZXcgSG93bCh7XG5cdFx0c3JjOiBbXCJtZWRpYS9hdWRpby9zb3VuZHMvbmVnYXRpdmUubXAzXCJdLFxuXHRcdHZvbHVtZTogMC41LFxuXHR9KTtcblx0c2lBdWRpb1tcInNmeFwiXS5yaWdodCA9IG5ldyBIb3dsKHtcblx0XHRzcmM6IFtcIm1lZGlhL2F1ZGlvL3NvdW5kcy9wb3NpdGl2ZS5tcDNcIl0sXG5cdFx0dm9sdW1lOiAwLjUsXG5cdH0pO1xuXHRzaUF1ZGlvW1wic2Z4XCJdLm5vdGhpbmcgPSBuZXcgSG93bCh7XG5cdFx0c3JjOiBbXCJtZWRpYS9hdWRpby9zb3VuZHMvbm90aGluZy5tcDNcIl0sXG5cdH0pO1xuXG5cdGZvcihrZXkgaW4gc2xpZGVzKXtcblx0XHRzaUF1ZGlvW2tleV0gPSB7fVxuXHRcdGlmKHNsaWRlc1trZXldW1wiYXVkaW9cIl0pe1xuXHRcdFx0dmFyIGF1ZGlvID0gc2xpZGVzW2tleV1bXCJhdWRpb1wiXTtcblx0XHRcdGZvcih0cmFjayBpbiBhdWRpbyl7XG5cdFx0XHRcdHNpQXVkaW9ba2V5XVt0cmFja10gPSBuZXcgSG93bCh7XG5cdFx0XHRcdFx0c3JjOiBhdWRpb1t0cmFja11cblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9ZWxzZXtcblx0XHRcdHNsaWRlc1trZXldW1wiYXVkaW9cIl0gPSB7fVxuXHRcdH1cblx0fVxufVxuIiwiZnVuY3Rpb24gdmlkZW9DaGVjaygpIHtcblx0dmFyIHR5cGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS50eXBlO1xuXHRpZiAodHlwZSA9PSAndmlkZW8nKSB7XG5cdFx0dmFyIHZpZGVvID0gZ2xvYmFsVmFyLiRjdXJTbGlkZS5maW5kKCd2aWRlbycpWzBdO1xuXHRcdHZhciB2aWRlb0lEID0gZ2xvYmFsVmFyLiRjdXJTbGlkZS5maW5kKCd2aWRlbycpWzBdLmlkO1xuXG5cdFx0aWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnZpZGVvTG9hZGVkID09IGZhbHNlKSB7XG5cdFx0XHR2aWRlb2pzKHZpZGVvSUQsIHtcblx0XHRcdFx0bGFuZ3VhZ2U6ICdlbicsXG5cdFx0XHRcdGF1dG9wbGF5OiB0cnVlLFxuXHRcdFx0XHRjb250cm9sQmFyOiB7XG5cdFx0XHRcdFx0dm9sdW1lUGFuZWw6IHtcblx0XHRcdFx0XHRcdGlubGluZTogdHJ1ZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0aHRtbDU6IHtcblx0XHRcdFx0XHQvLyBodHRwczovL2RvY3MudmlkZW9qcy5jb20vZG9jcy9ndWlkZXMvdGV4dC10cmFja3MuaHRtbCNlbXVsYXRlZC10ZXh0LXRyYWNrc1xuXHRcdFx0XHRcdC8vIHByZXZlbnRzIGlQaG9uZSBhbmQgc2FmYXJpIGZyb20gdXNpbmcgdGhlaXIgb3duIHN1YnRpdGxlIHN5c3RlbVxuXHRcdFx0XHRcdG5hdGl2ZVRleHRUcmFja3M6IGZhbHNlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHBsdWdpbnM6IHtcblx0XHRcdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20va21vc2t3aWFrL3ZpZGVvanMtcmVzb2x1dGlvbi1zd2l0Y2hlciNwbHVnaW4tb3B0aW9uc1xuXHRcdFx0XHRcdHZpZGVvSnNSZXNvbHV0aW9uU3dpdGNoZXI6IHtcblx0XHRcdFx0XHRcdGRlZmF1bHQ6ICdoaWdoJyxcblx0XHRcdFx0XHRcdGR5bmFtaWNMYWJlbDogdHJ1ZVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2N0ZDE1MDAvdmlkZW9qcy1ob3RrZXlzI29wdGlvbnNcblx0XHRcdFx0XHRob3RrZXlzOiB7XG5cdFx0XHRcdFx0XHRlbmFibGVOdW1iZXJzOiBmYWxzZSxcblx0XHRcdFx0XHRcdGVuYWJsZU1vZGlmaWVyc0Zvck51bWJlcnM6IGZhbHNlLFxuXHRcdFx0XHRcdFx0YWx3YXlzQ2FwdHVyZUhvdGtleXM6IHRydWVcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHNlZWtCdXR0b25zOiB7XG5cdFx0XHRcdFx0XHRiYWNrOiAxMFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIGRpc2FibGUgcHJvZ3Jlc3MgY29udHJvbCAoc2Vla2luZykgaWYgZ2xvYmFsVmFyIG9yIGRhdGEuanMgaXMgY29uZmlndXJlZCB0aGF0IHdheS5cblx0XHRcdFx0Ly8gdmlkZW9TZWVraW5nIChkYXRhLmpzKSBpcyBvdmVycnVsaW5nIHByb2dyZXNzQ29udHJvbCAoZ2xvYmFsVmFyKS5cblx0XHRcdFx0Ly8gaWYgZGV2TW9kZSBpcyBvbiwgc2Vla2luZyBpcyBhbHdheXMgZW5hYmxlZC5cblxuXHRcdFx0XHRpZiAoIWdsb2JhbFZhci5kZXZNb2RlKSB7XG5cdFx0XHRcdFx0aWYgKCFzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS52aWRlb1NlZWtpbmcpIHtcblx0XHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0udmlkZW9TZWVraW5nID09PSBmYWxzZSB8fFxuXHRcdFx0XHRcdFx0XHRnbG9iYWxWYXIudmlkZW8ucHJvZ3Jlc3NDb250cm9sID09PSBmYWxzZVxuXHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdHZpZGVvanMoXG5cdFx0XHRcdFx0XHRcdFx0dmlkZW9JRFxuXHRcdFx0XHRcdFx0XHQpLmNvbnRyb2xCYXIucHJvZ3Jlc3NDb250cm9sLmRpc2FibGUoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodmlkZW9qcyh2aWRlb0lEKS50ZXh0VHJhY2tzKCkudHJhY2tzXy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0Ly8gc3VidGl0bGUvY2FwdGlvbnMgc3R5bGUgaXMgc2V0IHVwIGhlcmUgKGRlZmF1bHRzIGluIGNvbW1lbnRzKVxuXHRcdFx0XHRcdC8vIE5PVEU6IHVzZSAjWFhYIGhleCBzdHlsZSBmb3IgY29sb3JzISAjeHh4IG9yICN4eHh4eHggd2lsbCBub3Qgd29yayFcblx0XHRcdFx0XHR2YXIgc3VidGl0bGVTZXR0aW5ncyA9IHtcblx0XHRcdFx0XHRcdGJhY2tncm91bmRPcGFjaXR5OiAnMC41JywgLy9cdFx0XHRcdFwiMVwiXG5cdFx0XHRcdFx0XHRlZGdlU3R5bGU6ICdkcm9wc2hhZG93JywgLy9cdFx0XHRcdFx0bm90IHNldCAobm9uZSwgbnVsbCwgMCwgJycgZG9lc24ndCB3b3JrLCBvbmx5IG5vdCBzZXR0aW5nIGl0IGF0IGFsbCB3aWxsIHNldCBpdCB0byAnbm9uZScpXG5cdFx0XHRcdFx0XHRjb2xvcjogJyNGRkYnLCAvL1x0XHRcdFx0XHRcdFx0XCIjRkZGXCJcblx0XHRcdFx0XHRcdGJhY2tncm91bmRDb2xvcjogJyMwMDAnLCAvL1x0XHRcdFx0XHRcIiMwMDBcIlxuXHRcdFx0XHRcdFx0dGV4dE9wYWNpdHk6ICcxJywgLy9cdFx0XHRcdFx0XHRcIjFcIlxuXHRcdFx0XHRcdFx0d2luZG93T3BhY2l0eTogJzAnLCAvL1x0XHRcdFx0XHRcdFwiMFwiXG5cdFx0XHRcdFx0XHRmb250RmFtaWx5OiAncHJvcG9ydGlvbmFsU2Fuc1NlcmlmJywgLy9cdFx0XCJwcm9wb3J0aW9uYWxTYW5zU2VyaWZcIlxuXHRcdFx0XHRcdFx0d2luZG93Q29sb3I6ICcjRkZGJyAvL1x0XHRcdFx0XHRcdFwiIzAwMFwiXG5cdFx0XHRcdFx0XHQvL2ZvbnRQZXJjZW50OiAxIC8vXHRcdFx0XHRcdFx0XHRub3Qgc2V0ICgxLCAxLjAsIDEuMDAsIGV0YyBkb2Vzbid0IHdvcmssIG9ubHkgbm90IHNldHRpbmcgaXQgYXQgYWxsIHdpbGwgc2V0IGl0IHRvIDEwMCUpXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR2aWRlb2pzKHZpZGVvSUQpLnRleHRUcmFja1NldHRpbmdzLnNldFZhbHVlcyhcblx0XHRcdFx0XHRcdHN1YnRpdGxlU2V0dGluZ3Ncblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHZpZGVvanModmlkZW9JRCkudGV4dFRyYWNrU2V0dGluZ3MudXBkYXRlRGlzcGxheSgpO1xuXG5cdFx0XHRcdFx0Ly8gdGhpcyB3b3VsZCBzaG93IHRoZSBmaXJzdCBzdWJ0aXRsZSB0cmFja1xuXHRcdFx0XHRcdC8vIHZpZGVvanModmlkZW9JRCkudGV4dFRyYWNrc19bMF0ubW9kZSA9IFwic2hvd2luZ1wiXG5cblx0XHRcdFx0XHQvLyBwcmludHMgb3V0IGEgbmljZSB0YWJsZSBvZiB0aGUgY3VycmVudCBzdWJ0aXRsZSBzdHlsZSBzZXR0aW5nc1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUudGFibGUodmlkZW9qcyh2aWRlb0lEKS50ZXh0VHJhY2tTZXR0aW5ncy5nZXRWYWx1ZXMoKSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS52aWRlb0xvYWRlZCA9IHRydWU7XG5cblx0XHRcdFx0dmlkZW9qcyh2aWRlb0lEKS5wbGF5KCk7XG5cblx0XHRcdFx0Ly8gT2xkIHdheSBvZiBkaXNhYmxpbmcgc2Vla2luZy5cblx0XHRcdFx0Ly8gT2Jzb2xldGUgYmVjYXVzZSBpdCdzIG5vdCByZWxpYWJsZSBpbiBJRS4gTmV3IG5hdGl2ZSBtZXRob2QgaXMuXG5cdFx0XHRcdC8qIGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS52aWRlb1NlZWtpbmcgPT0gZmFsc2UpIHtcblx0XHRcdFx0XHR2YXIgc3VwcG9zZWRDdXJyZW50VGltZSA9IDA7XG5cdFx0XHRcdFx0dmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigndGltZXVwZGF0ZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCF2aWRlby5zZWVraW5nKSB7XG5cdFx0XHRcdFx0XHRcdHN1cHBvc2VkQ3VycmVudFRpbWUgPSB2aWRlby5jdXJyZW50VGltZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL2FsbG93cyBiYWNrd2FyZHMgbW92ZW1lbnQgb2YgdHJhY2tiYXIgYnV0IGNhbid0IG1vdmUgdHJhY2tiYXIgZm9yd2FyZFxuXHRcdFx0XHRcdHZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ3NlZWtpbmcnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmICh2aWRlby5jdXJyZW50VGltZSA+IHN1cHBvc2VkQ3VycmVudFRpbWUpIHtcblx0XHRcdFx0XHRcdFx0dmlkZW8uY3VycmVudFRpbWUgPSBzdXBwb3NlZEN1cnJlbnRUaW1lO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9ICovXG5cdFx0XHR9KTtcblx0XHRcdHZpZGVvanModmlkZW9JRCkub24oJ2VuZGVkJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGdsb2JhbFZhci52aWRlb1NlZW5bZ2xvYmFsVmFyLmN1clNsaWRlXSA9IHRydWU7XG5cdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24oKTtcblx0XHRcdH0pO1xuXHRcdFx0aWYoZ2xvYmFsVmFyLmZhZGVOYXZpZ2F0aW9uKXtcblx0XHRcdFx0dmlkZW9qcyh2aWRlb0lEKS5vbihcInVzZXJhY3RpdmVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JChcIiNzaS1uYXYtY29udGFpbmVyXCIpLnJlbW92ZUNsYXNzKFwidmpzLWZhZGUtb3V0XCIpO1xuXHRcdFx0XHR9KTtcblx0XG5cdFx0XHRcdHZpZGVvanModmlkZW9JRCkub24oXCJ1c2VyaW5hY3RpdmVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCF2aWRlb2pzKHZpZGVvSUQpLnBhdXNlZCgpKSB7XG5cdFx0XHRcdFx0JChcIiNzaS1uYXYtY29udGFpbmVyXCIpLmFkZENsYXNzKFwidmpzLWZhZGUtb3V0XCIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZpZGVvanModmlkZW9JRCkuY3VycmVudFRpbWUoMCk7XG5cdFx0XHR2aWRlb2pzKHZpZGVvSUQpLnBsYXkoKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0aWYgKCQoJ3NlY3Rpb24nKS5maW5kKCd2aWRlbycpLmxlbmd0aCA+IDApIHtcblx0XHRcdCQoJ3NlY3Rpb24nKVxuXHRcdFx0XHQuZmluZCgndmlkZW8nKVswXVxuXHRcdFx0XHQucGF1c2UoKTtcblx0XHR9XG5cdH1cbn1cbiIsInZhciB1bmxvY2tlclNvdW5kID0gbmV3IEhvd2woe1xuXHRzcmM6IFsnbWVkaWEvYXVkaW8vc291bmRzL25vdGhpbmcubXAzJ11cbn0pO1xudW5sb2NrZXJTb3VuZC5vbigndW5sb2NrJywgZnVuY3Rpb24gKCkge1xuXHQvLyBjb25zb2xlLmxvZygnSE9XTEVSOiBBdWRpbyB1bmxvY2tlZC4nKTtcblx0aGlkZVByZWxvYWRlcigpO1xuXHR1bmxvY2tlclNvdW5kLnBsYXkoKTtcbn0pO1xudW5sb2NrZXJTb3VuZC5vbigncGxheScsIGZ1bmN0aW9uICgpIHtcblx0Ly8gY29uc29sZS5sb2coJ0hPV0xFUjogQXVkaW8gcGxheWluZy4nKTtcblx0aGlkZVByZWxvYWRlcigpO1xufSk7XG51bmxvY2tlclNvdW5kLnBsYXkoKTtcblxuZnVuY3Rpb24gaW5pdFByZWxvYWRlcigpIHtcblx0Ly8gU0VUVVAgVEhFIFBSRUxPQURFUlxuXHR3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xuXHRcdCQoJyNwcmVsb2FkZXJfdGV4dF8xJykuZmFkZU91dCgnc2xvdycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdCQoJyNwcmVsb2FkZXJfdGV4dF8yJykuZmFkZUluKCdzbG93Jyk7XG5cdFx0fSk7XG5cdFx0JCgnI1ByZWxvYWRlcicpLm9uKCdjbGljayB0b3VjaCcsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG5cdFx0XHRoaWRlUHJlbG9hZGVyKCk7XG5cdFx0fSk7XG5cdH07XG5cdC8vICQoJ3NlY3Rpb24ucHJlc2VudCcpLmhpZGUoKTtcbn1cblxuZnVuY3Rpb24gaGlkZVByZWxvYWRlcigpIHtcblx0JCgnI1ByZWxvYWRlcicpLmZhZGVPdXQoJ3Nsb3cnLCBmdW5jdGlvbiAoKSB7XG5cdFx0JCgnc2VjdGlvbi5wcmVzZW50JykuZmFkZUluKCdzbG93JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdICE9PSB1bmRlZmluZWQgJiYgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0udHlwZSA9PSAndmlkZW8nKSB7XG5cdFx0XHRcdHZhciB2aWRlbyA9IGdsb2JhbFZhci4kY3VyU2xpZGUuZmluZCgndmlkZW8nKVswXTtcblx0XHRcdFx0dmlkZW9qcyh2aWRlby5wbGF5ZXJJZCkucGxheSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLy8gaW5pdFByZWxvYWRlcigpXG4iLCIvLy8vLy8vLy8vLy8qRmVhdHVyZTpQb3NpdGl2ZSBGZWVkYmFjayBGdW5jdGlvbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLyoqXG4gKlxuICovXG5mdW5jdGlvbiBpbml0RmVlZGJhY2tzKCkge1xuXHR2YXIgbW9kYWxDb250YWluZXIgPSAkKCcuc2ktbW9kYWwtY29udGFpbmVyX19qcycpO1xuXHR2YXIgbW9kYWxzID0gJCgnLnNpLW1vZGFsX19qcycpO1xuXHR2YXIgbW9kYWxDbG9zZXJzID0gJCgnLnNpLW1vZGFsLWNsb3Nlcl9fanMnKTtcblxuXHRtb2RhbHMub24oJ2NsaWNrLnByZXZlbnQnLCBmdW5jdGlvbiAoZSkge1xuXHRcdHZhciBob3RzcG90ID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaG90c3BvdDtcblx0XHR2YXIgY2xpY2tBbnl3aGVyZUhvdHNwb3QgPSBob3RzcG90ICYmIGhvdHNwb3QuY2xpY2tBbnl3aGVyZTtcblxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGlmICghY2xpY2tBbnl3aGVyZUhvdHNwb3QpIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH0pO1xuXHRtb2RhbENvbnRhaW5lci5vbignY2xpY2suY2xvc2UnLCBmdW5jdGlvbiAoKSB7XG5cdFx0bW9kYWxDbG9zaW5nQWN0aW9ucygpO1xuXHR9KTtcblx0bW9kYWxDbG9zZXJzLmVhY2goZnVuY3Rpb24gKGlkeCwgY2xvc2VyKSB7XG5cdFx0JChjbG9zZXIpLm9uKCdjbGljay5jbG9zZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdG1vZGFsQ2xvc2luZ0FjdGlvbnMoKTtcblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gYW5zd2VyQ29ycmVjdCgpIHtcblx0dmFyIGN1cnJlbnRNb2RhbCA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLnBvc2l0aXZlO1xuXHR2YXIgbW9kYWxDb250YWluZXIgPSAkKCcuc2ktbW9kYWwtY29udGFpbmVyX19qcycpO1xuXHRtb2RhbENvbnRhaW5lci5hZGRDbGFzcygnc2ktbW9kYWwtY29udGFpbmVyLW9wZW4nKTtcblx0JCgnIycgKyBjdXJyZW50TW9kYWwpLmFkZENsYXNzKCdzaS1jdXJyZW50LW1vZGFsJyk7XG5cdGdsb2JhbFZhci5jdXJyZW50TW9kYWwgPSBjdXJyZW50TW9kYWw7XG5cdGdsb2JhbFZhci5jdXJyZW50TW9kYWxUeXBlID0gJ3Bvc2l0aXZlJztcblx0dmFyIHR5cGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS50eXBlO1xuXHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVt0eXBlXS50cnlzID0gMDtcblx0aWYgKHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5wb3NpdGl2ZSkge1xuXHRcdHNpQXVkaW8uc2Z4LnJpZ2h0Lm9uY2UoJ2VuZCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5wb3NpdGl2ZS5wbGF5KCk7XG5cdFx0fSk7XG5cdFx0c2lBdWRpby5zZngucmlnaHQucGxheSgpO1xuXHR9IGVsc2Uge1xuXHRcdHNpQXVkaW8uc2Z4LnJpZ2h0LnBsYXkoKTtcblx0fVxuXG5cdGlmICh0eXBlb2Ygc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25TdWNjZXNzQWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25TdWNjZXNzQWN0aW9uKCk7XG5cdH1cbn1cblxuLy8vLy8vLy8vLy8vKkZlYXR1cmU6TmVnYXRpdmUgRmVlZGJhY2sgRnVuY3Rpb25zLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vKipcbiAqXG4gKi9cbmZ1bmN0aW9uIGFuc3dlckluY29ycmVjdCgpIHtcblx0dmFyIHR5cGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS50eXBlO1xuXHR2YXIgdHJ5cyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnRyeXM7XG5cdHZhciBhdHRlbXB0cyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnVzZXJBdHRlbXB0cztcblx0dmFyIG1vZGFsQ29udGFpbmVyID0gJCgnLnNpLW1vZGFsLWNvbnRhaW5lcl9fanMnKTtcblx0aWYgKGF0dGVtcHRzID09PSAwKSB7XG5cdFx0dHJ5cyA9IDA7XG5cdH0gZWxzZSB7XG5cdFx0dHJ5cysrO1xuXHR9XG5cdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnRyeXMgPSB0cnlzO1xuXG5cdGlmICh0cnlzIDwgYXR0ZW1wdHMgfHwgYXR0ZW1wdHMgPT09IDApIHtcblx0XHR2YXIgY3VycmVudE1vZGFsO1xuXHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5tb2RhbFsnbmVnYXRpdmUnICsgdHJ5c10pIHtcblx0XHRcdGN1cnJlbnRNb2RhbCA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsWyduZWdhdGl2ZScgKyB0cnlzXTtcblx0XHRcdGdsb2JhbFZhci5jdXJyZW50TW9kYWwgPSBjdXJyZW50TW9kYWw7XG5cdFx0XHRnbG9iYWxWYXIuY3VycmVudE1vZGFsVHlwZSA9ICduZWdhdGl2ZScgKyB0cnlzO1xuXHRcdH0gZWxzZSBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWwubmVnYXRpdmUpIHtcblx0XHRcdGN1cnJlbnRNb2RhbCA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLm5lZ2F0aXZlO1xuXHRcdFx0Z2xvYmFsVmFyLmN1cnJlbnRNb2RhbCA9IGN1cnJlbnRNb2RhbDtcblx0XHRcdGdsb2JhbFZhci5jdXJyZW50TW9kYWxUeXBlID0gJ25lZ2F0aXZlJztcblx0XHR9XG5cblx0XHRtb2RhbENvbnRhaW5lci5hZGRDbGFzcygnc2ktbW9kYWwtY29udGFpbmVyLW9wZW4nKTtcblx0XHQkKCcjJyArIGN1cnJlbnRNb2RhbCkuYWRkQ2xhc3MoJ3NpLWN1cnJlbnQtbW9kYWwnKTtcblx0XHRpZiAoc2lBdWRpb1tnbG9iYWxWYXIuY3VyU2xpZGVdWyduZWdhdGl2ZScgKyB0cnlzXSkge1xuXHRcdFx0c2lBdWRpby5zZngud3Jvbmcub25jZSgnZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRzaUF1ZGlvW2dsb2JhbFZhci5jdXJTbGlkZV1bJ25lZ2F0aXZlJyArIHRyeXNdLnBsYXkoKTtcblx0XHRcdH0pO1xuXHRcdFx0c2lBdWRpby5zZngud3JvbmcucGxheSgpO1xuXHRcdH0gZWxzZSBpZiAoc2lBdWRpb1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5lZ2F0aXZlKSB7XG5cdFx0XHRzaUF1ZGlvLnNmeC53cm9uZy5vbmNlKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5uZWdhdGl2ZS5wbGF5KCk7XG5cdFx0XHR9KTtcblx0XHRcdHNpQXVkaW8uc2Z4Lndyb25nLnBsYXkoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2lBdWRpby5zZngud3JvbmcucGxheSgpO1xuXHRcdH1cblxuXHRcdGlmICh0eXBlb2Ygc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25GYWlsdXJlQWN0aW9uMSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25GYWlsdXJlQWN0aW9uMSgpO1xuXHRcdH1cblx0fSBlbHNlIGlmIChhdHRlbXB0cyAhPT0gMCAmJiB0cnlzID09PSBhdHRlbXB0cykge1xuXHRcdGN1cnJlbnRNb2RhbCA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm1vZGFsLm5lZ2F0aXZlRmluYWw7XG5cdFx0Z2xvYmFsVmFyLmN1cnJlbnRNb2RhbCA9IGN1cnJlbnRNb2RhbDtcblx0XHRnbG9iYWxWYXIuY3VycmVudE1vZGFsVHlwZSA9ICduZWdhdGl2ZUZpbmFsJztcblxuXHRcdG1vZGFsQ29udGFpbmVyLmFkZENsYXNzKCdzaS1tb2RhbC1jb250YWluZXItb3BlbicpO1xuXHRcdCQoJyMnICsgY3VycmVudE1vZGFsKS5hZGRDbGFzcygnc2ktY3VycmVudC1tb2RhbCcpO1xuXHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnRyeXMgPSAwO1xuXG5cdFx0aWYgKHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5uZWdhdGl2ZUZpbmFsKSB7XG5cdFx0XHRzaUF1ZGlvLnNmeC53cm9uZy5vbmNlKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5uZWdhdGl2ZUZpbmFsLnBsYXkoKTtcblx0XHRcdH0pO1xuXHRcdFx0c2lBdWRpby5zZngud3JvbmcucGxheSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzaUF1ZGlvLnNmeC53cm9uZy5wbGF5KCk7XG5cdFx0fVxuXG5cdFx0aWYgKHR5cGVvZiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5vbkZhaWx1cmVBY3Rpb24yID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5vbkZhaWx1cmVBY3Rpb24yKCk7XG5cdFx0fVxuXHR9XG59XG4vLy8vLy8vLy8vLy8qRmVhdHVyZTpQb3NpdGl2ZSBhbmQgTmVnYXRpdmUgRmVlZGJhY2sgSGFuZGxlciAmIGNsb3NlRmVlZGJhY2tBY3Rpb24vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8qKlxuICogQHBhcmFtIGJvbFxuICovXG5mdW5jdGlvbiBoYW5kbGVBbnN3ZXIoYm9sKSB7XG5cdEhvd2xlci5zdG9wKCk7XG5cdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5tb2RhbC5ub0ZlZWRiYWNrKSB7XG5cdFx0dmFyIGlzTmV4dEFjdGlvbiA9IHR5cGVvZiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5uZXh0QWN0aW9uID09PSAnZnVuY3Rpb24nO1xuXHRcdGlmIChib2wpIHtcblx0XHRcdGlmICh0eXBlb2Ygc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25TdWNjZXNzQWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm9uU3VjY2Vzc0FjdGlvbigpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAodHlwZW9mIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm9uRmFpbHVyZUFjdGlvbjEgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ub25GYWlsdXJlQWN0aW9uMSgpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoaXNOZXh0QWN0aW9uKSB7XG5cdFx0XHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5uZXh0QWN0aW9uKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHQvLyAkKCcjc2ktbmF2LWNvbnRhaW5lcicpLmFkZENsYXNzKCdmZWVkYmFjay1vcGVuJyk7XG5cdFx0aWYgKGJvbCA9PSB0cnVlKSB7XG5cdFx0XHRhbnN3ZXJDb3JyZWN0KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuc3dlckluY29ycmVjdCgpO1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIEBwYXJhbSBpdGVtXG4gKi9cbmZ1bmN0aW9uIGNsb3NlRmVlZGJhY2tBY3Rpb24oaXRlbSkge1xuXHR2YXIgYm9sID0gdHlwZW9mIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24gPT09ICdmdW5jdGlvbic7XG5cdHN3aXRjaCAoaXRlbSkge1xuXHRcdGNhc2UgJ3Bvc2l0aXZlJzpcblx0XHRcdGlmIChib2wpIHtcblx0XHRcdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubmV4dEFjdGlvbigpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bmV4dFNsaWRlKCk7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICduZWdhdGl2ZSc6XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdob3RzcG90Jzpcblx0XHRcdGhhbmRsZUhvdHNwb3RDbG9zZSgpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnbmVnYXRpdmVGaW5hbCc6XG5cdFx0XHRpZiAoYm9sKSB7XG5cdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24oKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdGJyZWFrO1xuXHR9XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gRkJLZXlib2FyZCgpIHtcblx0Ly8gdmFyIGtleSA9ICQoXCIjRkJLZXlcIilcblx0dmFyIEZCaXRlbXMgPSAkKCcuc2ktY3VycmVudC1tb2RhbCcpLmNoaWxkcmVuKCkuY2hpbGRyZW4oKTtcblx0dmFyIGlkeDtcblx0aWYgKCQoRkJpdGVtc1swXSkuaGFzQ2xhc3MoJ2llOWhhY2snKSkge1xuXHRcdGlkeCA9IDE7XG5cdH0gZWxzZSB7XG5cdFx0aWR4ID0gMDtcblx0fVxuXHQkKEZCaXRlbXNbaWR4XSkuZm9jdXMoKTtcblxuXHQkKCdib2R5Jykub24oJ2tleWRvd24uZHJhZycsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuXHRcdFx0Y2FzZSA5OiAvL2N5Y2xlcyB0aHJvdWdoIG9ubHkgRkIgZWxlbWVudHMgd2hpbGUgaXQgaXMgb3BlblxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRpZiAoaWR4IDwgRkJpdGVtcy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0aWR4ICs9IDE7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWR4ID0gMDtcblx0XHRcdFx0fVxuXHRcdFx0XHQkKEZCaXRlbXNbaWR4XSkuZm9jdXMoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDI3OiAvLyBhbGxvd3MgdXNlciB0byBwcmVzcyBlc2NhcGUga2V5IHRvIHJldHVybiB0byBub3JtYWwgYW5kIHBsYWNlcyBmb2N1cyBvbiBwcmV2aW91cyBlbGVtZW50XG5cdFx0XHRcdCQoJy5zaS1jdXJyZW50LW1vZGFsJykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0JChkb2N1bWVudC5hY3RpdmVFbGVtZW50KS5ibHVyKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAxMzogLy8gYWxsb3dzIHVzZXIgdG8gcHJlc3MgZW50ZXIga2V5IHRvIHJldHVybiB0byBub3JtYWwgYW5kIHJlbW92ZXMgYWxsIGZvY3VzIChzbyB0aGF0IHN1Ym1pdCBrZXkgaXMgbm90IGNsaWNrZWQgd2hlbiBGQiBjbG9zZXMpXG5cdFx0XHRcdCQoJy5zaS1jdXJyZW50LW1vZGFsJykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdFx0JChkb2N1bWVudC5hY3RpdmVFbGVtZW50KS5ibHVyKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9KTtcbn1cblxuLyoqXG4gKlxuICovXG5mdW5jdGlvbiBoYW5kbGVIb3RzcG90Q2xvc2UoKSB7XG5cdHZhciBzZXR0aW5ncyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmhvdHNwb3Q7XG5cdHZhciAkaG90c3BvdHMgPSAkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSkuZmluZCgnIC5ob3RzcG90LWJ1dHRvbl9fanMnKTtcblx0dmFyIGkgPSBnbG9iYWxWYXIuaG90c3BvdElkeDtcblx0dmFyIGhvdHNwb3QgPSAkaG90c3BvdHNbaV07XG5cdHZhciBtb2RhbCA9ICcjJyArIGdsb2JhbFZhci5jdXJyZW50TW9kYWw7XG5cdHZhciBtYWluT25Nb2RhbENsb3NlID0gc2V0dGluZ3Mub25Nb2RhbENsb3NlO1xuXHR2YXIgaW5kdk9uTW9kYWxDbG9zZSA9IHNldHRpbmdzLmluZHZbaSArIDFdICYmIHNldHRpbmdzLmluZHZbaSArIDFdLm9uTW9kYWxDbG9zZTtcblx0dmFyIG1vZGFsV2FybiA9IFwieW91IGhhdmVuJ3QgY3JlYXRlZCBhIG1vZGFsIGZvciB0aGlzIGhvdHNwb3RcIjtcblx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaG90c3BvdC5jbGlja0NoZWNrZXJbaSArIDFdLnNlZW4gPSB0cnVlO1xuXHRtYWluT25Nb2RhbENsb3NlICYmIG1haW5Pbk1vZGFsQ2xvc2UoaG90c3BvdCwgbW9kYWwgfHwgbW9kYWxXYXJuKTtcblx0aW5kdk9uTW9kYWxDbG9zZSAmJiBpbmR2T25Nb2RhbENsb3NlKGhvdHNwb3QsIG1vZGFsIHx8IG1vZGFsV2Fybik7XG5cblx0dmFyIHJlc3VsdCA9IHRydWU7XG5cblx0Zm9yICh2YXIgaXRlbSBpbiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5ob3RzcG90LmNsaWNrQ2hlY2tlcikge1xuXHRcdGlmIChcblx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmhvdHNwb3QuY2xpY2tDaGVja2VyW2l0ZW1dLnNlZW4gPT09IGZhbHNlICYmXG5cdFx0XHQhc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaG90c3BvdC5jbGlja0NoZWNrZXJbaXRlbV0uaGFzQ29ycmVjdENsYXNzXG5cdFx0KSB7XG5cdFx0XHRyZXN1bHQgPSBmYWxzZTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdGlmIChyZXN1bHQpIHtcblx0XHRpZiAoc2V0dGluZ3MuY3VzdG9tQ29tcGxldGVBY3Rpb24pIHtcblx0XHRcdHNldHRpbmdzLmN1c3RvbUNvbXBsZXRlQWN0aW9uKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24oKTtcblx0XHR9XG5cdH1cblx0LyoqXG5cdCAqIEBwYXJhbSBuZXh0SG90c3BvdFxuXHQgKiBAcGFyYW0gbmV4dEhvdHNwb3RTZXR0aW5nc1xuXHQgKi9cblx0ZnVuY3Rpb24gdW5sb2NrTmV4dEhvdHNwb3QobmV4dEhvdHNwb3QsIG5leHRIb3RzcG90U2V0dGluZ3MpIHtcblx0XHR2YXIgbWFpbk9uVW5sb2NrID0gc2V0dGluZ3Mub25VbmxvY2s7XG5cdFx0dmFyIGluZHZPblVubG9jayA9IG5leHRIb3RzcG90U2V0dGluZ3MgJiYgbmV4dEhvdHNwb3RTZXR0aW5ncy5vblVubG9jaztcblxuXHRcdCRob3RzcG90cy5yZW1vdmVDbGFzcyhzZXR0aW5ncy5hY3RpdmVDbGFzcyk7XG5cblx0XHR1bmxvY2soJChuZXh0SG90c3BvdCkpO1xuXHRcdCQobmV4dEhvdHNwb3QpLmFkZENsYXNzKHNldHRpbmdzLmFjdGl2ZUNsYXNzKTtcblxuXHRcdG1haW5PblVubG9jayAmJiBtYWluT25VbmxvY2sobmV4dEhvdHNwb3QpO1xuXHRcdGluZHZPblVubG9jayAmJiBpbmR2T25VbmxvY2sobmV4dEhvdHNwb3QpO1xuXHR9XG5cblx0aWYgKHNldHRpbmdzLmxpbmVhciA9PT0gdHJ1ZSkgdW5sb2NrTmV4dEhvdHNwb3QoJGhvdHNwb3RzW2kgKyAxXSwgc2V0dGluZ3MuaW5kdltpICsgMl0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSBjb250YWluZXJcbiAqL1xuZnVuY3Rpb24gbW9kYWxDbG9zaW5nQWN0aW9ucygpIHtcblx0SG93bGVyLnN0b3AoKTtcblx0aWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnR5cGUgPT09ICdob3RzcG90JyAmJiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5ob3RzcG90LmhvdmVyKSB7XG5cdFx0Y29uc29sZS5sb2coJ2hvdmVyLWhvdHNwb3QsIG5vIGNsaWNrIGF1ZGlvJyk7XG5cdH0gZWxzZSB7XG5cdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHR9XG5cblx0c3dpdGNoIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS50eXBlKSB7XG5cdFx0Y2FzZSAnZG5kJzpcblx0XHRcdHJlc2V0RG5EKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnJldmVydFRpbWUsIGdsb2JhbFZhci5kbmRBbnN3ZXJzKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3NvcnQnOlxuXHRcdFx0cmVzZXRTb3J0KCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdxdWl6Jzpcblx0XHRcdHJlc2V0UXVpeigpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Ly8gY2FzZSAnaG90c3BvdCc6XG5cdFx0Ly8gXHRyZXNldEhvdHNwb3QoKTtcblx0XHQvLyBcdGJyZWFrO1xuXHR9XG5cblx0Y2xvc2VGZWVkYmFja0FjdGlvbihnbG9iYWxWYXIuY3VycmVudE1vZGFsVHlwZSk7XG5cdCQoJ2JvZHknKS5vZmYoJ2tleWRvd24uZHJhZycpO1xuXG5cdCQoJy5zaS1tb2RhbC1jb250YWluZXJfX2pzJykucmVtb3ZlQ2xhc3MoJ3NpLW1vZGFsLWNvbnRhaW5lci1vcGVuIHNpLWhvdmVyLWhvdHNwb3QnKTtcblx0Ly8gY29uc29sZS5sb2coJCgnIycgKyBnbG9iYWxWYXIuY3VycmVudE1vZGFsKSk7XG5cdCQoJyMnICsgZ2xvYmFsVmFyLmN1cnJlbnRNb2RhbCkucmVtb3ZlQ2xhc3MoJ3NpLWN1cnJlbnQtbW9kYWwnKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gaWRcbiAqL1xuZnVuY3Rpb24gc2ltcGxlTW9kYWxPcGVuKGlkKSB7XG5cdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5tb2RhbFtpZF0pIHtcblx0XHR2YXIgY3VycmVudE1vZGFsID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWxbaWRdO1xuXHRcdGlmIChzaUF1ZGlvW2dsb2JhbFZhci5jdXJTbGlkZV1baWRdKSB7XG5cdFx0XHRzaUF1ZGlvW2dsb2JhbFZhci5jdXJTbGlkZV1baWRdLnBsYXkoKTtcblx0XHR9XG5cdFx0JCgnLnNpLW1vZGFsLWNvbnRhaW5lcl9fanMnKS5hZGRDbGFzcygnc2ktbW9kYWwtY29udGFpbmVyLW9wZW4nKTtcblx0XHQkKCcjJyArIGN1cnJlbnRNb2RhbCkuYWRkQ2xhc3MoJ3NpLWN1cnJlbnQtbW9kYWwnKTtcblx0XHRnbG9iYWxWYXIuY3VycmVudE1vZGFsID0gY3VycmVudE1vZGFsO1xuXHR9XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gc2ltcGxlTW9kYWxDbG9zZSgpIHtcblx0SG93bGVyLnN0b3AoKTtcblx0JCgnLnNpLW1vZGFsLWNvbnRhaW5lcl9fanMnKS5yZW1vdmVDbGFzcygnc2ktbW9kYWwtY29udGFpbmVyLW9wZW4nKTtcblx0JCgnIycgKyBnbG9iYWxWYXIuY3VycmVudE1vZGFsKS5yZW1vdmVDbGFzcygnc2ktY3VycmVudC1tb2RhbCcpO1xufVxuIiwiLy8vLy8vLy8vLy8vKkZlYXR1cmU6RHJhZyBhbmQgRHJvcC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xudmFyIGRuZFJlc2V0T2JqZWN0ID0ge31cbmZ1bmN0aW9uIHJlc2V0RG5EKHJldmVydFRpbWUsIGRuZEFuc3dlcnMpIHtcbiAgICBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJy5kcmFnZ2FibGUnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHQkKHRoaXMpLmRyYWdnYWJsZSgnb3B0aW9uJywgJ2Rpc2FibGVkJywgZmFsc2UpO1xuXHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2Ryb3BwZWQnKTtcbiAgICAgICAgdmFyIE9HUG9zID0gJCh0aGlzKS5kYXRhKCdPR1BvcycpO1xuICAgICAgICAkKHRoaXMpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIHRvcDogT0dQb3MudG9wLFxuICAgICAgICAgICAgICAgIGxlZnQ6IE9HUG9zLmxlZnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXZlcnRUaW1lXG4gICAgICAgICk7XG4gICAgICAgICQodGhpcykuZGF0YSgnZHJvcElkJywgJycpO1xuICAgICAgICAkKHRoaXMpLmRhdGEoJ2N1clBvcycsIHtcbiAgICAgICAgICAgIHRvcDogT0dQb3MudG9wLFxuICAgICAgICAgICAgbGVmdDogT0dQb3MubGVmdFxuICAgICAgICB9KTtcbiAgICAgICAgJCh0aGlzKS5kYXRhKCdwcmV2UG9zJywge1xuICAgICAgICAgICAgdG9wOiBPR1Bvcy50b3AsXG4gICAgICAgICAgICBsZWZ0OiBPR1Bvcy5sZWZ0XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGdsb2JhbFZhci4kY3VyU2xpZGUuZmluZCgnLmRyb3BwYWJsZScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLmRhdGEoJ2RyYWdFbGVtZW50cycsIFtdKTtcbiAgICAgICAgJCh0aGlzKS5kYXRhKCdkcm9wQ291bnRlcicsIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXVsnZHJvcENvdW50ZXInXVt0aGlzLmlkXSk7XG4gICAgfSk7XG4gICAgLy9yZXNldCBkbmRBbnN3ZXJzZWN0XG4gICAgZm9yIChrZXkgaW4gZG5kQW5zd2Vycykge1xuICAgICAgICBkbmRBbnN3ZXJzW2tleV0gPSBbXTtcbiAgICB9XG5cbiAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uZG5kLnR5cGUgPT0gJ2RuZF8yJykge1xuICAgICAgICBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJy5kcmFnZ2FibGUnKS5mYWRlSW4oKTtcbiAgICAgICAgZ2xvYmFsVmFyLiRjdXJTbGlkZS5maW5kKCcuZHJhZ2dhYmxlJykucmVtb3ZlQ2xhc3MoJ3NocmluaycpO1xuICAgIH1cblxuICAgIGdsb2JhbFZhci5kbmRBbnN3ZXJzID0gZG5kQW5zd2VycztcbiAgICByZXR1cm4gZG5kQW5zd2Vycztcbn1cblxuZnVuY3Rpb24gZG5kRnVuY3Rpb25zKCkge1xuICAgIHZhciBjdXJEcmFnO1xuICAgIHZhciBjdXJEcm9wO1xuICAgIHZhciAkZHJhZ0VsZW1lbnRzID0gZ2xvYmFsVmFyLiRjdXJTbGlkZS5maW5kKCcuZHJhZ2dhYmxlJyk7XG4gICAgdmFyICRkcm9wRWxlbWVudHMgPSBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJy5kcm9wcGFibGUnKTtcbiAgICB2YXIgcmV2ZXJ0VGltZTtcbiAgICB2YXIgc25hcHBpbmc7XG4gICAgdmFyIGRuZEFuc3dlcnMgPSBnZW5lcmF0ZUFuc3dlclRlbXBsYXRlKCk7XG5cbiAgICAvLyBhc3NpZ24gY3VzdG9tIG9yIGRlZmF1bHQgdmFsdWVzIHRvIHJldmVydCBhbmQgc25hcHBpbmdcbiAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydyZXZlcnRUaW1lJ10pIHtcbiAgICAgICAgcmV2ZXJ0VGltZSA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXVsncmV2ZXJ0VGltZSddO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldmVydFRpbWUgPSA1MDA7XG4gICAgfVxuICAgIGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ3NuYXBwaW5nJ10pIHtcbiAgICAgICAgc25hcHBpbmcgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ3NuYXBwaW5nJ107XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc25hcHBpbmcgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vIEZpcnN0IGVudHJhbmNlIHNldHVwLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgaWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnZpc2l0ZWQgPT0gZmFsc2UpIHtcbiAgICAgICAgLy8gZHJhZ2dhYmxlIHNldHVwOiBzZXQgcG9zaXRpb24gZGF0YSwgYXR0YWNoZXMgZG5kIGV2ZW50IGZ1bmN0aW9ucywgYWRkIGtleWJvYXJkIGFjY2Vzc1xuICAgICAgICAkZHJhZ0VsZW1lbnRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50cyA9IGRuZEFjdGlvbnModGhpcy5pZCk7XG4gICAgICAgICAgICB2YXIgbGVmdEluaXQgPVxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgKHBhcnNlSW50KCQodGhpcykuY3NzKCdsZWZ0JykpIC9cbiAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLndpZHRoKCkpICpcbiAgICAgICAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICAgICAgKS50b1N0cmluZygpICsgJyUnO1xuICAgICAgICAgICAgdmFyIHRvcEluaXQgPVxuICAgICAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAgICAgKHBhcnNlSW50KCQodGhpcykuY3NzKCd0b3AnKSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBhcmVudCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGVpZ2h0KCkpICpcbiAgICAgICAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICAgICAgKS50b1N0cmluZygpICsgJyUnO1xuICAgICAgICAgICAgJCh0aGlzKS5kYXRhKHtcbiAgICAgICAgICAgICAgICBPR1Bvczoge1xuICAgICAgICAgICAgICAgICAgICB0b3A6IHRvcEluaXQsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnRJbml0XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjdXJQb3M6IHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0b3BJbml0LFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBsZWZ0SW5pdFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJldlBvczoge1xuICAgICAgICAgICAgICAgICAgICB0b3A6IHRvcEluaXQsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnRJbml0XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkcm9wSUQ6ICcnLFxuICAgICAgICAgICAgICAgIGV2ZW50czogZXZlbnRzLFxuICAgICAgICAgICAgICAgIHJldmVydFRpbWU6IHJldmVydFRpbWUsXG4gICAgICAgICAgICAgICAgc25hcHBpbmc6IHNuYXBwaW5nXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gbWFrZXMgZG5kIGtleWJvYXJkIGFjY2Vzc2libGVcbiAgICAgICAgICAgICQodGhpcykuYXR0cigndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICAgICAga2V5Qm9hcmRBY2Nlc3ModGhpcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGRyb3BwYWJsZSBzZXR1cDogZHJhZyBhcnJheSwgZHJvcCBjb3VudGVyLCBrZXlib2FyZCBhY2Nlc3NcbiAgICAgICAgJGRyb3BFbGVtZW50cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZGF0YSh7XG4gICAgICAgICAgICAgICAgZHJhZ0VsZW1lbnRzOiBbXSxcbiAgICAgICAgICAgICAgICBkcm9wQ291bnRlcjogc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydkcm9wQ291bnRlciddW3RoaXMuaWRdXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gbmVjZXNzYXJ5IHRvIG1ha2UgZG5kIGtleWJvYXJkIGFjY2Vzc2libGVcbiAgICAgICAgICAgICQodGhpcykuYXR0cigndGFiaW5kZXgnLCAnLTEnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG5kUmVzZXRPYmplY3RbZ2xvYmFsVmFyLmN1clNsaWRlXSA9IHtcbiAgICAgICAgICAgIHRpbWU6IHJldmVydFRpbWUsXG4gICAgICAgICAgICBhbnN3ZXJzOiBkbmRBbnN3ZXJzXG4gICAgICAgIH1cbiAgICAgICAgLy8gU3Vic2VxdWVudCBWaXNpdHMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIH0gZWxzZSB7XG4gICAgICAgICRkcmFnRWxlbWVudHMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmRyYWdnYWJsZSgnZGlzYWJsZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgJGRyb3BFbGVtZW50cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZHJvcHBhYmxlKCdkaXNhYmxlJyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXNldERuRChyZXZlcnRUaW1lLCBkbmRBbnN3ZXJzKTtcbiAgICB9XG4gICAgLy8gZW5kIHNldHVwXG5cbiAgICAvLyBkcmFnZ2FibGUgb3B0aW9uczogYWRkIGFueSBhZGRpdGlvbmFsIG5lZWRlZCBrZXlzIGZyb20galF1ZXJ5IGRyYWdnYWJsZSBBUEkgaGVyZVxuICAgICRkcmFnRWxlbWVudHMuZHJhZ2dhYmxlKHtcbiAgICAgICAgc3RhcnQ6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGN1ckRyYWcgPSB1aS5oZWxwZXJbMF07XG4gICAgICAgICAgICAkKGN1ckRyYWcpXG4gICAgICAgICAgICAgICAgLmRhdGEoJ2V2ZW50cycpWydvbkRyYWdTdGFydCddKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGRyYWc6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGRyYWdnaW5nKGN1ckRyYWcpO1xuICAgICAgICB9LFxuICAgICAgICByZXZlcnQ6ICdpbnZhbGlkJyxcbiAgICAgICAgc3RhY2s6ICcuZHJhZ2dhYmxlJyxcbiAgICAgICAgcmV2ZXJ0RHVyYXRpb246IHJldmVydFRpbWUsXG4gICAgICAgIHN0b3A6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGRyYWdTdG9wKGN1ckRyYWcpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBkcm9wcGFibGUgb3B0aW9uczogYWRkIGFueSBhZGRpdGlvbmFsIG5lZWRlZCBrZXlzIGZyb20galF1ZXJ5IGRyb3BwYWJsZSBBUEkgaGVyZVxuICAgICRkcm9wRWxlbWVudHMuZHJvcHBhYmxlKHtcbiAgICAgICAgYWNjZXB0OiAnLmRyYWdnYWJsZScsXG4gICAgICAgIG92ZXI6IGZ1bmN0aW9uIChldmVudCwgdWkpIHtcbiAgICAgICAgICAgIGN1ckRyb3AgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoJChjdXJEcmFnKS5kYXRhKCdldmVudHMnKVsnb25EcmFnT3ZlciddW2N1ckRyb3AuaWRdKSB7XG4gICAgICAgICAgICAgICAgJChjdXJEcmFnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YSgnZXZlbnRzJylbJ29uRHJhZ092ZXInXVtjdXJEcm9wLmlkXSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkcm9wOiBmdW5jdGlvbiAoZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICBkcm9wcGVkKGN1ckRyb3AsIGN1ckRyYWcpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBhY3RpdmF0ZSBib3RoXG4gICAgJGRyYWdFbGVtZW50cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5kcmFnZ2FibGUoJ2VuYWJsZScpO1xuICAgIH0pO1xuXG4gICAgJGRyb3BFbGVtZW50cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5kcm9wcGFibGUoJ2VuYWJsZScpO1xuICAgIH0pO1xufSAvL2VuZCBkbmRGdW5jdGlvbnNcblxuLy8gRG5kIEV2ZW50IEZ1bmN0aW9ucy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLy8gcnVucyB3aGlsZSBkcmFnZ2luZyBlbGVtZW50O1xuZnVuY3Rpb24gZHJhZ2dpbmcoZHJhZ1RhcmdldCkge1xuICAgICQoZHJhZ1RhcmdldClcbiAgICAgICAgLmRhdGEoJ2V2ZW50cycpWydvbkRyYWcnXSgpO1xufVxuXG4vLyBydW5zIHdoZW4gZHJhZyBlbGVtZW50IGlzIHJlbGVhc2VkIG91dHNpZGUgb2YgdmFsaWQgZHJvcCBhcmVhO1xuZnVuY3Rpb24gZHJhZ1N0b3AoZHJhZ1RhcmdldCkge1xuICAgICQoZHJhZ1RhcmdldClcbiAgICAgICAgLmRhdGEoJ2V2ZW50cycpWydvbkRyYWdFbmQnXSgpO1xufVxuXG4vL0ltcG9ydGFudCBGdW5jdGlvbiEgUnVucyBvbiBkcm9wIGludG8gdmFsaWQgZHJvcCBhcmVhLy8vXG5mdW5jdGlvbiBkcm9wcGVkKGRyb3BUYXJnZXQsIGRyYWdUYXJnZXQpIHtcbiAgICB2YXIgcG9zID0ge1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IDBcbiAgICB9O1xuICAgIHZhciBzbmFwcGluZyA9ICQoZHJhZ1RhcmdldCkuZGF0YSgnc25hcHBpbmcnKTtcbiAgICB2YXIgc3BhY2VBdmFpbGFibGUgPSAkKGRyb3BUYXJnZXQpLmRhdGEoJ2RyYWdFbGVtZW50cycpLmxlbmd0aCA8ICQoZHJvcFRhcmdldCkuZGF0YSgnZHJvcENvdW50ZXInKTtcblxuICAgIC8vZ2V0IHBvc2l0aW9uaW5nXG4gICAgaWYgKHNuYXBwaW5nKSB7XG4gICAgICAgIHBvcy50b3AgPVxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgIChwYXJzZUludCgkKGRyb3BUYXJnZXQpLmNzcygndG9wJykpIC9cbiAgICAgICAgICAgICAgICAgICAgJChkcm9wVGFyZ2V0KVxuICAgICAgICAgICAgICAgICAgICAucGFyZW50KClcbiAgICAgICAgICAgICAgICAgICAgLmhlaWdodCgpKSAqXG4gICAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICApLnRvU3RyaW5nKCkgKyAnJSc7XG4gICAgICAgIHBvcy5sZWZ0ID1cbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICAocGFyc2VJbnQoJChkcm9wVGFyZ2V0KS5jc3MoJ2xlZnQnKSkgL1xuICAgICAgICAgICAgICAgICAgICAkKGRyb3BUYXJnZXQpXG4gICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxuICAgICAgICAgICAgICAgICAgICAud2lkdGgoKSkgKlxuICAgICAgICAgICAgICAgIDEwMFxuICAgICAgICAgICAgKS50b1N0cmluZygpICsgJyUnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBvcy50b3AgPSAoKHBhcnNlSW50KCQoZHJhZ1RhcmdldCkuY3NzKCd0b3AnKSkgLyAkKCcucmV2ZWFsJykuaGVpZ2h0KCkpICogMTAwKS50b1N0cmluZygpICsgJyUnO1xuICAgICAgICBwb3MubGVmdCA9ICgocGFyc2VJbnQoJChkcmFnVGFyZ2V0KS5jc3MoJ2xlZnQnKSkgLyAkKCcucmV2ZWFsJykud2lkdGgoKSkgKiAxMDApLnRvU3RyaW5nKCkgKyAnJSc7XG4gICAgfVxuXG4gICAgLy8gcnVuIGN1c3RvbSBkcm9wIGZ1bmN0aW9uXG4gICAgaWYgKCQoZHJhZ1RhcmdldCkuZGF0YSgnZXZlbnRzJylbJ29uRHJvcCddW2Ryb3BUYXJnZXQuaWRdKSB7XG4gICAgICAgICQoZHJhZ1RhcmdldClcbiAgICAgICAgICAgIC5kYXRhKCdldmVudHMnKVsnb25Ecm9wJ11bZHJvcFRhcmdldC5pZF0oKTtcbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgZHJvcCBmb3IgZWFjaCB0eXBlXG4gICAgaWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXS50eXBlID09ICdkbmRfMicpIHtcbiAgICAgICAgaWYgKHNwYWNlQXZhaWxhYmxlKSB7XG4gICAgICAgICAgICBkbmQyRHJvcChkcmFnVGFyZ2V0LCBkcm9wVGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldmVydChkcmFnVGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddLnR5cGUgPT0gJ2RuZF8xJykge1xuICAgICAgICBpZiAoc3BhY2VBdmFpbGFibGUpIHtcbiAgICAgICAgICAgIGRuZDFEcm9wKGRyYWdUYXJnZXQsIGRyb3BUYXJnZXQsIHBvcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2FwKGRyYWdUYXJnZXQsIGRyb3BUYXJnZXQsIHBvcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGtleSBpbiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ3F1aXonXSkge1xuICAgICAgICBnbG9iYWxWYXIuZG5kQW5zd2Vyc1trZXldID0gJCgnIycgKyBrZXkpLmRhdGEoJ2RyYWdFbGVtZW50cycpO1xuICAgIH1cbn0gLy9lbmQgZHJvcHBlZFxuXG4vLy8vLy8vLyBEcm9wcyBhbmQgU3dhcCAvLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGRuZDJEcm9wKGRyYWcsIGRyb3ApIHtcbiAgICAkKGRyb3ApXG4gICAgICAgIC5kYXRhKCdkcmFnRWxlbWVudHMnKVxuICAgICAgICAucHVzaChkcmFnLmlkKTtcbiAgICAkKGRyYWcpLmFkZENsYXNzKCdzaHJpbmsnKTtcbiAgICAkKGRyYWcpLmRhdGEoJ2Ryb3BwZWQnLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gZG5kMURyb3AoZHJhZywgZHJvcCwgcG9zKSB7XG4gICAgdmFyIGRyb3BJZCA9ICQoZHJhZykuZGF0YSgnZHJvcElkJyk7XG4gICAgaWYgKGRyb3BJZCkge1xuICAgICAgICB2YXIgbmV3QXJyID0gJCgnIycgKyBkcm9wSWQpXG4gICAgICAgICAgICAuZGF0YSgnZHJhZ0VsZW1lbnRzJylcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGRyYWdJZCkge1xuICAgICAgICAgICAgICAgIGRyYWdJZCAhPT0gZHJhZy5pZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAkKCcjJyArIGRyb3BJZCkuZGF0YSgnZHJhZ0VsZW1lbnRzJywgbmV3QXJyKTtcbiAgICB9XG4gICAgdXBkYXRlUG9zKGRyYWcsIHBvcyk7XG4gICAgJChkcmFnKS5kYXRhKCdkcm9wSWQnLCBkcm9wLmlkKTtcbiAgICAkKGRyb3ApXG4gICAgICAgIC5kYXRhKCdkcmFnRWxlbWVudHMnKVxuICAgICAgICAucHVzaChkcmFnLmlkKTtcbiAgICBtb3ZlKGRyYWcpO1xufVxuXG5mdW5jdGlvbiBzd2FwKGRyYWcsIGRyb3AsIHBvcykge1xuICAgIHZhciBkcm9wSWQgPSAkKGRyYWcpLmRhdGEoJ2Ryb3BJZCcpO1xuICAgIHZhciBzd2FwRHJhZ0lkID0gJChkcm9wKVxuICAgICAgICAuZGF0YSgnZHJhZ0VsZW1lbnRzJylcbiAgICAgICAgLnBvcCgpO1xuICAgIHZhciBzd2FwRHJhZyA9ICQoJyMnICsgc3dhcERyYWdJZCk7XG4gICAgdmFyIHN3YXBEcmFnUG9zO1xuICAgIHZhciBzd2FwQXJyID0gW107XG5cbiAgICBpZiAoZHJvcElkKSB7XG4gICAgICAgIHZhciBuZXdBcnIgPSAkKCcjJyArIGRyb3BJZClcbiAgICAgICAgICAgIC5kYXRhKCdkcmFnRWxlbWVudHMnKVxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZHJhZ0lkKSB7XG4gICAgICAgICAgICAgICAgZHJhZ0lkICE9PSBkcmFnLmlkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIG5ld0Fyci5wdXNoKHN3YXBEcmFnSWQpO1xuICAgICAgICAkKCcjJyArIGRyb3BJZCkuZGF0YSgnZHJhZ0VsZW1lbnRzJywgbmV3QXJyKTtcbiAgICAgICAgc3dhcERyYWdQb3MgPSAkKGRyYWcpLmRhdGEoJ2N1clBvcycpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN3YXBEcmFnUG9zID0gJChzd2FwRHJhZykuZGF0YSgnT0dQb3MnKTtcbiAgICAgICAgc3dhcERyYWcucmVtb3ZlRGF0YSgnZHJvcElkJylcbiAgICB9XG4gICAgc3dhcEFyciA9ICQoJyMnICsgZHJvcC5pZClcbiAgICAgICAgLmRhdGEoJ2RyYWdFbGVtZW50cycpXG4gICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGRyYWdJZCkge1xuICAgICAgICAgICAgZHJhZ0lkICE9PSBzd2FwRHJhZ0lkO1xuICAgICAgICB9KTtcbiAgICBzd2FwQXJyLnB1c2goZHJhZy5pZCk7XG4gICAgJCgnIycgKyBkcm9wLmlkKS5kYXRhKCdkcmFnRWxlbWVudHMnLCBzd2FwQXJyKTtcblxuICAgICQoZHJhZykuZGF0YSgnZHJvcElkJywgZHJvcC5pZCk7XG4gICAgJChzd2FwRHJhZykuZGF0YSgnZHJvcElkJywgZHJvcElkKTtcblxuICAgIHVwZGF0ZVBvcyhzd2FwRHJhZywgc3dhcERyYWdQb3MpO1xuICAgIHVwZGF0ZVBvcyhkcmFnLCBwb3MpO1xuXG4gICAgbW92ZShkcmFnKTtcbiAgICBtb3ZlKHN3YXBEcmFnKTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLyBEbkQgSGVscGVyIEZ1bmN0aW9ucy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gcmV2ZXJ0KGRyYWdJdGVtKSB7XG4gICAgdmFyIHJldmVydFRpbWUgPSAkKGRyYWdJdGVtKS5kYXRhKCdyZXZlcnRUaW1lJyk7XG4gICAgJChkcmFnSXRlbSkuYW5pbWF0ZSh7XG4gICAgICAgICAgICB0b3A6ICQoZHJhZ0l0ZW0pLmRhdGEoJ3ByZXZQb3MnKVsndG9wJ10sXG4gICAgICAgICAgICBsZWZ0OiAkKGRyYWdJdGVtKS5kYXRhKCdwcmV2UG9zJylbJ2xlZnQnXVxuICAgICAgICB9LFxuICAgICAgICByZXZlcnRUaW1lXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gbW92ZShkcmFnSXRlbSkge1xuICAgIHZhciByZXZlcnRUaW1lID0gMzAwO1xuICAgICQoZHJhZ0l0ZW0pLmFuaW1hdGUoe1xuICAgICAgICAgICAgdG9wOiAkKGRyYWdJdGVtKS5kYXRhKCdjdXJQb3MnKVsndG9wJ10sXG4gICAgICAgICAgICBsZWZ0OiAkKGRyYWdJdGVtKS5kYXRhKCdjdXJQb3MnKVsnbGVmdCddXG4gICAgICAgIH0sXG4gICAgICAgIHJldmVydFRpbWVcbiAgICApO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVQb3MoZHJhZ0l0ZW0sIG5ld1Bvcykge1xuICAgICQoZHJhZ0l0ZW0pLmRhdGEoJ3ByZXZQb3MnLCAkKGRyYWdJdGVtKS5kYXRhKCdjdXJQb3MnKSk7XG4gICAgJChkcmFnSXRlbSkuZGF0YSgnY3VyUG9zJywgbmV3UG9zKTtcbn1cblxuLy8gR3JhYnMgY3VzdG9tIGV2ZW50IGFjdGlvbnMgb3IgYXNzaWducyBkZWZhdWx0IHZhbHVlcyB0byBhbGwgYWN0aW9uIGtleXMuIE1ha2VzIGFjdGlvbiBrZXkgZW50aXJlbHkgb3B0aW9uYWxcbmZ1bmN0aW9uIGRuZEFjdGlvbnMoZHJhZ0l0ZW1JRCkge1xuICAgIHZhciBhY3Rpb25zID0ge1xuICAgICAgICBvbkRyYWdTdGFydDogZnVuY3Rpb24gKCkge30sXG4gICAgICAgIG9uRHJhZzogZnVuY3Rpb24gKCkge30sXG4gICAgICAgIG9uRHJhZ092ZXI6IHt9LFxuICAgICAgICBvbkRyYWdFbmQ6IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgICBvbkRyb3A6IHt9XG4gICAgfTtcbiAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydhY3Rpb25zJ10pIHtcbiAgICAgICAgaWYgKCFzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ2FjdGlvbnMnXVtkcmFnSXRlbUlEXSkge1xuICAgICAgICAgICAgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydhY3Rpb25zJ11bZHJhZ0l0ZW1JRF0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gYWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXVsnYWN0aW9ucyddW2RyYWdJdGVtSURdW2tleV0pIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zW2tleV0gPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnZG5kJ11bJ2FjdGlvbnMnXVtkcmFnSXRlbUlEXVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydhY3Rpb25zJ10gPSB7fTtcbiAgICB9XG4gICAgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydhY3Rpb25zJ11bZHJhZ0l0ZW1JRF0gPSBhY3Rpb25zO1xuICAgIHJldHVybiBhY3Rpb25zO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUFuc3dlclRlbXBsYXRlKCkge1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgc3RyID0gJyc7XG4gICAgdmFyIGRuZEFuc3dlcnM7XG4gICAgLy93cml0ZSBhIGJsYW5rIG9iamVjdC9hbnN3ZXJzIGludG8gdGhlIGdsb2JhbFZhclxuICAgIGdsb2JhbFZhci5kbmRBbnN3ZXJzID0ge307XG4gICAgZm9yIChrZXkgaW4gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydxdWl6J10pIHtcbiAgICAgICAgaSsrO1xuXG4gICAgICAgIHZhciBzdHJhID0gJ1wiJyArIGtleSArICdcIjonICsgJ1tdJztcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXVsncXVpeiddKS5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgaWYgKGkgIT0gT2JqZWN0LmtleXMoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ2RuZCddWydxdWl6J10pLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHN0cmEgPSBzdHJhICsgJywnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0ciA9IHN0ciArIHN0cmE7XG4gICAgfVxuICAgIHN0ciA9ICd7JyArIHN0ciArICd9JztcbiAgICBkbmRBbnN3ZXJzID0gSlNPTi5wYXJzZShzdHIpO1xuICAgIGdsb2JhbFZhci5kbmRBbnN3ZXJzID0gZG5kQW5zd2VycztcbiAgICByZXR1cm4gZG5kQW5zd2Vycztcbn1cblxuZnVuY3Rpb24ga2V5Qm9hcmRBY2Nlc3MoZHJhZ0VsZW1lbnQpIHtcbiAgICB2YXIgYWNjZXNzaWJpbGl0eSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgZHJvcHMgPSBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJy5kcm9wcGFibGUnKTtcbiAgICAgICAgdmFyIGRyb3BJZHggPSAwO1xuICAgICAgICB2YXIgJGRyYWcgPSAkKHRoaXMpO1xuICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDMyKSB7XG4gICAgICAgICAgICAvL3NwYWNlYmFyIHNlbGVjdHMgZHJhZyBlbGVtZW50XG5cbiAgICAgICAgICAgICQoZHJvcHNbZHJvcElkeF0pLmZvY3VzKCk7IC8vZm9jdXNlcyBvbiBmaXJzdCBkcm9wIGFyZWFcbiAgICAgICAgICAgICRkcmFnLm9mZigna2V5ZG93bi5hY2Nlc3MnKTsgLy9yZW1vdmVzIHNwYWNlYmFyIHNlbGVjdG9yXG4gICAgICAgICAgICBkcmFnZ2luZygkZHJhZ1swXSk7IC8vdGFrZXMgY2FyZSBvZiBkcmFnIGV2ZW50c1xuXG4gICAgICAgICAgICAkKCdib2R5Jykub24oJ2tleWRvd24uZHJhZycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6IC8vcmVtb3ZlcyBhYmlsaXR5IHRvIHRhYiB3aGlsZSBkcmFnIGVsZW1lbnQgaXMgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzogLy8gYWxsb3dzIHVzZXIgdG8gcHJlc3MgZXNjYXBlIGtleSB0byByZXR1cm4gdG8gbm9ybWFsIGFuZCBwbGFjZXMgZm9jdXMgb24gZHJhZyBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAkZHJhZy5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAkZHJhZy5kYXRhKCdvcmlnaW5hbFRvcCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAkZHJhZy5kYXRhKCdvcmlnaW5hbExlZnQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0VGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRkcmFnLmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRkcmFnLm9uKCdrZXlkb3duLmFjY2VzcycsIGFjY2Vzc2liaWxpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLm9mZigna2V5ZG93bi5kcmFnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzODogLy91cCBhcnJvdyBjeWNsZXMgdGhyb3VnaCBkcm9wIHRhcmdldHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkcm9wSWR4IDwgZHJvcHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BJZHggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcElkeCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRyb3BzW2Ryb3BJZHhdKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6IC8vZG93biBhcnJvdyBjeWNsZXMgdGhyb3VnaCBkcm9wIHRhcmdldHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkcm9wSWR4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3BJZHggLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcElkeCA9IGRyb3BzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRyb3BzW2Ryb3BJZHhdKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6IC8vZW50ZXIga2V5IGRyb3BzIHNlbGVjdGVkIGRyYWcgZWxlbWVudCBpbnRvIGN1cnJlbnRseSBmb2N1c2VkIGRyb3AgYXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcHBlZChkcm9wc1tkcm9wSWR4XSwgJGRyYWdbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydkbmQnXVsndHlwZSddID09PSAnZG5kXzInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRyYWcuYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZHJhZy5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJGRyYWcub24oJ2tleWRvd24uYWNjZXNzJywgYWNjZXNzaWJpbGl0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5Jykub2ZmKCdrZXlkb3duLmRyYWcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgICQoZHJhZ0VsZW1lbnQpLm9uKCdrZXlkb3duLmFjY2VzcycsIGFjY2Vzc2liaWxpdHkpO1xufVxuIiwiLyoqXG4gKlxuICovXG5mdW5jdGlvbiBob3RzcG90RnVuY3Rpb25zKCkge1xuXHQvLyB2YXJpYWJsZXNcblx0dmFyICRzbGlkZURPTSA9ICQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlKTtcblx0dmFyICRob3RzcG90cyA9ICRzbGlkZURPTS5maW5kKCcgLmhvdHNwb3QtYnV0dG9uX19qcycpO1xuXHR2YXIgJG1vZGFsQmxvY2tlciA9ICQoJy5zaS1tb2RhbC1jb250YWluZXJfX2pzJyk7XG5cdHZhciBtb2RhbHMgPSBbXTtcblx0JGhvdHNwb3RzLmVhY2goZnVuY3Rpb24gKGlkeCwgaG90c3BvdCkge1xuXHRcdGNvbnNvbGUubG9nKCdicm9rZScpO1xuXHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5tb2RhbFsnaHMnICsgKGlkeCArIDEpXSkge1xuXHRcdFx0bW9kYWxzLnB1c2goc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubW9kYWxbJ2hzJyArIChpZHggKyAxKV0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcblx0XHRcdFx0J1RoZXJlIGlzIG5vdCBhIGNvcnJlc3BvbmRpbmcgbW9kYWwgZm9yIGhvdHNwb3QgJyArXG5cdFx0XHRcdFx0KGlkeCArIDEpICtcblx0XHRcdFx0XHQnLiBQbGVhc2UgZGlzcmVnYXJkIGlmIHlvdSBhcmUgbm90IHVzaW5nIG1vZGFscyBmb3IgdGhpcyBzbGlkZS4nXG5cdFx0XHQpO1xuXHRcdH1cblx0fSk7XG5cdGNvbnNvbGUubG9nKG1vZGFscyk7XG5cdHZhciBjbGlja0NoZWNrZXIgPSB7fTtcblxuXHR2YXIgc2xpZGVPYmogPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXTtcblx0dmFyIHNldHRpbmdzID0gc2xpZGVPYmouaG90c3BvdCB8fCB7fTtcblxuXHR2YXIgc2VsZWN0ZWRDbGFzcztcblx0dmFyIGNvcnJlY3RDbGFzcyA9IHNldHRpbmdzLmNvcnJlY3RDbGFzcyB8fCAnY29ycmVjdCc7XG5cdHZhciB1bmxvY2tlZENsYXNzID0gc2V0dGluZ3MudW5sb2NrZWRDbGFzcyB8fCAndW5sb2NrZWQnO1xuXHR2YXIgY29tcGxldGVkQ2xhc3MgPSBzZXR0aW5ncy5jb21wbGV0ZWRDbGFzcyB8fCAnY29tcGxldGVkJztcblx0dmFyIG1vZGFsU3R5bGVDbGFzcyA9IHNldHRpbmdzLm1vZGFsU3R5bGVDbGFzcyB8fCAnbW9kYWwtc3R5bGUnO1xuXHR2YXIgaG90c3BvdFN0eWxlQ2xhc3MgPSBzZXR0aW5ncy5ob3RzcG90U3R5bGVDbGFzcyB8fCAnaG90c3BvdC1zdHlsZSc7XG5cdHZhciBjb21wbGV0ZUFjdGlvbiA9IHNldHRpbmdzLmN1c3RvbUNvbXBsZXRlQWN0aW9uIHx8IHNsaWRlT2JqLm5leHRBY3Rpb247XG5cblx0c2V0dGluZ3MuY29ycmVjdENsYXNzID0gY29ycmVjdENsYXNzO1xuXHRzZXR0aW5ncy51bmxvY2tlZENsYXNzID0gdW5sb2NrZWRDbGFzcztcblx0c2V0dGluZ3Muc2VsZWN0ZWRDbGFzcyA9IHNlbGVjdGVkQ2xhc3M7XG5cdHNldHRpbmdzLmNvbXBsZXRlZENsYXNzID0gY29tcGxldGVkQ2xhc3M7XG5cdHNldHRpbmdzLm1vZGFsU3R5bGVDbGFzcyA9IG1vZGFsU3R5bGVDbGFzcztcblx0c2V0dGluZ3MuaG90c3BvdFN0eWxlQ2xhc3MgPSBob3RzcG90U3R5bGVDbGFzcztcblxuXHRzZXR0aW5ncy5jbGlja0NoZWNrZXIgPSBjbGlja0NoZWNrZXI7XG5cdHNldHRpbmdzLmluZHYgPSBzZXR0aW5ncy5pbmR2IHx8IHt9O1xuXG5cdCRob3RzcG90cy5hZGRDbGFzcyhob3RzcG90U3R5bGVDbGFzcyk7XG5cdCRob3RzcG90cy5yZW1vdmVDbGFzcyhjb21wbGV0ZWRDbGFzcyk7XG5cdCRob3RzcG90cy5yZW1vdmVDbGFzcyh1bmxvY2tlZENsYXNzKTtcblx0JGhvdHNwb3RzLmVhY2goZnVuY3Rpb24gKGksIHNwb3QpIHtcblx0XHQkKHNwb3QpLmFkZENsYXNzKGhvdHNwb3RTdHlsZUNsYXNzICsgJy0nICsgKGkgKyAxKSk7XG5cdH0pO1xuXG5cdG1vZGFscy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RhbCwgaWR4KSB7XG5cdFx0JCgnIycgKyBtb2RhbClcblx0XHRcdC5hZGRDbGFzcyhtb2RhbFN0eWxlQ2xhc3MpXG5cdFx0XHQuYWRkQ2xhc3MobW9kYWxTdHlsZUNsYXNzICsgJy0nICsgKGlkeCArIDEpKTtcblxuXHRcdGNvbnNvbGUubG9nKCQoJyMnICsgbW9kYWwpKTtcblxuXHRcdGlmIChzZXR0aW5ncy5jbGlja0FueXdoZXJlKSAkKCcjJyArIG1vZGFsKS5hZGRDbGFzcygnbW9kYWwtY2xpY2stYW55d2hlcmUnKTtcblx0fSk7XG5cblx0aWYgKHNldHRpbmdzLmNvcnJlY3RIb3RzcG90cylcblx0XHRzZXR0aW5ncy5jb3JyZWN0SG90c3BvdHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0JCgkaG90c3BvdHNbaXRlbSAtIDFdKS5hZGRDbGFzcyhjb3JyZWN0Q2xhc3MpO1xuXHRcdH0pO1xuXG5cdC8vIGJ1aWxkIGNsaWNrQ2hlY2tlciBvYmplY3Rcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCAkaG90c3BvdHMubGVuZ3RoOyBpKyspIHtcblx0XHRjbGlja0NoZWNrZXJbaSArIDFdID0gY2xpY2tDaGVja2VyW2kgKyAxXSB8fCB7fTtcblx0XHRjbGlja0NoZWNrZXJbaSArIDFdLnNlZW4gPSBmYWxzZTtcblxuXHRcdC8vaWYgY29ycmVjdENsYXNzIHNwZWNpZmllZCBhZGQgY29ycmVjdENsYXNzIGtleVxuXHRcdGlmIChzZXR0aW5ncy5jb3JyZWN0Q2xhc3MpIHtcblx0XHRcdHZhciBjb3JyZWN0Q2xhc3MgPSBzZXR0aW5ncy5jb3JyZWN0Q2xhc3M7XG5cdFx0XHRjbGlja0NoZWNrZXJbaSArIDFdLmhhc0NvcnJlY3RDbGFzcyA9ICQoJGhvdHNwb3RzW2ldKS5oYXNDbGFzcyhjb3JyZWN0Q2xhc3MpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjbGlja0NoZWNrZXJbaSArIDFdLmhhc0NvcnJlY3RDbGFzcyA9IHRydWU7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCFzZXR0aW5ncy5hdWRpb1NldHVwKVxuXHRcdGZvciAodmFyIGtleSBpbiBzZXR0aW5ncy5hdWRpbykge1xuXHRcdFx0c2V0dGluZ3MuYXVkaW9ba2V5XSA9IG5ldyBIb3dsKHtcblx0XHRcdFx0c3JjOiBbc2V0dGluZ3MuYXVkaW9ba2V5XV1cblx0XHRcdH0pO1xuXHRcdFx0c2V0dGluZ3MuYXVkaW9TZXR1cCA9IHRydWU7XG5cdFx0fVxuXG5cdGlmIChzZXR0aW5ncy5saW5lYXIpIHtcblx0XHRpZiAoc2V0dGluZ3MucXVpeikgdGhyb3cgJ1xcbkhvdHNwb3QgRXJyb3I6XFxueW91IGNhbm5vdCB1c2UgXCJsaW5lYXJcIiBhbmQgXCJxdWl6XCIgdG9nZXRoZXInO1xuXHRcdGlmIChzZXR0aW5ncy5jb3JyZWN0SG90c3BvdHMpIHRocm93ICdcXG5Ib3RzcG90IEVycm9yOlxcbnlvdSBjYW5ub3QgdXNlIFwibGluZWFyXCIgYW5kIFwiY29ycmVjdEhvdHNwb3RzXCIgdG9nZXRoZXInO1xuXHRcdCRob3RzcG90cy5yZW1vdmVDbGFzcyh1bmxvY2tlZENsYXNzKTtcblx0XHRsb2NrKCRob3RzcG90cyk7XG5cdFx0dW5sb2NrKCQoJGhvdHNwb3RzWzBdKSk7XG5cdFx0JCgkaG90c3BvdHNbMF0pLmFkZENsYXNzKHVubG9ja2VkQ2xhc3MpO1xuXHR9IGVsc2UgaWYgKHNldHRpbmdzLnF1aXopIHtcblx0XHRzZWxlY3RlZENsYXNzID0gc2V0dGluZ3MucXVpei5zZWxlY3RlZENsYXNzIHx8ICdzZWxlY3RlZC1ob3RzcG90Jztcblx0XHQkaG90c3BvdHMucmVtb3ZlQ2xhc3Moc2VsZWN0ZWRDbGFzcyk7XG5cdFx0c2V0dGluZ3MucXVpei5zZWxlY3RlZEFuc3dlcnMgPSBbXTtcblx0XHRzZXR0aW5ncy51c2VNb2RhbHMgPSBmYWxzZTtcblx0fVxuXG5cdCRob3RzcG90cy5lYWNoKGZ1bmN0aW9uIChpLCBob1NwKSB7XG5cdFx0dmFyICR0aGlzSG90c3BvdCA9ICQoaG9TcCk7XG5cdFx0Ly9ldmVudCBsaXN0ZW5lciBmb3IgaG90c3BvdHNcblx0XHRpZiAoc2V0dGluZ3MuaG92ZXIgPT09IHRydWUpIHtcblx0XHRcdCR0aGlzSG90c3BvdC5vZmYoJ21vdXNlb3Zlci5ob3RzcG90Jyk7XG5cdFx0XHQkdGhpc0hvdHNwb3Qub24oJ21vdXNlb3Zlci5ob3RzcG90JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRoYW5kbGVIb3RzcG90KGksIGhvU3ApO1xuXHRcdFx0fSk7XG5cdFx0XHQkbW9kYWxCbG9ja2VyLmFkZENsYXNzKCdob3Zlci1ob3RzcG90Jyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCR0aGlzSG90c3BvdC5vZmYoJ2NsaWNrLmhvdHNwb3QnKTtcblx0XHRcdCR0aGlzSG90c3BvdC5vbignY2xpY2suaG90c3BvdCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aGFuZGxlSG90c3BvdChpLCBob1NwKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSk7XG5cblx0LyoqXG5cdCAqIEBwYXJhbSBpXG5cdCAqIEBwYXJhbSBob1NwXG5cdCAqL1xuXHRmdW5jdGlvbiBoYW5kbGVIb3RzcG90KGksIGhvU3ApIHtcblx0XHR2YXIgbWFpbk9uQ2xpY2sgPSBzZXR0aW5ncy5vbkNsaWNrO1xuXHRcdHZhciBpbmR2T25DbGljayA9IHNldHRpbmdzLmluZHZbaSArIDFdICYmIHNldHRpbmdzLmluZHZbaSArIDFdLm9uQ2xpY2s7XG5cdFx0dmFyICR0aGlzTW9kYWwgPSAkKCcjJyArIG1vZGFsc1tpXSk7XG5cdFx0dmFyIG1vZGFsSUQgPSBtb2RhbHNbaV07XG5cdFx0dmFyICR0aGlzSG90c3BvdCA9ICQoaG9TcCk7XG5cdFx0dmFyIG1vZGFsV2FybiA9IFwieW91IGhhdmVuJ3QgY3JlYXRlZCBhIG1vZGFsIGZvciB0aGlzIGhvdHNwb3RcIjtcblx0XHRtYWluT25DbGljayAmJiBtYWluT25DbGljayhob1NwLCBtb2RhbHNbaV0gfHwgbW9kYWxXYXJuKTtcblx0XHRpbmR2T25DbGljayAmJiBpbmR2T25DbGljayhob1NwLCBtb2RhbHNbaV0gfHwgbW9kYWxXYXJuKTtcblxuXHRcdGlmIChzZXR0aW5ncy5hdWRpbykge1xuXHRcdFx0SG93bGVyLnN0b3AoKTtcblx0XHRcdGZvciAodmFyIGtleSBpbiBzZXR0aW5ncy5hdWRpbykgc2V0dGluZ3MuYXVkaW9ba2V5XS5zdG9wKCk7XG5cblx0XHRcdHNldHRpbmdzLmF1ZGlvW2kgKyAxXSAmJiBzZXR0aW5ncy5hdWRpb1tpICsgMV0ucGxheSgpO1xuXHRcdH1cblxuXHRcdGlmIChzZXR0aW5ncy5xdWl6KSB7XG5cdFx0XHRpZiAoc2V0dGluZ3MucXVpei50eXBlID09PSAnc2NxJykgJGhvdHNwb3RzLnJlbW92ZUNsYXNzKHNlbGVjdGVkQ2xhc3MpO1xuXHRcdFx0JHRoaXNIb3RzcG90LnRvZ2dsZUNsYXNzKHNlbGVjdGVkQ2xhc3MpO1xuXHRcdFx0c2V0dGluZ3MucXVpei5zZWxlY3RlZEFuc3dlcnMgPSBbXTtcblx0XHRcdCRob3RzcG90cy5lYWNoKGZ1bmN0aW9uIChpZHgsIHF1aXpIb3RzcG90KSB7XG5cdFx0XHRcdGlmICgkKHF1aXpIb3RzcG90KS5oYXNDbGFzcyhzZWxlY3RlZENsYXNzKSkgc2V0dGluZ3MucXVpei5zZWxlY3RlZEFuc3dlcnMucHVzaChpZHggKyAxKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSBpZiAoc2V0dGluZ3MudXNlTW9kYWxzID09PSBmYWxzZSkge1xuXHRcdFx0Y2xpY2tDaGVja2VyW2kgKyAxXS5zZWVuID0gdHJ1ZTtcblxuXHRcdFx0JChob1NwKS5hZGRDbGFzcyhjb21wbGV0ZWRDbGFzcyk7XG5cblx0XHRcdGFsbFNlZW5CZWhhdmlvcigpO1xuXG5cdFx0XHRpZiAoc2V0dGluZ3MubGluZWFyID09PSB0cnVlKSB1bmxvY2tOZXh0SG90c3BvdCgkaG90c3BvdHNbaSArIDFdLCBzZXR0aW5ncy5pbmR2W2kgKyAyXSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChzZXR0aW5ncy5ob3Zlcikge1xuXHRcdFx0XHQkKCcuc2ktbW9kYWwtY29udGFpbmVyX19qcycpLmFkZENsYXNzKCdzaS1ob3Zlci1ob3RzcG90Jyk7XG5cdFx0XHRcdCRob3RzcG90cy5lYWNoKGZ1bmN0aW9uIChpLCBob1NwKSB7XG5cdFx0XHRcdFx0JHRoaXNIb3RzcG90Lm9mZignbW91c2VvdXQuaG90c3BvdCcpO1xuXHRcdFx0XHRcdCR0aGlzSG90c3BvdC5vbignbW91c2VvdXQuaG90c3BvdCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdCQoJy5zaS1tb2RhbC1jb250YWluZXJfX2pzJykucmVtb3ZlQ2xhc3MoJ3NpLWhvdmVyLWhvdHNwb3QnKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdtb3VzZW91dCcpO1xuXHRcdFx0XHRcdFx0JG1vZGFsQmxvY2tlci50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHRcdGNvbnNvbGUubG9nKCR0aGlzTW9kYWwpO1xuXHRcdFx0JCgnLnNpLW1vZGFsLWNvbnRhaW5lcl9fanMnKS5hZGRDbGFzcygnc2ktbW9kYWwtY29udGFpbmVyLW9wZW4nKTtcblx0XHRcdCR0aGlzTW9kYWwuYWRkQ2xhc3MoJ3NpLWN1cnJlbnQtbW9kYWwnKTtcblx0XHRcdGdsb2JhbFZhci5jdXJyZW50TW9kYWwgPSBtb2RhbElEO1xuXHRcdFx0Z2xvYmFsVmFyLmN1cnJlbnRNb2RhbFR5cGUgPSAnaG90c3BvdCc7XG5cdFx0XHRnbG9iYWxWYXIuaG90c3BvdElkeCA9IGk7XG5cblx0XHRcdC8qKlxuXHRcdFx0ICogQHBhcmFtIGVcblx0XHRcdCAqL1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0Ly8gZnVuY3Rpb24gaGFuZGxlSG90c3BvdENsb3NlKCkge1xuXHQvLyBcdHZhciBzZXR0aW5ncyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmhvdHNwb3Q7XG5cdC8vIFx0dmFyICRob3RzcG90cyA9ICQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlKS5maW5kKCcgLmhvdHNwb3QtYnV0dG9uX19qcycpO1xuXHQvLyBcdHZhciBpID0gZ2xvYmFsVmFyLmhvdHNwb3RJZHg7XG5cdC8vIFx0dmFyIGhvdHNwb3QgPSAkaG90c3BvdHNbaV07XG5cdC8vIFx0dmFyIG1vZGFsID0gJyMnICsgZ2xvYmFsVmFyLmN1cnJlbnRNb2RhbDtcblx0Ly8gXHR2YXIgbWFpbk9uTW9kYWxDbG9zZSA9IHNldHRpbmdzLm9uTW9kYWxDbG9zZTtcblx0Ly8gXHR2YXIgaW5kdk9uTW9kYWxDbG9zZSA9IHNldHRpbmdzLmluZHZbaSArIDFdICYmIHNldHRpbmdzLmluZHZbaSArIDFdLm9uTW9kYWxDbG9zZTtcblx0Ly8gXHR2YXIgbW9kYWxXYXJuID0gXCJ5b3UgaGF2ZW4ndCBjcmVhdGVkIGEgbW9kYWwgZm9yIHRoaXMgaG90c3BvdFwiO1xuXHQvLyBcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmhvdHNwb3QuY2xpY2tDaGVja2VyW2kgKyAxXS5zZWVuID0gdHJ1ZTtcblx0Ly8gXHRtYWluT25Nb2RhbENsb3NlICYmIG1haW5Pbk1vZGFsQ2xvc2UoaG90c3BvdCwgbW9kYWwgfHwgbW9kYWxXYXJuKTtcblx0Ly8gXHRpbmR2T25Nb2RhbENsb3NlICYmIGluZHZPbk1vZGFsQ2xvc2UoaG90c3BvdCwgbW9kYWwgfHwgbW9kYWxXYXJuKTtcblxuXHQvLyBcdHZhciByZXN1bHQgPSB0cnVlO1xuXG5cdC8vIFx0Zm9yICh2YXIgaXRlbSBpbiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5ob3RzcG90KSB7XG5cdC8vIFx0XHRpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaG90c3BvdFtpdGVtXS5zZWVuID09PSBmYWxzZSAmJiAhc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uaG90c3BvdFtpdGVtXS5oYXNDb3JyZWN0Q2xhc3MpIHtcblx0Ly8gXHRcdFx0cmVzdWx0ID0gZmFsc2U7XG5cdC8vIFx0XHRcdGJyZWFrO1xuXHQvLyBcdFx0fVxuXHQvLyBcdH1cblxuXHQvLyBcdGlmKHJlc3VsdCl7XG5cdC8vIFx0XHRpZihzZXR0aW5ncy5jdXN0b21Db21wbGV0ZUFjdGlvbil7XG5cdC8vIFx0XHRcdHNldHRpbmdzLmN1c3RvbUNvbXBsZXRlQWN0aW9uKCk7XG5cdC8vIFx0XHR9ZWxzZXtcblx0Ly8gXHRcdFx0c2xpZGVzW2dsb2JhbFZhci5DdXJTbGlkZV0ubmV4dEFjdGlvbigpXG5cdC8vIFx0XHR9XG5cdC8vIFx0fVxuXG5cdC8vIFx0aWYgKHNldHRpbmdzLmxpbmVhciA9PT0gdHJ1ZSkgdW5sb2NrTmV4dEhvdHNwb3QoJGhvdHNwb3RzW2kgKyAxXSwgc2V0dGluZ3MuaW5kdltpICsgMl0pO1xuXHQvLyB9XG5cblx0Ly9jaGVjayBmb3IgY29tcGxldGlvbiBhbmQgZGVmaW5lIHdoYXQgaGFwcGVuc1xuXHQvKipcblx0ICpcblx0ICovXG5cdGZ1bmN0aW9uIGFsbFNlZW5CZWhhdmlvcigpIHtcblx0XHRpZiAoYWxsU2VlbihjbGlja0NoZWNrZXIpKSBjb21wbGV0ZUFjdGlvbigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwYXJhbSBjbGlja0NoZWNrZXJcblx0ICovXG5cdGZ1bmN0aW9uIGFsbFNlZW4oY2xpY2tDaGVja2VyKSB7XG5cdFx0dmFyIHJlc3VsdCA9IHRydWU7XG5cblx0XHRmb3IgKHZhciBpdGVtIGluIGNsaWNrQ2hlY2tlcikge1xuXHRcdFx0aWYgKGNsaWNrQ2hlY2tlcltpdGVtXS5zZWVuID09PSBmYWxzZSAmJiAhY2xpY2tDaGVja2VyW2l0ZW1dLmhhc0NvcnJlY3RDbGFzcykge1xuXHRcdFx0XHRyZXN1bHQgPSBmYWxzZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQHBhcmFtIG5leHRIb3RzcG90XG5cdCAqIEBwYXJhbSBuZXh0SG90c3BvdFNldHRpbmdzXG5cdCAqL1xuXHRmdW5jdGlvbiB1bmxvY2tOZXh0SG90c3BvdChuZXh0SG90c3BvdCwgbmV4dEhvdHNwb3RTZXR0aW5ncykge1xuXHRcdHZhciBtYWluT25VbmxvY2sgPSBzZXR0aW5ncy5vblVubG9jaztcblx0XHR2YXIgaW5kdk9uVW5sb2NrID0gbmV4dEhvdHNwb3RTZXR0aW5ncyAmJiBuZXh0SG90c3BvdFNldHRpbmdzLm9uVW5sb2NrO1xuXG5cdFx0JGhvdHNwb3RzLnJlbW92ZUNsYXNzKHVubG9ja2VkQ2xhc3MpO1xuXG5cdFx0dW5sb2NrKCQobmV4dEhvdHNwb3QpKTtcblx0XHQkKG5leHRIb3RzcG90KS5hZGRDbGFzcyh1bmxvY2tlZENsYXNzKTtcblxuXHRcdG1haW5PblVubG9jayAmJiBtYWluT25VbmxvY2sobmV4dEhvdHNwb3QpO1xuXHRcdGluZHZPblVubG9jayAmJiBpbmR2T25VbmxvY2sobmV4dEhvdHNwb3QpO1xuXHR9XG59XG5cbi8qKlxuICpcbiAqL1xuZnVuY3Rpb24gcmVzZXRIb3RzcG90KCkge1xuXHRob3RzcG90RnVuY3Rpb25zKCk7XG59XG4iLCJmdW5jdGlvbiBpbml0TWVudSgpIHtcblx0Zm9yIChrZXkgaW4gc2xpZGVzKSB7XG5cdFx0aWYgKHNsaWRlc1trZXldLnR5cGUgPT09ICdtZW51Jykge1xuXHRcdFx0aWYgKHNsaWRlc1trZXldWydtZW51J10pIHtcblx0XHRcdFx0Ly8gc2V0IGRlZmF1bHQgbWVudSBjbGFzcyBpZiBvbmUgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0aWYgKCFzbGlkZXNba2V5XVsnbWVudSddWydtZW51Q2xhc3MnXSkge1xuXHRcdFx0XHRcdHNsaWRlc1trZXldWydtZW51J11bJ21lbnVDbGFzcyddID0gJ3NpLW1lbnVfX2pzJztcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBzZXQgbWVudSBkZWZhdWx0IHRvIG5vbmxpbmVhciBpZiBsaW5lYXIgc2xpZGUga2V5IGlzIG5vdCBwcmVzZW50L3RydWVcblx0XHRcdFx0aWYgKCFzbGlkZXNba2V5XVsnbWVudSddWydsaW5lYXInXSkge1xuXHRcdFx0XHRcdHNsaWRlc1trZXldWydtZW51J11bJ2xpbmVhciddID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gc2V0IG1lbnUgZGVmYXVsdCBtZW51IG5hdmlnYXRpb24gaWYgbm90IHByZXNlbnQuICBXaWxsIG1hdGNoIGJ1dHRvbnMgdG8gc3Vic2VxdWVudCBzbGlkZXMgYWZ0ZXIgdGhlIG1lbnVcblx0XHRcdFx0aWYgKCFzbGlkZXNba2V5XVsnbWVudSddWyduYXZpZ2F0aW9uJ10pIHtcblx0XHRcdFx0XHR2YXIgbnVtYmVyID0gc2xpZGVzW2tleV1bJ3NsaWRlTnVtYmVyJ107XG5cdFx0XHRcdFx0dmFyIGJ1dHRvbnMgPSAkKCcjJyArIGtleSkuZmluZCgnLicgKyBzbGlkZXNba2V5XVsnbWVudSddWydtZW51Q2xhc3MnXSk7XG5cdFx0XHRcdFx0dmFyIGxlbmd0aCA9IGJ1dHRvbnMubGVuZ3RoO1xuXHRcdFx0XHRcdHZhciBkZWZhdWx0TmF2ID0gW107XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDE7IGkgPD0gbGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGRlZmF1bHROYXYucHVzaChudW1iZXIgKyBpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnbmF2aWdhdGlvbiddID0gZGVmYXVsdE5hdjtcblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBzZXQgZGVmYXVsdCBjb21wbGV0aW9uIHJlcXVpcmVtZW50cyBmb3IgZWFjaCBidXR0b24gaWYgbm90IGdpdmVuLiAgV2lsbCBtYXRjaCBidXR0b25zIHRvIHN1YnNlcXVlbnQgc2xpZGVzIGFmdGVyIHRoZSBtZW51XG5cdFx0XHRcdGlmICghc2xpZGVzW2tleV1bJ21lbnUnXVsnY29tcGxldGlvbklEcyddKSB7XG5cdFx0XHRcdFx0dmFyIG51bWJlciA9IHNsaWRlc1trZXldWydzbGlkZU51bWJlciddO1xuXHRcdFx0XHRcdHZhciBidXR0b25zID0gJCgnIycgKyBrZXkpLmZpbmQoJy4nICsgc2xpZGVzW2tleV1bJ21lbnUnXVsnbWVudUNsYXNzJ10pO1xuXHRcdFx0XHRcdHZhciBsZW5ndGggPSBidXR0b25zLmxlbmd0aDtcblx0XHRcdFx0XHR2YXIgY29tcGxldGlvbklEcyA9IFtdO1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAxOyBpIDw9IGxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRmb3IgKGlkIGluIHNsaWRlcykge1xuXHRcdFx0XHRcdFx0XHRpZiAoc2xpZGVzW2lkXVsnc2xpZGVOdW1iZXInXSA9PSAobnVtYmVyICsgaSkudG9TdHJpbmcoKSkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRpb25JRHMucHVzaChpZCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnY29tcGxldGlvbklEcyddID0gY29tcGxldGlvbklEcztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gc2V0IGFsbCBtZW51IGRlZmF1bHRzIGlmIHRoZSAnbWVudScga2V5IGlzIGVudGlyZWx5IGFic2VudFxuXHRcdFx0XHRzbGlkZXNba2V5XVsnbWVudSddID0ge307XG5cdFx0XHRcdHNsaWRlc1trZXldWydtZW51J11bJ21lbnVDbGFzcyddID0gJ3NpLW1lbnVfX2pzJztcblx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnbGluZWFyJ10gPSBmYWxzZTtcblx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnY29tcGxldGlvbklEcyddID0gY29tcGxldGlvbklEcztcblx0XHRcdFx0dmFyIGJ1dHRvbnMgPSAkKCcjJyArIGtleSkuZmluZCgnLicgKyBzbGlkZXNba2V5XVsnbWVudSddWydtZW51Q2xhc3MnXSk7XG5cdFx0XHRcdHZhciBudW1iZXIgPSBzbGlkZXNba2V5XVsnc2xpZGVOdW1iZXInXTtcblx0XHRcdFx0dmFyIGxlbmd0aCA9IGJ1dHRvbnMubGVuZ3RoO1xuXHRcdFx0XHR2YXIgZGVmYXVsdE5hdiA9IFtdO1xuXHRcdFx0XHR2YXIgY29tcGxldGlvbklEcyA9IFtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMTsgaSA8PSBsZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGRlZmF1bHROYXYucHVzaChudW1iZXIgKyBpKTtcblx0XHRcdFx0XHRmb3IgKGlkIGluIHNsaWRlcykge1xuXHRcdFx0XHRcdFx0aWYgKHNsaWRlc1tpZF1bJ3NsaWRlTnVtYmVyJ10gPT0gKG51bWJlciArIGkpLnRvU3RyaW5nKCkpIHtcblx0XHRcdFx0XHRcdFx0Y29tcGxldGlvbklEcy5wdXNoKGlkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnbmF2aWdhdGlvbiddID0gZGVmYXVsdE5hdjtcblx0XHRcdFx0c2xpZGVzW2tleV1bJ21lbnUnXVsnY29tcGxldGlvbklEcyddID0gY29tcGxldGlvbklEcztcblx0XHRcdH1cblx0XHRcdC8vIGF0dGFjaCBjbGljayBldmVudCB0byB0aGUgYnV0dG9ucyB1c2luZyBuYXZpZ2F0aW9uIGFycmF5XG5cdFx0XHRpZiAoc2xpZGVzW2tleV1bJ21lbnUnXVsnbmF2aWdhdGlvbiddLmxlbmd0aCkge1xuXHRcdFx0XHR2YXIgYnV0dG9ucyA9ICQoJyMnICsga2V5KS5maW5kKCcuJyArIHNsaWRlc1trZXldWydtZW51J11bJ21lbnVDbGFzcyddKTtcblxuXHRcdFx0XHRidXR0b25zLmVhY2goZnVuY3Rpb24gKGlkeCwgYnV0dG9uKSB7XG5cdFx0XHRcdFx0dmFyIHNsaWRlID0gc2xpZGVzW2tleV07XG5cblx0XHRcdFx0XHQkKGJ1dHRvbikub24oJ2NsaWNrLm5hdicsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGp1bXBUb0lkKHNsaWRlWydtZW51J11bJ25hdmlnYXRpb24nXVtpZHhdKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHQvLyBsb2NrIGJ1dHRvbnMgaWYgbGluZWFyIGFuZCB1bmxvY2sgdGhlIGZpcnN0IG9uZVxuXHRcdFx0aWYgKHNsaWRlc1trZXldWydtZW51J11bJ2xpbmVhciddKSB7XG5cdFx0XHRcdHZhciBidXR0b25zID0gJCgnIycgKyBrZXkpLmZpbmQoJy4nICsgc2xpZGVzW2tleV1bJ21lbnUnXVsnbWVudUNsYXNzJ10pO1xuXHRcdFx0XHRsb2NrKGJ1dHRvbnMpO1xuXHRcdFx0XHR1bmxvY2soJChidXR0b25zWzBdKSk7XG5cdFx0XHRcdCQoYnV0dG9uc1swXSkuYWRkQ2xhc3MoJ3VubG9ja2VkJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIG1lbnVGdW5jdGlvbnMoKSB7XG5cdHZhciBtZW51QnV0dG9ucyA9ICQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlKS5maW5kKCcuJyArIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydtZW51J11bJ21lbnVDbGFzcyddKTtcblx0dmFyIGxpbmVhciA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydtZW51J11bJ2xpbmVhciddO1xuXHR2YXIgY29tcGxldGlvbklEcyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydtZW51J11bJ2NvbXBsZXRpb25JRHMnXTtcblx0dmFyIGFsbENvbXBsZXRlID0gdHJ1ZTtcblxuXHRpZiAoY29tcGxldGlvbklEcy5sZW5ndGgpIHtcblx0XHRjb21wbGV0aW9uSURzLmZvckVhY2goZnVuY3Rpb24gKGlkLCBpZHgpIHtcblx0XHRcdGlmIChnZXRDb21wbGV0aW9uU3RhdHVzKGlkKSkge1xuXHRcdFx0XHQkKG1lbnVCdXR0b25zW2lkeF0pLmFkZENsYXNzKCdjb21wbGV0ZWQnKTtcblx0XHRcdFx0aWYgKGxpbmVhciAmJiBtZW51QnV0dG9uc1tpZHggKyAxXSkge1xuXHRcdFx0XHRcdCQobWVudUJ1dHRvbnMpLnJlbW92ZUNsYXNzKCd1bmxvY2tlZCcpO1xuXHRcdFx0XHRcdHVubG9jaygkKG1lbnVCdXR0b25zW2lkeCArIDFdKSk7XG5cdFx0XHRcdFx0JChtZW51QnV0dG9uc1tpZHggKyAxXSkuYWRkQ2xhc3MoJ3VubG9ja2VkJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGFsbENvbXBsZXRlID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRpZiAoYWxsQ29tcGxldGUpIHtcblx0XHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnbWVudSddWydhbGxDb21wbGV0ZSddID0gdHJ1ZTtcblx0fSBlbHNlIHtcblx0XHRzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnbWVudSddWydhbGxDb21wbGV0ZSddID0gZmFsc2U7XG5cdH1cbn1cbiIsIi8vLy8vLy8vLy8vLy8vLy8vLypGZWF0dXJlOlNvcnRhYmxlcy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIHNvcnRGdW5jdGlvbnMoKSB7XG4gICAgLy8gZmlyc3QgdmlzaXQgc2V0dXBcbiAgICAvLyBhc3NpZ25zIG9yaWdpbmFsIHBvc2l0aW9ucyBpbiBvcmRlciB0byBtYWtlIHJlc2V0IHdvcmtcbiAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0udmlzaXRlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdmFyICRzb3J0YWJsZXMgPSBnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJy5zb3J0YWJsZScpO1xuICAgICAgICAkc29ydGFibGVzLmVhY2goZnVuY3Rpb24gKGlkeCwgc29ydGFibGUpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IHNvcnRhYmxlLmlkO1xuXG4gICAgICAgICAgICAvLyBpbml0aWFsaXplIHNvcnRhYmxlcyB3aXRoIG9yIHdpdGhvdXQgb3B0aW9uc1xuICAgICAgICAgICAgaWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydzb3J0J11bJ3NvcnRhYmxlcyddW2lkXSkge1xuICAgICAgICAgICAgICAgIGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnc29ydCddWydzb3J0YWJsZXMnXVtpZF1bJ29wdGlvbnMnXSkge1xuICAgICAgICAgICAgICAgICAgICAkKHNvcnRhYmxlKS5zb3J0YWJsZShzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnc29ydCddWydzb3J0YWJsZXMnXVtpZF1bJ29wdGlvbnMnXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJChzb3J0YWJsZSkuc29ydGFibGUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL21ha2VzIGJlZ2lubmluZyBvcmRlciBkZWZhdWx0IGFuc3dlciBpZiBubyBhbnN3ZXIgaXMgZ2l2ZW5cbiAgICAgICAgICAgICAgICBpZiAoIXNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydzb3J0J11bJ3NvcnRhYmxlcyddW2lkXVsnYW5zd2VyJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ3NvcnQnXVsnc29ydGFibGVzJ11baWRdWydhbnN3ZXInXSA9ICQoc29ydGFibGUpLnNvcnRhYmxlKCd0b0FycmF5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKHNvcnRhYmxlKS5zb3J0YWJsZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc29ydGFibGVFbGVtZW50cyA9ICQoJyMnICsgaWQgKyAnPiBkaXYnKTtcbiAgICAgICAgICAgIC8vIG5lY2Vzc2FyeSB0byBtYWtlIGEgY29weSBvdGhlcndpc2UgcmVhc3NpZ25pbmcgb25lIG9mIHRoZSBkYXRhIGVsZW1lbnRzIG92ZXJ3cml0ZXMgdGhlIG90aGVyXG4gICAgICAgICAgICB2YXIgc2h1ZmZsZUVsZW1lbnRzID0gJCgnIycgKyBpZCArICc+IGRpdicpO1xuXG4gICAgICAgICAgICAvLyBUaGlzIGhhbmRsZXMga2V5Ym9hcmQgYWNjZXNzaWJpbGl0eSBmb3Igc29ydGFibGVzXG5cbiAgICAgICAgICAgIHNvcnRhYmxlRWxlbWVudHMuZWFjaChmdW5jdGlvbiAoaWR4LCBzb3J0KSB7XG4gICAgICAgICAgICAgICAgc29ydEtleWJvYXJkKHNvcnQsIHNvcnRhYmxlKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkKHNvcnRhYmxlKS5kYXRhKHtcbiAgICAgICAgICAgICAgICBlbGVtZW50czogc29ydGFibGVFbGVtZW50cyxcbiAgICAgICAgICAgICAgICBzaHVmZmxlOiBzaHVmZmxlRWxlbWVudHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyByYW5kb21pemVzIHBsYWNlbWVudCBvZiBkaXZzIGV2ZXJ5IHRpbWUgdGhlIHNsaWRlIGlzIGVudGVyZWRcbiAgICBpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ3NvcnQnXVsncmFuZG9taXplJ10gPT09IHRydWUpIHtcbiAgICAgICAgdmFyICRzb3J0YWJsZXMyID0gZ2xvYmFsVmFyLiRjdXJTbGlkZS5maW5kKCcuc29ydGFibGUnKTtcbiAgICAgICAgJHNvcnRhYmxlczIuZWFjaChmdW5jdGlvbiAoaWR4LCBzb3J0YWJsZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gJChzb3J0YWJsZSkuZGF0YSgnZWxlbWVudHMnKTtcbiAgICAgICAgICAgIHZhciBzaHVmZmxlQXJyID0gW107XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhbiBhcnJheSBvZiB1bmlxdWUgcmFuZG9tIG51bWJlcnMgdG8gc2VydmUgYXMgaW5kaWNlc1xuICAgICAgICAgICAgd2hpbGUgKHNodWZmbGVBcnIubGVuZ3RoIDwgZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGVsZW1lbnRzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgLy8gdGVzdHMgdGhhdCB0aGUgbnVtIHZhcmlhYmxlIGhhcyBub3QgYWxyZWFkeSBiZWVuIGFkZGVkIHRvIHRoZSBhcnJheVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgIXNodWZmbGVBcnIuc29tZShmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbCA9PT0gbnVtO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBzaHVmZmxlQXJyLnB1c2gobnVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHVzZSB0aGUgYXJyYXkgb2YgcmFuZG9tIG51bWJlcnMgdG8gcmVhc3NpZ24gZWxlbWVudHMgaW4gdGhlIHNodWZmbGUgZGF0YSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAkKHNvcnRhYmxlKS5kYXRhKCdzaHVmZmxlJylbaV0gPSAkKHNvcnRhYmxlKS5kYXRhKCdlbGVtZW50cycpW3NodWZmbGVBcnJbaV1dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyByYW5kb21pemVzIGFjcm9zcyBjb25uZWN0ZWQgbGlzdHNcbiAgICBpZiAoXG4gICAgICAgIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydzb3J0J11bJ3JhbmRvbWl6ZUNvbm5lY3QnXSAmJlxuICAgICAgICB0eXBlb2Ygc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bJ3NvcnQnXVsncmFuZG9taXplQ29ubmVjdCddID09PSAnc3RyaW5nJ1xuICAgICkge1xuICAgICAgICB2YXIgbGlzdHMgPSAkKCcuJyArIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydzb3J0J11bJ3JhbmRvbWl6ZUNvbm5lY3QnXSk7XG4gICAgICAgIHZhciBlbGVtZW50QXJyID0gW107XG4gICAgICAgIHZhciBzaHVmZmxlZCA9IFtdO1xuICAgICAgICBsaXN0cy5lYWNoKGZ1bmN0aW9uIChpZHgsIGxpc3QpIHtcbiAgICAgICAgICAgICQobGlzdClcbiAgICAgICAgICAgICAgICAuZmluZCgnZGl2JylcbiAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaWR4MiwgZGl2KSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRBcnIucHVzaChkaXYpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB3aGlsZSAoZWxlbWVudEFyci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBudW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBlbGVtZW50QXJyLmxlbmd0aCk7XG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudEFyci5zcGxpY2UobnVtLCAxKTtcbiAgICAgICAgICAgIHNodWZmbGVkLnB1c2goZWxlbWVudFswXSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHdoaWxlIChzaHVmZmxlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxpc3RzLmVhY2goZnVuY3Rpb24gKGlkeCwgbGlzdCkge1xuICAgICAgICAgICAgICAgICQobGlzdCkuZGF0YSgnc2h1ZmZsZScpW2ldID0gc2h1ZmZsZWQuc2hpZnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVzZXRTb3J0KCk7XG59XG5cbi8vIHJlc2V0IHdvcmtzIGZvciBib3RoIHJhbmRvbWl6ZWQgYW5kIG5vbi1yYW5kb21pemVkIHNvcnQgc2xpZGVzLiAgeW91IGRvIG5vdCBuZWVkIHRvIHB1dCB0aGUgcmFuZG9taXplIGtleSBpZiB5b3UgZG9uJ3QgbmVlZCBpdC5cbi8vIHJlc2V0IHdpbGwgZWl0aGVyIHJlc2V0IHRvIHRoZSBodG1sIG9yZGVyIG9mIGRpdnMgb3IgdG8gdGhlIGN1cnJlbnQgcmFuZG9taXplZCBvcmRlclxuZnVuY3Rpb24gcmVzZXRTb3J0KCkge1xuICAgIHZhciAkc29ydGFibGVzID0gZ2xvYmFsVmFyLiRjdXJTbGlkZS5maW5kKCcuc29ydGFibGUnKTtcbiAgICAkc29ydGFibGVzLmVhY2goZnVuY3Rpb24gKGlkeCwgc29ydGFibGUpIHtcbiAgICAgICAgaWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydzb3J0J11bJ3JhbmRvbWl6ZUNvbm5lY3QnXSkge1xuICAgICAgICAgICAgJChzb3J0YWJsZSkuYXBwZW5kKCQoc29ydGFibGUpLmRhdGEoJ3NodWZmbGUnKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnc29ydCddWydyYW5kb21pemUnXSA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgIHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWydzb3J0J11bJ3JhbmRvbWl6ZSddID09PSB1bmRlZmluZWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAkKHNvcnRhYmxlKS5hcHBlbmQoJChzb3J0YWJsZSkuZGF0YSgnZWxlbWVudHMnKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHNvcnRhYmxlKS5hcHBlbmQoJChzb3J0YWJsZSkuZGF0YSgnc2h1ZmZsZScpKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vLyBhY2Nlc3NpYmlsaXR5IGZ1bmN0aW9uXG5mdW5jdGlvbiBzb3J0S2V5Ym9hcmQoc29ydEl0ZW0sIHNvcnRMaXN0KSB7XG4gICAgdmFyIGNvbm5lY3RlZCA9ICQoc29ydExpc3QpLnNvcnRhYmxlKCdvcHRpb24nLCAnY29ubmVjdFdpdGgnKTtcblxuICAgICQoc29ydEl0ZW0pXG4gICAgICAgIC5hdHRyKCd0YWJpbmRleCcsIDApXG4gICAgICAgIC5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSA4NyB8fCBldmVudC53aGljaCA9PT0gNjUpIHtcbiAgICAgICAgICAgICAgICAvLyBsZWZ0IG9yIHVwIG9uZSBzcGFjZSAoJ3cnLCAnYScpXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5pbnNlcnRCZWZvcmUoJCh0aGlzKS5wcmV2KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSA4MyB8fCBldmVudC53aGljaCA9PT0gNjgpIHtcbiAgICAgICAgICAgICAgICAvLyByaWdodCBvciBkb3duIG9uZSBzcGFjZSAoJ3MnLCdkJylcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmluc2VydEFmdGVyKCQodGhpcykubmV4dCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gODEpIHtcbiAgICAgICAgICAgICAgICAvLyBcInFcIiB0b3Agb2YgbGlzdFxuICAgICAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgLnBhcmVudCgpXG4gICAgICAgICAgICAgICAgICAgIC5wcmVwZW5kKCQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSA2OSkge1xuICAgICAgICAgICAgICAgIC8vIFwiZVwiIGJvdHRvbSBvZiBsaXN0XG4gICAgICAgICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAucGFyZW50KClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25uZWN0ZWQgJiYgZXZlbnQud2hpY2ggPT09IDg4KSB7XG4gICAgICAgICAgICAgICAgLy8gJ3gnIG1vdmUgaXRlbSB0byBjb25uZWN0ZWQgbGlzdHNcbiAgICAgICAgICAgICAgICB2YXIgbmV3TGlzdHMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50SW5kZXg7XG4gICAgICAgICAgICAgICAgJChjb25uZWN0ZWQpLmVhY2goZnVuY3Rpb24gKGlkeCwgbGlzdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoISQobGlzdCkuZmluZChldmVudC50YXJnZXQpWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdMaXN0cy5wdXNoKGxpc3QpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SW5kZXggPSBpZHg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAobmV3TGlzdHNbcGFyZW50SW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgICQobmV3TGlzdHNbcGFyZW50SW5kZXhdKS5hcHBlbmQoJCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJChuZXdMaXN0c1swXSkuYXBwZW5kKCQodGhpcykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQodGhpcykuZm9jdXMoKTtcbiAgICAgICAgfSk7XG59IiwiLy8vLy8vLy8vLy8vKkZlYXR1cmU6TXVsdGlwbGUgQ2hvaWNlL1NpbmdsZSBDaG9pY2UgUXVlc3Rpb25zLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIHJlc2V0UXVpeigpIHtcblx0dmFyIGNob2ljZXMgPSAkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSArICcgLnNpLXF1aXpfX2pzIGxpJyk7XG5cdGNob2ljZXMucmVtb3ZlQ2xhc3MoJ3NpLXF1aXotc2VsZWN0ZWQnKTtcbn1cbmZ1bmN0aW9uIGluaXRRdWl6KCkge1xuXHRmb3IgKGtleSBpbiBzbGlkZXMpIHtcblx0XHRpZiAoc2xpZGVzW2tleV0udHlwZSA9PT0gJ3F1aXonKSB7XG5cdFx0XHRpZiAoc2xpZGVzW2tleV0ucXVpei5yYWRpbyA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0c2xpZGVzW2tleV0ucXVpei5yYWRpbyA9IGZhbHNlO1xuXHRcdFx0fSBlbHNlIGlmIChzbGlkZXNba2V5XS5xdWl6LnJhZGlvKSB7XG5cdFx0XHRcdCQoJyMnICsga2V5ICsgJyAuc2ktcXVpel9fanMnKS5hZGRDbGFzcygnc2ktcmFkaW9fX2pzJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHZhciBxdWl6emVzID0gJCgnLnNpLXF1aXpfX2pzJyk7XG5cdHZhciBidXR0b25UeXBlID0gZ2xvYmFsVmFyLmJ1dHRvblR5cGU7XG5cdHF1aXp6ZXMuZWFjaChmdW5jdGlvbiAoaWR4LCBxdWl6KSB7XG5cdFx0dmFyIGNob2ljZXMgPSAkKHF1aXopLmZpbmQoJ2xpJyk7XG5cdFx0dmFyIGJ1dHRvbnMgPSAkKHF1aXopLmZpbmQoJ2RpdicpO1xuXHRcdHZhciBpc1JhZGlvID0gJChxdWl6KS5oYXNDbGFzcygnc2ktcmFkaW9fX2pzJykgPyB0cnVlIDogZmFsc2U7XG5cdFx0Y2hvaWNlcy5lYWNoKGZ1bmN0aW9uIChpZHgsIGNob2ljZSkge1xuXHRcdFx0JChjaG9pY2UpLmFkZENsYXNzKCdzaS1xdWl6LWFuc3dlcicpLmF0dHIoJ3RhYmluZGV4JywgJzAnKTtcblx0XHRcdCQoY2hvaWNlKS5vbignY2xpY2sucXVpeicsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHRcdFx0XHRpZiAoaXNSYWRpbykge1xuXHRcdFx0XHRcdGNob2ljZXMucmVtb3ZlQ2xhc3MoJ3NpLXF1aXotc2VsZWN0ZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoJCh0aGlzKS5oYXNDbGFzcygnc2ktcXVpei1zZWxlY3RlZCcpKSB7XG5cdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnc2ktcXVpei1zZWxlY3RlZCcpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ3NpLXF1aXotc2VsZWN0ZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHQkKGNob2ljZSkub24oJ2tleXVwLnF1aXonLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmIChldmVudC53aGljaCA9PT0gMTMpIHtcblx0XHRcdFx0XHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG5cdFx0XHRcdFx0aWYgKGlzUmFkaW8pIHtcblx0XHRcdFx0XHRcdGNob2ljZXMucmVtb3ZlQ2xhc3MoJ3NpLXF1aXotc2VsZWN0ZWQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCQodGhpcykuaGFzQ2xhc3MoJ3NpLXF1aXotc2VsZWN0ZWQnKSkge1xuXHRcdFx0XHRcdFx0JCh0aGlzKS5yZW1vdmVDbGFzcygnc2ktcXVpei1zZWxlY3RlZCcpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdzaS1xdWl6LXNlbGVjdGVkJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRidXR0b25zLmVhY2goZnVuY3Rpb24gKGlkeCwgYnV0dG9uKSB7XG5cdFx0XHR2YXIgaW1hZ2UgPSAkKGJ1dHRvbikuY2hpbGRyZW4oKS5lcSgwKTtcblx0XHRcdGlmIChpc1JhZGlvKSB7XG5cdFx0XHRcdCQoaW1hZ2UpLmF0dHIoJ3NyYycsIGZ1bmN0aW9uIChpbmRleCwgYXR0cikge1xuXHRcdFx0XHRcdHJldHVybiBhdHRyLnJlcGxhY2UoJ21jcScsICdzY3EnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKGltYWdlKS5hdHRyKCdzcmMnLCBmdW5jdGlvbiAoaW5kZXgsIGF0dHIpIHtcblx0XHRcdFx0XHRyZXR1cm4gYXR0ci5yZXBsYWNlKCdzY3EnLCAnbWNxJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQkKGJ1dHRvbilcblx0XHRcdFx0LmZpbmQoJ2ltZycpXG5cdFx0XHRcdC5hdHRyKCdzcmMnLCBmdW5jdGlvbiAoaW5kZXgsIGF0dHIpIHtcblx0XHRcdFx0XHRyZXR1cm4gYXR0ci5yZXBsYWNlKCdjbGFzc2ljJywgYnV0dG9uVHlwZSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9KTtcbn1cbmZ1bmN0aW9uIHF1aXpGdW5jdGlvbigpIHtcblx0dmFyIGFuc3dlcnMgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsncXVpeiddWydhbnN3ZXJzJ107XG5cdHZhciBjaG9pY2VzID0gJCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUgKyAnIC5zaS1xdWl6X19qcyBsaScpO1xuXHRpZiAoIXNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWyd2aXNpdGVkJ10gJiYgZ2xvYmFsVmFyLmRldk1vZGUpIHtcblx0XHRjaG9pY2VzLmVhY2goZnVuY3Rpb24gKGlkeCwgY2hvaWNlKSB7XG5cdFx0XHRpZiAoYW5zd2Vyc1skKGNob2ljZSkuYXR0cignaWQnKV0pIHtcblx0XHRcdFx0JChjaG9pY2UpLmNzcygnY29sb3InLCAnYmx1ZScpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHJlc2V0UXVpeigpO1xuXHR9XG59XG4iLCJmdW5jdGlvbiBmb3JtRnVuY3Rpb25zKCkge1xuXHR2YXIgJGZvcm0gPSAkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSArICcgZm9ybScpO1xuXG5cdGlmICghc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uZm9ybS5kb250R2VuZXJhdGUpIHtcblx0XHRnZW5lcmF0ZUZvcm0oJGZvcm0pO1xuXHR9XG5cblx0dmFyIGhhc1N1Ym1pdCA9ICEhJGZvcm0uZmluZCgnaW5wdXRbdHlwZT1zdWJtaXRdJykubGVuZ3RoO1xuXG5cdCRmb3JtLmFkZENsYXNzKCdmb3JtLXN0eWxlJyk7XG5cdCRmb3JtLnRyaWdnZXIoJ3Jlc2V0Jyk7XG5cblx0aWYgKCFoYXNTdWJtaXQpIHtcblx0XHQkZm9ybS5hcHBlbmQoJzxpbnB1dCB0eXBlPVwic3VibWl0XCIvPicpO1xuXHR9XG5cblx0JGZvcm0ub24oJ3N1Ym1pdC5yZXEtZm9ybScsIGZ1bmN0aW9uIChlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHR9KTtcblxuXHR2YXIgaW5wdXRzID0gJGZvcm0uZmluZCgnaW5wdXQnKTtcblx0aW5wdXRzLmtleXVwKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpO1xuXHRcdHZhciBjaGFyYWN0ZXJzID0gJHRoaXMudmFsKCkubGVuZ3RoO1xuXHRcdHZhciBtYXhMZW5ndGggPSAkdGhpcy5hdHRyKCdtYXhMZW5ndGgnKTtcblx0XHR2YXIgbGFzdElucHV0ID0gJHRoaXMubmV4dCgpLmhhc0NsYXNzKCdjaGVja2JveCcpO1xuXG5cdFx0aWYgKGNoYXJhY3RlcnMgPT0gbWF4TGVuZ3RoICYmICFsYXN0SW5wdXQpIHtcblx0XHRcdCR0aGlzLm5leHQoKS5mb2N1cygpO1xuXHRcdH1cblx0fSk7XG5cdGlucHV0cy5rZXlkb3duKGZ1bmN0aW9uIChlKSB7XG5cdFx0aWYgKChlLndoaWNoID09IDggfHwgZS53aGljaCA9PSA0NikgJiYgJCh0aGlzKS52YWwoKSA9PSAnJykge1xuXHRcdFx0JCh0aGlzKS5wcmV2KCdpbnB1dCcpLmZvY3VzKCk7XG5cdFx0fVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gY2hlY2tGb3JtKCkge1xuXHR2YXIgZmllbGRzID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uZm9ybS5maWVsZHM7XG5cblx0Zm9yICh2YXIga2V5IGluIGZpZWxkcykge1xuXHRcdHZhciBmaWVsZCA9IGZpZWxkc1trZXldO1xuXHRcdHZhciByZXN1bHQgPSAnJztcblx0XHR2YXIgaW5wdXRzID0gJCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUgKyAnIC4nICsgZmllbGQuY2xhc3MpO1xuXHRcdHZhciBhbnN3ZXIgPSBmaWVsZC5hbnN3ZXI7XG5cdFx0dmFyIGNhc2VTZW5zaXRpdmUgPSBmaWVsZHNba2V5XS5jYXNlU2Vuc2l0aXZlO1xuXHRcdHZhciB1c2VyQW5zd2VyID0gJyc7XG5cblx0XHRpZiAoZmllbGQuYW5zd2VyKSB7XG5cdFx0XHRpZiAoZmllbGQudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuXHRcdFx0XHR2YXIgc2VsZWN0ZWRBbnN3ZXIgPSBpbnB1dHMuZmlsdGVyKCc6Y2hlY2tlZCcpWzBdO1xuXHRcdFx0XHRpZiAoc2VsZWN0ZWRBbnN3ZXIpIHVzZXJBbnN3ZXIgPSBzZWxlY3RlZEFuc3dlci52YWx1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlucHV0cy5lYWNoKGZ1bmN0aW9uIChpLCBpbnB1dCkge1xuXHRcdFx0XHRcdHVzZXJBbnN3ZXIgKz0gaW5wdXQudmFsdWU7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFjYXNlU2Vuc2l0aXZlKSB7XG5cdFx0XHRcdGFuc3dlciA9IGFuc3dlci50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHR1c2VyQW5zd2VyID0gdXNlckFuc3dlci50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXN1bHQgPSB1c2VyQW5zd2VyID09PSBhbnN3ZXI7XG5cblx0XHRcdGNvbnNvbGUubG9nKHVzZXJBbnN3ZXIsIGFuc3dlcik7XG5cdFx0XHRjb25zb2xlLmxvZyhyZXN1bHQpO1xuXHRcdFx0aWYgKCFyZXN1bHQpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gdmFsaWRGb3JtKCkge1xuXHR2YXIgdmFsaWQgPSB0cnVlO1xuXHR2YXIgcmVxdWlyZWRGaWVsZHMgPSAkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSlcblx0XHQuZmluZCgnaW5wdXQsdGV4dGFyZWEsc2VsZWN0Jylcblx0XHQuZmlsdGVyKCdbcmVxdWlyZWRdJyk7XG5cdHJlcXVpcmVkRmllbGRzLmVhY2goZnVuY3Rpb24gKGksIGZpZWxkKSB7XG5cdFx0aWYgKGZpZWxkLnZhbHVlID09PSAnJykge1xuXHRcdFx0dmFsaWQgPSBmYWxzZTtcblx0XHRcdCQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlICsgJyBmb3JtJylcblx0XHRcdFx0LmZpbmQoJ2lucHV0W3R5cGU9c3VibWl0XScpXG5cdFx0XHRcdC50cmlnZ2VyKCdjbGljaycpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiB2YWxpZDtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVGb3JtKCRmb3JtKSB7XG5cdHZhciBmaWVsZHMgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5mb3JtLmZpZWxkcztcblxuXHQkZm9ybS5odG1sKCcnKTtcblx0Zm9yICh2YXIga2V5IGluIGZpZWxkcykge1xuXHRcdHZhciBmaWVsZCA9IGZpZWxkc1trZXldO1xuXG5cdFx0dmFyIGlucHV0SUQgPSBnbG9iYWxWYXIuY3VyU2xpZGUudG9Mb3dlckNhc2UoKSArICctJyArIGZpZWxkLmNsYXNzO1xuXG5cdFx0aWYgKGZpZWxkLmxhYmVsKSB7XG5cdFx0XHR2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuXG5cdFx0XHRsYWJlbC5odG1sRm9yID0gaW5wdXRJRDtcblx0XHRcdCQobGFiZWwpLnRleHQoZmllbGQubGFiZWwpO1xuXG5cdFx0XHQkZm9ybS5hcHBlbmQobGFiZWwpO1xuXHRcdH1cblx0XHQvLyBlc3RhYmxpc2ggdHlwZVxuXHRcdHN3aXRjaCAoZmllbGQudHlwZSkge1xuXHRcdFx0Y2FzZSAnY2hlY2tib3gnOlxuXHRcdFx0XHRmaWVsZC5vcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbikge1xuXHRcdFx0XHRcdHZhciBvcHRpb25MYWJlbCA9IG9wdGlvbi50b0xvd2VyQ2FzZSgpLnNwbGl0KCcgJykuam9pbignLScpO1xuXHRcdFx0XHRcdHZhciByYWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cdFx0XHRcdFx0dmFyIHJhZGlvTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuXG5cdFx0XHRcdFx0cmFkaW9MYWJlbC5odG1sRm9yID0gZmllbGQuY2xhc3MgKyAnLScgKyBvcHRpb25MYWJlbDtcblx0XHRcdFx0XHQkKHJhZGlvTGFiZWwpLmFkZENsYXNzKGZpZWxkLmNsYXNzICsgJy1jb250YWluZXIgcmFkaW8tY29udGFpbmVyJyk7XG5cblx0XHRcdFx0XHRyYWRpby5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAncmFkaW8nKTtcblx0XHRcdFx0XHRyYWRpby5pZCA9IGZpZWxkLmNsYXNzICsgJy0nICsgb3B0aW9uTGFiZWw7XG5cdFx0XHRcdFx0cmFkaW8ucmVxdWlyZWQgPSAhZmllbGQub3B0aW9uYWw7XG5cdFx0XHRcdFx0cmFkaW8ubmFtZSA9IGZpZWxkLmNsYXNzO1xuXHRcdFx0XHRcdHJhZGlvLnZhbHVlID0gb3B0aW9uO1xuXHRcdFx0XHRcdCQocmFkaW8pLmFkZENsYXNzKGZpZWxkLmNsYXNzKTtcblxuXHRcdFx0XHRcdCRmb3JtLmFwcGVuZChyYWRpb0xhYmVsKTtcblx0XHRcdFx0XHQkKHJhZGlvTGFiZWwpLmFwcGVuZChyYWRpbyk7XG5cblx0XHRcdFx0XHRzd2l0Y2ggKGZpZWxkLnN0eWxlKSB7XG5cdFx0XHRcdFx0XHRjYXNlICd4Jzpcblx0XHRcdFx0XHRcdFx0dmFyIGN1c3RvbUNoZWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuXG5cdFx0XHRcdFx0XHRcdCQocmFkaW8pLmFkZENsYXNzKCdoaWRlLXJhZGlvJyk7XG5cdFx0XHRcdFx0XHRcdCQoY3VzdG9tQ2hlY2spLmFkZENsYXNzKGZpZWxkLmNsYXNzICsgJy1zdHlsZSB4LXN0eWxlJyk7XG5cblx0XHRcdFx0XHRcdFx0JChyYWRpb0xhYmVsKS5hcHBlbmQoY3VzdG9tQ2hlY2spO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ2RvdCc6XG5cdFx0XHRcdFx0XHRcdHZhciBjdXN0b21DaGVjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuXHRcdFx0XHRcdFx0XHQkKHJhZGlvKS5hZGRDbGFzcygnaGlkZS1yYWRpbycpO1xuXHRcdFx0XHRcdFx0XHQkKGN1c3RvbUNoZWNrKS5hZGRDbGFzcyhmaWVsZC5jbGFzcyArICctc3R5bGUgZG90LXN0eWxlJyk7XG5cblx0XHRcdFx0XHRcdFx0JChyYWRpb0xhYmVsKS5hcHBlbmQoY3VzdG9tQ2hlY2spO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGZpZWxkLmxhYmVscykge1xuXHRcdFx0XHRcdFx0dmFyIHNMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcblxuXHRcdFx0XHRcdFx0JChzTGFiZWwpLmFkZENsYXNzKGZpZWxkLmNsYXNzICsgJy1vcHRpb24tbGFiZWwnKTtcblx0XHRcdFx0XHRcdCQoc0xhYmVsKS50ZXh0KG9wdGlvbik7XG5cblx0XHRcdFx0XHRcdCQocmFkaW9MYWJlbCkuYXBwZW5kKHNMYWJlbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdkcm9wZG93bic6XG5cdFx0XHRcdHZhciBkcm9wZG93biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NlbGVjdCcpO1xuXHRcdFx0XHRkcm9wZG93bi5pZCA9IGlucHV0SUQ7XG5cdFx0XHRcdGRyb3Bkb3duLnJlcXVpcmVkID0gIWZpZWxkLm9wdGlvbmFsO1xuXHRcdFx0XHQkKGRyb3Bkb3duKS5hZGRDbGFzcyhmaWVsZC5jbGFzcyArICcgJyArIGZpZWxkLmNsYXNzICsgJy1zdHlsZScpO1xuXHRcdFx0XHQkKGRyb3Bkb3duKS5hcHBlbmQoJzxvcHRpb24gdmFsdWU9XCJcIj5TZWxlY3QgT25lPC9vcHRpb24+Jyk7XG5cdFx0XHRcdGZpZWxkLm9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uKSB7XG5cdFx0XHRcdFx0JChkcm9wZG93bikuYXBwZW5kKCc8b3B0aW9uIHZhbHVlPVwiJyArIG9wdGlvbiArICdcIj4nICsgb3B0aW9uICsgJzwvb3B0aW9uPicpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0JGZvcm0uYXBwZW5kKGRyb3Bkb3duKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHQvLyBjcmVhdGUgZmllbGRcblx0XHRcdFx0aWYgKCFmaWVsZC5zZXBhcmF0ZSkge1xuXHRcdFx0XHRcdHZhciB0ZXh0SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuXG5cdFx0XHRcdFx0dGV4dElucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG5cdFx0XHRcdFx0dGV4dElucHV0LnJlcXVpcmVkID0gIWZpZWxkLm9wdGlvbmFsO1xuXHRcdFx0XHRcdHRleHRJbnB1dC5pZCA9IGlucHV0SUQ7XG5cdFx0XHRcdFx0aWYgKGZpZWxkLm1heExlbmd0aCkgdGV4dElucHV0Lm1heExlbmd0aCA9IGZpZWxkLm1heExlbmd0aDtcblx0XHRcdFx0XHRpZiAoZmllbGQucGxhY2Vob2xkZXIpIHRleHRJbnB1dC5wbGFjZWhvbGRlciA9IGZpZWxkLnBsYWNlaG9sZGVyO1xuXHRcdFx0XHRcdCQodGV4dElucHV0KS5hZGRDbGFzcyhmaWVsZC5jbGFzcyArICcgJyArIGZpZWxkLmNsYXNzICsgJy1zdHlsZScpO1xuXG5cdFx0XHRcdFx0JGZvcm0uYXBwZW5kKHRleHRJbnB1dCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gc2VwYXJhdGUgZmllbGRzIHBlciBsZXR0ZXJcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGZpZWxkLmFuc3dlci5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0dmFyIHRleHRJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cblx0XHRcdFx0XHRcdGlmICghaSkgdGV4dElucHV0LmlkID0gaW5wdXRJRDtcblx0XHRcdFx0XHRcdHRleHRJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuXHRcdFx0XHRcdFx0dGV4dElucHV0Lm1heExlbmd0aCA9IDE7XG5cdFx0XHRcdFx0XHR0ZXh0SW5wdXQucmVxdWlyZWQgPSAhZmllbGQub3B0aW9uYWw7XG5cdFx0XHRcdFx0XHQkKHRleHRJbnB1dCkuYWRkQ2xhc3MoXG5cdFx0XHRcdFx0XHRcdGZpZWxkLmNsYXNzICtcblx0XHRcdFx0XHRcdFx0XHQnICcgK1xuXHRcdFx0XHRcdFx0XHRcdGZpZWxkLmNsYXNzICtcblx0XHRcdFx0XHRcdFx0XHQnLXN0eWxlICcgK1xuXHRcdFx0XHRcdFx0XHRcdGZpZWxkLmNsYXNzICtcblx0XHRcdFx0XHRcdFx0XHQnLScgK1xuXHRcdFx0XHRcdFx0XHRcdChpICsgMSkgK1xuXHRcdFx0XHRcdFx0XHRcdCctc3R5bGUgc2VwYXJhdGVkJ1xuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0JGZvcm0uYXBwZW5kKHRleHRJbnB1dCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxufVxuIiwidmFyIGNoYXB0ZXJOYXZpZ2F0aW9uU2xpZGVzID0gWydWMScsICdJMScsICdJMicsICdJMyddO1xudmFyIGNoYXB0ZXJDb21wbGV0aW9uU2xpZGVzID0gWydWMScsICdJMScsICdJMicsICdJMyddO1xuXG5mdW5jdGlvbiBpbml0U2lkZU1lbnUoKSB7XG5cdHZhciAkbWVudSA9ICQoJyNzaS1zaWRlLW1lbnUnKTtcblx0dmFyICRjb250YWluZXIgPSAkKCcjc2ktc2lkZS1tZW51LWNvbnRhaW5lcicpO1xuXHR2YXIgYnV0dG9ucyA9ICQoJy5zaS1tZW51LW5hdmlnYXRpb24nKS5maW5kKCdidXR0b24nKTtcblxuXHQkbWVudS5vbignY2xpY2suc3RvcCcsIGZ1bmN0aW9uIChlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0fSk7XG5cdCRjb250YWluZXIub24oJ2NsaWNrLnNpZGUnLCBmdW5jdGlvbiAoZSkge1xuXHRcdGNsb3NlU2lkZU1lbnUoKTtcblx0fSk7XG5cblx0YnV0dG9ucy5lYWNoKGZ1bmN0aW9uIChpZHgsIGJ1dHRvbikge1xuXHRcdCQoYnV0dG9uKS5vbignY2xpY2suc2lkZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBpZCA9IGNoYXB0ZXJOYXZpZ2F0aW9uU2xpZGVzW2lkeF07XG5cdFx0XHRqdW1wVG9JZChpZCk7XG5cdFx0XHRjbG9zZVNpZGVNZW51KCk7XG5cdFx0fSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBvcGVuU2lkZU1lbnUoKSB7XG5cdHZhciAkbWVudSA9ICQoJyNzaS1zaWRlLW1lbnUnKTtcblx0dmFyICRjb250YWluZXIgPSAkKCcjc2ktc2lkZS1tZW51LWNvbnRhaW5lcicpO1xuXG5cdCRjb250YWluZXIuYWRkQ2xhc3MoJ21lbnUtb3BlbicpO1xuXHQkbWVudS5hZGRDbGFzcygnbWVudS1vcGVuJyk7XG5cdC8vIHRoaXMgaXMgZm9yIHBhdXNpbmcgdGhlIHZpZGVvIHdoZW4geW91IG9wZW4gdGhlIHNpZGUgbWVudVxuXHR2YXIgdHlwZSA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnR5cGU7XG5cdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS52aWRlb0xvYWRlZCAmJiB0eXBlID09ICd2aWRlbycpIHtcblx0XHR2aWRlb2pzKGdsb2JhbFZhci4kY3VyU2xpZGUuZmluZCgndmlkZW8nKVswXS5pZCkucGF1c2UoKTtcblx0fVxuXG5cdGhhbmRsZVNpZGVCdXR0b25zKCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlU2lkZU1lbnUoKSB7XG5cdHZhciAkbWVudSA9ICQoJyNzaS1zaWRlLW1lbnUnKTtcblx0dmFyICRjb250YWluZXIgPSAkKCcjc2ktc2lkZS1tZW51LWNvbnRhaW5lcicpO1xuXG5cdCRjb250YWluZXIucmVtb3ZlQ2xhc3MoJ21lbnUtb3BlbicpO1xuXHQkbWVudS5yZW1vdmVDbGFzcygnbWVudS1vcGVuJyk7XG5cdC8vIHVucGF1c2UgdGhlIHZpZGVvIHdoZW4geW91IGNsb3NlIHRoZSBzaWRlIG1lbnVcblx0dmFyIHR5cGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS50eXBlO1xuXHRpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0udmlkZW9Mb2FkZWQgJiYgdHlwZSA9PSAndmlkZW8nKSB7XG5cdFx0aWYgKHZpZGVvanMoZ2xvYmFsVmFyLiRjdXJTbGlkZS5maW5kKCd2aWRlbycpWzBdLmlkKS5wYXVzZWQoKSkge1xuXHRcdFx0dmlkZW9qcyhnbG9iYWxWYXIuJGN1clNsaWRlLmZpbmQoJ3ZpZGVvJylbMF0uaWQpLnBsYXkoKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlU2lkZUJ1dHRvbnMoKSB7XG5cdHZhciBidXR0b25zID0gJCgnLnNpLW1lbnUtbmF2aWdhdGlvbicpLmZpbmQoJ2J1dHRvbicpO1xuXHR2YXIgY2hlY2tzID0gJCgnLnNpLW1lbnUtY2hlY2tzX19qcycpO1xuXG5cdGxvY2soJChidXR0b25zKSk7XG5cdHVubG9jaygkKGJ1dHRvbnNbMF0pKTtcblx0YnV0dG9ucy5lYWNoKGZ1bmN0aW9uIChpZHgsIGJ1dHRvbikge1xuXHRcdGlmIChnZXRDb21wbGV0aW9uU3RhdHVzKGNoYXB0ZXJDb21wbGV0aW9uU2xpZGVzW2lkeF0pKSB7XG5cdFx0XHQkKGNoZWNrc1tpZHhdKS5hZGRDbGFzcygnY29tcGxldGVkJyk7XG5cdFx0XHRpZiAoYnV0dG9uc1tpZHggKyAxXSkge1xuXHRcdFx0XHR1bmxvY2soJChidXR0b25zW2lkeCArIDFdKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn1cbiIsInZhciBjdXJDaGFwdGVyO1xudmFyIHNhdmVEYXRhID0ge307XG52YXIgYm9va21hcmtlZFNsaWRlO1xudmFyIGNoYXJ0UHJvZ3Jlc3NSZWNvcmRlZCA9IHt9O1xuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuXHRpbml0Q291cnNlKCk7XG5cdGRvY3VtZW50U2V0dXAoKTtcblx0Y2hhcnRQcm9ncmVzcygpO1xuXHRpZiAoIWdsb2JhbFZhci5kZXZNb2RlICYmIChsbXNDb25uZWN0ZWQgfHwgdXNlTG9jYWwpKSB7XG5cdFx0anVtcFRvU2xpZGUoYm9va21hcmtlZFNsaWRlKTtcblx0fVxuXHQvLyBFbGVtZW50cyB0byBpbmplY3Rcblx0dmFyIG15U1ZHc1RvSW5qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nLmluamVjdC1tZScpO1xuXHQvLyBEbyB0aGUgaW5qZWN0aW9uLiBrZWVwIGxhc3QhISFcblx0U1ZHSW5qZWN0b3IobXlTVkdzVG9JbmplY3QpO1xufSk7XG5cbmZ1bmN0aW9uIGZpcnN0VGltZVNldHVwKCkge1xuXHQvL2ZpcnN0IGFuZCBvbmx5IGV4ZWN1dGlvbiBvZiBjb2RlLCB3aGVuIHRoZSBjb3Vyc2Ugc3RhcnRzIGZpcnN0IHRpbWUgZ2l2ZXMgYWxsIHNsaWRlcyBhIG51bWJlciBhbmQgc2V0cyBkZWZhdWx0cyBmb3IgdXNlciBhdHRlbXB0cyBhbmQgdHJ5c1xuXHR2YXIga2V5cyA9IE9iamVjdC5rZXlzKHNsaWRlcyk7XG5cdGtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5LCBpZHgpIHtcblx0XHR2YXIgdHlwZSA9IHNsaWRlc1trZXldLnR5cGU7XG5cblx0XHQvLyBnaXZlIHNsaWRlbnVtYmVyIHVzZWQgZm9yIGJvb2ttYXJraW5nXG5cdFx0aWYgKHNsaWRlc1trZXldLnNsaWRlTnVtYmVyID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHNsaWRlc1trZXldLnNsaWRlTnVtYmVyID0gaWR4ICsgMTtcblx0XHR9XG5cdFx0Ly8gc2V0IHVzZXIgYXR0ZW1wdHMgYW5kIHRyeXMgaWYgbm90IGRlZmluZWRcblx0XHRpZiAoc2xpZGVzW2tleV1bdHlwZV0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYgKHNsaWRlc1trZXldW3R5cGVdLnVzZXJBdHRlbXB0cyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHNsaWRlc1trZXldW3R5cGVdLnVzZXJBdHRlbXB0cyA9IDA7XG5cdFx0XHR9XG5cdFx0XHRpZiAoc2xpZGVzW2tleV1bdHlwZV0udHJ5cyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHNsaWRlc1trZXldW3R5cGVdLnRyeXMgPSAwO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzbGlkZXNba2V5XVt0eXBlXSA9IHtcblx0XHRcdFx0dXNlckF0dGVtcHRzOiAwLFxuXHRcdFx0XHR0cnlzOiAwXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIENyZWF0ZSB0aGUgb2JqZWN0IHNlbnQgdG8gdGhlIExNUyB0byBwZXJzaXN0IHNsaWRlIGNvbXBsZXRpb25cblx0XHQvLyBzZXQgaW5jbHVkZSB0byBmYWxzZSBvbiBhIHNsaWRlIGluIG9yZGVyIHRvIGV4Y2x1ZGUgaXQgZnJvbSB0aGUgY291cnNlIHByb2dyZXNzaW9uXG5cdFx0aWYgKHNsaWRlc1trZXldLmluY2x1ZGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0c2xpZGVzW2tleV0uaW5jbHVkZSA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKHNsaWRlc1trZXldLmluY2x1ZGUpIHtcblx0XHRcdHZhciBwYXRoID0gc2xpZGVzW2tleV0uY29tcGxldGlvblBhdGg7XG5cblx0XHRcdGlmICghc2F2ZURhdGEuc2xpZGVDb21wbGV0aW9uKSBzYXZlRGF0YS5zbGlkZUNvbXBsZXRpb24gPSB7fTtcblxuXHRcdFx0dmFyIHNsaWRlQ29tcGxldGlvbiA9IHNhdmVEYXRhLnNsaWRlQ29tcGxldGlvbjtcblxuXHRcdFx0aWYgKHBhdGgpIHtcblx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkocGF0aCkpIHtcblx0XHRcdFx0XHRwYXRoLmZvckVhY2goZnVuY3Rpb24gKHAsIGkpIHtcblx0XHRcdFx0XHRcdGlmICghc2xpZGVDb21wbGV0aW9uW3BdKSBzbGlkZUNvbXBsZXRpb25bcF0gPSB7fTtcblx0XHRcdFx0XHRcdGlmICghc2xpZGVDb21wbGV0aW9uW3BdW2tleV0pIHNsaWRlQ29tcGxldGlvbltwXVtrZXldID0gMDtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIXNsaWRlQ29tcGxldGlvbltwYXRoXSkgc2xpZGVDb21wbGV0aW9uW3BhdGhdID0ge307XG5cdFx0XHRcdFx0aWYgKCFzbGlkZUNvbXBsZXRpb25bcGF0aF1ba2V5XSkgc2xpZGVDb21wbGV0aW9uW3BhdGhdW2tleV0gPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoIXNsaWRlQ29tcGxldGlvbi5tYWluUGF0aCkgc2xpZGVDb21wbGV0aW9uLm1haW5QYXRoID0ge307XG5cdFx0XHRcdGlmICghc2xpZGVDb21wbGV0aW9uLm1haW5QYXRoW2tleV0pIHNsaWRlQ29tcGxldGlvbi5tYWluUGF0aFtrZXldID0gMDtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBkb2N1bWVudFNldHVwKCkge1xuXHRpbml0UHJlbG9hZGVyKCk7XG5cdGdsb2JhbFZhci5jdXJTbGlkZSA9ICQoJ3NlY3Rpb24nICsgJy5wcmVzZW50JylbMF0uaWQ7XG5cdGZpcnN0VGltZVNldHVwKCk7XG5cdGluaXRBdWRpbygpO1xuXHQkKCdhc2lkZScpLnJlbW92ZSgpO1xuXHRpbml0TmF2aWdhdGlvbigpO1xuXHRpbml0U2lkZU1lbnUoKTtcblxuXHRmb3IgKGtleSBpbiBzbGlkZXMpIHtcblx0XHRpZiAoc2xpZGVzW2tleV0udHlwZSA9PSAndmlkZW8nKSB7XG5cdFx0XHRnbG9iYWxWYXIudmlkZW9TZWVuW2tleV0gPSBmYWxzZTtcblx0XHR9XG5cdH1cblx0aWYgKGdsb2JhbFZhci5kZXZNb2RlKSB7XG5cdFx0ZGV2TW9kZSgpO1xuXHR9XG5cblx0aWYgKCQoJyNzaS1wcm9ncmVzcy1tZXRlcicpLmxlbmd0aCAhPSAwKSB7XG5cdFx0Y2hhcnRJbml0aWF0ZSgpO1xuXHR9XG5cdGluaXRGZWVkYmFja3MoKTtcblx0aW5pdFF1aXooKTtcblx0aW5pdE1lbnUoKTtcblx0ZnVuY3Rpb25DYWxscygpO1xuXHRyYW5kb21pemVRdWVzdGlvblNsaWRlcygpO1xuXG5cdFJldmVhbC5hZGRFdmVudExpc3RlbmVyKCdzbGlkZWNoYW5nZWQnLCBmdW5jdGlvbiAoZSkge1xuXHRcdCQoJyNzaS1uYXYtY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ3Zqcy1mYWRlLW91dCcpO1xuXHRcdGdsb2JhbFZhci5jdXJTbGlkZSA9IGUuY3VycmVudFNsaWRlLmlkO1xuXHRcdGdsb2JhbFZhci4kY3VyU2xpZGUgPSAkKGUuY3VycmVudFNsaWRlKTtcblxuXHRcdGNsb3NlU2lkZU1lbnUoKTtcblx0XHRpZiAoc2xpZGVzW2UucHJldmlvdXNTbGlkZS5pZF0gJiYgdHlwZW9mIHNsaWRlc1tlLnByZXZpb3VzU2xpZGUuaWRdLm9uRXhpdEFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0c2xpZGVzW2UucHJldmlvdXNTbGlkZS5pZF0ub25FeGl0QWN0aW9uKCk7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uQ2FsbHMoKTtcblx0fSk7XG5cblx0Ly9zZXQgZm9udCBzaXplc1xuXHR2YXIgZm9udFNpemUgPSAkKCcuc2xpZGVzJykud2lkdGgoKSAvIGdsb2JhbFZhci5mb250U2l6ZUZhY3Rvcjtcblx0JCgnaHRtbCcpLmNzcygnZm9udC1zaXplJywgZm9udFNpemUpO1xuXG5cdCQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGZvbnRTaXplID0gJCgnLnNsaWRlcycpLndpZHRoKCkgLyBnbG9iYWxWYXIuZm9udFNpemVGYWN0b3I7XG5cdFx0XHQkKCdodG1sJykuY3NzKCdmb250LXNpemUnLCBmb250U2l6ZSk7XG5cdFx0fSwgMSk7XG5cdH0pO1xuXG5cdCQoJ2ltZycpLm9uKCdkcmFnc3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWN0aW9uc09uRXZlcnlTbGlkZUVudGVyKCkge1xuXHQvL3doYXRldmVyIHlvdSB3YW50IHRvIGV4ZWN1dGUgb24gZXZlcnkgc2xpZGUgY2hhbmdlXG59XG5cbi8vZXhlY3V0ZSB3aGF0ZXZlciBpcyBpbnNpZGUgb25FbnRlckFjdGlvbiwgc2V0cyB2aXNpdGVkIHRvIHRydWVcbmZ1bmN0aW9uIG9uRW50ZXJBY3Rpb24oaWQpIHtcblx0aWYgKHNsaWRlc1tpZF0udmlzaXRlZCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0c2xpZGVzW2lkXS52aXNpdGVkID0gZmFsc2U7XG5cdH1cblxuXHQkKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLmJsdXIoKTtcblx0aWYgKHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5vbkVudGVyKSB7XG5cdFx0aWYgKHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXlpbmcoKSkge1xuXHRcdFx0c2lBdWRpby5zZnguY2xpY2sub25jZSgnZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRIb3dsZXIuc3RvcCgpO1xuXHRcdFx0XHRzaUF1ZGlvW2dsb2JhbFZhci5jdXJTbGlkZV0ub25FbnRlci5wbGF5KCk7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0SG93bGVyLnN0b3AoKTtcblx0XHRcdHNpQXVkaW9bZ2xvYmFsVmFyLmN1clNsaWRlXS5vbkVudGVyLnBsYXkoKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0aWYgKHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXlpbmcoKSkge1xuXHRcdFx0c2lBdWRpby5zZnguY2xpY2sub25jZSgnZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRIb3dsZXIuc3RvcCgpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdEhvd2xlci5zdG9wKCk7XG5cdFx0fVxuXHR9XG5cblx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHNsaWRlc1tpZF0ub25FbnRlckFjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRzbGlkZXNbaWRdLm9uRW50ZXJBY3Rpb24oKTtcblx0XHR9XG5cblx0XHRzbGlkZXNbaWRdLnZpc2l0ZWQgPSB0cnVlO1xuXHR9LCAxMCk7XG5cdGlmIChsbXNDb25uZWN0ZWQgJiYgaWQgIT09ICdzdGFydCcpIHtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdHNhdmVMTVMoKTtcblx0XHR9LCAxMDAwKTtcblx0fVxuXHRpZiAodXNlTG9jYWwgJiYgaWQgIT09ICdzdGFydCcpIHtcblx0XHRzYXZlUHJvZ3Jlc3NMb2NhbGx5KCk7XG5cdH1cbn1cblxuLy9PcmRlciBvZiBjYWxsaW5nIHRoZSBmdW5jdGlvbnMgdG8gZ2VuZXJhdGUgdGhlIGN1cnJlbnQgc2xpZGVcbmZ1bmN0aW9uIGZ1bmN0aW9uQ2FsbHMoKSB7XG5cdCQoJ2JvZHknKS5vZmYoKTtcblx0Z2xvYmFsVmFyLiRjdXJTbGlkZSA9ICQoJy5zbGlkZXMgPiBzZWN0aW9uLnByZXNlbnQnKTtcblx0Z2xvYmFsVmFyLmN1clNsaWRlID0gJCgnLnNsaWRlcyA+IC5wcmVzZW50JylbMF0uaWQ7XG5cblx0b25FbnRlckFjdGlvbihnbG9iYWxWYXIuY3VyU2xpZGUpO1xuXHRhY3Rpb25zT25FdmVyeVNsaWRlRW50ZXIoKTtcblx0c2hvd05hdkVsZW1lbnRzKCk7XG5cdGVsZW1lbnRzRmFkaW5nT25TbGlkZSgpO1xuXG5cdHN3aXRjaCAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0udHlwZSkge1xuXHRcdGNhc2UgJ21lbnUnOlxuXHRcdFx0bWVudUZ1bmN0aW9ucygpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnZG5kJzpcblx0XHRcdGRuZEZ1bmN0aW9ucygpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnc29ydCc6XG5cdFx0XHRzb3J0RnVuY3Rpb25zKCk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdob3RzcG90Jzpcblx0XHRcdGhvdHNwb3RGdW5jdGlvbnMoKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2Zvcm0nOlxuXHRcdFx0Zm9ybUZ1bmN0aW9ucygpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAncXVpeic6XG5cdFx0XHRxdWl6RnVuY3Rpb24oKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3ZpZGVvJzpcblx0XHRcdHZpZGVvQ2hlY2soKTtcblx0XHRcdGJyZWFrO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRicmVhaztcblx0fVxuXG5cdGlmICgkKCcjc2ktcHJvZ3Jlc3MtbWV0ZXInKS5sZW5ndGggIT0gMCkge1xuXHRcdGNoYXJ0UHJvZ3Jlc3MoKTtcblx0fVxuXG5cdC8vIElFOSBCdWdmaXhcblx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0JCgnc2VjdGlvbi5mdXR1cmUnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuXHRcdCQoJ3NlY3Rpb24ucGFzdCcpLmNzcygnZGlzcGxheScsICdub25lJyk7XG5cdH0sIDU1KTtcbn1cblxuLy8vLy8vLy8vLy8vKkZlYXR1cmU6IFF1ZXN0aW9uIENoZWNrIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vLyBUaGlzIGZ1bmN0aW9uIGNvbnRhaW5zIHRoZSBtYWluIGxvZ2ljIGluIGRldGVybWluaW5nIGlmIGEgcXVlc3Rpb24gaXMgcmlnaHQgb3Igd3Jvbmdcbi8vIEl0IGRldGVybWluZXMgdGhlIHF1ZXN0aW9uIHR5cGUsIHJ1bnMgdGhlIGxvZ2ljIGZvciB0aGF0IHR5cGUgYW5kIHJldHVybnMgYSBib29sZWFuXG4vLyBUaGlzIGJvb2xlYW4sIGNhbGxlZCBib2wsICBpcyBmZWQgYXMgYW4gYXJndW1lbnQgdG8gRkJDaGVjayhib2wpIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciBoYW5kbGluZyBmZWVkYmFjayByZXNwb25zZXNcblxuLy8gVG8gYWRkIHVuaXF1ZSBsb2dpYyBmb3IgYSBjdXN0b20gdHlwZSwgZXh0ZW5kIHRoZSBtYWluIHN3aXRjaCBzdGF0ZW1lbnQsIGFzc2lnbiB0cnVlIG9yIGZhbHNlIHRvIGJvbCwgdGhlbiAnYnJlYWsnXG5mdW5jdGlvbiBjaGVja1F1ZXN0aW9uKHR5cGUpIHtcblx0dmFyIGJvbCA9IHRydWU7XG5cdHZhciBib2wyO1xuXHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRjYXNlICdxdWl6Jzpcblx0XHRcdHZhciBjb3JyZWN0QW5zd2VycyA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLnF1aXouYW5zd2Vycztcblx0XHRcdHZhciBzZWxlY3RlZEFuc3dlcnMgPSB7fTtcblx0XHRcdHZhciBjaG9pY2VzID0gJCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUgKyAnIC5zaS1xdWl6LWFuc3dlcicpO1xuXHRcdFx0Y2hvaWNlcy5lYWNoKGZ1bmN0aW9uIChpZHgsIGNob2ljZSkge1xuXHRcdFx0XHR2YXIgaWQgPSAkKGNob2ljZSkuYXR0cignaWQnKTtcblx0XHRcdFx0aWYgKCQoY2hvaWNlKS5oYXNDbGFzcygnc2ktcXVpei1zZWxlY3RlZCcpKSB7XG5cdFx0XHRcdFx0c2VsZWN0ZWRBbnN3ZXJzW2lkXSA9IDE7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VsZWN0ZWRBbnN3ZXJzW2lkXSA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFjb3JyZWN0QW5zd2Vyc1tpZF0pIHtcblx0XHRcdFx0XHRjb3JyZWN0QW5zd2Vyc1tpZF0gPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGZvciAoYW5zd2VyIGluIHNlbGVjdGVkQW5zd2Vycykge1xuXHRcdFx0XHRpZiAoY29ycmVjdEFuc3dlcnNbYW5zd2VyXSAhPT0gc2VsZWN0ZWRBbnN3ZXJzW2Fuc3dlcl0pIHtcblx0XHRcdFx0XHRib2wgPSBmYWxzZTtcblx0XHRcdFx0XHRyZXR1cm4gYm9sO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWJvbCkge1xuXHRcdFx0XHRyZXR1cm4gYm9sO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnaG90c3BvdCc6XG5cdFx0XHR2YXIgcXVpeiA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmhvdHNwb3QucXVpejtcblx0XHRcdGlmICghcXVpeikgdGhyb3cgJ1xcbkhvdHNwb3QgRXJyb3I6XFxueW91IGhhdmUgdG8gdHVybiBvbiB0aGUgXCJxdWl6XCIgc2V0dGluZ3MgdG8gdXNlIGhvdHNwb3RzIHRoaXMgd2F5Jztcblx0XHRcdGlmICghcXVpei5hbnN3ZXJzLmxlbmd0aCkgdGhyb3cgJ1xcbkhvdHNwb3QgRXJyb3I6XFxucXVpeiBhbnN3ZXJzIG11c3QgYmUgaW4gYW4gYXJyYXknO1xuXHRcdFx0aWYgKHF1aXoudHlwZSA9PT0gJ3NjcScgJiYgcXVpei5hbnN3ZXJzLmxlbmd0aCA+IDEpXG5cdFx0XHRcdHRocm93ICdcXG5Ib3RzcG90IEVycm9yOlxcbmZvciB0eXBlIFwic2NxXCIgeW91IG11c3QgaGF2ZSBvbmx5IG9uZSBhbnN3ZXInO1xuXHRcdFx0dmFyIGNvcnJlY3RBbnN3ZXJzID0gcXVpei5hbnN3ZXJzO1xuXHRcdFx0dmFyIHNlbGVjdGVkQW5zd2VycyA9IHF1aXouc2VsZWN0ZWRBbnN3ZXJzO1xuXHRcdFx0Ym9sID0gSlNPTi5zdHJpbmdpZnkoc2VsZWN0ZWRBbnN3ZXJzKSA9PT0gSlNPTi5zdHJpbmdpZnkoY29ycmVjdEFuc3dlcnMpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnZm9ybSc6XG5cdFx0XHRib2wgPSBjaGVja0Zvcm0oKTtcblx0XHRcdGlmICghYm9sKSByZXR1cm47XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdkbmQnOlxuXHRcdFx0dmFyIHVzZXJBbnN3ZXJzID0gZ2xvYmFsVmFyLmRuZEFuc3dlcnM7XG5cdFx0XHRmb3IgKGtleSBpbiBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5kbmQucXVpeikge1xuXHRcdFx0XHR2YXIgY29ycmVjdEFuc3dlciA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmRuZC5xdWl6W2tleV0uc29ydCgpO1xuXHRcdFx0XHR2YXIgdXNlckFuc3dlciA9IHVzZXJBbnN3ZXJzW2tleV0uc29ydCgpO1xuXHRcdFx0XHRpZiAoc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uZG5kLm11bHRpcGxlQW5zd2Vycykge1xuXHRcdFx0XHRcdHZhciBpbmNsdWRlZCA9IHRydWU7XG5cdFx0XHRcdFx0aWYgKHVzZXJBbnN3ZXIubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRpbmNsdWRlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAoY29ycmVjdEFuc3dlci5pbmRleE9mKHVzZXJBbnN3ZXJbMF0pIDwgMCkge1xuXHRcdFx0XHRcdFx0XHRpbmNsdWRlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIWluY2x1ZGVkKSB7XG5cdFx0XHRcdFx0XHRib2wgPSBmYWxzZTtcblx0XHRcdFx0XHRcdHJldHVybiBib2w7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChjb3JyZWN0QW5zd2VyLmxlbmd0aCAhPT0gdXNlckFuc3dlci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdGJvbCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGJvbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjb3JyZWN0QW5zd2VyLmZvckVhY2goZnVuY3Rpb24gKGFuc3dlciwgaWR4KSB7XG5cdFx0XHRcdFx0XHRpZiAodXNlckFuc3dlcltpZHhdICE9PSBhbnN3ZXIpIHtcblx0XHRcdFx0XHRcdFx0Ym9sID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBib2w7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYm9sID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdHJldHVybiBib2w7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3NvcnQnOlxuXHRcdFx0Ym9sID0gdHJ1ZTtcblx0XHRcdHZhciBsaXN0QXJyYXkgPSBPYmplY3Qua2V5cyhzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVt0eXBlXS5zb3J0YWJsZXMpO1xuXHRcdFx0dmFyIGFuc3dlckFycmF5ID0gW107XG5cdFx0XHRsaXN0QXJyYXkuZm9yRWFjaChmdW5jdGlvbiAobGlzdCkge1xuXHRcdFx0XHRhbnN3ZXJBcnJheS5wdXNoKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnNvcnRhYmxlc1tsaXN0XS5hbnN3ZXIpO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIGNoZWNrIHRoYXQgYW5zd2VycyBoYXZlIGJlZW4gcHJvdmlkZWQgZm9yIGFsbCBzb3J0YWJsZSBsaXN0cyBiZWZvcmUgcHJvY2VlZGluZ1xuXHRcdFx0aWYgKGxpc3RBcnJheS5sZW5ndGggIT09IGFuc3dlckFycmF5Lmxlbmd0aCkge1xuXHRcdFx0XHRib2wgPSBmYWxzZTtcblx0XHRcdFx0cmV0dXJuIGJvbDtcblx0XHRcdH1cblxuXHRcdFx0bGlzdEFycmF5LmZvckVhY2goZnVuY3Rpb24gKGxpc3RJZCwgaWR4KSB7XG5cdFx0XHRcdHZhciBwb3NzaWJsZUFuc3dlciA9ICQoJyMnICsgbGlzdElkKS5zb3J0YWJsZSgndG9BcnJheScpO1xuXG5cdFx0XHRcdC8vIEluY29ycmVjdCBpZiB0aGUgYW1vdW50IG9mIGl0ZW1zIGluIHRoZSBjaGVja2VkIHNvcnRhYmxlIGRvZXMgbm90IG1hdGNoIHRoZSBhbW91bnQgb2YgYW5zd2VycyBwcm92aWRlZCBpbiB0aGUgYW5zd2VyIGtleVxuXHRcdFx0XHRpZiAocG9zc2libGVBbnN3ZXIubGVuZ3RoICE9PSBhbnN3ZXJBcnJheVtpZHhdLmxlbmd0aCkge1xuXHRcdFx0XHRcdGJvbCA9IGZhbHNlO1xuXHRcdFx0XHRcdHJldHVybiBib2w7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBFeGN1dGVzIGlmIHVub3JkZXJlZCBrZXkgaXMgc2V0IHRvIGZhbHNlIG9yIGlmIGtleSBpcyBhYnNlbnRcblx0XHRcdFx0Ly8gVGhpcyBicmFuY2ggaXMgb25seSBjb3JyZWN0IGlmIHRoZSBzdWJtaXR0ZWQgYW5zd2VyIG1hdGNoZXMgdGhlIGFuc3dlciBrZXkgaW4gYm90aCBjb250ZW50IEFORCBvcmRlclxuXHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV1bdHlwZV0udW5vcmRlcmVkID09PSBmYWxzZSB8fFxuXHRcdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdW3R5cGVdLnVub3JkZXJlZCA9PT0gdW5kZWZpbmVkXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHBvc3NpYmxlQW5zd2VyLmZvckVhY2goZnVuY3Rpb24gKGFuc3dlciwgaWR4Mikge1xuXHRcdFx0XHRcdFx0aWYgKGFuc3dlciAhPT0gYW5zd2VyQXJyYXlbaWR4XVtpZHgyXSkge1xuXHRcdFx0XHRcdFx0XHRib2wgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJvbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyBFeGVjdXRlcyBpZiB1bm9yZGVyZWQga2V5IGlzIHNldCB0byB0cnVlLlxuXHRcdFx0XHRcdC8vIFRoaXMgYnJhbmNoIGlzIGNvcnJlY3QgaWYgdGhlIHN1Ym1pdHRlZCBhbnN3ZXIgbWF0Y2hlcyB0aGUgYW5zd2VyIGtleSBpbiBjb250ZW50IG9ubHkuIE9yZGVyIGlzIGlycmVsZXZhbnRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRwb3NzaWJsZUFuc3dlci5mb3JFYWNoKGZ1bmN0aW9uIChhbnN3ZXIpIHtcblx0XHRcdFx0XHRcdGlmIChcblx0XHRcdFx0XHRcdFx0IWFuc3dlckFycmF5W2lkeF0uc29tZShmdW5jdGlvbiAoZWwpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZWwgPT09IGFuc3dlcjtcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0XHRib2wgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGJvbDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OlxuXHRcdFx0Ym9sID0gZmFsc2U7XG5cdFx0XHRicmVhaztcblx0fSAvL2VuZCBzd2l0Y2hcblx0cmV0dXJuIGJvbDtcbn0gLy9jaGVja1F1ZXN0aW9uXG4vLy8vLy8vLy8vKkZlYXR1cmU6U2h1ZmZsZWQgU2xpZGVzLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBqdW1wVG9TaHVmZmxlZFNsaWRlKHBhcnQpIHtcblx0dmFyIG4gPSBnbG9iYWxWYXIuc2h1ZmZsZWRTbGlkZXNbcGFydF0ucG9pbnRlcjtcblx0aWYgKG4gPCBnbG9iYWxWYXIuc2h1ZmZsZWRTbGlkZXNbcGFydF0uc2xpZGVzLmxlbmd0aCkge1xuXHRcdGlmIChuID09IG51bGwpIHtcblx0XHRcdC8vZmlyc3QgdGltZSBjYWxsXG5cdFx0XHRuID0gMDtcblx0XHR9XG5cdFx0anVtcFRvU2xpZGUoZ2xvYmFsVmFyLnNodWZmbGVkU2xpZGVzW3BhcnRdLnNsaWRlc1tuXSk7XG5cdFx0bisrO1xuXHRcdGdsb2JhbFZhci5zaHVmZmxlZFNsaWRlc1twYXJ0XS5wb2ludGVyID0gbjtcblx0fVxufVxuXG5mdW5jdGlvbiByZXNldFNodWZmbGVkU2xpZGUocGFydCkge1xuXHRnbG9iYWxWYXIuc2h1ZmZsZWRTbGlkZXNbcGFydF0ucG9pbnRlciA9IG51bGw7XG59XG5cbi8vLy8vLy8vLypGZWF0dXJlOlJhbmRvbWl6ZSBRdWVzdGlvbnMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiByYW5kb21pemVRdWVzdGlvblNsaWRlcygpIHtcblx0aWYgKGdsb2JhbFZhci5yYW5kb21pemVTbGlkZXMudXNlUmFuZG9taXplID09IHRydWUpIHtcblx0XHR2YXIgeCA9IGdsb2JhbFZhci5yYW5kb21pemVTbGlkZXMuc2xpZGVzO1xuXHRcdHZhciBuID0gW107XG5cdFx0aWYgKE9iamVjdC5rZXlzKHgpICE9IDApIHtcblx0XHRcdGZvciAoa2V5IGluIHgpIHtcblx0XHRcdFx0biA9IFtdO1xuXHRcdFx0XHRpZiAoeFtrZXldWzBdIDwgeFtrZXldWzFdKSB7XG5cdFx0XHRcdFx0Ly8xc3QgdmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gMm5kXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IHhba2V5XVswXTsgaSA8PSB4W2tleV1bMV07IGkrKykge1xuXHRcdFx0XHRcdFx0bi5wdXNoKGkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzaHVmZmxlKG4pO1xuXHRcdFx0XHRcdG4ucHVzaCh4W2tleV1bMl0pO1xuXHRcdFx0XHRcdGdsb2JhbFZhci5zaHVmZmxlZFNsaWRlc1trZXldID0ge1xuXHRcdFx0XHRcdFx0c2xpZGVzOiBuLFxuXHRcdFx0XHRcdFx0cG9pbnRlcjogbnVsbFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuLy8vLy8vLy8vLy8vKkZlYXR1cmU6RmFkaW5nLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZWxlbWVudHNGYWRpbmdPblNsaWRlKCkge1xuXHRpZiAoJCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUgKyAnIFtkYXRhLWZhZGVJbk9yZGVyXScpLmxlbmd0aCAhPSAwKSB7XG5cdFx0dmFyIGFyeSA9IFtdO1xuXHRcdCQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlICsgJyBbZGF0YS1mYWRlSW5PcmRlcl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdCQodGhpcykuY3NzKCdvcGFjaXR5JywgJzAnKTtcblx0XHRcdCQodGhpcykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcblx0XHRcdCQodGhpcykuaGlkZSgpO1xuXHRcdFx0dmFyIHRlbXAgPSBbXTtcblx0XHRcdHZhciBzdHIgPSAkKHRoaXMpLmRhdGEoJ2ZhZGVpbm9yZGVyJyk7XG5cdFx0XHR0ZW1wWzBdID0gc3RyO1xuXHRcdFx0dGVtcFsxXSA9ICQodGhpcylbMF07XG5cdFx0XHRhcnkucHVzaCh0ZW1wKTtcblx0XHR9KTtcblx0XHRhcnkuc29ydChzb3J0QXJyYXlNYXRyaXhGdW5jdGlvbik7XG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcnkubGVuZ3RoOyBpKyspIHtcblx0XHRcdGVsZW1lbnRzRmFkZUluKGFyeVtpXVsxXSwgYXJ5W2ldWzBdKTtcblx0XHR9XG5cdH1cblxuXHRpZiAoJCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUgKyAnIFtkYXRhLWZhZGVvdXRvcmRlcl0nKS5sZW5ndGggIT0gMCkge1xuXHRcdHZhciBhcnkgPSBbXTtcblx0XHQkKCcjJyArIGdsb2JhbFZhci5jdXJTbGlkZSArICcgW2RhdGEtZmFkZW91dG9yZGVyXScpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0JCh0aGlzKS5jc3MoJ29wYWNpdHknLCAnMScpO1xuXHRcdFx0JCh0aGlzKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcblx0XHRcdCQodGhpcykuc2hvdygpO1xuXHRcdFx0dmFyIHRlbXAgPSBbXTtcblx0XHRcdHZhciBzdHIgPSAkKHRoaXMpLmRhdGEoJ2ZhZGVvdXRvcmRlcicpO1xuXHRcdFx0dGVtcFswXSA9IHN0cjtcblx0XHRcdHRlbXBbMV0gPSAkKHRoaXMpWzBdO1xuXHRcdFx0YXJ5LnB1c2godGVtcCk7XG5cdFx0fSk7XG5cdFx0YXJ5LnNvcnQoc29ydEFycmF5TWF0cml4RnVuY3Rpb24pO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJ5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRlbGVtZW50c0ZhZGVPdXQoYXJ5W2ldWzFdLCBhcnlbaV1bMF0pO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBlbGVtZW50c0ZhZGVJbihlbCwgeCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHQkKGVsKS5mYWRlVG8oJ2Zhc3QnLCAxKTtcblx0fSwgeCk7XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRzRmFkZU91dChlbCwgeCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHQkKGVsKS5mYWRlVG8oJ2Zhc3QnLCAwKTtcblx0fSwgeCk7XG59XG5cbi8vIGFyeS5zb3J0KHNvcnRBcnJheU1hdHJpeEZ1bmN0aW9uKTsgbXVzdCBiZSBhcnk9W1s0LHh4XSxbMix4eF0sWzEseHhdXVxuZnVuY3Rpb24gc29ydEFycmF5TWF0cml4RnVuY3Rpb24oYSwgYikge1xuXHRpZiAoYVswXSA9PT0gYlswXSkge1xuXHRcdHJldHVybiAwO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBhWzBdIDwgYlswXSA/IC0xIDogMTtcblx0fVxufVxuXG4vLy8vLy8vLy8vLy8qRmVhdHVyZTpNaXNjZWxsYW5lb3VzLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8vc2h1ZmZsZSBhbiBhcnJheSwgcmV0dXJucyBzaHVmZmxlZCBhcnJheVxuLy8gdXNlZCBpbiBzbGlkZSByYW5kb21pemVyIGFuZCBtY3Evc2NxIHJhbmRvbWl6ZXJcbmZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcblx0dmFyIGN1cnJlbnRJbmRleCA9IGFycmF5Lmxlbmd0aCxcblx0XHR0ZW1wb3JhcnlWYWx1ZSxcblx0XHRyYW5kb21JbmRleDtcblx0Ly8gV2hpbGUgdGhlcmUgcmVtYWluIGVsZW1lbnRzIHRvIHNodWZmbGUuLi5cblx0d2hpbGUgKDAgIT09IGN1cnJlbnRJbmRleCkge1xuXHRcdC8vIFBpY2sgYSByZW1haW5pbmcgZWxlbWVudC4uLlxuXHRcdHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY3VycmVudEluZGV4KTtcblx0XHRjdXJyZW50SW5kZXggLT0gMTtcblx0XHQvLyBBbmQgc3dhcCBpdCB3aXRoIHRoZSBjdXJyZW50IGVsZW1lbnQuXG5cdFx0dGVtcG9yYXJ5VmFsdWUgPSBhcnJheVtjdXJyZW50SW5kZXhdO1xuXHRcdGFycmF5W2N1cnJlbnRJbmRleF0gPSBhcnJheVtyYW5kb21JbmRleF07XG5cdFx0YXJyYXlbcmFuZG9tSW5kZXhdID0gdGVtcG9yYXJ5VmFsdWU7XG5cdH1cblx0cmV0dXJuIGFycmF5O1xufVxuXG4vL2FkZHMgZXF1YWxzL2NoZWNrcyB0byBzZWUgaWYgYXJyYXlzIGVxdWFsIGVhY2ggb3RoZXJcbkFycmF5LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAoYXJyYXkpIHtcblx0Ly8gaWYgdGhlIG90aGVyIGFycmF5IGlzIGEgZmFsc3kgdmFsdWUsIHJldHVyblxuXHRpZiAoIWFycmF5KSByZXR1cm4gZmFsc2U7XG5cblx0Ly8gY29tcGFyZSBsZW5ndGhzIC0gY2FuIHNhdmUgYSBsb3Qgb2YgdGltZVxuXHRpZiAodGhpcy5sZW5ndGggIT0gYXJyYXkubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cblx0Zm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdC8vIENoZWNrIGlmIHdlIGhhdmUgbmVzdGVkIGFycmF5c1xuXHRcdGlmICh0aGlzW2ldIGluc3RhbmNlb2YgQXJyYXkgJiYgYXJyYXlbaV0gaW5zdGFuY2VvZiBBcnJheSkge1xuXHRcdFx0Ly8gcmVjdXJzZSBpbnRvIHRoZSBuZXN0ZWQgYXJyYXlzXG5cdFx0XHRpZiAoIXRoaXNbaV0uZXF1YWxzKGFycmF5W2ldKSkgcmV0dXJuIGZhbHNlO1xuXHRcdH0gZWxzZSBpZiAodGhpc1tpXSAhPSBhcnJheVtpXSkge1xuXHRcdFx0Ly8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0cnVlO1xufTtcbi8vIEhpZGUgbWV0aG9kIGZyb20gZm9yLWluIGxvb3BzXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnZXF1YWxzJywge1xuXHRlbnVtZXJhYmxlOiBmYWxzZVxufSk7XG4iLCJmdW5jdGlvbiBpbml0TmF2aWdhdGlvbigpIHtcblx0dmFyIHN3YXBTdHlsZXMgPSAkKCcuc2ktbmF2LXN0eWxlX19qcycpO1xuXHR2YXIgc3dhcEltYWdlcyA9ICQoJy5zaS1pbWctc3dhcF9fanMnKTtcblx0dmFyIGJ1dHRvblR5cGUgPSBnbG9iYWxWYXIuYnV0dG9uVHlwZTtcblxuXHQvLyBzd2FwIGFsbCBzdHlsZSByZWxhdGVkIGltYWdlc1xuXHRzd2FwSW1hZ2VzLmVhY2goZnVuY3Rpb24gKGlkeCwgaW1hZ2UpIHtcblx0XHQkKGltYWdlKS5hdHRyKCdzcmMnLCBmdW5jdGlvbiAoaW5kZXgsIGF0dHIpIHtcblx0XHRcdHJldHVybiBhdHRyLnJlcGxhY2UoJ2NsYXNzaWMnLCBidXR0b25UeXBlKTtcblx0XHR9KTtcblx0fSk7XG5cdHN3YXBTdHlsZXMuZWFjaChmdW5jdGlvbiAoaWR4LCBuYXYpIHtcblx0XHQkKG5hdikuYWRkQ2xhc3MoJ3NpLW5hdi1zdHlsZS0nICsgYnV0dG9uVHlwZSk7XG5cdH0pO1xuXG5cdGF0dGFjaE5hdkV2ZW50TGlzdGVuZXJzKCk7XG59XG5cbmZ1bmN0aW9uIHNob3dOYXZFbGVtZW50cygpIHtcblx0dmFyIG5hdkJ1dHRvbnMgPSAkKCcuc2ktbmF2X19qcycpO1xuXHR2YXIgaWNvbkNsYXNzZXMgPSAnc2ktY2xpY2staWNvbiBzaS1kcmFnLXVwLWljb24gc2ktZHJhZy1kb3duLWljb24gc2ktZHJhZy1sZWZ0LWljb24gc2ktZHJhZy1yaWdodC1pY29uJztcblx0dmFyICRjbGljayA9ICQoJyNzaS1jbGljay1pY29uJyk7XG5cdCQobmF2QnV0dG9ucykuaGlkZSgpO1xuXHQkY2xpY2sucmVtb3ZlQ2xhc3MoaWNvbkNsYXNzZXMpO1xuXG5cdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS5uYXZFbGVtZW50cyA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0c2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubmF2RWxlbWVudHMgPSBbXTtcblx0fVxuXG5cdHZhciBuYXZpZ2F0aW9uID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0ubmF2RWxlbWVudHM7XG5cdG5hdmlnYXRpb24uZm9yRWFjaChmdW5jdGlvbiAobmF2KSB7XG5cdFx0c3dpdGNoIChuYXYpIHtcblx0XHRcdGNhc2UgJ3N0YXJ0LXNsaWRlJzpcblx0XHRcdFx0JCgnI3NpLWNsb2NrJykuc2hvdygpO1xuXHRcdFx0XHQkKCcjc2ktc3RhcnQnKS5zaG93KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnc3RhbmRhcmQtaG9tZSc6XG5cdFx0XHRcdCQoJyNzaS1sb2dvJykuc2hvdygpO1xuXHRcdFx0XHQkKCcjc2ktcHJvZ3Jlc3MnKS5zaG93KCk7XG5cdFx0XHRcdCQoJyNzaS1ob21lJykuc2hvdygpO1xuXHRcdFx0XHQkKCcjc2ktYmFjaycpLnNob3coKTtcblx0XHRcdFx0aWYgKGdldENvbXBsZXRpb25TdGF0dXMoKSkge1xuXHRcdFx0XHRcdCQoJyNzaS1uZXh0Jykuc2hvdygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnc3RhbmRhcmQtbWVudSc6XG5cdFx0XHRcdCQoJyNzaS1sb2dvJykuc2hvdygpO1xuXHRcdFx0XHQkKCcjc2ktcHJvZ3Jlc3MnKS5zaG93KCk7XG5cdFx0XHRcdCQoJyNzaS1tZW51Jykuc2hvdygpO1xuXHRcdFx0XHQkKCcjc2ktYmFjaycpLnNob3coKTtcblx0XHRcdFx0aWYgKGdldENvbXBsZXRpb25TdGF0dXMoKSkge1xuXHRcdFx0XHRcdCQoJyNzaS1uZXh0Jykuc2hvdygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnZXhpdC1zbGlkZSc6XG5cdFx0XHRcdCQoJyNzaS1wcm9ncmVzcycpLnNob3coKTtcblx0XHRcdFx0JCgnI3NpLWV4aXQnKS5zaG93KCk7XG5cdFx0XHRcdCQoJyNzaS1yZXBsYXknKS5zaG93KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnY2xpY2staWNvbic6XG5cdFx0XHRcdCRjbGlja1xuXHRcdFx0XHRcdC5zaG93KClcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoaWNvbkNsYXNzZXMpXG5cdFx0XHRcdFx0LmFkZENsYXNzKCdzaS0nICsgbmF2KTtcblx0XHRcdFx0aGlkZUNsaWNrSWNvbigpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2RyYWctdXAtaWNvbic6XG5cdFx0XHRcdCRjbGlja1xuXHRcdFx0XHRcdC5zaG93KClcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoaWNvbkNsYXNzZXMpXG5cdFx0XHRcdFx0LmFkZENsYXNzKCdzaS0nICsgbmF2KTtcblx0XHRcdFx0aGlkZUNsaWNrSWNvbigpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2RyYWctZG93bi1pY29uJzpcblx0XHRcdFx0JGNsaWNrXG5cdFx0XHRcdFx0LnNob3coKVxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyhpY29uQ2xhc3Nlcylcblx0XHRcdFx0XHQuYWRkQ2xhc3MoJ3NpLScgKyBuYXYpO1xuXHRcdFx0XHRoaWRlQ2xpY2tJY29uKCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnZHJhZy1sZWZ0LWljb24nOlxuXHRcdFx0XHQkY2xpY2tcblx0XHRcdFx0XHQuc2hvdygpXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKGljb25DbGFzc2VzKVxuXHRcdFx0XHRcdC5hZGRDbGFzcygnc2ktJyArIG5hdik7XG5cdFx0XHRcdGhpZGVDbGlja0ljb24oKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdkcmFnLXJpZ2h0LWljb24nOlxuXHRcdFx0XHQkY2xpY2tcblx0XHRcdFx0XHQuc2hvdygpXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKGljb25DbGFzc2VzKVxuXHRcdFx0XHRcdC5hZGRDbGFzcygnc2ktJyArIG5hdik7XG5cdFx0XHRcdGhpZGVDbGlja0ljb24oKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRpZiAobmF2WzBdID09PSAnIScpICQoJyNzaS0nICsgbmF2LnNwbGl0KCchJylbMV0pLmhpZGUoKTtcblx0XHRcdFx0ZWxzZSAkKCcjc2ktJyArIG5hdikuc2hvdygpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBhdHRhY2hOYXZFdmVudExpc3RlbmVycygpIHtcblx0JCgnI3NpLWhvbWUnKS5vbignY2xpY2sgdG91Y2gnLCBmdW5jdGlvbiAoKSB7XG5cdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHRcdGp1bXBUb1NsaWRlKGdsb2JhbFZhci5ob21lU2xpZGUpO1xuXHR9KTtcblxuXHQkKCcjc2ktbWVudScpLm9uKCdjbGljayB0b3VjaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG5cdFx0b3BlblNpZGVNZW51KCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1mdWxsJykub24oJ2NsaWNrIHRvdWNoJywgZnVuY3Rpb24gKCkge1xuXHRcdHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXkoKTtcblx0XHR0b2dnbGVGdWxsc2NyZWVuKCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1iYWNrJykub24oJ2NsaWNrIHRvdWNoJywgZnVuY3Rpb24gKCkge1xuXHRcdHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXkoKTtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnYmFja0FjdGlvbiddKSB7XG5cdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmJhY2tBY3Rpb24oKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHByZXZTbGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0sIDEwMCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1uZXh0Jykub24oJ2NsaWNrIHRvdWNoJywgZnVuY3Rpb24gKCkge1xuXHRcdHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXkoKTtcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnbmV4dEFjdGlvbiddKSB7XG5cdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24oKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5leHRTbGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0sIDEwMCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1yZXBsYXknKS5vbignY2xpY2sgdG91Y2gnLCBmdW5jdGlvbiAoKSB7XG5cdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHRcdGp1bXBUb1NsaWRlKDApO1xuXHR9KTtcblxuXHQkKCcjc2ktZXhpdCcpLm9uKCdjbGljayB0b3VjaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG5cdFx0d2luZG93LmNsb3NlKCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1zdGFydCcpLm9uKCdjbGljayB0b3VjaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG5cdFx0aWYgKHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdWyduZXh0QWN0aW9uJ10pIHtcblx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLm5leHRBY3Rpb24oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bmV4dFNsaWRlKCk7XG5cdFx0fVxuXHR9KTtcblxuXHQkKCcjc2ktc3VibWl0Jykub24oJ2NsaWNrIHRvdWNoJywgZnVuY3Rpb24gKCkge1xuXHRcdHZhciB0aGlzU2xpZGUgPSBzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXTtcblx0XHRpZiAodGhpc1NsaWRlLnR5cGUgPT09ICdmb3JtJyAmJiAhdmFsaWRGb3JtKCkpIHJldHVybjtcblxuXHRcdHNpQXVkaW8uc2Z4LmNsaWNrLnBsYXkoKTtcblx0XHR2YXIgYm9sID0gY2hlY2tRdWVzdGlvbih0aGlzU2xpZGUudHlwZSk7XG5cdFx0aGFuZGxlQW5zd2VyKGJvbCk7XG5cdH0pO1xuXG5cdCQoJyNzaS1yZXNldCcpLm9uKCdjbGljayB0b3VjaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRzaUF1ZGlvLnNmeC5jbGljay5wbGF5KCk7XG5cdFx0c3dpdGNoIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXS50eXBlKSB7XG5cdFx0XHRjYXNlICdkbmQnOlxuXHRcdFx0XHR2YXIgZG5kQXJncyA9IGRuZFJlc2V0T2JqZWN0W2dsb2JhbFZhci5jdXJTbGlkZV07XG5cdFx0XHRcdHJlc2V0RG5EKGRuZEFyZ3NbJ3RpbWUnXSwgZG5kQXJnc1snYW5zd2VycyddKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdzb3J0Jzpcblx0XHRcdFx0cmVzZXRTb3J0KCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAncXVpeic6XG5cdFx0XHRcdHJlc2V0UXVpeigpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2hvdHNwb3QnOlxuXHRcdFx0XHRyZXNldEhvdHNwb3QoKTtcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnY3VzdG9tUmVzZXQnXSkge1xuXHRcdFx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmN1c3RvbVJlc2V0KCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9KTtcblx0JCgnI3NpLWN1c3RvbS1zdWJtaXQnKS5vbignY2xpY2sgdG91Y2gnLCBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHRoaXNTbGlkZSA9IHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdO1xuXHRcdGlmICh0aGlzU2xpZGUudHlwZSA9PT0gJ2Zvcm0nICYmICF2YWxpZEZvcm0oKSkgcmV0dXJuO1xuXG5cdFx0c2lBdWRpby5zZnguY2xpY2sucGxheSgpO1xuXHRcdGlmIChzbGlkZXNbZ2xvYmFsVmFyLmN1clNsaWRlXVsnY3VzdG9tU3VibWl0J10pIHtcblx0XHRcdHNsaWRlc1tnbG9iYWxWYXIuY3VyU2xpZGVdLmN1c3RvbVN1Ym1pdCgpO1xuXHRcdH1cblx0fSk7XG5cblx0JCgnLnNpLW1lbnUtY2xvc2VyJykub24oJ2NsaWNrIHRvdWNoJywgZnVuY3Rpb24gKCkge1xuXHRcdGNsb3NlU2lkZU1lbnUoKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGhpZGVDbGlja0ljb24oKSB7XG5cdCQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlKS5vZmYoJ21vdXNlZG93bi5pY29uJyk7XG5cdCQoJyMnICsgZ2xvYmFsVmFyLmN1clNsaWRlKS5vbignbW91c2Vkb3duLmljb24nLCBmdW5jdGlvbiAoKSB7XG5cdFx0JCgnI3NpLWNsaWNrLWljb24nKS5oaWRlKCk7XG5cdFx0JCgnIycgKyBnbG9iYWxWYXIuY3VyU2xpZGUpLm9mZignbW91c2Vkb3duLmljb24nKTtcblx0fSk7XG59XG5cbi8vIGZ1bmN0aW9uIHVzZWQgYnkgZnVsbHNjcmVlbiBuYXYgYnV0dG9uXG5mdW5jdGlvbiB0b2dnbGVGdWxsc2NyZWVuKCkge1xuXHR2YXIgZWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0dmFyIGZ1bGxzY3JlZW4gPVxuXHRcdGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50IHx8XG5cdFx0ZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHxcblx0XHRkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50IHx8XG5cdFx0ZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQ7XG5cdGlmIChmdWxsc2NyZWVuKSB7XG5cdFx0dmFyIHJlcXVlc3RNZXRob2QgPVxuXHRcdFx0ZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4gfHxcblx0XHRcdGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuIHx8XG5cdFx0XHRkb2N1bWVudC53ZWJraXRFeGl0RnVsbFNjcmVlbiB8fFxuXHRcdFx0ZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbiB8fFxuXHRcdFx0ZG9jdW1lbnQubXNFeGl0RnVsbHNjcmVlbjtcblxuXHRcdGlmIChyZXF1ZXN0TWV0aG9kKSB7XG5cdFx0XHRyZXF1ZXN0TWV0aG9kLmFwcGx5KGRvY3VtZW50KTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0dmFyIHJlcXVlc3RNZXRob2QgPVxuXHRcdFx0ZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbiB8fFxuXHRcdFx0ZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbiB8fFxuXHRcdFx0ZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlbiB8fFxuXHRcdFx0ZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbiB8fFxuXHRcdFx0ZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuO1xuXG5cdFx0aWYgKHJlcXVlc3RNZXRob2QpIHtcblx0XHRcdHJlcXVlc3RNZXRob2QuYXBwbHkoZWxlbWVudCk7XG5cdFx0fVxuXHR9XG59XG5cbi8vIGZ1bmN0aW9uIGluZm9LZXlib2FyZCgpIHtcbi8vICAgICB2YXIgaW5mb0l0ZW1zID0gJCgnLmluZm9JdGVtJyk7XG4vLyAgICAgdmFyIGlkeCA9IDA7XG4vLyAgICAgJCgnI0luZm9fQ2xvc2VyJykuZm9jdXMoKTtcblxuLy8gICAgICQoJ2JvZHknKS5vbigna2V5ZG93bi5kcmFnJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4vLyAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuLy8gICAgICAgICAgICAgY2FzZSA5OiAvL3Jlc3RyaWN0cyB0YWIgbW92ZW1lbnQgdG8gaW5mbyBvdmVybGF5IGVsZW1lbnRzXG4vLyAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbi8vICAgICAgICAgICAgICAgICBpZiAoaWR4IDwgaW5mb0l0ZW1zLmxlbmd0aCAtIDEpIHtcbi8vICAgICAgICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4vLyAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbi8vICAgICAgICAgICAgICAgICAgICAgaWR4ID0gMDtcbi8vICAgICAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICAgICAgJChpbmZvSXRlbXNbaWR4XSkuZm9jdXMoKTtcbi8vICAgICAgICAgICAgICAgICBicmVhaztcbi8vICAgICAgICAgICAgIGNhc2UgMjc6IC8vIGFsbG93cyB1c2VyIHRvIHByZXNzIGVzY2FwZSBrZXkgdG8gcmV0dXJuIHRvIG5vcm1hbFxuLy8gICAgICAgICAgICAgICAgICQoJyNJbmZvX0Nsb3NlcicpLnRyaWdnZXIoJ2NsaWNrJyk7XG4vLyAgICAgICAgICAgICAgICAgYnJlYWs7XG4vLyAgICAgICAgICAgICBkZWZhdWx0OlxuLy8gICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSk7XG4vLyB9XG4iLCJ2YXIgc2Nvcm0gPSBwaXB3ZXJrcy5TQ09STTsgLy9TaG9ydGN1dFxudmFyIGxtc0Nvbm5lY3RlZCA9IGZhbHNlO1xudmFyIHVubG9hZGVkID0gZmFsc2U7XG52YXIgdXNlTG9jYWwgPSBmYWxzZTtcbnZhciBjb3Vyc2VVUkwgPSBidG9hKHdpbmRvdy5sb2NhdGlvbi5ocmVmLnRvU3RyaW5nKCkpO1xudmFyIHByb2dyZXNzVVJMID0gJ3Byb2dyZXNzJyArIGNvdXJzZVVSTDtcbnZhciBib29rbWFya1VSTCA9ICdib29rbWFyaycgKyBjb3Vyc2VVUkw7XG5cbmZ1bmN0aW9uIGluaXRDb3Vyc2UoKSB7XG5cdC8vIERvIHdlIGV2ZW4gd2FudCB0byB0YWxrIHRvIHRoZSBMTVM/XG5cdGlmIChnbG9iYWxWYXIuc2Nvcm1TZXR0aW5ncy51c2VTY29ybSkge1xuXHRcdGlmIChnbG9iYWxWYXIuc2Nvcm1TZXR0aW5ncy5zdGFuZGFyZC50b0xvd2VyQ2FzZSgpICE9PSAnYWljYycpIHtcblx0XHRcdGNvbm5lY3RUb1NDT1JNQVBJKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbm5lY3RUb0FJQ0NBUEkoKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0c2lMb2coJ1NDT1JNJywgJ0lORk8nLCAnU0NPUk0gaXMgZGlzYWJsZWQuJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY29ubmVjdFRvQUlDQ0FQSSgpIHtcblx0dmFyIFNEID0gd2luZG93LnBhcmVudDtcblxuXHRpZiAodHlwZW9mIFNELlNldFJlYWNoZWRFbmQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFNELkNvbW1pdERhdGEgPT09ICdmdW5jdGlvbicpIHtcblx0XHRzaUxvZygnQUlDQycsICdBUEknLCAnU1VDQ0VTUzogQUlDQyBBUEkgZm91bmQhJyk7XG5cdFx0c2lMb2coJ0FJQ0MnLCAnSU5JVCcsICdTVUNDRVNTOiBDb3Vyc2UgaXMgbm93IGNvbm5lY3RlZCB0byB0aGUgTE1TIScpO1xuXHR9IGVsc2Uge1xuXHRcdHNpTG9nKCdBSUNDJywgJ0FQSScsICdFUlJPUjogQUlDQyBBUEkgbm90IGZvdW5kIScpO1xuXHRcdHNpTG9nKCdBSUNDJywgJ0lOSVQnLCAnRVJST1I6IENvdXJzZSBjb3VsZCBub3QgY29ubmVjdCB0byB0aGUgTE1TIScpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNvbm5lY3RUb1NDT1JNQVBJKCkge1xuXHR2YXIgYm9va21hcmtMb2NhbDtcblx0dmFyIGxvY2FsRGF0YTtcblx0aWYgKHVzZUxvY2FsICYmIHN0b3JhZ2VBdmFpbGFibGUoJ2xvY2FsU3RvcmFnZScpKSB7XG5cdFx0Ym9va21hcmtMb2NhbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGJvb2ttYXJrVVJMKTtcblx0XHRsb2NhbERhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHByb2dyZXNzVVJMKSk7XG5cdH1cblx0Ly9zY29ybS5pbml0IHJldHVybnMgYSBib29sZWFuXG5cdGxtc0Nvbm5lY3RlZCA9IHNjb3JtLmluaXQoKTtcblx0Ly9JZiB0aGUgc2Nvcm0uaW5pdCBmdW5jdGlvbiBzdWNjZWVkZWQuLi5cblx0aWYgKGxtc0Nvbm5lY3RlZCkge1xuXHRcdHNpTG9nKCdTQ09STScsICdJTklUJywgJ1NVQ0NFU1M6IENvdXJzZSBpcyBub3cgY29ubmVjdGVkIHdpdGggdGhlIExNUyEnKTtcblx0XHR2YXIgY29tcGxldGlvbnN0YXR1cztcblx0XHR2YXIgbGVhcm5lcm5hbWU7XG5cdFx0dmFyIHJhd0RhdGEgPSBzY29ybS5nZXQoJ2NtaS5zdXNwZW5kX2RhdGEnKTtcblx0XHR2YXIgYm9va21hcmtTY29ybTtcblx0XHR2YXIgc2Nvcm1EYXRhO1xuXHRcdGlmIChzY29ybS52ZXJzaW9uID09PSAnMjAwNCcpIHtcblx0XHRcdGNvbXBsZXRpb25zdGF0dXMgPSBzY29ybS5nZXQoJ2NtaS5jb21wbGV0aW9uX3N0YXR1cycpO1xuXHRcdFx0bGVhcm5lcm5hbWUgPSBzY29ybS5nZXQoJ2NtaS5sZWFybmVyX25hbWUnKTtcblx0XHRcdGJvb2ttYXJrU2Nvcm0gPSBzY29ybS5nZXQoJ2NtaS5sb2NhdGlvbicpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb21wbGV0aW9uc3RhdHVzID0gc2Nvcm0uZ2V0KCdjbWkuY29yZS5sZXNzb25fc3RhdHVzJyk7XG5cdFx0XHRsZWFybmVybmFtZSA9IHNjb3JtLmdldCgnY21pLmNvcmUuc3R1ZGVudF9uYW1lJyk7XG5cdFx0XHRib29rbWFya1Njb3JtID0gc2Nvcm0uZ2V0KCdjbWkuY29yZS5sZXNzb25fbG9jYXRpb24nKTtcblx0XHR9XG5cdFx0aWYgKHJhd0RhdGEgJiYgdHlwZW9mIHJhd0RhdGEgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRzY29ybURhdGEgPSBKU09OLnBhcnNlKHJhd0RhdGEpO1xuXHRcdFx0c2F2ZURhdGEgPSBzY29ybURhdGE7XG5cdFx0fSBlbHNlIGlmIChsb2NhbERhdGEpIHtcblx0XHRcdHNhdmVEYXRhID0gbG9jYWxEYXRhO1xuXHRcdH1cblxuXHRcdGlmIChib29rbWFya1Njb3JtKSB7XG5cdFx0XHRib29rbWFya2VkU2xpZGUgPSBib29rbWFya1Njb3JtO1xuXHRcdH0gZWxzZSBpZiAoYm9va21hcmtMb2NhbCkge1xuXHRcdFx0Ym9va21hcmtlZFNsaWRlID0gYm9va21hcmtMb2NhbDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ym9va21hcmtlZFNsaWRlID0gMTtcblx0XHR9XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIHVubG9hZEhhbmRsZXIpO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB1bmxvYWRIYW5kbGVyKTtcblx0XHQvL0lmIHRoZSBjb3Vyc2UgY291bGRuJ3QgY29ubmVjdCB0byB0aGUgTE1TIGZvciBzb21lIHJlYXNvbi4uLlxuXHR9IGVsc2Uge1xuXHRcdC8vLi4uIGxldCdzIGFsZXJ0IHRoZSB1c2VyIHRoZW4gY2xvc2UgdGhlIHdpbmRvdy5cblx0XHRzaUxvZygnU0NPUk0nLCAnSU5JVCcsICdFUlJPUjogQ291cnNlIGNvdWxkIG5vdCBjb25uZWN0IHdpdGggdGhlIExNUycpO1xuXHRcdGlmIChsb2NhbERhdGEpIHtcblx0XHRcdHNhdmVEYXRhID0gbG9jYWxEYXRhO1xuXHRcdH1cblx0XHRpZiAoYm9va21hcmtMb2NhbCkge1xuXHRcdFx0Ym9va21hcmtlZFNsaWRlID0gYm9va21hcmtMb2NhbDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ym9va21hcmtlZFNsaWRlID0gMTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gc2V0U2Nvcm1Db21wbGV0aW9uKCkge1xuXHR2YXIgc3VjY2VzcyA9IGZhbHNlO1xuXG5cdC8vIERvIHdlIGV2ZW4gd2FudCB0byB0YWxrIHRvIHRoZSBMTVM/XG5cdGlmIChnbG9iYWxWYXIuc2Nvcm1TZXR0aW5ncy51c2VTY29ybSkge1xuXHRcdC8vIEFJQ0M6XG5cdFx0Ly8gT24gdGhlIG9mZiBjaGFuY2UgdGhhdCB3ZSB3YW50IHRvIHVzZSBBSUNDIGluc3RlYWQgb2YgU0NPUk1cblxuXHRcdGlmIChnbG9iYWxWYXIuc2Nvcm1TZXR0aW5ncy5zdGFuZGFyZCA9PT0gJ2FpY2MnKSB7XG5cdFx0XHR2YXIgU0QgPSB3aW5kb3cucGFyZW50O1xuXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgQUlDQyBBUEkgaXMgYXZhaWxhYmxlIGluIHBhcmVudCBhbmQgdGVsbCBpdCB0byBzZXQgdGhlIGNvdXJzZSB0byBjb21wbGV0ZVxuXG5cdFx0XHRpZiAodHlwZW9mIFNELlNldFJlYWNoZWRFbmQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIFNELkNvbW1pdERhdGEgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0Ly8gSWYgYm90aCBvZiB0aGUgZm9sbG93aW5nIEFJQ0MgQVBJIGZ1bmN0aW9ucyByZXR1cm4gdHJ1ZSwgd2UgYXJlIGRvbmUgaGVyZSFcblx0XHRcdFx0c3VjY2VzcyA9IFNELlNldFJlYWNoZWRFbmQoKSAmJiBTRC5Db21taXREYXRhKCk7XG5cdFx0XHRcdGlmIChzdWNjZXNzKSB7XG5cdFx0XHRcdFx0c2lMb2coJ0FJQ0MnLCAnQ09NUExFVEUnLCAnU1VDQ0VTUzogQ291cnNlIHdhcyBzdWNjZXNzZnVsbHkgc2V0IHRvIGNvbXBsZXRlIScpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIG90aGVyd2lzZSBzb21ldGhpbmcgd2VudCBob3JyaWJseSB3cm9uZy5cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0c2lMb2coJ0FJQ0MnLCAnQ09NUExFVEUnLCAnRVJST1I6IENvdXJzZSBjb3VsZCBub3QgYmUgc2V0IHRvIGNvbXBsZXRlIScpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvLyBvdGhlcndpc2UgdGhlIEFQSSBpc24ndCBhdmFpbGFibGVcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRzaUxvZygnQUlDQycsICdDT01QTEVURScsICdFUlJPUjogQ291cnNlIGlzIG5vdCBjb25uZWN0ZWQgdG8gdGhlIExNUycpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNDT1JNOlxuXG5cdFx0Ly9JZiBsbXNDb25uZWN0ZWQgaXMgdHJ1ZSAod2hpY2ggb25seSBoYXBwZW5zIGlmIHdlIGFyZSB1c2luZyB0aGUgU0NPUk0gc3RhbmRhcmQpLi4uXG5cdFx0ZWxzZSBpZiAobG1zQ29ubmVjdGVkKSB7XG5cdFx0XHQvLy4uLiB0cnkgc2V0dGluZyB0aGUgY291cnNlIHN0YXR1cyB0byBcImNvbXBsZXRlZFwiXG5cdFx0XHRpZiAoc2Nvcm0udmVyc2lvbiA9PT0gJzIwMDQnKSB7XG5cdFx0XHRcdHN1Y2Nlc3MgPSBzY29ybS5zZXQoJ2NtaS5jb21wbGV0aW9uX3N0YXR1cycsICdjb21wbGV0ZWQnKTtcblx0XHRcdFx0c2Nvcm0uc2V0KCdjbWkuc3VjY2Vzc19zdGF0dXMnLCAncGFzc2VkJyk7XG5cdFx0XHRcdHNjb3JtLnNldCgnY21pLnNjb3JlLnJhdycsICcxMDAnKTtcblx0XHRcdFx0c2Nvcm0uc2V0KCdjbWkuc2NvcmUuc2NhbGVkJywgJzEnKTtcblx0XHRcdFx0Ly8gc2Nvcm0uc2V0KFwiY21pLnNjb3JlLm1pblwiLCBnbG9iYWxWYXIubWluU2NvcmUpO1xuXHRcdFx0XHQvLyBzY29ybS5zZXQoXCJjbWkuc2NvcmUubWF4XCIsIGdsb2JhbFZhci5tYXhTY29yZSk7XG5cdFx0XHRcdC8vIHNjb3JtLnNldChcImFkbC5uYXYucmVxdWVzdFwiLCBcImV4aXRcIilcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN1Y2Nlc3MgPSBzY29ybS5zZXQoJ2NtaS5jb3JlLmxlc3Nvbl9zdGF0dXMnLCAnY29tcGxldGVkJyk7XG5cdFx0XHRcdHNjb3JtLnNldCgnY21pLmNvcmUuc2NvcmUucmF3JywgJzEwMCcpO1xuXHRcdFx0XHQvLyBzY29ybS5zZXQoXCJjbWkuY29yZS5zY29yZS5taW5cIiwgZ2xvYmFsVmFyLm1pblNjb3JlKTtcblx0XHRcdFx0Ly8gc2Nvcm0uc2V0KFwiY21pLmNvcmUuc2NvcmUubWF4XCIsIGdsb2JhbFZhci5tYXhTY29yZSk7XG5cdFx0XHR9XG5cdFx0XHQvL0lmIHRoZSBjb3Vyc2Ugd2FzIHN1Y2Nlc3NmdWxseSBzZXQgdG8gXCJjb21wbGV0ZWRcIi4uLlxuXHRcdFx0aWYgKHN1Y2Nlc3MpIHtcblx0XHRcdFx0c2Nvcm0uc2F2ZSgpO1xuXHRcdFx0XHRzaUxvZygnU0NPUk0nLCAnQ09NUExFVEUnLCAnU1VDQ0VTUzogQ291cnNlIHdhcyBzdWNjZXNzZnVsbHkgc2V0IHRvIGNvbXBsZXRlIScpO1xuXHRcdFx0fVxuXHRcdFx0Ly9JZiB0aGUgY291cnNlIGNvdWxkbid0IGJlIHNldCB0byBjb21wbGV0ZWQgZm9yIHNvbWUgcmVhc29uLi4uXG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Ly9hbGVydCB0aGUgdXNlclxuXHRcdFx0XHRzaUxvZygnU0NPUk0nLCAnQ09NUExFVEUnLCAnRVJST1I6IENvdXJzZSBjb3VsZCBub3QgYmUgc2V0IHRvIGNvbXBsZXRlIScpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBvdGhlcndpc2UgdGhlIGNvdXJzZSBpc24ndCBjb25uZWN0ZWQgdG8gdGhlIExNUyBmb3Igc29tZSByZWFzb24uLi5cblx0XHRlbHNlIHtcblx0XHRcdC8vYWxlcnQgdGhlIHVzZXJcblx0XHRcdHNpTG9nKCdTQ09STScsICdDT01QTEVURScsICdFUlJPUjogQ291cnNlIGlzIG5vdCBjb25uZWN0ZWQgdG8gdGhlIExNUycpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBzZXRTY29ybUluY29tcGxldGUoKSB7XG5cdGlmIChsbXNDb25uZWN0ZWQpIHtcblx0XHR2YXIgc3VjY2Vzcztcblx0XHQvLy4uLiB0cnkgc2V0dGluZyB0aGUgY291cnNlIHN0YXR1cyB0byBcImNvbXBsZXRlZFwiXG5cdFx0aWYgKHNjb3JtLnZlcnNpb24gPT09ICcyMDA0Jykge1xuXHRcdFx0c3VjY2VzcyA9IHNjb3JtLnNldCgnY21pLmNvbXBsZXRpb25fc3RhdHVzJywgJ2NvbXBsZXRlZCcpO1xuXHRcdFx0c2Nvcm0uc2V0KCdjbWkuc3VjY2Vzc19zdGF0dXMnLCAnZmFpbGVkJyk7XG5cdFx0XHRzY29ybS5zZXQoJ2NtaS5zY29yZS5yYXcnLCAnMCcpO1xuXHRcdFx0c2Nvcm0uc2V0KCdjbWkuc2NvcmUuc2NhbGVkJywgJzEnKTtcblx0XHRcdC8vIHNjb3JtLnNldChcImNtaS5zY29yZS5taW5cIiwgZ2xvYmFsVmFyLm1pblNjb3JlKTtcblx0XHRcdC8vIHNjb3JtLnNldChcImNtaS5zY29yZS5tYXhcIiwgZ2xvYmFsVmFyLm1heFNjb3JlKTtcblx0XHRcdC8vIHNjb3JtLnNldChcImFkbC5uYXYucmVxdWVzdFwiLCBcImV4aXRcIilcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3VjY2VzcyA9IHNjb3JtLnNldCgnY21pLmNvcmUubGVzc29uX3N0YXR1cycsICdpbmNvbXBsZXRlJyk7XG5cdFx0XHRzY29ybS5zZXQoJ2NtaS5jb3JlLnNjb3JlLnJhdycsICcwJyk7XG5cdFx0XHQvLyBzY29ybS5zZXQoXCJjbWkuY29yZS5zY29yZS5taW5cIiwgZ2xvYmFsVmFyLm1pblNjb3JlKTtcblx0XHRcdC8vIHNjb3JtLnNldChcImNtaS5jb3JlLnNjb3JlLm1heFwiLCBnbG9iYWxWYXIubWF4U2NvcmUpO1xuXHRcdH1cblx0XHQvL0lmIHRoZSBjb3Vyc2Ugd2FzIHN1Y2Nlc3NmdWxseSBzZXQgdG8gXCJpbmNvbXBsZXRlXCIuLi5cblx0XHRpZiAoc3VjY2Vzcykge1xuXHRcdFx0c2Nvcm0uc2F2ZSgpO1xuXHRcdFx0c2lMb2coJ1NDT1JNJywgJ0lOQ09NUExFVEUnLCAnU1VDQ0VTUzogQ291cnNlIHdhcyBzdWNjZXNzZnVsbHkgc2V0IHRvIGluY29tcGxldGUhJyk7XG5cdFx0fVxuXHRcdC8vSWYgdGhlIGNvdXJzZSBjb3VsZG4ndCBiZSBzZXQgdG8gaW5jb21wbGV0ZSBmb3Igc29tZSByZWFzb24uLi5cblx0XHRlbHNlIHtcblx0XHRcdC8vYWxlcnQgdGhlIHVzZXJcblx0XHRcdHNpTG9nKCdTQ09STScsICdJTkNPTVBMRVRFJywgJ0VSUk9SOiBDb3Vyc2UgY291bGQgbm90IGJlIHNldCB0byBpbmNvbXBsZXRlIScpO1xuXHRcdH1cblx0fVxuXHQvL0lmIHRoZSBjb3Vyc2UgaXNuJ3QgY29ubmVjdGVkIHRvIHRoZSBMTVMgZm9yIHNvbWUgcmVhc29uLi4uXG5cdGVsc2Uge1xuXHRcdC8vYWxlcnQgdGhlIHVzZXJcblx0XHRzaUxvZygnU0NPUk0nLCAnSU5DT01QTEVURScsICdFUlJPUjogQ291cnNlIGlzIG5vdCBjb25uZWN0ZWQgdG8gdGhlIExNUycpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVubG9hZEhhbmRsZXIoKSB7XG5cdGlmIChsbXNDb25uZWN0ZWQgJiYgIXVubG9hZGVkKSB7XG5cdFx0c2F2ZUxNUygpO1xuXHRcdHNjb3JtLnNhdmUoKTsgLy9zYXZlIGFsbCBkYXRhIHRoYXQgaGFzIGFscmVhZHkgYmVlbiBzZW50XG5cdFx0c2Nvcm0ucXVpdCgpOyAvL2Nsb3NlIHRoZSBTQ09STSBBUEkgY29ubmVjdGlvbiBwcm9wZXJseVxuXHRcdHVubG9hZGVkID0gdHJ1ZTtcblx0fVxufVxuZnVuY3Rpb24gc2F2ZUxNUygpIHtcblx0aWYgKHNhdmVDb3Vyc2VQcm9ncmVzcygpICYmIHNhdmVCb29rbWFyaygpKSB7XG5cdFx0c2Nvcm0uc2F2ZSgpO1xuXHR9IGVsc2Uge1xuXHRcdHNpTG9nKCdTQ09STScsICdGYWlsZWQgdG8gU2F2ZScpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHNhdmVDb3Vyc2VQcm9ncmVzcygpIHtcblx0dmFyIHN1Y2Nlc3M7XG5cdHZhciBkYXRhU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkoc2F2ZURhdGEpO1xuXHRpZiAobG1zQ29ubmVjdGVkKSB7XG5cdFx0c3VjY2VzcyA9IHNjb3JtLnNldCgnY21pLnN1c3BlbmRfZGF0YScsIGRhdGFTdHJpbmcpO1xuXHR9XG5cdHJldHVybiBzdWNjZXNzO1xufVxuZnVuY3Rpb24gc2F2ZUJvb2ttYXJrKCkge1xuXHR2YXIgc3VjY2Vzcztcblx0Ym9va21hcmtlZFNsaWRlID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uc2xpZGVOdW1iZXIgfHwgJzAnO1xuXHRpZiAobG1zQ29ubmVjdGVkKSB7XG5cdFx0aWYgKHNjb3JtLnZlcnNpb24gPT09ICcyMDA0Jykge1xuXHRcdFx0c3VjY2VzcyA9IHNjb3JtLnNldCgnY21pLmxvY2F0aW9uJywgYm9va21hcmtlZFNsaWRlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3VjY2VzcyA9IHNjb3JtLnNldCgnY21pLmNvcmUubGVzc29uX2xvY2F0aW9uJywgYm9va21hcmtlZFNsaWRlKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gc3VjY2Vzcztcbn1cblxuZnVuY3Rpb24gc2F2ZVByb2dyZXNzTG9jYWxseSgpIHtcblx0Ym9va21hcmtlZFNsaWRlID0gc2xpZGVzW2dsb2JhbFZhci5jdXJTbGlkZV0uc2xpZGVOdW1iZXIgfHwgJzAnO1xuXHR2YXIgZGF0YVN0cmluZyA9IEpTT04uc3RyaW5naWZ5KHNhdmVEYXRhKTtcblx0aWYgKHN0b3JhZ2VBdmFpbGFibGUoJ2xvY2FsU3RvcmFnZScpKSB7XG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0ocHJvZ3Jlc3NVUkwsIGRhdGFTdHJpbmcpO1xuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKGJvb2ttYXJrVVJMLCBib29rbWFya2VkU2xpZGUpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHN0b3JhZ2VBdmFpbGFibGUodHlwZSkge1xuXHR2YXIgc3RvcmFnZTtcblx0dHJ5IHtcblx0XHRzdG9yYWdlID0gd2luZG93W3R5cGVdO1xuXHRcdHZhciB4ID0gJ19fc3RvcmFnZV90ZXN0X18nO1xuXHRcdHN0b3JhZ2Uuc2V0SXRlbSh4LCB4KTtcblx0XHRzdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0ZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJlxuXHRcdFx0Ly8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxuXHRcdFx0KGUuY29kZSA9PT0gMjIgfHxcblx0XHRcdFx0Ly8gRmlyZWZveFxuXHRcdFx0XHRlLmNvZGUgPT09IDEwMTQgfHxcblx0XHRcdFx0Ly8gdGVzdCBuYW1lIGZpZWxkIHRvbywgYmVjYXVzZSBjb2RlIG1pZ2h0IG5vdCBiZSBwcmVzZW50XG5cdFx0XHRcdC8vIGV2ZXJ5dGhpbmcgZXhjZXB0IEZpcmVmb3hcblx0XHRcdFx0ZS5uYW1lID09PSAnUXVvdGFFeGNlZWRlZEVycm9yJyB8fFxuXHRcdFx0XHQvLyBGaXJlZm94XG5cdFx0XHRcdGUubmFtZSA9PT0gJ05TX0VSUk9SX0RPTV9RVU9UQV9SRUFDSEVEJykgJiZcblx0XHRcdC8vIGFja25vd2xlZGdlIFF1b3RhRXhjZWVkZWRFcnJvciBvbmx5IGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGFscmVhZHkgc3RvcmVkXG5cdFx0XHRzdG9yYWdlICYmXG5cdFx0XHRzdG9yYWdlLmxlbmd0aCAhPT0gMFxuXHRcdCk7XG5cdH1cbn1cbiJdfQ==